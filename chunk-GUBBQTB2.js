import{a as S}from"./chunk-MA4YKNQN.js";import{i as M,n as _,o as z,u as k}from"./chunk-HFIXB56D.js";import{B as m,Ib as o,Jb as f,Kb as y,Lb as v,R as d,T as u,U as h,_a as c,ea as g,ob as l,oc as s,t as a,xc as p,yc as C}from"./chunk-AGYQYQRX.js";var b=()=>[14],w=()=>({preserveDrawingBuffer:!0}),x=()=>({"raster-fade-duration":0}),P=(()=>{class n{constructor(){this.httpClient=g(S),this.size=.001,this.hike$=this.httpClient.get("assets/data/hike.geo.json").pipe(a(e=>{let t=e.features[0].geometry.coordinates,i=t.map(r=>this.makeRectangle(r));return{points:t,coordinates:i}}),d({bufferSize:1,refCount:!0})),this.data$=this.hike$.pipe(h(e=>m(250).pipe(u(0),a(t=>{let i=(t+1)%e.coordinates.length,r=e.points[0],D=e.coordinates[i];return{index:i,center:r,coordinates:D}})))),this.dataSig=M(this.data$,{initialValue:{index:0,center:[0,0],coordinates:this.makeRectangle([0,0])}}),this.coordinates=p(()=>this.dataSig().coordinates),this.center=p(()=>this.dataSig().center),this.url=C({source:this.dataSig,computation:()=>Math.random()<.5?"assets/red.png":"assets/blue.png"})}makeRectangle([e,t]){return[[e,t],[e+this.size,t],[e+this.size,t-this.size],[e,t-this.size]]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=l({type:n,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[["movingMethod","jumpTo",3,"mapStyle","center","zoom","canvasContextAttributes"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(t,i){t&1&&(f(0,"mgl-map",0),v(1,"mgl-image-source",1)(2,"mgl-layer",2),y()),t&2&&(o("mapStyle","https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")("center",i.center())("zoom",s(7,b))("canvasContextAttributes",s(8,w)),c(),o("url",i.url())("coordinates",i.coordinates()),c(),o("paint",s(9,x)))},dependencies:[z,k,_],styles:[`[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}
/*# sourceMappingURL=examples-UPBTEGPO.css.map */`],changeDetection:0})}}return n})();export{P as LiveUpdateImageSourceComponent};
//# sourceMappingURL=chunk-GUBBQTB2.js.map
