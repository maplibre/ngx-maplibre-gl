(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{3619:(Cn,gt,U)=>{"use strict";U.d(gt,{a:()=>qe});var D=U(4080),l=U(4650);function G(ke,Ye){1&ke&&l.Hsn(0)}const m=["*"];let qe=(()=>{class ke{constructor(Re,pe,Ge){this.componentFactoryResolver=Re,this.injector=pe,this.appRef=Ge}ngAfterViewInit(){this.portalOutlet=new D.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return ke.\u0275fac=function(Re){return new(Re||ke)(l.Y36(l._Vd),l.Y36(l.zs3),l.Y36(l.z2F))},ke.\u0275cmp=l.Xpm({type:ke,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Re,pe){if(1&Re&&l.Gf(D.ig,5),2&Re){let Ge;l.iGM(Ge=l.CRH())&&(pe.portal=Ge.first)}},inputs:{position:"position"},ngContentSelectors:m,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Re,pe){1&Re&&(l.F$t(),l.YNc(0,G,1,0,"ng-template",0))},dependencies:[D.bH],encapsulation:2}),ke})()},6449:(Cn,gt,U)=>{"use strict";U.d(gt,{$:()=>ke});var D=U(4650),l=U(2510),G=U(3683),m=U(7392),qe=U(4859);let ke=(()=>{class Ye{}return Ye.\u0275fac=function(pe){return new(pe||Ye)},Ye.\u0275cmp=D.Xpm({type:Ye,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(pe,Ge){1&pe&&(D.TgZ(0,"mat-toolbar",0)(1,"div"),D._UZ(2,"div",1),D.TgZ(3,"a",2),D._UZ(4,"mat-icon",3),D._uU(5," ngx-maplibre-gl "),D.qZA(),D.TgZ(6,"a",4),D._uU(7," Demo "),D.qZA(),D.TgZ(8,"a",5),D._uU(9," Documentation "),D.qZA()(),D.TgZ(10,"div"),D._UZ(11,"div",6),D.TgZ(12,"a",7),D._UZ(13,"mat-icon",8),D._uU(14," GitHub "),D.qZA()()(),D._UZ(15,"router-outlet"))},dependencies:[l.lC,l.yS,G.Ye,m.Hw,qe.zs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),Ye})()},6838:(Cn,gt,U)=>{"use strict";U.d(gt,{x:()=>rt});var D=U(4080),l=U(6895),G=U(4859),m=U(7392),qe=U(3683),ke=U(2510),pe=(U(3619),U(6449),U(4650));let rt=(()=>{class Te{}return Te.\u0275fac=function(lt){return new(lt||Te)},Te.\u0275mod=pe.oAB({type:Te}),Te.\u0275inj=pe.cJS({imports:[l.ez,ke.Bz,qe.g0,m.Ps,G.ot,D.eL]}),Te})()},3662:(Cn,gt,U)=>{"use strict";var D=U(1481),l=U(4650),G=U(2510);let m=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-root"]],decls:1,vars:0,template:function(r,p){1&r&&l._UZ(0,"router-outlet")},dependencies:[G.lC],encapsulation:2}),c})();var qe=U(7392),ke=U(7340);function Re(c){return new l.vHH(3e3,!1)}function fn(){return typeof window<"u"&&typeof window.document<"u"}function mn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function On(c){switch(c.length){case 0:return new ke.ZN;case 1:return c[0];default:return new ke.ZE(c)}}function Jn(c,h,r,p,M=new Map,F=new Map){const se=[],xe=[];let Ke=-1,vt=null;if(p.forEach(Kt=>{const Jt=Kt.get("offset"),Dn=Jt==Ke,ri=Dn&&vt||new Map;Kt.forEach((qn,Xn)=>{let bi=Xn,ki=qn;if("offset"!==Xn)switch(bi=h.normalizePropertyName(bi,se),ki){case ke.k1:ki=M.get(Xn);break;case ke.l3:ki=F.get(Xn);break;default:ki=h.normalizeStyleValue(Xn,bi,ki,se)}ri.set(bi,ki)}),Dn||xe.push(ri),vt=ri,Ke=Jt}),se.length)throw function pn(c){return new l.vHH(3502,!1)}();return xe}function oi(c,h,r,p){switch(h){case"start":c.onStart(()=>p(r&&fi(r,"start",c)));break;case"done":c.onDone(()=>p(r&&fi(r,"done",c)));break;case"destroy":c.onDestroy(()=>p(r&&fi(r,"destroy",c)))}}function fi(c,h,r){const F=$i(c.element,c.triggerName,c.fromState,c.toState,h||c.phaseName,r.totalTime??c.totalTime,!!r.disabled),se=c._data;return null!=se&&(F._data=se),F}function $i(c,h,r,p,M="",F=0,se){return{element:c,triggerName:h,fromState:r,toState:p,phaseName:M,totalTime:F,disabled:!!se}}function Qn(c,h,r){let p=c.get(h);return p||c.set(h,p=r),p}function Di(c){const h=c.indexOf(":");return[c.substring(1,h),c.slice(h+1)]}let xn=(c,h)=>!1,Wn=(c,h,r)=>[],ct=null;function Y(c){const h=c.parentNode||c.host;return h===ct?null:h}(mn()||typeof Element<"u")&&(fn()?(ct=(()=>document.documentElement)(),xn=(c,h)=>{for(;h;){if(h===c)return!0;h=Y(h)}return!1}):xn=(c,h)=>c.contains(h),Wn=(c,h,r)=>{if(r)return Array.from(c.querySelectorAll(h));const p=c.querySelector(h);return p?[p]:[]});let he=null,k=!1;const le=xn,Ae=Wn;let Qe=(()=>{class c{validateStyleProperty(r){return function R(c){he||(he=function J(){return typeof document<"u"?document.body:null}()||{},k=!!he.style&&"WebkitAppearance"in he.style);let h=!0;return he.style&&!function Me(c){return"ebkit"==c.substring(1,6)}(c)&&(h=c in he.style,!h&&k&&(h="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in he.style)),h}(r)}matchesElement(r,p){return!1}containsElement(r,p){return le(r,p)}getParentElement(r){return Y(r)}query(r,p,M){return Ae(r,p,M)}computeStyle(r,p,M){return M||""}animate(r,p,M,F,se,xe=[],Ke){return new ke.ZN(M,F)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})(),ot=(()=>{class c{}return c.NOOP=new Qe,c})();const en="ng-enter",st="ng-leave",De="ng-trigger",Fe=".ng-trigger",Se="ng-animating",Ne=".ng-animating";function we(c){if("number"==typeof c)return c;const h=c.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:$e(parseFloat(h[1]),h[2])}function $e(c,h){return"s"===h?1e3*c:c}function at(c,h,r){return c.hasOwnProperty("duration")?c:function on(c,h,r){let M,F=0,se="";if("string"==typeof c){const xe=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===xe)return h.push(Re()),{duration:0,delay:0,easing:""};M=$e(parseFloat(xe[1]),xe[2]);const Ke=xe[3];null!=Ke&&(F=$e(parseFloat(Ke),xe[4]));const vt=xe[5];vt&&(se=vt)}else M=c;if(!r){let xe=!1,Ke=h.length;M<0&&(h.push(function pe(){return new l.vHH(3100,!1)}()),xe=!0),F<0&&(h.push(function Ge(){return new l.vHH(3101,!1)}()),xe=!0),xe&&h.splice(Ke,0,Re())}return{duration:M,delay:F,easing:se}}(c,h,r)}function An(c,h={}){return Object.keys(c).forEach(r=>{h[r]=c[r]}),h}function jn(c){const h=new Map;return Object.keys(c).forEach(r=>{h.set(r,c[r])}),h}function yt(c,h=new Map,r){if(r)for(let[p,M]of r)h.set(p,M);for(let[p,M]of c)h.set(p,M);return h}function Tt(c,h,r){return r?h+":"+r+";":""}function zt(c){let h="";for(let r=0;r<c.style.length;r++){const p=c.style.item(r);h+=Tt(0,p,c.style.getPropertyValue(p))}for(const r in c.style)c.style.hasOwnProperty(r)&&!r.startsWith("_")&&(h+=Tt(0,Un(r),c.style[r]));c.setAttribute("style",h)}function Vt(c,h,r){c.style&&(h.forEach((p,M)=>{const F=nn(M);r&&!r.has(M)&&r.set(M,c.style[F]),c.style[F]=p}),mn()&&zt(c))}function jt(c,h){c.style&&(h.forEach((r,p)=>{const M=nn(p);c.style[M]=""}),mn()&&zt(c))}function me(c){return Array.isArray(c)?1==c.length?c[0]:(0,ke.vP)(c):c}const ue=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ve(c){let h=[];if("string"==typeof c){let r;for(;r=ue.exec(c);)h.push(r[1]);ue.lastIndex=0}return h}function tt(c,h,r){const p=c.toString(),M=p.replace(ue,(F,se)=>{let xe=h[se];return null==xe&&(r.push(function Te(c){return new l.vHH(3003,!1)}()),xe=""),xe.toString()});return M==p?c:M}function Gt(c){const h=[];let r=c.next();for(;!r.done;)h.push(r.value),r=c.next();return h}const Sn=/-+([a-z0-9])/g;function nn(c){return c.replace(Sn,(...h)=>h[1].toUpperCase())}function Un(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ei(c,h,r){switch(h.type){case 7:return c.visitTrigger(h,r);case 0:return c.visitState(h,r);case 1:return c.visitTransition(h,r);case 2:return c.visitSequence(h,r);case 3:return c.visitGroup(h,r);case 4:return c.visitAnimate(h,r);case 5:return c.visitKeyframes(h,r);case 6:return c.visitStyle(h,r);case 8:return c.visitReference(h,r);case 9:return c.visitAnimateChild(h,r);case 10:return c.visitAnimateRef(h,r);case 11:return c.visitQuery(h,r);case 12:return c.visitStagger(h,r);default:throw function ut(c){return new l.vHH(3004,!1)}()}}function Yi(c,h){return window.getComputedStyle(c)[h]}function Hi(c,h){const r=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(p=>function Bi(c,h,r){if(":"==c[0]){const Ke=function Ts(c,h){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,p)=>parseFloat(p)>parseFloat(r);case":decrement":return(r,p)=>parseFloat(p)<parseFloat(r);default:return h.push(function pt(c){return new l.vHH(3016,!1)}()),"* => *"}}(c,r);if("function"==typeof Ke)return void h.push(Ke);c=Ke}const p=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==p||p.length<4)return r.push(function tn(c){return new l.vHH(3015,!1)}()),h;const M=p[1],F=p[2],se=p[3];h.push(Ao(M,se));"<"==F[0]&&!("*"==M&&"*"==se)&&h.push(Ao(se,M))}(p,r,h)):r.push(c),r}const Ur=new Set(["true","1"]),Go=new Set(["false","0"]);function Ao(c,h){const r=Ur.has(c)||Go.has(c),p=Ur.has(h)||Go.has(h);return(M,F)=>{let se="*"==c||c==M,xe="*"==h||h==F;return!se&&r&&"boolean"==typeof M&&(se=M?Ur.has(c):Go.has(c)),!xe&&p&&"boolean"==typeof F&&(xe=F?Ur.has(h):Go.has(h)),se&&xe}}const jr=new RegExp("s*:selfs*,?","g");function er(c,h,r,p){return new gr(c).build(h,r,p)}class gr{constructor(h){this._driver=h}build(h,r,p){const M=new ia(r);return this._resetContextStyleTimingState(M),ei(this,me(h),M)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,r){let p=r.queryCount=0,M=r.depCount=0;const F=[],se=[];return"@"==h.name.charAt(0)&&r.errors.push(function We(){return new l.vHH(3006,!1)}()),h.definitions.forEach(xe=>{if(this._resetContextStyleTimingState(r),0==xe.type){const Ke=xe,vt=Ke.name;vt.toString().split(/\s*,\s*/).forEach(Kt=>{Ke.name=Kt,F.push(this.visitState(Ke,r))}),Ke.name=vt}else if(1==xe.type){const Ke=this.visitTransition(xe,r);p+=Ke.queryCount,M+=Ke.depCount,se.push(Ke)}else r.errors.push(function Dt(){return new l.vHH(3007,!1)}())}),{type:7,name:h.name,states:F,transitions:se,queryCount:p,depCount:M,options:null}}visitState(h,r){const p=this.visitStyle(h.styles,r),M=h.options&&h.options.params||null;if(p.containsDynamicStyles){const F=new Set,se=M||{};p.styles.forEach(xe=>{xe instanceof Map&&xe.forEach(Ke=>{Ve(Ke).forEach(vt=>{se.hasOwnProperty(vt)||F.add(vt)})})}),F.size&&(Gt(F.values()),r.errors.push(function wt(c,h){return new l.vHH(3008,!1)}()))}return{type:0,name:h.name,style:p,options:M?{params:M}:null}}visitTransition(h,r){r.queryCount=0,r.depCount=0;const p=ei(this,me(h.animation),r);return{type:1,matchers:Hi(h.expr,r.errors),animation:p,queryCount:r.queryCount,depCount:r.depCount,options:Po(h.options)}}visitSequence(h,r){return{type:2,steps:h.steps.map(p=>ei(this,p,r)),options:Po(h.options)}}visitGroup(h,r){const p=r.currentTime;let M=0;const F=h.steps.map(se=>{r.currentTime=p;const xe=ei(this,se,r);return M=Math.max(M,r.currentTime),xe});return r.currentTime=M,{type:3,steps:F,options:Po(h.options)}}visitAnimate(h,r){const p=function kr(c,h){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return As(at(c,h).duration,0,"");const r=c;if(r.split(/\s+/).some(F=>"{"==F.charAt(0)&&"{"==F.charAt(1))){const F=As(0,0,"");return F.dynamic=!0,F.strValue=r,F}const M=at(r,h);return As(M.duration,M.delay,M.easing)}(h.timings,r.errors);r.currentAnimateTimings=p;let M,F=h.styles?h.styles:(0,ke.oB)({});if(5==F.type)M=this.visitKeyframes(F,r);else{let se=h.styles,xe=!1;if(!se){xe=!0;const vt={};p.easing&&(vt.easing=p.easing),se=(0,ke.oB)(vt)}r.currentTime+=p.duration+p.delay;const Ke=this.visitStyle(se,r);Ke.isEmptyStep=xe,M=Ke}return r.currentAnimateTimings=null,{type:4,timings:p,style:M,options:null}}visitStyle(h,r){const p=this._makeStyleAst(h,r);return this._validateStyleAst(p,r),p}_makeStyleAst(h,r){const p=[],M=Array.isArray(h.styles)?h.styles:[h.styles];for(let xe of M)"string"==typeof xe?xe===ke.l3?p.push(xe):r.errors.push(new l.vHH(3002,!1)):p.push(jn(xe));let F=!1,se=null;return p.forEach(xe=>{if(xe instanceof Map&&(xe.has("easing")&&(se=xe.get("easing"),xe.delete("easing")),!F))for(let Ke of xe.values())if(Ke.toString().indexOf("{{")>=0){F=!0;break}}),{type:6,styles:p,easing:se,offset:h.offset,containsDynamicStyles:F,options:null}}_validateStyleAst(h,r){const p=r.currentAnimateTimings;let M=r.currentTime,F=r.currentTime;p&&F>0&&(F-=p.duration+p.delay),h.styles.forEach(se=>{"string"!=typeof se&&se.forEach((xe,Ke)=>{const vt=r.collectedStyles.get(r.currentQuerySelector),Kt=vt.get(Ke);let Jt=!0;Kt&&(F!=M&&F>=Kt.startTime&&M<=Kt.endTime&&(r.errors.push(function hn(c,h,r,p,M){return new l.vHH(3010,!1)}()),Jt=!1),F=Kt.startTime),Jt&&vt.set(Ke,{startTime:F,endTime:M}),r.options&&function Ee(c,h,r){const p=h.params||{},M=Ve(c);M.length&&M.forEach(F=>{p.hasOwnProperty(F)||r.push(function rt(c){return new l.vHH(3001,!1)}())})}(xe,r.options,r.errors)})})}visitKeyframes(h,r){const p={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push(function At(){return new l.vHH(3011,!1)}()),p;let F=0;const se=[];let xe=!1,Ke=!1,vt=0;const Kt=h.steps.map(ki=>{const cr=this._makeStyleAst(ki,r);let Kr=null!=cr.offset?cr.offset:function Is(c){if("string"==typeof c)return null;let h=null;if(Array.isArray(c))c.forEach(r=>{if(r instanceof Map&&r.has("offset")){const p=r;h=parseFloat(p.get("offset")),p.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const r=c;h=parseFloat(r.get("offset")),r.delete("offset")}return h}(cr.styles),Vr=0;return null!=Kr&&(F++,Vr=cr.offset=Kr),Ke=Ke||Vr<0||Vr>1,xe=xe||Vr<vt,vt=Vr,se.push(Vr),cr});Ke&&r.errors.push(function Pe(){return new l.vHH(3012,!1)}()),xe&&r.errors.push(function Ze(){return new l.vHH(3200,!1)}());const Jt=h.steps.length;let Dn=0;F>0&&F<Jt?r.errors.push(function Yt(){return new l.vHH(3202,!1)}()):0==F&&(Dn=1/(Jt-1));const ri=Jt-1,qn=r.currentTime,Xn=r.currentAnimateTimings,bi=Xn.duration;return Kt.forEach((ki,cr)=>{const Kr=Dn>0?cr==ri?1:Dn*cr:se[cr],Vr=Kr*bi;r.currentTime=qn+Xn.delay+Vr,Xn.duration=Vr,this._validateStyleAst(ki,r),ki.offset=Kr,p.styles.push(ki)}),p}visitReference(h,r){return{type:8,animation:ei(this,me(h.animation),r),options:Po(h.options)}}visitAnimateChild(h,r){return r.depCount++,{type:9,options:Po(h.options)}}visitAnimateRef(h,r){return{type:10,animation:this.visitReference(h.animation,r),options:Po(h.options)}}visitQuery(h,r){const p=r.currentQuerySelector,M=h.options||{};r.queryCount++,r.currentQuery=h;const[F,se]=function ro(c){const h=!!c.split(/\s*,\s*/).find(r=>":self"==r);return h&&(c=c.replace(jr,"")),c=c.replace(/@\*/g,Fe).replace(/@\w+/g,r=>Fe+"-"+r.slice(1)).replace(/:animating/g,Ne),[c,h]}(h.selector);r.currentQuerySelector=p.length?p+" "+F:F,Qn(r.collectedStyles,r.currentQuerySelector,new Map);const xe=ei(this,me(h.animation),r);return r.currentQuery=null,r.currentQuerySelector=p,{type:11,selector:F,limit:M.limit||0,optional:!!M.optional,includeSelf:se,animation:xe,originalSelector:h.selector,options:Po(h.options)}}visitStagger(h,r){r.currentQuery||r.errors.push(function Ot(){return new l.vHH(3013,!1)}());const p="full"===h.timings?{duration:0,delay:0,easing:"full"}:at(h.timings,r.errors,!0);return{type:12,animation:ei(this,me(h.animation),r),timings:p,options:null}}}class ia{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Po(c){return c?(c=An(c)).params&&(c.params=function Vs(c){return c?An(c):null}(c.params)):c={},c}function As(c,h,r){return{duration:c,delay:h,easing:r}}function Oo(c,h,r,p,M,F,se=null,xe=!1){return{type:1,element:c,keyframes:h,preStyleProps:r,postStyleProps:p,duration:M,delay:F,totalTime:M+F,easing:se,subTimeline:xe}}class fs{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,r){let p=this._map.get(h);p||this._map.set(h,p=[]),p.push(...r)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const Ea=new RegExp(":enter","g"),ar=new RegExp(":leave","g");function Us(c,h,r,p,M,F=new Map,se=new Map,xe,Ke,vt=[]){return(new js).buildKeyframes(c,h,r,p,M,F,se,xe,Ke,vt)}class js{buildKeyframes(h,r,p,M,F,se,xe,Ke,vt,Kt=[]){vt=vt||new fs;const Jt=new wo(h,r,vt,M,F,Kt,[]);Jt.options=Ke;const Dn=Ke.delay?we(Ke.delay):0;Jt.currentTimeline.delayNextStep(Dn),Jt.currentTimeline.setStyles([se],null,Jt.errors,Ke),ei(this,p,Jt);const ri=Jt.timelines.filter(qn=>qn.containsAnimation());if(ri.length&&xe.size){let qn;for(let Xn=ri.length-1;Xn>=0;Xn--){const bi=ri[Xn];if(bi.element===r){qn=bi;break}}qn&&!qn.allowOnlyTimelineStyles()&&qn.setStyles([xe],null,Jt.errors,Ke)}return ri.length?ri.map(qn=>qn.buildKeyframes()):[Oo(r,[],[],[],0,Dn,"",!1)]}visitTrigger(h,r){}visitState(h,r){}visitTransition(h,r){}visitAnimateChild(h,r){const p=r.subInstructions.get(r.element);if(p){const M=r.createSubContext(h.options),F=r.currentTimeline.currentTime,se=this._visitSubInstructions(p,M,M.options);F!=se&&r.transformIntoNewTimeline(se)}r.previousNode=h}visitAnimateRef(h,r){const p=r.createSubContext(h.options);p.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],r,p),this.visitReference(h.animation,p),r.transformIntoNewTimeline(p.currentTimeline.currentTime),r.previousNode=h}_applyAnimationRefDelays(h,r,p){for(const M of h){const F=M?.delay;if(F){const se="number"==typeof F?F:we(tt(F,M?.params??{},r.errors));p.delayNextStep(se)}}}_visitSubInstructions(h,r,p){let F=r.currentTimeline.currentTime;const se=null!=p.duration?we(p.duration):null,xe=null!=p.delay?we(p.delay):null;return 0!==se&&h.forEach(Ke=>{const vt=r.appendInstructionToTimeline(Ke,se,xe);F=Math.max(F,vt.duration+vt.delay)}),F}visitReference(h,r){r.updateOptions(h.options,!0),ei(this,h.animation,r),r.previousNode=h}visitSequence(h,r){const p=r.subContextCount;let M=r;const F=h.options;if(F&&(F.params||F.delay)&&(M=r.createSubContext(F),M.transformIntoNewTimeline(),null!=F.delay)){6==M.previousNode.type&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Ps);const se=we(F.delay);M.delayNextStep(se)}h.steps.length&&(h.steps.forEach(se=>ei(this,se,M)),M.currentTimeline.applyStylesToKeyframe(),M.subContextCount>p&&M.transformIntoNewTimeline()),r.previousNode=h}visitGroup(h,r){const p=[];let M=r.currentTimeline.currentTime;const F=h.options&&h.options.delay?we(h.options.delay):0;h.steps.forEach(se=>{const xe=r.createSubContext(h.options);F&&xe.delayNextStep(F),ei(this,se,xe),M=Math.max(M,xe.currentTimeline.currentTime),p.push(xe.currentTimeline)}),p.forEach(se=>r.currentTimeline.mergeTimelineCollectedStyles(se)),r.transformIntoNewTimeline(M),r.previousNode=h}_visitTiming(h,r){if(h.dynamic){const p=h.strValue;return at(r.params?tt(p,r.params,r.errors):p,r.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,r){const p=r.currentAnimateTimings=this._visitTiming(h.timings,r),M=r.currentTimeline;p.delay&&(r.incrementTime(p.delay),M.snapshotCurrentStyles());const F=h.style;5==F.type?this.visitKeyframes(F,r):(r.incrementTime(p.duration),this.visitStyle(F,r),M.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=h}visitStyle(h,r){const p=r.currentTimeline,M=r.currentAnimateTimings;!M&&p.hasCurrentStyleProperties()&&p.forwardFrame();const F=M&&M.easing||h.easing;h.isEmptyStep?p.applyEmptyStep(F):p.setStyles(h.styles,F,r.errors,r.options),r.previousNode=h}visitKeyframes(h,r){const p=r.currentAnimateTimings,M=r.currentTimeline.duration,F=p.duration,xe=r.createSubContext().currentTimeline;xe.easing=p.easing,h.styles.forEach(Ke=>{xe.forwardTime((Ke.offset||0)*F),xe.setStyles(Ke.styles,Ke.easing,r.errors,r.options),xe.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(xe),r.transformIntoNewTimeline(M+F),r.previousNode=h}visitQuery(h,r){const p=r.currentTimeline.currentTime,M=h.options||{},F=M.delay?we(M.delay):0;F&&(6===r.previousNode.type||0==p&&r.currentTimeline.hasCurrentStyleProperties())&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ps);let se=p;const xe=r.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!M.optional,r.errors);r.currentQueryTotal=xe.length;let Ke=null;xe.forEach((vt,Kt)=>{r.currentQueryIndex=Kt;const Jt=r.createSubContext(h.options,vt);F&&Jt.delayNextStep(F),vt===r.element&&(Ke=Jt.currentTimeline),ei(this,h.animation,Jt),Jt.currentTimeline.applyStylesToKeyframe(),se=Math.max(se,Jt.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(se),Ke&&(r.currentTimeline.mergeTimelineCollectedStyles(Ke),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=h}visitStagger(h,r){const p=r.parentContext,M=r.currentTimeline,F=h.timings,se=Math.abs(F.duration),xe=se*(r.currentQueryTotal-1);let Ke=se*r.currentQueryIndex;switch(F.duration<0?"reverse":F.easing){case"reverse":Ke=xe-Ke;break;case"full":Ke=p.currentStaggerTime}const Kt=r.currentTimeline;Ke&&Kt.delayNextStep(Ke);const Jt=Kt.currentTime;ei(this,h.animation,r),r.previousNode=h,p.currentStaggerTime=M.currentTime-Jt+(M.startTime-p.currentTimeline.startTime)}}const Ps={};class wo{constructor(h,r,p,M,F,se,xe,Ke){this._driver=h,this.element=r,this.subInstructions=p,this._enterClassName=M,this._leaveClassName=F,this.errors=se,this.timelines=xe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ps,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ke||new ko(this._driver,r,0),xe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,r){if(!h)return;const p=h;let M=this.options;null!=p.duration&&(M.duration=we(p.duration)),null!=p.delay&&(M.delay=we(p.delay));const F=p.params;if(F){let se=M.params;se||(se=this.options.params={}),Object.keys(F).forEach(xe=>{(!r||!se.hasOwnProperty(xe))&&(se[xe]=tt(F[xe],se,this.errors))})}}_copyOptions(){const h={};if(this.options){const r=this.options.params;if(r){const p=h.params={};Object.keys(r).forEach(M=>{p[M]=r[M]})}}return h}createSubContext(h=null,r,p){const M=r||this.element,F=new wo(this._driver,M,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(M,p||0));return F.previousNode=this.previousNode,F.currentAnimateTimings=this.currentAnimateTimings,F.options=this._copyOptions(),F.updateOptions(h),F.currentQueryIndex=this.currentQueryIndex,F.currentQueryTotal=this.currentQueryTotal,F.parentContext=this,this.subContextCount++,F}transformIntoNewTimeline(h){return this.previousNode=Ps,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,r,p){const M={duration:r??h.duration,delay:this.currentTimeline.currentTime+(p??0)+h.delay,easing:""},F=new dl(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,M,h.stretchStartingKeyframe);return this.timelines.push(F),M}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,r,p,M,F,se){let xe=[];if(M&&xe.push(this.element),h.length>0){h=(h=h.replace(Ea,"."+this._enterClassName)).replace(ar,"."+this._leaveClassName);let vt=this._driver.query(this.element,h,1!=p);0!==p&&(vt=p<0?vt.slice(vt.length+p,vt.length):vt.slice(0,p)),xe.push(...vt)}return!F&&0==xe.length&&se.push(function Ut(c){return new l.vHH(3014,!1)}()),xe}}class ko{constructor(h,r,p,M){this._driver=h,this.element=r,this.startTime=p,this._elementTimelineStylesLookup=M,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const r=1===this._keyframes.size&&this._pendingStyles.size;this.duration||r?(this.forwardTime(this.currentTime+h),r&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,r){return this.applyStylesToKeyframe(),new ko(this._driver,h,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,r){this._localTimelineStyles.set(h,r),this._globalTimelineStyles.set(h,r),this._styleSummary.set(h,{time:this.currentTime,value:r})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[r,p]of this._globalTimelineStyles)this._backFill.set(r,p||ke.l3),this._currentKeyframe.set(r,ke.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,r,p,M){r&&this._previousKeyframe.set("easing",r);const F=M&&M.params||{},se=function Kl(c,h){const r=new Map;let p;return c.forEach(M=>{if("*"===M){p=p||h.keys();for(let F of p)r.set(F,ke.l3)}else yt(M,r)}),r}(h,this._globalTimelineStyles);for(let[xe,Ke]of se){const vt=tt(Ke,F,p);this._pendingStyles.set(xe,vt),this._localTimelineStyles.has(xe)||this._backFill.set(xe,this._globalTimelineStyles.get(xe)??ke.l3),this._updateStyle(xe,vt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,r)=>{this._currentKeyframe.set(r,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,r)=>{this._currentKeyframe.has(r)||this._currentKeyframe.set(r,h)}))}snapshotCurrentStyles(){for(let[h,r]of this._localTimelineStyles)this._pendingStyles.set(h,r),this._updateStyle(h,r)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let r in this._currentKeyframe)h.push(r);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((r,p)=>{const M=this._styleSummary.get(p);(!M||r.time>M.time)&&this._updateStyle(p,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,r=new Set,p=1===this._keyframes.size&&0===this.duration;let M=[];this._keyframes.forEach((xe,Ke)=>{const vt=yt(xe,new Map,this._backFill);vt.forEach((Kt,Jt)=>{Kt===ke.k1?h.add(Jt):Kt===ke.l3&&r.add(Jt)}),p||vt.set("offset",Ke/this.duration),M.push(vt)});const F=h.size?Gt(h.values()):[],se=r.size?Gt(r.values()):[];if(p){const xe=M[0],Ke=new Map(xe);xe.set("offset",0),Ke.set("offset",1),M=[xe,Ke]}return Oo(this.element,M,F,se,this.duration,this.startTime,this.easing,!1)}}class dl extends ko{constructor(h,r,p,M,F,se,xe=!1){super(h,r,se.delay),this.keyframes=p,this.preStyleProps=M,this.postStyleProps=F,this._stretchStartingKeyframe=xe,this.timings={duration:se.duration,delay:se.delay,easing:se.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:r,duration:p,easing:M}=this.timings;if(this._stretchStartingKeyframe&&r){const F=[],se=p+r,xe=r/se,Ke=yt(h[0]);Ke.set("offset",0),F.push(Ke);const vt=yt(h[0]);vt.set("offset",Wa(xe)),F.push(vt);const Kt=h.length-1;for(let Jt=1;Jt<=Kt;Jt++){let Dn=yt(h[Jt]);const ri=Dn.get("offset");Dn.set("offset",Wa((r+ri*p)/se)),F.push(Dn)}p=se,r=0,M="",h=F}return Oo(this.element,h,this.preStyleProps,this.postStyleProps,p,r,M,!0)}}function Wa(c,h=3){const r=Math.pow(10,h-1);return Math.round(c*r)/r}class Os{}const oa=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Da extends Os{normalizePropertyName(h,r){return nn(h)}normalizeStyleValue(h,r,p,M){let F="";const se=p.toString().trim();if(oa.has(r)&&0!==p&&"0"!==p)if("number"==typeof p)F="px";else{const xe=p.match(/^[+-]?[\d\.]+([a-z]*)$/);xe&&0==xe[1].length&&M.push(function lt(c,h){return new l.vHH(3005,!1)}())}return se+F}}function sa(c,h,r,p,M,F,se,xe,Ke,vt,Kt,Jt,Dn){return{type:0,element:c,triggerName:h,isRemovalTransition:M,fromState:r,fromStyles:F,toState:p,toStyles:se,timelines:xe,queriedElements:Ke,preStyleProps:vt,postStyleProps:Kt,totalTime:Jt,errors:Dn}}const Lo={};class es{constructor(h,r,p){this._triggerName=h,this.ast=r,this._stateStyles=p}match(h,r,p,M){return function Ma(c,h,r,p,M){return c.some(F=>F(h,r,p,M))}(this.ast.matchers,h,r,p,M)}buildStyles(h,r,p){let M=this._stateStyles.get("*");return void 0!==h&&(M=this._stateStyles.get(h?.toString())||M),M?M.buildStyles(r,p):new Map}build(h,r,p,M,F,se,xe,Ke,vt,Kt){const Jt=[],Dn=this.ast.options&&this.ast.options.params||Lo,qn=this.buildStyles(p,xe&&xe.params||Lo,Jt),Xn=Ke&&Ke.params||Lo,bi=this.buildStyles(M,Xn,Jt),ki=new Set,cr=new Map,Kr=new Map,Vr="void"===M,na={params:Ir(Xn,Dn),delay:this.ast.options?.delay},wa=Kt?[]:Us(h,r,this.ast.animation,F,se,qn,bi,na,vt,Jt);let Lr=0;if(wa.forEach(Ca=>{Lr=Math.max(Ca.duration+Ca.delay,Lr)}),Jt.length)return sa(r,this._triggerName,p,M,Vr,qn,bi,[],[],cr,Kr,Lr,Jt);wa.forEach(Ca=>{const $a=Ca.element,Ms=Qn(cr,$a,new Set);Ca.preStyleProps.forEach(Dl=>Ms.add(Dl));const cl=Qn(Kr,$a,new Set);Ca.postStyleProps.forEach(Dl=>cl.add(Dl)),$a!==r&&ki.add($a)});const Qo=Gt(ki.values());return sa(r,this._triggerName,p,M,Vr,qn,bi,wa,Qo,cr,Kr,Lr)}}function Ir(c,h){const r=An(h);for(const p in c)c.hasOwnProperty(p)&&null!=c[p]&&(r[p]=c[p]);return r}class ks{constructor(h,r,p){this.styles=h,this.defaultParams=r,this.normalizer=p}buildStyles(h,r){const p=new Map,M=An(this.defaultParams);return Object.keys(h).forEach(F=>{const se=h[F];null!==se&&(M[F]=se)}),this.styles.styles.forEach(F=>{"string"!=typeof F&&F.forEach((se,xe)=>{se&&(se=tt(se,M,r));const Ke=this.normalizer.normalizePropertyName(xe,r);se=this.normalizer.normalizeStyleValue(xe,Ke,se,r),p.set(Ke,se)})}),p}}class Hs{constructor(h,r,p){this.name=h,this.ast=r,this._normalizer=p,this.transitionFactories=[],this.states=new Map,r.states.forEach(M=>{this.states.set(M.name,new ks(M.style,M.options&&M.options.params||{},p))}),gs(this.states,"true","1"),gs(this.states,"false","0"),r.transitions.forEach(M=>{this.transitionFactories.push(new es(h,M,this.states))}),this.fallbackTransition=function la(c,h,r){return new es(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(se,xe)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,r,p,M){return this.transitionFactories.find(se=>se.match(h,r,p,M))||null}matchStyles(h,r,p){return this.fallbackTransition.buildStyles(h,r,p)}}function gs(c,h,r){c.has(h)?c.has(r)||c.set(r,c.get(h)):c.has(r)&&c.set(h,c.get(r))}const Sa=new fs;class Nr{constructor(h,r,p){this.bodyNode=h,this._driver=r,this._normalizer=p,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,r){const p=[],F=er(this._driver,r,p,[]);if(p.length)throw function un(c){return new l.vHH(3503,!1)}();this._animations.set(h,F)}_buildPlayer(h,r,p){const M=h.element,F=Jn(0,this._normalizer,0,h.keyframes,r,p);return this._driver.animate(M,F,h.duration,h.delay,h.easing,[],!0)}create(h,r,p={}){const M=[],F=this._animations.get(h);let se;const xe=new Map;if(F?(se=Us(this._driver,r,F,en,st,new Map,new Map,p,Sa,M),se.forEach(Kt=>{const Jt=Qn(xe,Kt.element,new Map);Kt.postStyleProps.forEach(Dn=>Jt.set(Dn,null))})):(M.push(function Gn(){return new l.vHH(3300,!1)}()),se=[]),M.length)throw function di(c){return new l.vHH(3504,!1)}();xe.forEach((Kt,Jt)=>{Kt.forEach((Dn,ri)=>{Kt.set(ri,this._driver.computeStyle(Jt,ri,ke.l3))})});const vt=On(se.map(Kt=>{const Jt=xe.get(Kt.element);return this._buildPlayer(Kt,new Map,Jt)}));return this._playersById.set(h,vt),vt.onDestroy(()=>this.destroy(h)),this.players.push(vt),vt}destroy(h){const r=this._getPlayer(h);r.destroy(),this._playersById.delete(h);const p=this.players.indexOf(r);p>=0&&this.players.splice(p,1)}_getPlayer(h){const r=this._playersById.get(h);if(!r)throw function yi(c){return new l.vHH(3301,!1)}();return r}listen(h,r,p,M){const F=$i(r,"","","");return oi(this._getPlayer(h),p,F,M),()=>{}}command(h,r,p,M){if("register"==p)return void this.register(h,M[0]);if("create"==p)return void this.create(h,r,M[0]||{});const F=this._getPlayer(h);switch(p){case"play":F.play();break;case"pause":F.pause();break;case"reset":F.reset();break;case"restart":F.restart();break;case"finish":F.finish();break;case"init":F.init();break;case"setPosition":F.setPosition(parseFloat(M[0]));break;case"destroy":this.destroy(h)}}}const $s="ng-animate-queued",ns="ng-animate-disabled",qa=[],Ka={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ia={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},mr="__ng_removed";class Ya{constructor(h,r=""){this.namespaceId=r;const p=h&&h.hasOwnProperty("value");if(this.value=function _r(c){return c??null}(p?h.value:h),p){const F=An(h);delete F.value,this.options=F}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(h){const r=h.params;if(r){const p=this.options.params;Object.keys(r).forEach(M=>{null==p[M]&&(p[M]=r[M])})}}}const Zo="void",Co=new Ya(Zo);class qi{constructor(h,r,p){this.id=h,this.hostElement=r,this._engine=p,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,Rr(r,this._hostClassName)}listen(h,r,p,M){if(!this._triggers.has(r))throw function yn(c,h){return new l.vHH(3302,!1)}();if(null==p||0==p.length)throw function gi(c){return new l.vHH(3303,!1)}();if(!function so(c){return"start"==c||"done"==c}(p))throw function Ei(c,h){return new l.vHH(3400,!1)}();const F=Qn(this._elementListeners,h,[]),se={name:r,phase:p,callback:M};F.push(se);const xe=Qn(this._engine.statesByElement,h,new Map);return xe.has(r)||(Rr(h,De),Rr(h,De+"-"+r),xe.set(r,Co)),()=>{this._engine.afterFlush(()=>{const Ke=F.indexOf(se);Ke>=0&&F.splice(Ke,1),this._triggers.has(r)||xe.delete(r)})}}register(h,r){return!this._triggers.has(h)&&(this._triggers.set(h,r),!0)}_getTrigger(h){const r=this._triggers.get(h);if(!r)throw function hi(c){return new l.vHH(3401,!1)}();return r}trigger(h,r,p,M=!0){const F=this._getTrigger(r),se=new oo(this.id,r,h);let xe=this._engine.statesByElement.get(h);xe||(Rr(h,De),Rr(h,De+"-"+r),this._engine.statesByElement.set(h,xe=new Map));let Ke=xe.get(r);const vt=new Ya(p,this.id);if(!(p&&p.hasOwnProperty("value"))&&Ke&&vt.absorbOptions(Ke.options),xe.set(r,vt),Ke||(Ke=Co),vt.value!==Zo&&Ke.value===vt.value){if(!function Sl(c,h){const r=Object.keys(c),p=Object.keys(h);if(r.length!=p.length)return!1;for(let M=0;M<r.length;M++){const F=r[M];if(!h.hasOwnProperty(F)||c[F]!==h[F])return!1}return!0}(Ke.params,vt.params)){const Xn=[],bi=F.matchStyles(Ke.value,Ke.params,Xn),ki=F.matchStyles(vt.value,vt.params,Xn);Xn.length?this._engine.reportError(Xn):this._engine.afterFlush(()=>{jt(h,bi),Vt(h,ki)})}return}const Dn=Qn(this._engine.playersByElement,h,[]);Dn.forEach(Xn=>{Xn.namespaceId==this.id&&Xn.triggerName==r&&Xn.queued&&Xn.destroy()});let ri=F.matchTransition(Ke.value,vt.value,h,vt.params),qn=!1;if(!ri){if(!M)return;ri=F.fallbackTransition,qn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:r,transition:ri,fromState:Ke,toState:vt,player:se,isFallbackTransition:qn}),qn||(Rr(h,$s),se.onStart(()=>{Ki(h,$s)})),se.onDone(()=>{let Xn=this.players.indexOf(se);Xn>=0&&this.players.splice(Xn,1);const bi=this._engine.playersByElement.get(h);if(bi){let ki=bi.indexOf(se);ki>=0&&bi.splice(ki,1)}}),this.players.push(se),Dn.push(se),se}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(r=>r.delete(h)),this._elementListeners.forEach((r,p)=>{this._elementListeners.set(p,r.filter(M=>M.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const r=this._engine.playersByElement.get(h);r&&(r.forEach(p=>p.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,r){const p=this._engine.driver.query(h,Fe,!0);p.forEach(M=>{if(M[mr])return;const F=this._engine.fetchNamespacesByElement(M);F.size?F.forEach(se=>se.triggerLeaveAnimation(M,r,!1,!0)):this.clearElementCache(M)}),this._engine.afterFlushAnimationsDone(()=>p.forEach(M=>this.clearElementCache(M)))}triggerLeaveAnimation(h,r,p,M){const F=this._engine.statesByElement.get(h),se=new Map;if(F){const xe=[];if(F.forEach((Ke,vt)=>{if(se.set(vt,Ke.value),this._triggers.has(vt)){const Kt=this.trigger(h,vt,Zo,M);Kt&&xe.push(Kt)}}),xe.length)return this._engine.markElementAsRemoved(this.id,h,!0,r,se),p&&On(xe).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const r=this._elementListeners.get(h),p=this._engine.statesByElement.get(h);if(r&&p){const M=new Set;r.forEach(F=>{const se=F.name;if(M.has(se))return;M.add(se);const Ke=this._triggers.get(se).fallbackTransition,vt=p.get(se)||Co,Kt=new Ya(Zo),Jt=new oo(this.id,se,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:se,transition:Ke,fromState:vt,toState:Kt,player:Jt,isFallbackTransition:!0})})}}removeNode(h,r){const p=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,r),this.triggerLeaveAnimation(h,r,!0))return;let M=!1;if(p.totalAnimations){const F=p.players.length?p.playersByQueriedElement.get(h):[];if(F&&F.length)M=!0;else{let se=h;for(;se=se.parentNode;)if(p.statesByElement.get(se)){M=!0;break}}}if(this.prepareLeaveAnimationListeners(h),M)p.markElementAsRemoved(this.id,h,!1,r);else{const F=h[mr];(!F||F===Ka)&&(p.afterFlush(()=>this.clearElementCache(h)),p.destroyInnerAnimations(h),p._onRemovalComplete(h,r))}}insertNode(h,r){Rr(h,this._hostClassName)}drainQueuedTransitions(h){const r=[];return this._queue.forEach(p=>{const M=p.player;if(M.destroyed)return;const F=p.element,se=this._elementListeners.get(F);se&&se.forEach(xe=>{if(xe.name==p.triggerName){const Ke=$i(F,p.triggerName,p.fromState.value,p.toState.value);Ke._data=h,oi(p.player,xe.phase,Ke,xe.callback)}}),M.markedForDestroy?this._engine.afterFlush(()=>{M.destroy()}):r.push(p)}),this._queue=[],r.sort((p,M)=>{const F=p.transition.ast.depCount,se=M.transition.ast.depCount;return 0==F||0==se?F-se:this._engine.driver.containsElement(p.element,M.element)?1:-1})}destroy(h){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}elementContainsData(h){let r=!1;return this._elementListeners.has(h)&&(r=!0),r=!!this._queue.find(p=>p.element===h)||r,r}}class hl{constructor(h,r,p){this.bodyNode=h,this.driver=r,this._normalizer=p,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(M,F)=>{}}_onRemovalComplete(h,r){this.onRemovalComplete(h,r)}get queuedPlayers(){const h=[];return this._namespaceList.forEach(r=>{r.players.forEach(p=>{p.queued&&h.push(p)})}),h}createNamespace(h,r){const p=new qi(h,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(p,r):(this.newHostElements.set(r,p),this.collectEnterElement(r)),this._namespaceLookup[h]=p}_balanceNamespaceList(h,r){const p=this._namespaceList,M=this.namespacesByHostElement;if(p.length-1>=0){let se=!1,xe=this.driver.getParentElement(r);for(;xe;){const Ke=M.get(xe);if(Ke){const vt=p.indexOf(Ke);p.splice(vt+1,0,h),se=!0;break}xe=this.driver.getParentElement(xe)}se||p.unshift(h)}else p.push(h);return M.set(r,h),h}register(h,r){let p=this._namespaceLookup[h];return p||(p=this.createNamespace(h,r)),p}registerTrigger(h,r,p){let M=this._namespaceLookup[h];M&&M.register(r,p)&&this.totalAnimations++}destroy(h,r){if(!h)return;const p=this._fetchNamespace(h);this.afterFlush(()=>{this.namespacesByHostElement.delete(p.hostElement),delete this._namespaceLookup[h];const M=this._namespaceList.indexOf(p);M>=0&&this._namespaceList.splice(M,1)}),this.afterFlushAnimationsDone(()=>p.destroy(r))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const r=new Set,p=this.statesByElement.get(h);if(p)for(let M of p.values())if(M.namespaceId){const F=this._fetchNamespace(M.namespaceId);F&&r.add(F)}return r}trigger(h,r,p,M){if(_s(r)){const F=this._fetchNamespace(h);if(F)return F.trigger(r,p,M),!0}return!1}insertNode(h,r,p,M){if(!_s(r))return;const F=r[mr];if(F&&F.setForRemoval){F.setForRemoval=!1,F.setForMove=!0;const se=this.collectedLeaveElements.indexOf(r);se>=0&&this.collectedLeaveElements.splice(se,1)}if(h){const se=this._fetchNamespace(h);se&&se.insertNode(r,p)}M&&this.collectEnterElement(r)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,r){r?this.disabledNodes.has(h)||(this.disabledNodes.add(h),Rr(h,ns)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),Ki(h,ns))}removeNode(h,r,p,M){if(_s(r)){const F=h?this._fetchNamespace(h):null;if(F?F.removeNode(r,M):this.markElementAsRemoved(h,r,!1,M),p){const se=this.namespacesByHostElement.get(r);se&&se.id!==h&&se.removeNode(r,M)}}else this._onRemovalComplete(r,M)}markElementAsRemoved(h,r,p,M,F){this.collectedLeaveElements.push(r),r[mr]={namespaceId:h,setForRemoval:M,hasAnimation:p,removedBeforeQueried:!1,previousTriggersValues:F}}listen(h,r,p,M,F){return _s(r)?this._fetchNamespace(h).listen(r,p,M,F):()=>{}}_buildInstruction(h,r,p,M,F){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,p,M,h.fromState.options,h.toState.options,r,F)}destroyInnerAnimations(h){let r=this.driver.query(h,Fe,!0);r.forEach(p=>this.destroyActiveAnimationsForElement(p)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(h,Ne,!0),r.forEach(p=>this.finishActiveQueriedAnimationOnElement(p)))}destroyActiveAnimationsForElement(h){const r=this.playersByElement.get(h);r&&r.forEach(p=>{p.queued?p.markedForDestroy=!0:p.destroy()})}finishActiveQueriedAnimationOnElement(h){const r=this.playersByQueriedElement.get(h);r&&r.forEach(p=>p.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return On(this.players).onDone(()=>h());h()})}processLeaveNode(h){const r=h[mr];if(r&&r.setForRemoval){if(h[mr]=Ka,r.namespaceId){this.destroyInnerAnimations(h);const p=this._fetchNamespace(r.namespaceId);p&&p.clearElementCache(h)}this._onRemovalComplete(h,r.setForRemoval)}h.classList?.contains(ns)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(h=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((p,M)=>this._balanceNamespaceList(p,M)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let p=0;p<this.collectedEnterElements.length;p++)Rr(this.collectedEnterElements[p],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const p=[];try{r=this._flushAnimations(p,h)}finally{for(let M=0;M<p.length;M++)p[M]()}}else for(let p=0;p<this.collectedLeaveElements.length;p++)this.processLeaveNode(this.collectedLeaveElements[p]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(p=>p()),this._flushFns=[],this._whenQuietFns.length){const p=this._whenQuietFns;this._whenQuietFns=[],r.length?On(r).onDone(()=>{p.forEach(M=>M())}):p.forEach(M=>M())}}reportError(h){throw function bn(c){return new l.vHH(3402,!1)}()}_flushAnimations(h,r){const p=new fs,M=[],F=new Map,se=[],xe=new Map,Ke=new Map,vt=new Map,Kt=new Set;this.disabledNodes.forEach(ii=>{Kt.add(ii);const mi=this.driver.query(ii,".ng-animate-queued",!0);for(let Ci=0;Ci<mi.length;Ci++)Kt.add(mi[Ci])});const Jt=this.bodyNode,Dn=Array.from(this.statesByElement.keys()),ri=Ii(Dn,this.collectedEnterElements),qn=new Map;let Xn=0;ri.forEach((ii,mi)=>{const Ci=en+Xn++;qn.set(mi,Ci),ii.forEach(tr=>Rr(tr,Ci))});const bi=[],ki=new Set,cr=new Set;for(let ii=0;ii<this.collectedLeaveElements.length;ii++){const mi=this.collectedLeaveElements[ii],Ci=mi[mr];Ci&&Ci.setForRemoval&&(bi.push(mi),ki.add(mi),Ci.hasAnimation?this.driver.query(mi,".ng-star-inserted",!0).forEach(tr=>ki.add(tr)):cr.add(mi))}const Kr=new Map,Vr=Ii(Dn,Array.from(ki));Vr.forEach((ii,mi)=>{const Ci=st+Xn++;Kr.set(mi,Ci),ii.forEach(tr=>Rr(tr,Ci))}),h.push(()=>{ri.forEach((ii,mi)=>{const Ci=qn.get(mi);ii.forEach(tr=>Ki(tr,Ci))}),Vr.forEach((ii,mi)=>{const Ci=Kr.get(mi);ii.forEach(tr=>Ki(tr,Ci))}),bi.forEach(ii=>{this.processLeaveNode(ii)})});const na=[],wa=[];for(let ii=this._namespaceList.length-1;ii>=0;ii--)this._namespaceList[ii].drainQueuedTransitions(r).forEach(Ci=>{const tr=Ci.player,uo=Ci.element;if(na.push(tr),this.collectedEnterElements.length){const $o=uo[mr];if($o&&$o.setForMove){if($o.previousTriggersValues&&$o.previousTriggersValues.has(Ci.triggerName)){const _c=$o.previousTriggersValues.get(Ci.triggerName),Za=this.statesByElement.get(Ci.element);if(Za&&Za.has(Ci.triggerName)){const fp=Za.get(Ci.triggerName);fp.value=_c,Za.set(Ci.triggerName,fp)}}return void tr.destroy()}}const Ga=!Jt||!this.driver.containsElement(Jt,uo),Ss=Kr.get(uo),Ml=qn.get(uo),Tr=this._buildInstruction(Ci,p,Ml,Ss,Ga);if(Tr.errors&&Tr.errors.length)return void wa.push(Tr);if(Ga)return tr.onStart(()=>jt(uo,Tr.fromStyles)),tr.onDestroy(()=>Vt(uo,Tr.toStyles)),void M.push(tr);if(Ci.isFallbackTransition)return tr.onStart(()=>jt(uo,Tr.fromStyles)),tr.onDestroy(()=>Vt(uo,Tr.toStyles)),void M.push(tr);const ql=[];Tr.timelines.forEach($o=>{$o.stretchStartingKeyframe=!0,this.disabledNodes.has($o.element)||ql.push($o)}),Tr.timelines=ql,p.append(uo,Tr.timelines),se.push({instruction:Tr,player:tr,element:uo}),Tr.queriedElements.forEach($o=>Qn(xe,$o,[]).push(tr)),Tr.preStyleProps.forEach(($o,_c)=>{if($o.size){let Za=Ke.get(_c);Za||Ke.set(_c,Za=new Set),$o.forEach((fp,ib)=>Za.add(ib))}}),Tr.postStyleProps.forEach(($o,_c)=>{let Za=vt.get(_c);Za||vt.set(_c,Za=new Set),$o.forEach((fp,ib)=>Za.add(ib))})});if(wa.length){const ii=[];wa.forEach(mi=>{ii.push(function _t(c,h){return new l.vHH(3505,!1)}())}),na.forEach(mi=>mi.destroy()),this.reportError(ii)}const Lr=new Map,Qo=new Map;se.forEach(ii=>{const mi=ii.element;p.has(mi)&&(Qo.set(mi,mi),this._beforeAnimationBuild(ii.player.namespaceId,ii.instruction,Lr))}),M.forEach(ii=>{const mi=ii.element;this._getPreviousPlayers(mi,!1,ii.namespaceId,ii.triggerName,null).forEach(tr=>{Qn(Lr,mi,[]).push(tr),tr.destroy()})});const Ca=bi.filter(ii=>dn(ii,Ke,vt)),$a=new Map;Gs($a,this.driver,cr,vt,ke.l3).forEach(ii=>{dn(ii,Ke,vt)&&Ca.push(ii)});const cl=new Map;ri.forEach((ii,mi)=>{Gs(cl,this.driver,new Set(ii),Ke,ke.k1)}),Ca.forEach(ii=>{const mi=$a.get(ii),Ci=cl.get(ii);$a.set(ii,new Map([...Array.from(mi?.entries()??[]),...Array.from(Ci?.entries()??[])]))});const Dl=[],nd=[],gc={};se.forEach(ii=>{const{element:mi,player:Ci,instruction:tr}=ii;if(p.has(mi)){if(Kt.has(mi))return Ci.onDestroy(()=>Vt(mi,tr.toStyles)),Ci.disabled=!0,Ci.overrideTotalTime(tr.totalTime),void M.push(Ci);let uo=gc;if(Qo.size>1){let Ss=mi;const Ml=[];for(;Ss=Ss.parentNode;){const Tr=Qo.get(Ss);if(Tr){uo=Tr;break}Ml.push(Ss)}Ml.forEach(Tr=>Qo.set(Tr,uo))}const Ga=this._buildAnimation(Ci.namespaceId,tr,Lr,F,cl,$a);if(Ci.setRealPlayer(Ga),uo===gc)Dl.push(Ci);else{const Ss=this.playersByElement.get(uo);Ss&&Ss.length&&(Ci.parentPlayer=On(Ss)),M.push(Ci)}}else jt(mi,tr.fromStyles),Ci.onDestroy(()=>Vt(mi,tr.toStyles)),nd.push(Ci),Kt.has(mi)&&M.push(Ci)}),nd.forEach(ii=>{const mi=F.get(ii.element);if(mi&&mi.length){const Ci=On(mi);ii.setRealPlayer(Ci)}}),M.forEach(ii=>{ii.parentPlayer?ii.syncPlayerEvents(ii.parentPlayer):ii.destroy()});for(let ii=0;ii<bi.length;ii++){const mi=bi[ii],Ci=mi[mr];if(Ki(mi,st),Ci&&Ci.hasAnimation)continue;let tr=[];if(xe.size){let Ga=xe.get(mi);Ga&&Ga.length&&tr.push(...Ga);let Ss=this.driver.query(mi,Ne,!0);for(let Ml=0;Ml<Ss.length;Ml++){let Tr=xe.get(Ss[Ml]);Tr&&Tr.length&&tr.push(...Tr)}}const uo=tr.filter(Ga=>!Ga.destroyed);uo.length?ai(this,mi,uo):this.processLeaveNode(mi)}return bi.length=0,Dl.forEach(ii=>{this.players.push(ii),ii.onDone(()=>{ii.destroy();const mi=this.players.indexOf(ii);this.players.splice(mi,1)}),ii.play()}),Dl}elementContainsData(h,r){let p=!1;const M=r[mr];return M&&M.setForRemoval&&(p=!0),this.playersByElement.has(r)&&(p=!0),this.playersByQueriedElement.has(r)&&(p=!0),this.statesByElement.has(r)&&(p=!0),this._fetchNamespace(h).elementContainsData(r)||p}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,r,p,M,F){let se=[];if(r){const xe=this.playersByQueriedElement.get(h);xe&&(se=xe)}else{const xe=this.playersByElement.get(h);if(xe){const Ke=!F||F==Zo;xe.forEach(vt=>{vt.queued||!Ke&&vt.triggerName!=M||se.push(vt)})}}return(p||M)&&(se=se.filter(xe=>!(p&&p!=xe.namespaceId||M&&M!=xe.triggerName))),se}_beforeAnimationBuild(h,r,p){const F=r.element,se=r.isRemovalTransition?void 0:h,xe=r.isRemovalTransition?void 0:r.triggerName;for(const Ke of r.timelines){const vt=Ke.element,Kt=vt!==F,Jt=Qn(p,vt,[]);this._getPreviousPlayers(vt,Kt,se,xe,r.toState).forEach(ri=>{const qn=ri.getRealPlayer();qn.beforeDestroy&&qn.beforeDestroy(),ri.destroy(),Jt.push(ri)})}jt(F,r.fromStyles)}_buildAnimation(h,r,p,M,F,se){const xe=r.triggerName,Ke=r.element,vt=[],Kt=new Set,Jt=new Set,Dn=r.timelines.map(qn=>{const Xn=qn.element;Kt.add(Xn);const bi=Xn[mr];if(bi&&bi.removedBeforeQueried)return new ke.ZN(qn.duration,qn.delay);const ki=Xn!==Ke,cr=function Hr(c){const h=[];return Zs(c,h),h}((p.get(Xn)||qa).map(Lr=>Lr.getRealPlayer())).filter(Lr=>!!Lr.element&&Lr.element===Xn),Kr=F.get(Xn),Vr=se.get(Xn),na=Jn(0,this._normalizer,0,qn.keyframes,Kr,Vr),wa=this._buildPlayer(qn,na,cr);if(qn.subTimeline&&M&&Jt.add(Xn),ki){const Lr=new oo(h,xe,Xn);Lr.setRealPlayer(wa),vt.push(Lr)}return wa});vt.forEach(qn=>{Qn(this.playersByQueriedElement,qn.element,[]).push(qn),qn.onDone(()=>function Aa(c,h,r){let p=c.get(h);if(p){if(p.length){const M=p.indexOf(r);p.splice(M,1)}0==p.length&&c.delete(h)}return p}(this.playersByQueriedElement,qn.element,qn))}),Kt.forEach(qn=>Rr(qn,Se));const ri=On(Dn);return ri.onDestroy(()=>{Kt.forEach(qn=>Ki(qn,Se)),Vt(Ke,r.toStyles)}),Jt.forEach(qn=>{Qn(M,qn,[]).push(ri)}),ri}_buildPlayer(h,r,p){return r.length>0?this.driver.animate(h.element,r,h.duration,h.delay,h.easing,p):new ke.ZN(h.duration,h.delay)}}class oo{constructor(h,r,p){this.namespaceId=h,this.triggerName=r,this.element=p,this._player=new ke.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((r,p)=>{r.forEach(M=>oi(h,p,void 0,M))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const r=this._player;r.triggerCallback&&h.onStart(()=>r.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,r){Qn(this._queuedCallbacks,h,[]).push(r)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const r=this._player;r.triggerCallback&&r.triggerCallback(h)}}function _s(c){return c&&1===c.nodeType}function Kn(c,h){const r=c.style.display;return c.style.display=h??"none",r}function Gs(c,h,r,p,M){const F=[];r.forEach(Ke=>F.push(Kn(Ke)));const se=[];p.forEach((Ke,vt)=>{const Kt=new Map;Ke.forEach(Jt=>{const Dn=h.computeStyle(vt,Jt,M);Kt.set(Jt,Dn),(!Dn||0==Dn.length)&&(vt[mr]=Ia,se.push(vt))}),c.set(vt,Kt)});let xe=0;return r.forEach(Ke=>Kn(Ke,F[xe++])),se}function Ii(c,h){const r=new Map;if(c.forEach(xe=>r.set(xe,[])),0==h.length)return r;const M=new Set(h),F=new Map;function se(xe){if(!xe)return 1;let Ke=F.get(xe);if(Ke)return Ke;const vt=xe.parentNode;return Ke=r.has(vt)?vt:M.has(vt)?1:se(vt),F.set(xe,Ke),Ke}return h.forEach(xe=>{const Ke=se(xe);1!==Ke&&r.get(Ke).push(xe)}),r}function Rr(c,h){c.classList?.add(h)}function Ki(c,h){c.classList?.remove(h)}function ai(c,h,r){On(r).onDone(()=>c.processLeaveNode(h))}function Zs(c,h){for(let r=0;r<c.length;r++){const p=c[r];p instanceof ke.ZE?Zs(p.players,h):h.push(p)}}function dn(c,h,r){const p=r.get(c);if(!p)return!1;let M=h.get(c);return M?p.forEach(F=>M.add(F)):h.set(c,p),r.delete(c),!0}class Oi{constructor(h,r,p){this.bodyNode=h,this._driver=r,this._normalizer=p,this._triggerCache={},this.onRemovalComplete=(M,F)=>{},this._transitionEngine=new hl(h,r,p),this._timelineEngine=new Nr(h,r,p),this._transitionEngine.onRemovalComplete=(M,F)=>this.onRemovalComplete(M,F)}registerTrigger(h,r,p,M,F){const se=h+"-"+M;let xe=this._triggerCache[se];if(!xe){const Ke=[],Kt=er(this._driver,F,Ke,[]);if(Ke.length)throw function St(c,h){return new l.vHH(3404,!1)}();xe=function aa(c,h,r){return new Hs(c,h,r)}(M,Kt,this._normalizer),this._triggerCache[se]=xe}this._transitionEngine.registerTrigger(r,M,xe)}register(h,r){this._transitionEngine.register(h,r)}destroy(h,r){this._transitionEngine.destroy(h,r)}onInsert(h,r,p,M){this._transitionEngine.insertNode(h,r,p,M)}onRemove(h,r,p,M){this._transitionEngine.removeNode(h,r,M||!1,p)}disableAnimations(h,r){this._transitionEngine.markElementAsDisabled(h,r)}process(h,r,p,M){if("@"==p.charAt(0)){const[F,se]=Di(p);this._timelineEngine.command(F,r,se,M)}else this._transitionEngine.trigger(h,r,p,M)}listen(h,r,p,M,F){if("@"==p.charAt(0)){const[se,xe]=Di(p);return this._timelineEngine.listen(se,r,xe,F)}return this._transitionEngine.listen(h,r,p,M,F)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Xa=(()=>{class c{constructor(r,p,M){this._element=r,this._startStyles=p,this._endStyles=M,this._state=0;let F=c.initialStylesByElement.get(r);F||c.initialStylesByElement.set(r,F=new Map),this._initialStyles=F}start(){this._state<1&&(this._startStyles&&Vt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vt(this._element,this._initialStyles),this._endStyles&&(Vt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(jt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(jt(this._element,this._endStyles),this._endStyles=null),Vt(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function wr(c){let h=null;return c.forEach((r,p)=>{(function ee(c){return"display"===c||"position"===c})(p)&&(h=h||new Map,h.set(p,r))}),h}class X{constructor(h,r,p,M){this.element=h,this.keyframes=r,this.options=p,this._specialStyles=M,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=p.duration,this._delay=p.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const r=[];return h.forEach(p=>{r.push(Object.fromEntries(p))}),r}_triggerWebAnimation(h,r,p){return h.animate(this._convertKeyframesToObject(r),p)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((p,M)=>{"offset"!==M&&h.set(M,this._finished?p:Yi(this.element,M))}),this.currentSnapshot=h}triggerCallback(h){const r="start"===h?this._onStartFns:this._onDoneFns;r.forEach(p=>p()),r.length=0}}class W{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,r){return!1}containsElement(h,r){return le(h,r)}getParentElement(h){return Y(h)}query(h,r,p){return Ae(h,r,p)}computeStyle(h,r,p){return window.getComputedStyle(h)[r]}animate(h,r,p,M,F,se=[]){const Ke={duration:p,delay:M,fill:0==M?"both":"forwards"};F&&(Ke.easing=F);const vt=new Map,Kt=se.filter(ri=>ri instanceof X);(function Ni(c,h){return 0===c||0===h})(p,M)&&Kt.forEach(ri=>{ri.currentSnapshot.forEach((qn,Xn)=>vt.set(Xn,qn))});let Jt=function Gi(c){return c.length?c[0]instanceof Map?c:c.map(h=>jn(h)):[]}(r).map(ri=>yt(ri));Jt=function kn(c,h,r){if(r.size&&h.length){let p=h[0],M=[];if(r.forEach((F,se)=>{p.has(se)||M.push(se),p.set(se,F)}),M.length)for(let F=1;F<h.length;F++){let se=h[F];M.forEach(xe=>se.set(xe,Yi(c,xe)))}}return h}(h,Jt,vt);const Dn=function Pa(c,h){let r=null,p=null;return Array.isArray(h)&&h.length?(r=wr(h[0]),h.length>1&&(p=wr(h[h.length-1]))):h instanceof Map&&(r=wr(h)),r||p?new Xa(c,r,p):null}(h,Jt);return new X(h,Jt,Ke,Dn)}}var fe=U(6895);let Wt=(()=>{class c extends ke._j{constructor(r,p){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(p.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(r){const p=this._nextAnimationId.toString();this._nextAnimationId++;const M=Array.isArray(r)?(0,ke.vP)(r):r;return mo(this._renderer,null,p,"register",[M]),new li(p,this._renderer)}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(l.FYo),l.LFG(fe.K0))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();class li extends ke.LC{constructor(h,r){super(),this._id=h,this._renderer=r}create(h,r){return new yr(this._id,h,r||{},this._renderer)}}class yr{constructor(h,r,p,M){this.id=h,this.element=r,this._renderer=M,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",p)}_listen(h,r){return this._renderer.listen(this.element,`@@${this.id}:${h}`,r)}_command(h,...r){return mo(this._renderer,this.element,this.id,h,r)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function mo(c,h,r,p,M){return c.setProperty(h,`@@${r}:${p}`,M)}const ur="@.disabled";let Fo=(()=>{class c{constructor(r,p,M){this.delegate=r,this.engine=p,this._zone=M,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),p.onRemovalComplete=(F,se)=>{const xe=se?.parentNode(F);xe&&se.removeChild(xe,F)}}createRenderer(r,p){const F=this.delegate.createRenderer(r,p);if(!(r&&p&&p.data&&p.data.animation)){let Kt=this._rendererCache.get(F);return Kt||(Kt=new Oa("",F,this.engine),this._rendererCache.set(F,Kt)),Kt}const se=p.id,xe=p.id+"-"+this._currentId;this._currentId++,this.engine.register(xe,r);const Ke=Kt=>{Array.isArray(Kt)?Kt.forEach(Ke):this.engine.registerTrigger(se,xe,r,Kt.name,Kt)};return p.data.animation.forEach(Ke),new No(this,xe,F,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,p,M){r>=0&&r<this._microtaskId?this._zone.run(()=>p(M)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(F=>{const[se,xe]=F;se(xe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([p,M]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(l.FYo),l.LFG(Oi),l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();class Oa{constructor(h,r,p){this.namespaceId=h,this.delegate=r,this.engine=p,this.destroyNode=this.delegate.destroyNode?M=>r.destroyNode(M):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(h,r){return this.delegate.createElement(h,r)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,r){this.delegate.appendChild(h,r),this.engine.onInsert(this.namespaceId,r,h,!1)}insertBefore(h,r,p,M=!0){this.delegate.insertBefore(h,r,p),this.engine.onInsert(this.namespaceId,r,h,M)}removeChild(h,r,p){this.engine.onRemove(this.namespaceId,r,this.delegate,p)}selectRootElement(h,r){return this.delegate.selectRootElement(h,r)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,r,p,M){this.delegate.setAttribute(h,r,p,M)}removeAttribute(h,r,p){this.delegate.removeAttribute(h,r,p)}addClass(h,r){this.delegate.addClass(h,r)}removeClass(h,r){this.delegate.removeClass(h,r)}setStyle(h,r,p,M){this.delegate.setStyle(h,r,p,M)}removeStyle(h,r,p){this.delegate.removeStyle(h,r,p)}setProperty(h,r,p){"@"==r.charAt(0)&&r==ur?this.disableAnimations(h,!!p):this.delegate.setProperty(h,r,p)}setValue(h,r){this.delegate.setValue(h,r)}listen(h,r,p){return this.delegate.listen(h,r,p)}disableAnimations(h,r){this.engine.disableAnimations(h,r)}}class No extends Oa{constructor(h,r,p,M){super(r,p,M),this.factory=h,this.namespaceId=r}setProperty(h,r,p){"@"==r.charAt(0)?"."==r.charAt(1)&&r==ur?this.disableAnimations(h,p=void 0===p||!!p):this.engine.process(this.namespaceId,h,r.slice(1),p):this.delegate.setProperty(h,r,p)}listen(h,r,p){if("@"==r.charAt(0)){const M=function rs(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(h);let F=r.slice(1),se="";return"@"!=F.charAt(0)&&([F,se]=function Tl(c){const h=c.indexOf(".");return[c.substring(0,h),c.slice(h+1)]}(F)),this.engine.listen(this.namespaceId,M,F,se,xe=>{this.factory.scheduleListenerCallback(xe._data||-1,p,xe)})}return this.delegate.listen(h,r,p)}}let Yl=(()=>{class c extends Oi{constructor(r,p,M,F){super(r.body,p,M)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(fe.K0),l.LFG(ot),l.LFG(Os),l.LFG(l.z2F))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const Ws=[{provide:ke._j,useClass:Wt},{provide:Os,useFactory:function Xl(){return new Da}},{provide:Oi,useClass:Yl},{provide:l.FYo,useFactory:function Jl(c,h,r){return new Fo(c,h,r)},deps:[D.se,Oi,l.R0b]}],ys=[{provide:ot,useFactory:()=>new W},{provide:l.QbO,useValue:"BrowserAnimations"},...Ws],qs=[{provide:ot,useClass:Qe},{provide:l.QbO,useValue:"NoopAnimations"},...Ws];let Ja=(()=>{class c{static withConfig(r){return{ngModule:c,providers:r.disableAnimations?qs:ys}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:ys,imports:[D.b2]}),c})(),pl=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[fe.ez]}),c})();function Al(c,h,r,p,M,F,se){try{var xe=c[F](se),Ke=xe.value}catch(vt){return void r(vt)}xe.done?h(Ke):Promise.resolve(Ke).then(p,M)}function $r(c){return function(){var h=this,r=arguments;return new Promise(function(p,M){var F=c.apply(h,r);function se(Ke){Al(F,p,M,se,xe,"next",Ke)}function xe(Ke){Al(F,p,M,se,xe,"throw",Ke)}se(void 0)})}}var j=U(1943),re=U(7579);class Z extends re.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(h){const{hasError:r,_hasValue:p,_value:M,thrownError:F,isStopped:se,_isComplete:xe}=this;r?h.error(F):(se||xe)&&(p&&h.next(M),h.complete())}next(h){this.isStopped||(this._value=h,this._hasValue=!0)}complete(){const{_hasValue:h,_value:r,_isComplete:p}=this;p||(this._isComplete=!0,h&&super.next(r),super.complete())}}var ge=U(727),nt=U(590);let Pt=(()=>{class c{constructor(r){this.zone=r,this.mapCreated=new Z,this.mapLoaded=new Z,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new ge.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(r){this.zone.onStable.pipe((0,nt.P)()).subscribe(()=>{this.createMap(r.mapOptions),this.hookEvents(r.mapEvents),this.mapEvents=r.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(r)})}updateMaxZoom(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(r)})}updateMinPitch(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(r)})}updateMaxPitch(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(r)})}updateRenderWorldCopies(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(r)})}updateScrollZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(r){return this.zone.runOutsideAngular(()=>{r?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(r)})}updateMaxBounds(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(r)})}changeCanvasCursor(r){this.mapInstance.getCanvasContainer().style.cursor=r}queryRenderedFeatures(r,p){return this.mapInstance.queryRenderedFeatures(r,p)}panTo(r,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(r,p)})}move(r,p,M,F,se,xe){return this.zone.runOutsideAngular(()=>{this.mapInstance[r]({...p,zoom:M??this.mapInstance.getZoom(),center:F??this.mapInstance.getCenter(),bearing:se??this.mapInstance.getBearing(),pitch:xe??this.mapInstance.getPitch()})})}addLayer(r,p,M){this.zone.runOutsideAngular(()=>{Object.keys(r.layerOptions).forEach(F=>{void 0===r.layerOptions[F]&&delete r.layerOptions[F]}),this.mapInstance.addLayer(r.layerOptions,M),p&&(r.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerClick.emit(F)})}),r.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerDblClick.emit(F)})}),r.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseDown.emit(F)})}),r.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseUp.emit(F)})}),r.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseEnter.emit(F)})}),r.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseLeave.emit(F)})}),r.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseMove.emit(F)})}),r.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseOver.emit(F)})}),r.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerMouseOut.emit(F)})}),r.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerContextMenu.emit(F)})}),r.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerTouchStart.emit(F)})}),r.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerTouchEnd.emit(F)})}),r.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",r.layerOptions.id,F=>{this.zone.run(()=>{r.layerEvents.layerTouchCancel.emit(F)})}))})}removeLayer(r){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(r)&&this.mapInstance.removeLayer(r)})}addMarker(r){const p={offset:r.markersOptions.offset,anchor:r.markersOptions.anchor,draggable:!!r.markersOptions.draggable,rotationAlignment:r.markersOptions.rotationAlignment,pitchAlignment:r.markersOptions.pitchAlignment,clickTolerance:r.markersOptions.clickTolerance};r.markersOptions.element.childNodes.length>0&&(p.element=r.markersOptions.element);const M=new j.Marker(p);return r.markersEvents.markerDragStart.observers.length&&M.on("dragstart",se=>{if(se){const{target:xe}=se;this.zone.run(()=>{r.markersEvents.markerDragStart.emit(xe)})}}),r.markersEvents.markerDrag.observers.length&&M.on("drag",se=>{if(se){const{target:xe}=se;this.zone.run(()=>{r.markersEvents.markerDrag.emit(xe)})}}),r.markersEvents.markerDragEnd.observers.length&&M.on("dragend",se=>{if(se){const{target:xe}=se;this.zone.run(()=>{r.markersEvents.markerDragEnd.emit(xe)})}}),M.setLngLat(r.markersOptions.feature?r.markersOptions.feature.geometry.coordinates:r.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(M.addTo(this.mapInstance),M))}removeMarker(r){this.markersToRemove.push(r)}createPopup(r,p){return this.zone.runOutsideAngular(()=>{Object.keys(r.popupOptions).forEach(F=>void 0===r.popupOptions[F]&&delete r.popupOptions[F]);const M=new j.Popup(r.popupOptions);return M.setDOMContent(p),r.popupEvents.popupClose.observers.length&&M.on("close",()=>{this.zone.run(()=>{r.popupEvents.popupClose.emit()})}),r.popupEvents.popupOpen.observers.length&&M.on("open",()=>{this.zone.run(()=>{r.popupEvents.popupOpen.emit()})}),M})}addPopupToMap(r,p,M=!1){return this.zone.runOutsideAngular(()=>{M&&r._listeners&&delete r._listeners.open,r.setLngLat(p),r.addTo(this.mapInstance)})}addPopupToMarker(r,p){return this.zone.runOutsideAngular(()=>{r.setPopup(p)})}removePopupFromMap(r,p=!1){p&&r._listeners&&delete r._listeners.close,this.popupsToRemove.push(r)}removePopupFromMarker(r){return this.zone.runOutsideAngular(()=>{r.setPopup(void 0)})}addControl(r,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(r,p)})}removeControl(r){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(r)})}loadAndAddImage(r,p,M){var F=this;return $r(function*(){return F.zone.runOutsideAngular(()=>new Promise((se,xe)=>{F.mapInstance.loadImage(p,(Ke,vt)=>{Ke?xe(Ke):(F.addImage(r,vt,M),se())})}))})()}addImage(r,p,M){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(r,p,M)})}removeImage(r){this.imageIdsToRemove.push(r)}addSource(r,p){return this.zone.runOutsideAngular(()=>{Object.keys(p).forEach(M=>void 0===p[M]&&delete p[M]),this.mapInstance.addSource(r,p)})}getSource(r){return this.mapInstance.getSource(r)}removeSource(r){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(r).forEach(p=>this.mapInstance.removeLayer(p.id)),this.mapInstance.removeSource(r)})}setAllLayerPaintProperty(r,p){return this.zone.runOutsideAngular(()=>{Object.keys(p).forEach(M=>{this.mapInstance.setPaintProperty(r,M,p[M])})})}setAllLayerLayoutProperty(r,p){return this.zone.runOutsideAngular(()=>{Object.keys(p).forEach(M=>{this.mapInstance.setLayoutProperty(r,M,p[M])})})}setLayerFilter(r,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(r,p)})}setLayerBefore(r,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(r,p)})}setLayerZoomRange(r,p,M){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(r,p||0,M||20)})}fitBounds(r,p){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(r,p)})}fitScreenCoordinates(r,p,M){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(r[0],r[1],p,M)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(r){l.R0b.assertNotInAngularZone(),Object.keys(r).forEach(M=>{void 0===r[M]&&delete r[M]}),this.mapInstance=new j.Map(r),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(r.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const r of this.markersToRemove)r.remove();this.markersToRemove=[]}removePopups(){for(const r of this.popupsToRemove)r.remove();this.popupsToRemove=[]}removeImages(){for(const r of this.imageIdsToRemove)this.mapInstance.removeImage(r);this.imageIdsToRemove=[]}findLayersBySourceId(r){const p=this.mapInstance.getStyle().layers;return null==p?[]:p.filter(M=>"source"in M&&M.source===r)}hookEvents(r){this.mapInstance.on("load",p=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{r.mapLoad.emit(p.target)})}),r.mapResize.observers.length&&this.mapInstance.on("resize",p=>this.zone.run(()=>{r.mapResize.emit(p)})),r.mapRemove.observers.length&&this.mapInstance.on("remove",p=>this.zone.run(()=>{r.mapRemove.emit(p)})),r.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",p=>this.zone.run(()=>{r.mapMouseDown.emit(p)})),r.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",p=>this.zone.run(()=>{r.mapMouseUp.emit(p)})),r.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",p=>this.zone.run(()=>{r.mapMouseMove.emit(p)})),r.mapClick.observers.length&&this.mapInstance.on("click",p=>this.zone.run(()=>{r.mapClick.emit(p)})),r.mapDblClick.observers.length&&this.mapInstance.on("dblclick",p=>this.zone.run(()=>{r.mapDblClick.emit(p)})),r.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",p=>this.zone.run(()=>{r.mapMouseOver.emit(p)})),r.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",p=>this.zone.run(()=>{r.mapMouseOut.emit(p)})),r.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",p=>this.zone.run(()=>{r.mapContextMenu.emit(p)})),r.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",p=>this.zone.run(()=>{r.mapTouchStart.emit(p)})),r.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",p=>this.zone.run(()=>{r.mapTouchEnd.emit(p)})),r.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",p=>this.zone.run(()=>{r.mapTouchMove.emit(p)})),r.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",p=>this.zone.run(()=>{r.mapTouchCancel.emit(p)})),r.mapWheel.observers.length&&this.mapInstance.on("wheel",p=>this.zone.run(()=>{r.mapWheel.emit(p)})),r.moveStart.observers.length&&this.mapInstance.on("movestart",p=>this.zone.run(()=>r.moveStart.emit(p))),r.move.observers.length&&this.mapInstance.on("move",p=>this.zone.run(()=>r.move.emit(p))),r.moveEnd.observers.length&&this.mapInstance.on("moveend",p=>this.zone.run(()=>r.moveEnd.emit(p))),r.mapDragStart.observers.length&&this.mapInstance.on("dragstart",p=>this.zone.run(()=>{r.mapDragStart.emit(p)})),r.mapDrag.observers.length&&this.mapInstance.on("drag",p=>this.zone.run(()=>{r.mapDrag.emit(p)})),r.mapDragEnd.observers.length&&this.mapInstance.on("dragend",p=>this.zone.run(()=>{r.mapDragEnd.emit(p)})),r.zoomStart.observers.length&&this.mapInstance.on("zoomstart",p=>this.zone.run(()=>r.zoomStart.emit(p))),r.zoomEvt.observers.length&&this.mapInstance.on("zoom",p=>this.zone.run(()=>r.zoomEvt.emit(p))),r.zoomEnd.observers.length&&this.mapInstance.on("zoomend",p=>this.zone.run(()=>r.zoomEnd.emit(p))),r.rotateStart.observers.length&&this.mapInstance.on("rotatestart",p=>this.zone.run(()=>r.rotateStart.emit(p))),r.rotate.observers.length&&this.mapInstance.on("rotate",p=>this.zone.run(()=>r.rotate.emit(p))),r.rotateEnd.observers.length&&this.mapInstance.on("rotateend",p=>this.zone.run(()=>r.rotateEnd.emit(p))),r.pitchStart.observers.length&&this.mapInstance.on("pitchstart",p=>this.zone.run(()=>r.pitchStart.emit(p))),r.pitchEvt.observers.length&&this.mapInstance.on("pitch",p=>this.zone.run(()=>r.pitchEvt.emit(p))),r.pitchEnd.observers.length&&this.mapInstance.on("pitchend",p=>this.zone.run(()=>r.pitchEnd.emit(p))),r.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",p=>this.zone.run(()=>r.boxZoomStart.emit(p))),r.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",p=>this.zone.run(()=>r.boxZoomEnd.emit(p))),r.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",p=>this.zone.run(()=>r.boxZoomCancel.emit(p))),r.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",p=>this.zone.run(()=>r.webGlContextLost.emit(p))),r.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",p=>this.zone.run(()=>r.webGlContextRestored.emit(p))),r.render.observers.length&&this.mapInstance.on("render",p=>this.zone.run(()=>r.render.emit(p))),r.mapError.observers.length&&this.mapInstance.on("error",p=>this.zone.run(()=>{r.mapError.emit(p)})),r.data.observers.length&&this.mapInstance.on("data",p=>this.zone.run(()=>r.data.emit(p))),r.styleData.observers.length&&this.mapInstance.on("styledata",p=>this.zone.run(()=>r.styleData.emit(p))),r.sourceData.observers.length&&this.mapInstance.on("sourcedata",p=>this.zone.run(()=>r.sourceData.emit(p))),r.dataLoading.observers.length&&this.mapInstance.on("dataloading",p=>this.zone.run(()=>r.dataLoading.emit(p))),r.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",p=>this.zone.run(()=>r.styleDataLoading.emit(p))),r.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",p=>this.zone.run(()=>r.sourceDataLoading.emit(p))),r.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",p=>this.zone.run(()=>r.styleImageMissing.emit(p))),r.idle.observers.length&&this.mapInstance.on("idle",p=>this.zone.run(()=>r.idle.emit(p)))}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac}),c})();const qt=["content"],Zn=["*"];class Mi{constructor(h){this.container=h}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let xi=(()=>{class c{constructor(r){this.mapService=r,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Mi(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-control"]],viewQuery:function(r,p){if(1&r&&l.Gf(qt,7),2&r){let M;l.iGM(M=l.CRH())&&(p.content=M.first)}},inputs:{position:"position"},ngContentSelectors:Zn,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(r,p){1&r&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),c})();var vi=U(4968),_i=U(9300),sr=U(8505),wi=U(3900),Ai=U(2722),Eo=U(5698),Do=U(8372);let Br=(()=>{class c{constructor(r,p){this.mapService=r,this.zone=p,this.type="geojson",this.updateFeatureData=new re.x,this.sub=new ge.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const p=(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,_i.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(p)});this.sub.add(r)}ngOnChanges(r){if(this.sourceAdded&&((r.maxzoom&&!r.maxzoom.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.buffer&&!r.buffer.isFirstChange()||r.tolerance&&!r.tolerance.isFirstChange()||r.cluster&&!r.cluster.isFirstChange()||r.clusterRadius&&!r.clusterRadius.isFirstChange()||r.clusterMaxZoom&&!r.clusterMaxZoom.isFirstChange()||r.clusterMinPoints&&!r.clusterMinPoints.isFirstChange()||r.clusterProperties&&!r.clusterProperties.isFirstChange()||r.lineMetrics&&!r.lineMetrics.isFirstChange()||r.generateId&&!r.generateId.isFirstChange()||r.promoteId&&!r.promoteId.isFirstChange()||r.filter&&!r.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),r.data&&!r.data.isFirstChange())){const p=this.mapService.getSource(this.id);if(void 0===p)return;p.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(r){var p=this;return $r(function*(){const M=p.mapService.getSource(p.id);return p.zone.run($r(function*(){return new Promise((F,se)=>{M.getClusterExpansionZoom(r,(xe,Ke)=>{xe?se(xe):F(Ke)})})}))})()}getClusterChildren(r){var p=this;return $r(function*(){const M=p.mapService.getSource(p.id);return p.zone.run($r(function*(){return new Promise((F,se)=>{M.getClusterChildren(r,(xe,Ke)=>{xe?se(xe):F(Ke)})})}))})()}getClusterLeaves(r,p,M){var F=this;return $r(function*(){const se=F.mapService.getSource(F.id);return F.zone.run($r(function*(){return new Promise((xe,Ke)=>{se.getClusterLeaves(r,p,M,(vt,Kt)=>{vt?Ke(vt):xe(Kt)})})}))})()}_addFeature(r){this.data.features.push(r),this.updateFeatureData.next(void 0)}_removeFeature(r){const p=this.data,M=p.features.indexOf(r);M>-1&&p.features.splice(M,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const p=this.updateFeatureData.pipe((0,Do.b)(0)).subscribe(()=>{const M=this.mapService.getSource(this.id);void 0!==M&&M.setData(this.data)});this.sub.add(p),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(r,p){},encapsulation:2,changeDetection:0}),c})(),Xr=(()=>{class c{constructor(r){this.geoJSONSourceComponent=r,this.type="Feature"}ngOnInit(){this.id||(this.id=this.geoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.geoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.geoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(r){this.feature.geometry.coordinates=r,this.geoJSONSourceComponent.updateFeatureData.next(void 0)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36((0,l.Gpc)(()=>Br)))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(r,p){},encapsulation:2,changeDetection:0}),c})(),Ar=(()=>{class c{constructor(r,p,M){this.mapService=r,this.ngZone=p,this.featureComponent=M,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.sub=new ge.w0}ngOnInit(){let r,p,M;if(!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(r=this.layer.layerMouseEnter,p=this.layer.layerMouseLeave,M=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(r,p,M)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(r,p,M){let F=!1,se=!1;this.mapService.mapCreated$.subscribe(()=>{const xe=(0,vi.R)(this.mapService.mapInstance,"mouseup"),Ke=r.pipe((0,_i.h)(()=>!F),(0,_i.h)(Jt=>this.filterFeature(Jt)),(0,sr.b)(()=>{se=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,wi.w)(()=>(0,vi.R)(this.mapService.mapInstance,"mousedown").pipe((0,Ai.R)(p)))),vt=Ke.pipe((0,wi.w)(()=>(0,vi.R)(this.mapService.mapInstance,"mousemove").pipe((0,Ai.R)(xe)))),Kt=Ke.pipe((0,wi.w)(()=>xe.pipe((0,Eo.q)(1))));this.sub.add(Ke.subscribe(Jt=>{F=!0,this.featureDragStart.observers.length&&this.ngZone.run(()=>{this.featureDragStart.emit(Jt)})})),this.sub.add(vt.subscribe(Jt=>{M([Jt.lngLat.lng,Jt.lngLat.lat]),this.featureDrag.observers.length&&this.ngZone.run(()=>{this.featureDrag.emit(Jt)})})),this.sub.add(Kt.subscribe(Jt=>{F=!1,this.featureDragEnd.observers.length&&this.ngZone.run(()=>{this.featureDragEnd.emit(Jt)}),se||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(p.pipe((0,sr.b)(()=>se=!1),(0,_i.h)(()=>!F)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(r){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(r.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(l.R0b),l.Y36(Xr,9))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),c})();var Mn=U(4004),Rs=U(8675);let Cr=(()=>{class c{constructor(r){this.mapService=r,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,wi.w)(()=>(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,Mn.U)(()=>!1),(0,_i.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,Rs.O)(!0)))).subscribe(r=>this.init(r))}ngOnChanges(r){!this.layerAdded||(r.paint&&!r.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,r.paint.currentValue),r.layout&&!r.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,r.layout.currentValue),r.filter&&!r.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,r.filter.currentValue),r.before&&!r.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,r.before.currentValue),(r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&(this.mapService.removeLayer(this.id),void 0!==this.sourceIdAdded&&this.mapService.getSource(this.sourceIdAdded)&&this.mapService.removeSource(this.sourceIdAdded)),this.sub&&this.sub.unsubscribe()}init(r){const p={layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}};this.removeSource&&"string"!=typeof this.source&&void 0===this.mapService.getSource(this.id)&&(this.sourceIdAdded=this.id),this.mapService.addLayer(p,r,this.before),void 0!==this.sourceIdAdded&&void 0===this.mapService.getSource(this.sourceIdAdded)&&(this.sourceIdAdded=void 0),this.layerAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",removeSource:"removeSource",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[l.TTD],decls:0,vars:0,template:function(r,p){},encapsulation:2}),c})(),vs=(()=>{class c{constructor(r,p){this.mapService=r,this.zone=p,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,wi.w)(()=>(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,Rs.O)(void 0),(0,_i.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(r){(r.data&&!r.data.isFirstChange()||r.options&&!r.options.isFirstChange()||r.url&&!r.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){var r=this;return $r(function*(){if(r.isAdding=!0,r.data)r.mapService.addImage(r.id,r.data,r.options),r.isAdded=!0,r.isAdding=!1;else if(r.url)try{yield r.mapService.loadAndAddImage(r.id,r.url,r.options),r.isAdded=!0,r.isAdding=!1,r.zone.run(()=>{r.imageLoaded.emit()})}catch(p){r.zone.run(()=>{r.imageError.emit(p)})}})()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[l.TTD],decls:0,vars:0,template:function(r,p){},encapsulation:2}),c})(),Qa=(()=>{class c{constructor(r){this.mapService=r,this.type="vector",this.sourceAdded=!1,this.sub=new ge.w0}ngOnInit(){const r=this.mapService.mapLoaded$.subscribe(()=>{this.init();const p=(0,vi.R)(this.mapService.mapInstance,"styledata").pipe((0,_i.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(p)});this.sub.add(r)}ngOnChanges(r){if(this.sourceAdded)if(r.bounds&&!r.bounds.isFirstChange()||r.scheme&&!r.scheme.isFirstChange()||r.minzoom&&!r.minzoom.isFirstChange()||r.maxzoom&&!r.maxzoom.isFirstChange()||r.attribution&&!r.attribution.isFirstChange()||r.promoteId&&!r.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(r.url&&!r.url.isFirstChange()||r.tiles&&!r.tiles.isFirstChange()){const p=this.mapService.getSource(this.id);if(void 0===p)return;r.url&&this.url&&p.setUrl(this.url),r.tiles&&this.tiles&&p.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(r,p){},encapsulation:2,changeDetection:0}),c})(),hu=(()=>{class c{constructor(r){this.mapService=r,this.type="image"}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(r){if(void 0===this.sourceId)return;const p=this.mapService.getSource(this.sourceId);void 0!==p&&p.updateImage({url:void 0===r.url?void 0:this.url,coordinates:void 0===r.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(r,p){},encapsulation:2,changeDetection:0}),c})();const vc=["content"],bc=["*"];let ca=(()=>{class c{constructor(r){this.mapService=r,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(r){r.lngLat&&!r.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),r.feature&&!r.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),r.draggable&&!r.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),r.popupShown&&!r.popupShown.isFirstChange()&&(r.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),r.pitchAlignment&&!r.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(r.pitchAlignment.currentValue),r.rotationAlignment&&!r.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(r.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(r){this.markerInstance.setLngLat(r)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-marker"]],viewQuery:function(r,p){if(1&r&&l.Gf(vc,7),2&r){let M;l.iGM(M=l.CRH())&&(p.content=M.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[l.TTD],ngContentSelectors:bc,decls:3,vars:2,consts:[["content",""]],template:function(r,p){1&r&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&r&&l.Tol(p.className)},encapsulation:2,changeDetection:0}),c})();const Nc=["content"],Pl=["*"];let Wo=(()=>{class c{constructor(r){this.mapService=r,this.popupClose=new l.vpe,this.popupOpen=new l.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(r){if(r.lngLat&&!r.lngLat.isFirstChange()||r.feature&&!r.feature.isFirstChange()){const p=r.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const M=this.createPopup();this.mapService.addPopupToMap(M,p,this.popupInstance.isOpen()),this.popupInstance=M}if(r.marker&&!r.marker.isFirstChange()){const p=r.marker.previousValue;p.markerInstance&&this.mapService.removePopupFromMarker(p.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}r.offset&&!r.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(r){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(r,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,r)}})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-popup"]],viewQuery:function(r,p){if(1&r&&l.Gf(Nc,7),2&r){let M;l.iGM(M=l.CRH())&&(p.content=M.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[l.TTD],ngContentSelectors:Pl,decls:3,vars:0,consts:[["content",""]],template:function(r,p){1&r&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),c})(),ml=(()=>{class c{constructor(r,p){this.mapService=r,this.controlComponent=p}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new j.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(xi,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglFullscreen",""]],hostBindings:function(r,p){1&r&&l.NdJ("webkitfullscreenchange",function(F){return p.onFullscreen(F.target)},!1,l.Jf7)},inputs:{container:"container"}}),c})(),qo=(()=>{class c{constructor(r,p){this.mapService=r,this.controlComponent=p,this.geolocate=new l.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(r).forEach(p=>{void 0===r[p]&&delete r[p]}),this.controlComponent.control=new j.GeolocateControl(r),this.controlComponent.control.on("geolocate",p=>{this.geolocate.emit(p)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(xi,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),c})(),go=(()=>{class c{constructor(r,p){this.mapService=r,this.controlComponent=p}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.showCompass&&(r.showCompass=this.showCompass),void 0!==this.showZoom&&(r.showZoom=this.showZoom),this.controlComponent.control=new j.NavigationControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(xi,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),c})(),Bo=(()=>{class c{constructor(r,p){this.mapService=r,this.controlComponent=p}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.compact&&(r.compact=this.compact),void 0!==this.customAttribution&&(r.customAttribution=this.customAttribution),this.controlComponent.control=new j.AttributionControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(xi,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),c})(),xc=(()=>{class c{constructor(r,p){this.mapService=r,this.controlComponent=p}ngOnChanges(r){r.unit&&!r.unit.isFirstChange()&&this.controlComponent.control.setUnit(r.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const r={};void 0!==this.maxWidth&&(r.maxWidth=this.maxWidth),void 0!==this.unit&&(r.unit=this.unit),this.controlComponent.control=new j.ScaleControl(r),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(xi,1))},c.\u0275dir=l.lG2({type:c,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),c})();var Ol=U(6451);function Ql(c,h){1&c&&l.GkF(0)}const La=function(c){return{$implicit:c}};function os(c,h){if(1&c&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Ql,1,0,"ng-container",4),l.qZA(),l.BQk()),2&c){const r=l.oxw().$implicit,p=l.oxw();l.xp6(1),l.Q6J("feature",r),l.xp6(1),l.Q6J("ngTemplateOutlet",p.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,La,r))}}function Ko(c,h){1&c&&l.GkF(0)}function ir(c,h){if(1&c&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Ko,1,0,"ng-container",4),l.qZA(),l.BQk()),2&c){const r=l.oxw().$implicit,p=l.oxw();l.xp6(1),l.Q6J("feature",r),l.xp6(1),l.Q6J("ngTemplateOutlet",p.pointTpl)("ngTemplateOutletContext",l.VKq(3,La,r))}}function gl(c,h){if(1&c&&(l.ynx(0),l.YNc(1,os,3,5,"ng-container",2),l.YNc(2,ir,3,5,"ng-container",2),l.BQk()),2&c){const r=h.$implicit;l.xp6(1),l.Q6J("ngIf",r.properties.cluster),l.xp6(1),l.Q6J("ngIf",!r.properties.cluster)}}const kl=function(){return{"circle-radius":0}};let ua=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["ng-template","mglPoint",""]]}),c})(),el=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["ng-template","mglClusterPoint",""]]}),c})(),tl=0,wc=(()=>{class c{constructor(r,p,M){this.mapService=r,this.changeDetectorRef=p,this.ngZone=M,this.layerId="mgl-markers-for-clusters-"+tl++,this.sub=new ge.w0}ngAfterContentInit(){const p=this.mapService.mapCreated$.pipe((0,wi.w)(()=>(0,vi.R)(this.mapService.mapInstance,"data").pipe((0,_i.h)(M=>M.sourceId===this.source&&"metadata"!==M.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,wi.w)(()=>(0,Ol.T)((0,vi.R)(this.mapService.mapInstance,"move"),(0,vi.R)(this.mapService.mapInstance,"moveend")).pipe((0,Rs.O)(void 0)))).subscribe(()=>{this.ngZone.run(()=>{this.updateCluster()})});this.sub.add(p)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(r,p){return p.id}updateCluster(){const r={layers:[this.layerId]};this.pointTpl||(r.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(r),this.changeDetectorRef.markForCheck()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt),l.Y36(l.sBO),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(r,p,M){if(1&r&&(l.Suo(M,ua,5,l.Rgc),l.Suo(M,el,5,l.Rgc)),2&r){let F;l.iGM(F=l.CRH())&&(p.pointTpl=F.first),l.iGM(F=l.CRH())&&(p.clusterPointTpl=F.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,p){1&r&&(l._UZ(0,"mgl-layer",0),l.YNc(1,gl,3,2,"ng-container",1)),2&r&&(l.Q6J("id",p.layerId)("source",p.source)("paint",l.DdM(5,kl)),l.xp6(1),l.Q6J("ngForOf",p.clusterPoints)("ngForTrackBy",p.trackByClusterPoint))},dependencies:[fe.sg,fe.O5,fe.tP,Cr,ca],encapsulation:2,changeDetection:0}),c})();const Ls=["container"];let Pi=(()=>{class c{constructor(r){this.mapService=r,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe}get mapInstance(){return this.mapService.mapInstance}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(r){var p=this;return $r(function*(){yield p.mapService.mapCreated$.toPromise(),r.cursorStyle&&!r.cursorStyle.isFirstChange()&&p.mapService.changeCanvasCursor(r.cursorStyle.currentValue),r.minZoom&&!r.minZoom.isFirstChange()&&p.mapService.updateMinZoom(r.minZoom.currentValue),r.maxZoom&&!r.maxZoom.isFirstChange()&&p.mapService.updateMaxZoom(r.maxZoom.currentValue),r.minPitch&&!r.minPitch.isFirstChange()&&p.mapService.updateMinPitch(r.minPitch.currentValue),r.maxPitch&&!r.maxPitch.isFirstChange()&&p.mapService.updateMaxPitch(r.maxPitch.currentValue),r.renderWorldCopies&&!r.renderWorldCopies.isFirstChange()&&p.mapService.updateRenderWorldCopies(r.renderWorldCopies.currentValue),r.scrollZoom&&!r.scrollZoom.isFirstChange()&&p.mapService.updateScrollZoom(r.scrollZoom.currentValue),r.dragRotate&&!r.dragRotate.isFirstChange()&&p.mapService.updateDragRotate(r.dragRotate.currentValue),r.touchPitch&&!r.touchPitch.isFirstChange()&&p.mapService.updateTouchPitch(r.touchPitch.currentValue),r.touchZoomRotate&&!r.touchZoomRotate.isFirstChange()&&p.mapService.updateTouchZoomRotate(r.touchZoomRotate.currentValue),r.doubleClickZoom&&!r.doubleClickZoom.isFirstChange()&&p.mapService.updateDoubleClickZoom(r.doubleClickZoom.currentValue),r.keyboard&&!r.keyboard.isFirstChange()&&p.mapService.updateKeyboard(r.keyboard.currentValue),r.dragPan&&!r.dragPan.isFirstChange()&&p.mapService.updateDragPan(r.dragPan.currentValue),r.boxZoom&&!r.boxZoom.isFirstChange()&&p.mapService.updateBoxZoom(r.boxZoom.currentValue),r.style&&!r.style.isFirstChange()&&p.mapService.updateStyle(r.style.currentValue),r.maxBounds&&!r.maxBounds.isFirstChange()&&p.mapService.updateMaxBounds(r.maxBounds.currentValue),r.fitBounds&&r.fitBounds.currentValue&&!r.fitBounds.isFirstChange()&&p.mapService.fitBounds(r.fitBounds.currentValue,p.fitBoundsOptions),r.fitScreenCoordinates&&r.fitScreenCoordinates.currentValue&&((p.center||p.zoom||p.pitch||p.fitBounds)&&r.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),p.mapService.fitScreenCoordinates(r.fitScreenCoordinates.currentValue,p.bearing?p.bearing[0]:0,p.movingOptions)),!p.centerWithPanTo||!r.center||r.center.isFirstChange()||r.zoom||r.bearing||r.pitch?(r.center&&!r.center.isFirstChange()||r.zoom&&!r.zoom.isFirstChange()||r.bearing&&!r.bearing.isFirstChange()&&!r.fitScreenCoordinates||r.pitch&&!r.pitch.isFirstChange())&&p.mapService.move(p.movingMethod,p.movingOptions,r.zoom&&p.zoom?p.zoom[0]:void 0,r.center?p.center:void 0,r.bearing&&p.bearing?p.bearing[0]:void 0,r.pitch&&p.pitch?p.pitch[0]:void 0):p.mapService.panTo(p.center,p.panToOptions)})()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Pt))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mgl-map"]],viewQuery:function(r,p){if(1&r&&l.Gf(Ls,7),2&r){let M;l.iGM(M=l.CRH())&&(p.mapContainer=M.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l._Bn([Pt]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(r,p){1&r&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),c})();var Yn=U(6838);const Ks="object"==typeof global&&global&&global.Object===Object&&global;var da="object"==typeof self&&self&&self.Object===Object&&self;const dr=Ks||da||Function("return this")(),hr=dr.Symbol;var il=Object.prototype,ec=il.hasOwnProperty,Er=il.toString,lr=hr?hr.toStringTag:void 0;var ha=Object.prototype.toString;var b=hr?hr.toStringTag:void 0;const A=function C(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":b&&b in Object(c)?function Rl(c){var h=ec.call(c,lr),r=c[lr];try{c[lr]=void 0;var p=!0}catch{}var M=Er.call(c);return p&&(h?c[lr]=r:delete c[lr]),M}(c):function y(c){return ha.call(c)}(c)},V=function B(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},Ue=function Be(c){if(!V(c))return!1;var h=A(c);return"[object Function]"==h||"[object GeneratorFunction]"==h||"[object AsyncFunction]"==h||"[object Proxy]"==h};var c,Oe=dr["__core-js_shared__"],mt=(c=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";var Ht=Function.prototype.toString;const Zt=function Ft(c){if(null!=c){try{return Ht.call(c)}catch{}try{return c+""}catch{}}return""};var sn=/^\[object .+?Constructor\]$/,z=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const de=function q(c){return!(!V(c)||function xt(c){return!!mt&&mt in c}(c))&&(Ue(c)?z:sn).test(Zt(c))},ln=function Ct(c,h){var r=function Ie(c,h){return c?.[h]}(c,h);return de(r)?r:void 0};var ci=function(){try{var c=ln(Object,"defineProperty");return c({},"",{}),c}catch{}}();const Bn=ci,vr=function ji(c,h,r){"__proto__"==h&&Bn?Bn(c,h,{configurable:!0,enumerable:!0,value:r,writable:!0}):c[h]=r},Zr=function Gr(c,h,r,p){for(var M=-1,F=null==c?0:c.length;++M<F;){var se=c[M];h(p,se,r(se),c)}return p};var pr=function Jr(c){return function(h,r,p){for(var M=-1,F=Object(h),se=p(h),xe=se.length;xe--;){var Ke=se[c?xe:++M];if(!1===r(F[Ke],Ke,F))break}return h}}();const Qr=pr,eo=function _o(c){return null!=c&&"object"==typeof c},ma=function fa(c){return eo(c)&&"[object Arguments]"==A(c)};var rl=Object.prototype,Na=rl.hasOwnProperty,Bc=rl.propertyIsEnumerable,Dr=ma(function(){return arguments}())?ma:function(c){return eo(c)&&Na.call(c,"callee")&&!Bc.call(c,"callee")};const Ba=Dr,zo=Array.isArray;var zc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Cc=zc&&"object"==typeof module&&module&&!module.nodeType&&module,bs=Cc&&Cc.exports===zc?dr.Buffer:void 0;const _l=(bs?bs.isBuffer:void 0)||function Ll(){return!1};var Uc=/^(?:0|[1-9]\d*)$/;const fu=function Wr(c,h){var r=typeof c;return!!(h=h??9007199254740991)&&("number"==r||"symbol"!=r&&Uc.test(c))&&c>-1&&c%1==0&&c<h},Ys=function Ec(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991};var qr={};qr["[object Float32Array]"]=qr["[object Float64Array]"]=qr["[object Int8Array]"]=qr["[object Int16Array]"]=qr["[object Int32Array]"]=qr["[object Uint8Array]"]=qr["[object Uint8ClampedArray]"]=qr["[object Uint16Array]"]=qr["[object Uint32Array]"]=!0,qr["[object Arguments]"]=qr["[object Array]"]=qr["[object ArrayBuffer]"]=qr["[object Boolean]"]=qr["[object DataView]"]=qr["[object Date]"]=qr["[object Error]"]=qr["[object Function]"]=qr["[object Map]"]=qr["[object Number]"]=qr["[object Object]"]=qr["[object RegExp]"]=qr["[object Set]"]=qr["[object String]"]=qr["[object WeakMap]"]=!1;const bu=function vu(c){return function(h){return c(h)}};var sd="object"==typeof exports&&exports&&!exports.nodeType&&exports,za=sd&&"object"==typeof module&&module&&!module.nodeType&&module,xu=za&&za.exports===sd&&Ks.process;const ic=function(){try{return za&&za.require&&za.require("util").types||xu&&xu.binding&&xu.binding("util")}catch{}}();var Hc=ic&&ic.isTypedArray;const rc=Hc?bu(Hc):function yu(c){return eo(c)&&Ys(c.length)&&!!qr[A(c)]};var nm=Object.prototype.hasOwnProperty;const wu=function im(c,h){var r=zo(c),p=!r&&Ba(c),M=!r&&!p&&_l(c),F=!r&&!p&&!M&&rc(c),se=r||p||M||F,xe=se?function rr(c,h){for(var r=-1,p=Array(c);++r<c;)p[r]=h(r);return p}(c.length,String):[],Ke=xe.length;for(var vt in c)(h||nm.call(c,vt))&&(!se||!("length"==vt||M&&("offset"==vt||"parent"==vt)||F&&("buffer"==vt||"byteLength"==vt||"byteOffset"==vt)||fu(vt,Ke)))&&xe.push(vt);return xe};var ad=Object.prototype;const yl=function Ep(c){var h=c&&c.constructor;return c===("function"==typeof h&&h.prototype||ad)},Dp=function Cu(c,h){return function(r){return c(h(r))}},om=Dp(Object.keys,Object);var Nl=Object.prototype.hasOwnProperty;const ud=function cd(c){return null!=c&&Ys(c.length)&&!Ue(c)},dd=function Du(c){return ud(c)?wu(c):function Eu(c){if(!yl(c))return om(c);var h=[];for(var r in Object(c))Nl.call(c,r)&&"constructor"!=r&&h.push(r);return h}(c)};var fh=function hd(c,h){return function(r,p){if(null==r)return r;if(!ud(r))return c(r,p);for(var M=r.length,F=h?M:-1,se=Object(r);(h?F--:++F<M)&&!1!==p(se[F],F,se););return r}}(function ao(c,h){return c&&Qr(c,h,dd)});const Gc=fh,Ip=function Tp(c,h,r,p){return Gc(c,function(M,F,se){h(p,M,r(M),se)}),p},Dc=function pd(c,h){return c===h||c!=c&&h!=h},oc=function Ap(c,h){for(var r=c.length;r--;)if(Dc(c[r][0],h))return r;return-1};var to=Array.prototype.splice;function Zc(c){var h=-1,r=null==c?0:c.length;for(this.clear();++h<r;){var p=c[h];this.set(p[0],p[1])}}Zc.prototype.clear=function Mu(){this.__data__=[],this.size=0},Zc.prototype.delete=function fd(c){var h=this.__data__,r=oc(h,c);return!(r<0||(r==h.length-1?h.pop():to.call(h,r,1),--this.size,0))},Zc.prototype.get=function _h(c){var h=this.__data__,r=oc(h,c);return r<0?void 0:h[r][1]},Zc.prototype.has=function am(c){return oc(this.__data__,c)>-1},Zc.prototype.set=function cm(c,h){var r=this.__data__,p=oc(r,c);return p<0?(++this.size,r.push([c,h])):r[p][1]=h,this};const md=Zc,Mc=ln(dr,"Map"),Bl=ln(Object,"create");var _d=Object.prototype.hasOwnProperty;var Tc=Object.prototype.hasOwnProperty;function Va(c){var h=-1,r=null==c?0:c.length;for(this.clear();++h<r;){var p=c[h];this.set(p[0],p[1])}}Va.prototype.clear=function Iu(){this.__data__=Bl?Bl(null):{},this.size=0},Va.prototype.delete=function Np(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h},Va.prototype.get=function dm(c){var h=this.__data__;if(Bl){var r=h[c];return"__lodash_hash_undefined__"===r?void 0:r}return _d.call(h,c)?h[c]:void 0},Va.prototype.has=function Bp(c){var h=this.__data__;return Bl?void 0!==h[c]:Tc.call(h,c)},Va.prototype.set=function hm(c,h){var r=this.__data__;return this.size+=this.has(c)?0:1,r[c]=Bl&&void 0===h?"__lodash_hash_undefined__":h,this};const Eh=Va,Pu=function gm(c,h){var r=c.__data__;return function mm(c){var h=typeof c;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==c:null===c}(h)?r["string"==typeof h?"string":"hash"]:r.map};function Ac(c){var h=-1,r=null==c?0:c.length;for(this.clear();++h<r;){var p=c[h];this.set(p[0],p[1])}}Ac.prototype.clear=function pm(){this.size=0,this.__data__={hash:new Eh,map:new(Mc||md),string:new Eh}},Ac.prototype.delete=function Ou(c){var h=Pu(this,c).delete(c);return this.size-=h?1:0,h},Ac.prototype.get=function zp(c){return Pu(this,c).get(c)},Ac.prototype.has=function Wc(c){return Pu(this,c).has(c)},Ac.prototype.set=function ga(c,h){var r=Pu(this,c),p=r.size;return r.set(c,h),this.size+=r.size==p?0:1,this};const xd=Ac;function Kc(c){var h=this.__data__=new md(c);this.size=h.size}Kc.prototype.clear=function Su(){this.__data__=new md,this.size=0},Kc.prototype.delete=function yh(c){var h=this.__data__,r=h.delete(c);return this.size=h.size,r},Kc.prototype.get=function vh(c){return this.__data__.get(c)},Kc.prototype.has=function um(c){return this.__data__.has(c)},Kc.prototype.set=function qc(c,h){var r=this.__data__;if(r instanceof md){var p=r.__data__;if(!Mc||p.length<199)return p.push([c,h]),this.size=++r.size,this;r=this.__data__=new xd(p)}return r.set(c,h),this.size=r.size,this};const Yc=Kc;function Sh(c){var h=-1,r=null==c?0:c.length;for(this.__data__=new xd;++h<r;)this.add(c[h])}Sh.prototype.add=Sh.prototype.push=function Dh(c){return this.__data__.set(c,"__lodash_hash_undefined__"),this},Sh.prototype.has=function vm(c){return this.__data__.has(c)};const Hg=Sh,ku=function Xc(c,h){for(var r=-1,p=null==c?0:c.length;++r<p;)if(h(c[r],r,c))return!0;return!1},$g=function bm(c,h){return c.has(h)},Ru=function jp(c,h,r,p,M,F){var se=1&r,xe=c.length,Ke=h.length;if(xe!=Ke&&!(se&&Ke>xe))return!1;var vt=F.get(c),Kt=F.get(h);if(vt&&Kt)return vt==h&&Kt==c;var Jt=-1,Dn=!0,ri=2&r?new Hg:void 0;for(F.set(c,h),F.set(h,c);++Jt<xe;){var qn=c[Jt],Xn=h[Jt];if(p)var bi=se?p(Xn,qn,Jt,h,c,F):p(qn,Xn,Jt,c,h,F);if(void 0!==bi){if(bi)continue;Dn=!1;break}if(ri){if(!ku(h,function(ki,cr){if(!$g(ri,cr)&&(qn===ki||M(qn,ki,r,p,F)))return ri.push(cr)})){Dn=!1;break}}else if(qn!==Xn&&!M(qn,Xn,r,p,F)){Dn=!1;break}}return F.delete(c),F.delete(h),Dn},ac=dr.Uint8Array,Pc=function Jc(c){var h=-1,r=Array(c.size);return c.forEach(function(p,M){r[++h]=[M,p]}),r},Cd=function Qc(c){var h=-1,r=Array(c.size);return c.forEach(function(p){r[++h]=p}),r};var Vl=hr?hr.prototype:void 0,Lu=Vl?Vl.valueOf:void 0;const Dd=function xs(c,h){for(var r=-1,p=h.length,M=c.length;++r<p;)c[M+r]=h[r];return c},Fu=function qp(c,h,r){var p=h(c);return zo(c)?p:Dd(p,r(c))},Oh=function Nu(){return[]};var Bu=Object.prototype.propertyIsEnumerable,zu=Object.getOwnPropertySymbols,Kp=zu?function(c){return null==c?[]:(c=Object(c),function ls(c,h){for(var r=-1,p=null==c?0:c.length,M=0,F=[];++r<p;){var se=c[r];h(se,r,c)&&(F[M++]=se)}return F}(zu(c),function(h){return Bu.call(c,h)}))}:Oh;const kh=Kp,Rh=function Yp(c){return Fu(c,dd,kh)};var Xp=Object.prototype.hasOwnProperty;const Td=ln(dr,"DataView"),Qp=ln(dr,"Promise"),Id=ln(dr,"Set"),Xs=ln(dr,"WeakMap");var Ad="[object Map]",Pd="[object Promise]",lc="[object Set]",ef="[object WeakMap]",cc="[object DataView]",tf=Zt(Td),Od=Zt(Mc),Uu=Zt(Qp),Nh=Zt(Id),nf=Zt(Xs),ru=A;(Td&&ru(new Td(new ArrayBuffer(1)))!=cc||Mc&&ru(new Mc)!=Ad||Qp&&ru(Qp.resolve())!=Pd||Id&&ru(new Id)!=lc||Xs&&ru(new Xs)!=ef)&&(ru=function(c){var h=A(c),r="[object Object]"==h?c.constructor:void 0,p=r?Zt(r):"";if(p)switch(p){case tf:return cc;case Od:return Ad;case Uu:return Pd;case Nh:return lc;case nf:return ef}return h});const bl=ru;var ju="[object Arguments]",zr="[object Array]",Ua="[object Object]",zh=Object.prototype.hasOwnProperty;const af=function sf(c,h,r,p,M,F){var se=zo(c),xe=zo(h),Ke=se?zr:bl(c),vt=xe?zr:bl(h),Kt=(Ke=Ke==ju?Ua:Ke)==Ua,Jt=(vt=vt==ju?Ua:vt)==Ua,Dn=Ke==vt;if(Dn&&_l(c)){if(!_l(h))return!1;se=!0,Kt=!1}if(Dn&&!Kt)return F||(F=new Yc),se||rc(c)?Ru(c,h,r,p,M,F):function Zp(c,h,r,p,M,F,se){switch(r){case"[object DataView]":if(c.byteLength!=h.byteLength||c.byteOffset!=h.byteOffset)return!1;c=c.buffer,h=h.buffer;case"[object ArrayBuffer]":return!(c.byteLength!=h.byteLength||!F(new ac(c),new ac(h)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Dc(+c,+h);case"[object Error]":return c.name==h.name&&c.message==h.message;case"[object RegExp]":case"[object String]":return c==h+"";case"[object Map]":var xe=Pc;case"[object Set]":if(xe||(xe=Cd),c.size!=h.size&&!(1&p))return!1;var vt=se.get(c);if(vt)return vt==h;p|=2,se.set(c,h);var Kt=Ru(xe(c),xe(h),p,M,F,se);return se.delete(c),Kt;case"[object Symbol]":if(Lu)return Lu.call(c)==Lu.call(h)}return!1}(c,h,Ke,r,p,M,F);if(!(1&r)){var ri=Kt&&zh.call(c,"__wrapped__"),qn=Jt&&zh.call(h,"__wrapped__");if(ri||qn){var Xn=ri?c.value():c,bi=qn?h.value():h;return F||(F=new Yc),M(Xn,bi,r,p,F)}}return!!Dn&&(F||(F=new Yc),function Lh(c,h,r,p,M,F){var se=1&r,xe=Rh(c),Ke=xe.length;if(Ke!=Rh(h).length&&!se)return!1;for(var Jt=Ke;Jt--;){var Dn=xe[Jt];if(!(se?Dn in h:Xp.call(h,Dn)))return!1}var ri=F.get(c),qn=F.get(h);if(ri&&qn)return ri==h&&qn==c;var Xn=!0;F.set(c,h),F.set(h,c);for(var bi=se;++Jt<Ke;){var ki=c[Dn=xe[Jt]],cr=h[Dn];if(p)var Kr=se?p(cr,ki,Dn,h,c,F):p(ki,cr,Dn,c,h,F);if(!(void 0===Kr?ki===cr||M(ki,cr,r,p,F):Kr)){Xn=!1;break}bi||(bi="constructor"==Dn)}if(Xn&&!bi){var Vr=c.constructor,na=h.constructor;Vr!=na&&"constructor"in c&&"constructor"in h&&!("function"==typeof Vr&&Vr instanceof Vr&&"function"==typeof na&&na instanceof na)&&(Xn=!1)}return F.delete(c),F.delete(h),Xn}(c,h,r,p,M,F))},kd=function Vh(c,h,r,p,M){return c===h||(null==c||null==h||!eo(c)&&!eo(h)?c!=c&&h!=h:af(c,h,r,p,Vh,M))},Js=function lf(c){return c==c&&!V(c)},Rd=function uc(c,h){return function(r){return null!=r&&r[c]===h&&(void 0!==h||c in Object(r))}},cf=function Hh(c){var h=function ou(c){for(var h=dd(c),r=h.length;r--;){var p=h[r],M=c[p];h[r]=[p,M,Js(M)]}return h}(c);return 1==h.length&&h[0][2]?Rd(h[0][0],h[0][1]):function(r){return r===c||function Uh(c,h,r,p){var M=r.length,F=M,se=!p;if(null==c)return!F;for(c=Object(c);M--;){var xe=r[M];if(se&&xe[2]?xe[1]!==c[xe[0]]:!(xe[0]in c))return!1}for(;++M<F;){var Ke=(xe=r[M])[0],vt=c[Ke],Kt=xe[1];if(se&&xe[2]){if(void 0===vt&&!(Ke in c))return!1}else{var Jt=new Yc;if(p)var Dn=p(vt,Kt,Ke,c,h,Jt);if(!(void 0===Dn?kd(Kt,vt,3,p,Jt):Dn))return!1}}return!0}(r,c,h)}},su=function Ld(c){return"symbol"==typeof c||eo(c)&&"[object Symbol]"==A(c)};var au=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fd=/^\w*$/;const o=function uf(c,h){if(zo(c))return!1;var r=typeof c;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=c&&!su(c))||Fd.test(c)||!au.test(c)||null!=h&&c in Object(h)};function a(c,h){if("function"!=typeof c||null!=h&&"function"!=typeof h)throw new TypeError("Expected a function");var r=function(){var p=arguments,M=h?h.apply(this,p):p[0],F=r.cache;if(F.has(M))return F.get(M);var se=c.apply(this,p);return r.cache=F.set(M,se)||F,se};return r.cache=new(a.Cache||xd),r}a.Cache=xd;const f=a;var O=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,K=function w(c){var h=f(c,function(p){return 500===r.size&&r.clear(),p}),r=h.cache;return h}(function(c){var h=[];return 46===c.charCodeAt(0)&&h.push(""),c.replace(O,function(r,p,M,F){h.push(M?F.replace(N,"$1"):p||r)}),h});const ie=K;var Ce=hr?hr.prototype:void 0,Je=Ce?Ce.toString:void 0;const Mt=function et(c){if("string"==typeof c)return c;if(zo(c))return function oe(c,h){for(var r=-1,p=null==c?0:c.length,M=Array(p);++r<p;)M[r]=h(c[r],r,c);return M}(c,et)+"";if(su(c))return Je?Je.call(c):"";var h=c+"";return"0"==h&&1/c==-1/0?"-0":h},rn=function Rt(c,h){return zo(c)?c:o(c,h)?[c]:ie(function Bt(c){return null==c?"":Mt(c)}(c))},Hn=function Vn(c){if("string"==typeof c||su(c))return c;var h=c+"";return"0"==h&&1/c==-1/0?"-0":h},Tn=function Fn(c,h){for(var r=0,p=(h=rn(h,c)).length;null!=c&&r<p;)c=c[Hn(h[r++])];return r&&r==p?c:void 0},gn=function Rn(c,h){return null!=c&&h in Object(c)},br=function Pn(c,h){return null!=c&&function si(c,h,r){for(var p=-1,M=(h=rn(h,c)).length,F=!1;++p<M;){var se=Hn(h[p]);if(!(F=null!=c&&r(c,se)))break;c=c[se]}return F||++p!=M?F:!!(M=null==c?0:c.length)&&Ys(M)&&fu(se,M)&&(zo(c)||Ba(c))}(c,h,gn)},Yo=function _a(c,h){return o(c)&&Js(h)?Rd(Hn(c),h):function(r){var p=function En(c,h,r){var p=null==c?void 0:Tn(c,h);return void 0===p?r:p}(r,c);return void 0===p&&p===h?br(r,c):kd(h,p,3)}},So=function no(c){return c},Xo=function jo(c){return o(c)?function Uo(c){return function(h){return h?.[c]}}(Hn(c)):function Ns(c){return function(h){return Tn(h,c)}}(c)};var Zi=Object.prototype.hasOwnProperty,ya=function us(c,h){return function(r,p){var M=zo(r)?Zr:Ip,F=h?h():{};return M(r,c,function co(c){return"function"==typeof c?c:null==c?So:"object"==typeof c?zo(c)?Yo(c[0],c[1]):cf(c):Xo(c)}(p),F)}}(function(c,h,r){Zi.call(c,r)?c[r].push(h):vr(c,r,[h])});const ds=ya;var sl=Object.prototype.hasOwnProperty;const ba=function Qs(c,h,r){var p=c[h];(!sl.call(c,h)||!Dc(p,r)||void 0===r&&!(h in c))&&vr(c,h,r)},bo=function ea(c,h,r,p){var M=!r;r||(r={});for(var F=-1,se=h.length;++F<se;){var xe=h[F],Ke=p?p(r[xe],c[xe],xe,r,c):void 0;void 0===Ke&&(Ke=c[xe]),M?vr(r,xe,Ke):ba(r,xe,Ke)}return r};var jl=Object.prototype.hasOwnProperty;const Nd=function hf(c){if(!V(c))return function df(c){var h=[];if(null!=c)for(var r in Object(c))h.push(r);return h}(c);var h=yl(c),r=[];for(var p in c)"constructor"==p&&(h||!jl.call(c,p))||r.push(p);return r},Zu=function Zh(c){return ud(c)?wu(c,!0):Nd(c)};var Dm="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bd=Dm&&"object"==typeof module&&module&&!module.nodeType&&module,Sm=Bd&&Bd.exports===Dm?dr.Buffer:void 0,Oc=Sm?Sm.allocUnsafe:void 0;const ta=Dp(Object.getPrototypeOf,Object);var dc=Object.getOwnPropertySymbols?function(c){for(var h=[];c;)Dd(h,kh(c)),c=ta(c);return h}:Oh;const mf=dc,gf=function Hw(c){return Fu(c,Zu,mf)};var Tm=Object.prototype.hasOwnProperty;const Pm=function $w(c){var h=new c.constructor(c.byteLength);return new ac(h).set(new ac(c)),h};var lb=/\w*$/;var Yg=hr?hr.prototype:void 0,cb=Yg?Yg.valueOf:void 0;const pb=function t_(c,h,r){var p=c.constructor;switch(h){case"[object ArrayBuffer]":return Pm(c);case"[object Boolean]":case"[object Date]":return new p(+c);case"[object DataView]":return function sb(c,h){var r=h?Pm(c.buffer):c.buffer;return new c.constructor(r,c.byteOffset,c.byteLength)}(c,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function ub(c,h){var r=h?Pm(c.buffer):c.buffer;return new c.constructor(r,c.byteOffset,c.length)}(c,r);case"[object Map]":case"[object Set]":return new p;case"[object Number]":case"[object String]":return new p(c);case"[object RegExp]":return function Kg(c){var h=new c.constructor(c.source,lb.exec(c));return h.lastIndex=c.lastIndex,h}(c);case"[object Symbol]":return function Xg(c){return cb?Object(cb.call(c)):{}}(c)}};var n_=Object.create,i_=function(){function c(){}return function(h){if(!V(h))return{};if(n_)return n_(h);c.prototype=h;var r=new c;return c.prototype=void 0,r}}();const fb=i_;var vf=ic&&ic.isMap;const r_=vf?bu(vf):function Fm(c){return eo(c)&&"[object Map]"==bl(c)};var zm=ic&&ic.isSet;const gb=zm?bu(zm):function Nm(c){return eo(c)&&"[object Set]"==bl(c)};var a_="[object Arguments]",Um="[object Function]",xf="[object Object]",io={};io[a_]=io["[object Array]"]=io["[object ArrayBuffer]"]=io["[object DataView]"]=io["[object Boolean]"]=io["[object Date]"]=io["[object Float32Array]"]=io["[object Float64Array]"]=io["[object Int8Array]"]=io["[object Int16Array]"]=io["[object Int32Array]"]=io["[object Map]"]=io["[object Number]"]=io[xf]=io["[object RegExp]"]=io["[object Set]"]=io["[object String]"]=io["[object Symbol]"]=io["[object Uint8Array]"]=io["[object Uint8ClampedArray]"]=io["[object Uint16Array]"]=io["[object Uint32Array]"]=!0,io["[object Error]"]=io[Um]=io["[object WeakMap]"]=!1;const Ab=function qh(c,h,r,p,M,F){var se,xe=1&h,Ke=2&h,vt=4&h;if(r&&(se=M?r(c,p,M,F):r(c)),void 0!==se)return se;if(!V(c))return c;var Kt=zo(c);if(Kt){if(se=function Im(c){var h=c.length,r=new c.constructor(h);return h&&"string"==typeof c[0]&&Tm.call(c,"index")&&(r.index=c.index,r.input=c.input),r}(c),!xe)return function kc(c,h){var r=-1,p=c.length;for(h||(h=Array(p));++r<p;)h[r]=c[r];return h}(c,se)}else{var Jt=bl(c),Dn=Jt==Um||"[object GeneratorFunction]"==Jt;if(_l(c))return function ff(c,h){if(h)return c.slice();var r=c.length,p=Oc?Oc(r):new c.constructor(r);return c.copy(p),p}(c,xe);if(Jt==xf||Jt==a_||Dn&&!M){if(se=Ke||Dn?{}:function mb(c){return"function"!=typeof c.constructor||yl(c)?{}:fb(ta(c))}(c),!xe)return Ke?function jw(c,h){return bo(c,mf(c),h)}(c,function pf(c,h){return c&&bo(h,Zu(h),c)}(se,c)):function Cs(c,h){return bo(c,kh(c),h)}(c,function Ul(c,h){return c&&bo(h,dd(h),c)}(se,c))}else{if(!io[Jt])return M?c:{};se=pb(c,Jt,xe)}}F||(F=new Yc);var ri=F.get(c);if(ri)return ri;F.set(c,se),gb(c)?c.forEach(function(bi){se.add(qh(bi,h,r,bi,c,F))}):r_(c)&&c.forEach(function(bi,ki){se.set(ki,qh(bi,h,r,ki,c,F))});var Xn=Kt?void 0:(vt?Ke?gf:Rh:Ke?Zu:dd)(c);return function hs(c,h){for(var r=-1,p=null==c?0:c.length;++r<p&&!1!==h(c[r],r,c););}(Xn||c,function(bi,ki){Xn&&(bi=c[ki=bi]),ba(se,ki,qh(bi,h,r,ki,c,F))}),se};function m_(c){return"object"==typeof c&&null!=c&&1===c.nodeType}function Kh(c,h){return(!h||"hidden"!==c)&&"visible"!==c&&"clip"!==c}function Yh(c,h){if(c.clientHeight<c.scrollHeight||c.clientWidth<c.scrollWidth){var r=getComputedStyle(c,null);return Kh(r.overflowY,h)||Kh(r.overflowX,h)||!!(M=function(F){if(!F.ownerDocument||!F.ownerDocument.defaultView)return null;try{return F.ownerDocument.defaultView.frameElement}catch{return null}}(p=c))&&(M.clientHeight<p.scrollHeight||M.clientWidth<p.scrollWidth)}var p,M;return!1}function Wu(c,h,r,p,M,F,se,xe){return F<c&&se>h||F>c&&se<h?0:F<=c&&xe<=r||se>=h&&xe>=r?F-c-p:se>h&&xe<r||F<c&&xe>r?se-h+M:0}function Rb(c,h){var r=window,p=h.scrollMode,M=h.block,F=h.inline,se=h.boundary,xe=h.skipOverflowHiddenElements,Ke="function"==typeof se?se:function(fp){return fp!==se};if(!m_(c))throw new TypeError("Invalid target");for(var vt=document.scrollingElement||document.documentElement,Kt=[],Jt=c;m_(Jt)&&Ke(Jt);){if((Jt=Jt.parentElement)===vt){Kt.push(Jt);break}null!=Jt&&Jt===document.body&&Yh(Jt)&&!Yh(document.documentElement)||null!=Jt&&Yh(Jt,xe)&&Kt.push(Jt)}for(var Dn=r.visualViewport?r.visualViewport.width:innerWidth,ri=r.visualViewport?r.visualViewport.height:innerHeight,qn=window.scrollX||pageXOffset,Xn=window.scrollY||pageYOffset,bi=c.getBoundingClientRect(),ki=bi.height,cr=bi.width,Kr=bi.top,Vr=bi.right,na=bi.bottom,wa=bi.left,Lr="start"===M||"nearest"===M?Kr:"end"===M?na:Kr+ki/2,Qo="center"===F?wa+cr/2:"end"===F?Vr:wa,Ca=[],$a=0;$a<Kt.length;$a++){var Ms=Kt[$a],cl=Ms.getBoundingClientRect(),Dl=cl.height,nd=cl.width,gc=cl.top,ii=cl.right,mi=cl.bottom,Ci=cl.left;if("if-needed"===p&&Kr>=0&&wa>=0&&na<=ri&&Vr<=Dn&&Kr>=gc&&na<=mi&&wa>=Ci&&Vr<=ii)return Ca;var tr=getComputedStyle(Ms),uo=parseInt(tr.borderLeftWidth,10),Ga=parseInt(tr.borderTopWidth,10),Ss=parseInt(tr.borderRightWidth,10),Ml=parseInt(tr.borderBottomWidth,10),Tr=0,ql=0,oh="offsetWidth"in Ms?Ms.offsetWidth-Ms.clientWidth-uo-Ss:0,$o="offsetHeight"in Ms?Ms.offsetHeight-Ms.clientHeight-Ga-Ml:0;if(vt===Ms)Tr="start"===M?Lr:"end"===M?Lr-ri:"nearest"===M?Wu(Xn,Xn+ri,ri,Ga,Ml,Xn+Lr,Xn+Lr+ki,ki):Lr-ri/2,ql="start"===F?Qo:"center"===F?Qo-Dn/2:"end"===F?Qo-Dn:Wu(qn,qn+Dn,Dn,uo,Ss,qn+Qo,qn+Qo+cr,cr),Tr=Math.max(0,Tr+Xn),ql=Math.max(0,ql+qn);else{Tr="start"===M?Lr-gc-Ga:"end"===M?Lr-mi+Ml+$o:"nearest"===M?Wu(gc,mi,Dl,Ga,Ml+$o,Lr,Lr+ki,ki):Lr-(gc+Dl/2)+$o/2,ql="start"===F?Qo-Ci-uo:"center"===F?Qo-(Ci+nd/2)+oh/2:"end"===F?Qo-ii+Ss+oh:Wu(Ci,ii,nd,uo,Ss+oh,Qo,Qo+cr,cr);var _c=Ms.scrollLeft,Za=Ms.scrollTop;Lr+=Za-(Tr=Math.max(0,Math.min(Za+Tr,Ms.scrollHeight-Dl+$o))),Qo+=_c-(ql=Math.max(0,Math.min(_c+ql,Ms.scrollWidth-nd+oh)))}Ca.push({el:Ms,top:Tr,left:ql})}return Ca}function wf(c){return c===Object(c)&&0!==Object.keys(c).length}let $m=(()=>{class c{constructor(){this.resize$=new re.x}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Es=U(4006),Lc=U(3619),pc=U(4859),pi=U(3238),Ri=U(1281),Hl=U(2687),jd=U(5017),Cl=U(9521);let Lb=(()=>{class c{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(r){this._vertical=(0,Ri.Ig)(r)}get inset(){return this._inset}set inset(r){this._inset=(0,Ri.Ig)(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,p){2&r&&(l.uIk("aria-orientation",p.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",p.vertical)("mat-divider-horizontal",!p.vertical)("mat-divider-inset",p.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(r,p){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),c})(),Fb=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pi.BQ,pi.BQ]}),c})();const qu=["*"],s1=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Nb=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Gm=(0,pi.Id)((0,pi.Kr)(class{})),Zm=(0,pi.Kr)(class{}),b_=new l.OlP("MatList"),Cf=new l.OlP("MatNavList");let Ub=(()=>{class c extends Gm{constructor(){super(...arguments),this._stateChanges=new re.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[l._Bn([{provide:Cf,useExisting:c}]),l.qOj,l.TTD],ngContentSelectors:qu,decls:1,vars:0,template:function(r,p){1&r&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),c})(),jb=(()=>{class c extends Gm{constructor(r){super(),this._elementRef=r,this._stateChanges=new re.x,"action-list"===this._getListType()&&(r.nativeElement.classList.add("mat-action-list"),r.nativeElement.setAttribute("role","group"))}_getListType(){const r=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===r?"list":"mat-action-list"===r?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:b_,useExisting:c}]),l.qOj,l.TTD],ngContentSelectors:qu,decls:1,vars:0,template:function(r,p){1&r&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),c})(),x_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),c})(),w_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),c})(),Hb=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=l.lG2({type:c,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),c})(),C_=(()=>{class c extends Zm{constructor(r,p,M,F){super(),this._element=r,this._isInteractiveList=!1,this._destroyed=new re.x,this._disabled=!1,this._isInteractiveList=!!(M||F&&"action-list"===F._getListType()),this._list=M||F;const se=this._getHostElement();"button"===se.nodeName.toLowerCase()&&!se.hasAttribute("type")&&se.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,Ai.R)(this._destroyed)).subscribe(()=>{p.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(r){this._disabled=(0,Ri.Ig)(r)}ngAfterContentInit(){(0,pi.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Cf,8),l.Y36(b_,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,p,M){if(1&r&&(l.Suo(M,x_,5),l.Suo(M,w_,5),l.Suo(M,pi.X2,5)),2&r){let F;l.iGM(F=l.CRH())&&(p._avatar=F.first),l.iGM(F=l.CRH())&&(p._icon=F.first),l.iGM(F=l.CRH())&&(p._lines=F)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(r,p){2&r&&l.ekj("mat-list-item-disabled",p.disabled)("mat-list-item-with-avatar",p._avatar||p._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:Nb,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(r,p){1&r&&(l.F$t(s1),l.TgZ(0,"span",0),l._UZ(1,"span",1),l.Hsn(2),l.TgZ(3,"span",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&r&&(l.xp6(1),l.Q6J("matRippleTrigger",p._getHostElement())("matRippleDisabled",p._isRippleDisabled()))},dependencies:[pi.wG],encapsulation:2,changeDetection:0}),c})(),Wm=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pi.uc,pi.si,pi.BQ,pi.us,fe.ez,pi.uc,pi.BQ,pi.us,Fb]}),c})();var Yu=U(9549),ps=U(3353),Jh=U(515);const zs=(0,ps.i$)({passive:!0});let Xu=(()=>{class c{constructor(r,p){this._platform=r,this._ngZone=p,this._monitoredElements=new Map}monitor(r){if(!this._platform.isBrowser)return Jh.E;const p=(0,Ri.fI)(r),M=this._monitoredElements.get(p);if(M)return M.subject;const F=new re.x,se="cdk-text-field-autofilled",xe=Ke=>{"cdk-text-field-autofill-start"!==Ke.animationName||p.classList.contains(se)?"cdk-text-field-autofill-end"===Ke.animationName&&p.classList.contains(se)&&(p.classList.remove(se),this._ngZone.run(()=>F.next({target:Ke.target,isAutofilled:!1}))):(p.classList.add(se),this._ngZone.run(()=>F.next({target:Ke.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{p.addEventListener("animationstart",xe,zs),p.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(p,{subject:F,unlisten:()=>{p.removeEventListener("animationstart",xe,zs)}}),F}stopMonitoring(r){const p=(0,Ri.fI)(r),M=this._monitoredElements.get(p);M&&(M.unlisten(),M.subject.complete(),p.classList.remove("cdk-text-field-autofill-monitored"),p.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(p))}ngOnDestroy(){this._monitoredElements.forEach((r,p)=>this.stopMonitoring(p))}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(ps.t4),l.LFG(l.R0b))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Df=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})();const Hd=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),$d=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Gd=0;const Zd=(0,pi.FD)(class{constructor(c,h,r,p){this._defaultErrorStateMatcher=c,this._parentForm=h,this._parentFormGroup=r,this.ngControl=p,this.stateChanges=new re.x}});let Wd=(()=>{class c extends Zd{constructor(r,p,M,F,se,xe,Ke,vt,Kt,Jt){super(xe,F,se,M),this._elementRef=r,this._platform=p,this._autofillMonitor=vt,this._formField=Jt,this._uid="mat-input-"+Gd++,this.focused=!1,this.stateChanges=new re.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(qn=>(0,ps.qK)().has(qn)),this._iOSKeyupListener=qn=>{const Xn=qn.target;!Xn.value&&0===Xn.selectionStart&&0===Xn.selectionEnd&&(Xn.setSelectionRange(1,1),Xn.setSelectionRange(0,0))};const Dn=this._elementRef.nativeElement,ri=Dn.nodeName.toLowerCase();this._inputValueAccessor=Ke||Dn,this._previousNativeValue=this.value,this.id=this.id,p.IOS&&Kt.runOutsideAngular(()=>{r.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ri,this._isTextarea="textarea"===ri,this._isInFormField=!!Jt,this._isNativeSelect&&(this.controlType=Dn.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(r){this._disabled=(0,Ri.Ig)(r),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(r){this._id=r||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Es.kI.required)??!1}set required(r){this._required=(0,Ri.Ig)(r)}get type(){return this._type}set type(r){this._type=r||"text",this._validateType(),!this._isTextarea&&(0,ps.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(r){r!==this.value&&(this._inputValueAccessor.value=r,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(r){this._readonly=(0,Ri.Ig)(r)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(r=>{this.autofilled=r.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(r){this._elementRef.nativeElement.focus(r)}_focusChanged(r){r!==this.focused&&(this.focused=r,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const r=this._formField,p=r&&"legacy"===r.appearance&&!r._hasLabel?.()?null:this.placeholder;if(p!==this._previousPlaceholder){const M=this._elementRef.nativeElement;this._previousPlaceholder=p,p?M.setAttribute("placeholder",p):M.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const r=this._elementRef.nativeElement.value;this._previousNativeValue!==r&&(this._previousNativeValue=r,this.stateChanges.next())}_validateType(){$d.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let r=this._elementRef.nativeElement.validity;return r&&r.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const r=this._elementRef.nativeElement,p=r.options[0];return this.focused||r.multiple||!this.empty||!!(r.selectedIndex>-1&&p&&p.label)}return this.focused||!this.empty}setDescribedByIds(r){r.length?this._elementRef.nativeElement.setAttribute("aria-describedby",r.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const r=this._elementRef.nativeElement;return this._isNativeSelect&&(r.multiple||r.size>1)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(ps.t4),l.Y36(Es.a5,10),l.Y36(Es.F,8),l.Y36(Es.sg,8),l.Y36(pi.rD),l.Y36(Hd,10),l.Y36(Xu),l.Y36(l.R0b),l.Y36(Yu.G_,8))},c.\u0275dir=l.lG2({type:c,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(r,p){1&r&&l.NdJ("focus",function(){return p._focusChanged(!0)})("blur",function(){return p._focusChanged(!1)})("input",function(){return p._onInput()}),2&r&&(l.Ikx("disabled",p.disabled)("required",p.required),l.uIk("id",p.id)("data-placeholder",p.placeholder)("name",p.name||null)("readonly",p.readonly&&!p._isNativeSelect||null)("aria-invalid",p.empty&&p.required?null:p.errorState)("aria-required",p.required),l.ekj("mat-input-server",p._isServer)("mat-native-select-inline",p._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:Yu.Eo,useExisting:c}]),l.qOj,l.TTD]}),c})(),qd=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[pi.rD],imports:[Df,Yu.lN,pi.BQ,Df,Yu.lN]}),c})();var Ds=U(8605),Ju=U(445),Km=U(9718),D_=U(1884);const ep=["*"],M_=["content"];function S_(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(r);const M=l.oxw();return l.KtG(M._onBackdropClicked())}),l.qZA()}if(2&c){const r=l.oxw();l.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function T_(c,h){1&c&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const I_=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],A_=["mat-drawer","mat-drawer-content","*"];function P_(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){l.CHM(r);const M=l.oxw();return l.KtG(M._onBackdropClicked())}),l.qZA()}if(2&c){const r=l.oxw();l.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function Gb(c,h){1&c&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const Zb=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],O_=["mat-sidenav","mat-sidenav-content","*"],Ym={transformDrawer:(0,ke.X$)("transform",[(0,ke.SB)("open, open-instant",(0,ke.oB)({transform:"none",visibility:"visible"})),(0,ke.SB)("void",(0,ke.oB)({"box-shadow":"none",visibility:"hidden"})),(0,ke.eR)("void => open-instant",(0,ke.jt)("0ms")),(0,ke.eR)("void <=> open, open-instant => void",(0,ke.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Xm=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Mf(){return!1}}),Jm=new l.OlP("MAT_DRAWER_CONTAINER");let Qu=(()=>{class c extends Ds.PQ{constructor(r,p,M,F,se){super(M,F,se),this._changeDetectorRef=r,this._container=p}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>R_)),l.Y36(l.SBq),l.Y36(Ds.mF),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,p){2&r&&l.Udp("margin-left",p._container._contentMargins.left,"px")("margin-right",p._container._contentMargins.right,"px")},features:[l._Bn([{provide:Ds.PQ,useExisting:c}]),l.qOj],ngContentSelectors:ep,decls:1,vars:0,template:function(r,p){1&r&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),Sf=(()=>{class c{constructor(r,p,M,F,se,xe,Ke,vt){this._elementRef=r,this._focusTrapFactory=p,this._focusMonitor=M,this._platform=F,this._ngZone=se,this._interactivityChecker=xe,this._doc=Ke,this._container=vt,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new re.x,this._animationEnd=new re.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,_i.h)(Kt=>Kt),(0,Mn.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,_i.h)(Kt=>Kt.fromState!==Kt.toState&&0===Kt.toState.indexOf("open")),(0,Km.h)(void 0)),this._closedStream=this.openedChange.pipe((0,_i.h)(Kt=>!Kt),(0,Mn.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,_i.h)(Kt=>Kt.fromState!==Kt.toState&&"void"===Kt.toState),(0,Km.h)(void 0)),this._destroyed=new re.x,this.onPositionChanged=new l.vpe,this._modeChanged=new re.x,this.openedChange.subscribe(Kt=>{Kt?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,vi.R)(this._elementRef.nativeElement,"keydown").pipe((0,_i.h)(Kt=>Kt.keyCode===Cl.hY&&!this.disableClose&&!(0,Cl.Vb)(Kt)),(0,Ai.R)(this._destroyed)).subscribe(Kt=>this._ngZone.run(()=>{this.close(),Kt.stopPropagation(),Kt.preventDefault()}))}),this._animationEnd.pipe((0,D_.x)((Kt,Jt)=>Kt.fromState===Jt.fromState&&Kt.toState===Jt.toState)).subscribe(Kt=>{const{fromState:Jt,toState:Dn}=Kt;(0===Dn.indexOf("open")&&"void"===Jt||"void"===Dn&&0===Jt.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(r){(r="end"===r?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(r),this._position=r,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(r){this._mode=r,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(r){this._disableClose=(0,Ri.Ig)(r)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(r){("true"===r||"false"===r||null==r)&&(r=(0,Ri.Ig)(r)),this._autoFocus=r}get opened(){return this._opened}set opened(r){this.toggle((0,Ri.Ig)(r))}_forceFocus(r,p){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const M=()=>{r.removeEventListener("blur",M),r.removeEventListener("mousedown",M),r.removeAttribute("tabindex")};r.addEventListener("blur",M),r.addEventListener("mousedown",M)})),r.focus(p)}_focusByCssSelector(r,p){let M=this._elementRef.nativeElement.querySelector(r);M&&this._forceFocus(M,p)}_takeFocus(){if(!this._focusTrap)return;const r=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(p=>{!p&&"function"==typeof this._elementRef.nativeElement.focus&&r.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(r){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,r):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const r=this._doc.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(r){return this.toggle(!0,r)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(r=!this.opened,p){r&&p&&(this._openedVia=p);const M=this._setOpen(r,!r&&this._isFocusWithinDrawer(),this._openedVia||"program");return r||(this._openedVia=null),M}_setOpen(r,p,M){return this._opened=r,r?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",p&&this._restoreFocus(M)),this._updateFocusTrapState(),new Promise(F=>{this.openedChange.pipe((0,Eo.q)(1)).subscribe(se=>F(se?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(r){const p=this._elementRef.nativeElement,M=p.parentNode;"end"===r?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),M.insertBefore(this._anchor,p)),M.appendChild(p)):this._anchor&&this._anchor.parentNode.insertBefore(p,this._anchor)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(Hl.qV),l.Y36(Hl.tE),l.Y36(ps.t4),l.Y36(l.R0b),l.Y36(Hl.ic),l.Y36(fe.K0,8),l.Y36(Jm,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer"]],viewQuery:function(r,p){if(1&r&&l.Gf(M_,5),2&r){let M;l.iGM(M=l.CRH())&&(p._content=M.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,p){1&r&&l.WFA("@transform.start",function(F){return p._animationStarted.next(F)})("@transform.done",function(F){return p._animationEnd.next(F)}),2&r&&(l.uIk("align",null),l.d8E("@transform",p._animationState),l.ekj("mat-drawer-end","end"===p.position)("mat-drawer-over","over"===p.mode)("mat-drawer-push","push"===p.mode)("mat-drawer-side","side"===p.mode)("mat-drawer-opened",p.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ep,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,p){1&r&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[Ds.PQ],encapsulation:2,data:{animation:[Ym.transformDrawer]},changeDetection:0}),c})(),R_=(()=>{class c{constructor(r,p,M,F,se,xe=!1,Ke){this._dir=r,this._element=p,this._ngZone=M,this._changeDetectorRef=F,this._animationMode=Ke,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new re.x,this._doCheckSubject=new re.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new re.x,r&&r.change.pipe((0,Ai.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),se.change().pipe((0,Ai.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=xe}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(r){this._autosize=(0,Ri.Ig)(r)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(r){this._backdropOverride=null==r?null:(0,Ri.Ig)(r)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Rs.O)(this._allDrawers),(0,Ai.R)(this._destroyed)).subscribe(r=>{this._drawers.reset(r.filter(p=>!p._container||p._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Rs.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(r=>{this._watchDrawerToggle(r),this._watchDrawerPosition(r),this._watchDrawerMode(r)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Do.b)(10),(0,Ai.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(r=>r.open())}close(){this._drawers.forEach(r=>r.close())}updateContentMargins(){let r=0,p=0;if(this._left&&this._left.opened)if("side"==this._left.mode)r+=this._left._getWidth();else if("push"==this._left.mode){const M=this._left._getWidth();r+=M,p-=M}if(this._right&&this._right.opened)if("side"==this._right.mode)p+=this._right._getWidth();else if("push"==this._right.mode){const M=this._right._getWidth();p+=M,r-=M}r=r||null,p=p||null,(r!==this._contentMargins.left||p!==this._contentMargins.right)&&(this._contentMargins={left:r,right:p},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(r){r._animationStarted.pipe((0,_i.h)(p=>p.fromState!==p.toState),(0,Ai.R)(this._drawers.changes)).subscribe(p=>{"open-instant"!==p.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==r.mode&&r.openedChange.pipe((0,Ai.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(r.opened))}_watchDrawerPosition(r){!r||r.onPositionChanged.pipe((0,Ai.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Eo.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(r){r&&r._modeChanged.pipe((0,Ai.R)((0,Ol.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(r){const p=this._element.nativeElement.classList,M="mat-drawer-container-has-open";r?p.add(M):p.remove(M)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(r=>{"end"==r.position?this._end=r:this._start=r}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(r=>r&&!r.disableClose&&this._canHaveBackdrop(r)).forEach(r=>r._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(r){return"side"!==r.mode||!!this._backdropOverride}_isDrawerOpen(r){return null!=r&&r.opened}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Ju.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(Ds.rL),l.Y36(Xm),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-drawer-container"]],contentQueries:function(r,p,M){if(1&r&&(l.Suo(M,Qu,5),l.Suo(M,Sf,5)),2&r){let F;l.iGM(F=l.CRH())&&(p._content=F.first),l.iGM(F=l.CRH())&&(p._allDrawers=F)}},viewQuery:function(r,p){if(1&r&&l.Gf(Qu,5),2&r){let M;l.iGM(M=l.CRH())&&(p._userContent=M.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,p){2&r&&l.ekj("mat-drawer-container-explicit-backdrop",p._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:Jm,useExisting:c}])],ngContentSelectors:A_,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,p){1&r&&(l.F$t(I_),l.YNc(0,S_,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,T_,2,0,"mat-drawer-content",1)),2&r&&(l.Q6J("ngIf",p.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!p._content))},dependencies:[fe.O5,Qu],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),Kd=(()=>{class c extends Qu{constructor(r,p,M,F,se){super(r,p,M,F,se)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>Tf)),l.Y36(l.SBq),l.Y36(Ds.mF),l.Y36(l.R0b))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(r,p){2&r&&l.Udp("margin-left",p._container._contentMargins.left,"px")("margin-right",p._container._contentMargins.right,"px")},features:[l._Bn([{provide:Ds.PQ,useExisting:c}]),l.qOj],ngContentSelectors:ep,decls:1,vars:0,template:function(r,p){1&r&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),tp=(()=>{class c extends Sf{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(r){this._fixedInViewport=(0,Ri.Ig)(r)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(r){this._fixedTopGap=(0,Ri.su)(r)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(r){this._fixedBottomGap=(0,Ri.su)(r)}}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(r,p){2&r&&(l.uIk("align",null),l.Udp("top",p.fixedInViewport?p.fixedTopGap:null,"px")("bottom",p.fixedInViewport?p.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===p.position)("mat-drawer-over","over"===p.mode)("mat-drawer-push","push"===p.mode)("mat-drawer-side","side"===p.mode)("mat-drawer-opened",p.opened)("mat-sidenav-fixed",p.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:ep,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,p){1&r&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},dependencies:[Ds.PQ],encapsulation:2,data:{animation:[Ym.transformDrawer]},changeDetection:0}),c})(),Tf=(()=>{class c extends R_{}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-sidenav-container"]],contentQueries:function(r,p,M){if(1&r&&(l.Suo(M,Kd,5),l.Suo(M,tp,5)),2&r){let F;l.iGM(F=l.CRH())&&(p._content=F.first),l.iGM(F=l.CRH())&&(p._allDrawers=F)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,p){2&r&&l.ekj("mat-drawer-container-explicit-backdrop",p._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:Jm,useExisting:c}]),l.qOj],ngContentSelectors:O_,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,p){1&r&&(l.F$t(Zb),l.YNc(0,P_,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,Gb,2,0,"mat-sidenav-content",1)),2&r&&(l.Q6J("ngIf",p.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!p._content))},dependencies:[fe.O5,Kd],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),L_=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[fe.ez,pi.BQ,Ds.ZD,Ds.ZD,pi.BQ]}),c})();var If=U(9643);const F_=["input"],N_=function(c){return{enterDuration:c}},Qm=["*"],eg=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let qb=0;const B_={provide:Es.JU,useExisting:(0,l.Gpc)(()=>j_),multi:!0};class z_{constructor(h,r){this.source=h,this.checked=r}}const V_=(0,pi.sb)((0,pi.pj)((0,pi.Kr)((0,pi.Id)(class{constructor(c){this._elementRef=c}}))));let U_=(()=>{class c extends V_{constructor(r,p,M,F,se,xe,Ke){super(r),this._focusMonitor=p,this._changeDetectorRef=M,this.defaults=se,this._onChange=vt=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(F)||0,this.color=this.defaultColor=se.color||"accent",this._noopAnimations="NoopAnimations"===xe,this.id=this._uniqueId=`${Ke}${++qb}`}get required(){return this._required}set required(r){this._required=(0,Ri.Ig)(r)}get checked(){return this._checked}set checked(r){this._checked=(0,Ri.Ig)(r),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{"keyboard"===r||"program"===r?this._focused=!0:r||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(r){this.checked=!!r}registerOnChange(r){this._onChange=r}registerOnTouched(r){this._onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[l.qOj]}),c})(),j_=(()=>{class c extends U_{constructor(r,p,M,F,se,xe){super(r,p,M,F,se,xe,"mat-slide-toggle-")}_createChangeEvent(r){return new z_(this,r)}_onChangeEvent(r){r.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(r){r.stopPropagation()}focus(r,p){p?this._focusMonitor.focusVia(this._inputElement,p,r):this._inputElement.nativeElement.focus(r)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.SBq),l.Y36(Hl.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(eg),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-slide-toggle"]],viewQuery:function(r,p){if(1&r&&l.Gf(F_,5),2&r){let M;l.iGM(M=l.CRH())&&(p._inputElement=M.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(r,p){2&r&&(l.Ikx("id",p.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),l.ekj("mat-checked",p.checked)("mat-disabled",p.disabled)("mat-slide-toggle-label-before","before"==p.labelPosition)("_mat-animation-noopable",p._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[l._Bn([B_]),l.qOj],ngContentSelectors:Qm,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(r,p){if(1&r&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),l.NdJ("change",function(F){return p._onChangeEvent(F)})("click",function(F){return p._onInputClick(F)}),l.qZA(),l.TgZ(5,"span",5),l._UZ(6,"span",6),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()()(),l.TgZ(9,"span",9,10),l.NdJ("cdkObserveContent",function(){return p._onLabelTextChange()}),l.TgZ(11,"span",11),l._uU(12,"\xa0"),l.qZA(),l.Hsn(13),l.qZA()()),2&r){const M=l.MAs(1),F=l.MAs(10);l.uIk("for",p.inputId),l.xp6(2),l.ekj("mat-slide-toggle-bar-no-side-margin",!F.textContent||!F.textContent.trim()),l.xp6(1),l.Q6J("id",p.inputId)("required",p.required)("tabIndex",p.tabIndex)("checked",p.checked)("disabled",p.disabled),l.uIk("name",p.name)("aria-checked",p.checked)("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby)("aria-describedby",p.ariaDescribedby),l.xp6(4),l.Q6J("matRippleTrigger",M)("matRippleDisabled",p.disableRipple||p.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,N_,p._noopAnimations?0:150))}},dependencies:[pi.wG,If.wD],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),c})(),tg=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({}),c})(),ng=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[tg,pi.si,pi.BQ,If.Q8,tg,pi.BQ]}),c})();const G_=["exampleLink"];function Z_(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){l.CHM(r);const M=l.oxw();return l.KtG(M.clearSearch())}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA()()}}const W_=function(c){return{_routerLinkActiveWakeUpHack_:c}};function q_(c,h){if(1&c&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&c){const r=l.oxw().$implicit,p=l.oxw(2);l.Q6J("routerLink","/demo/"+(p.isEditMode?"/edit/":"")+r.path)("routerLinkActiveOptions",l.VKq(3,W_,p.isEditMode)),l.xp6(2),l.hij(" ",r.data.label," ")}}function K_(c,h){if(1&c&&(l.ynx(0),l.YNc(1,q_,3,5,"a",13),l.BQk()),2&c){const r=h.$implicit;l.xp6(1),l.Q6J("ngIf",r)}}function Y_(c,h){if(1&c&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,K_,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&c){const r=h.$implicit,p=l.oxw();l.xp6(2),l.Oqu(r),l.xp6(1),l.Q6J("ngForOf",p.routes[r])}}let X_=(()=>{class c{constructor(r,p,M,F){this.zone=r,this.router=p,this.activatedRoute=M,this.mapResizeService=F,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=ds(tb[0].children,se=>se.data?se.data.cat:null),this.categories=[Li.STYLES,Li.LAYERS,Li.SOURCES,Li.USER_INTERACTION,Li.CAMERA,Li.CONTROLS_AND_OVERLAYS]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(r){const p=this.activatedRoute.snapshot.firstChild;this.router.navigate(r.checked?["demo","edit",p.url[0].path]:["demo",p.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function Hm(c){return Ab(c,5)}(this.originalRoutes),Object.values(this.routes).forEach(r=>{r.forEach((p,M)=>{p.data&&!p.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete r[M]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,nt.P)()).subscribe(()=>{const r=this.exampleLinks.find(p=>p.nativeElement.classList.contains("active"));r&&function __(c,h){var r=!c.ownerDocument.documentElement.contains(c);if(wf(h)&&"function"==typeof h.behavior)return h.behavior(r?[]:Rb(c,h));if(!r){var p=function g_(c){return!1===c?{block:"end",inline:"nearest"}:wf(c)?c:{block:"start",inline:"nearest"}}(h);(function o1(c,h){void 0===h&&(h="auto");var r="scrollBehavior"in document.body.style;c.forEach(function(p){var M=p.el,F=p.top,se=p.left;M.scroll&&r?M.scroll({top:F,left:se,behavior:h}):(M.scrollTop=F,M.scrollLeft=se)})})(Rb(c,p),p.behavior)}}(r.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.R0b),l.Y36(G.F0),l.Y36(G.gz),l.Y36($m))},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(r,p){if(1&r&&l.Gf(G_,5,l.SBq),2&r){let M;l.iGM(M=l.CRH())&&(p.exampleLinks=M)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(r,p){1&r&&(l.TgZ(0,"showcase-layout-toolbar-menu",0)(1,"button",1),l.NdJ("click",function(){return p.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA()()(),l.TgZ(4,"showcase-layout-toolbar-menu",2)(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(F){return p.isEditMode=F})("change",function(F){return p.toggleEdit(F)}),l._uU(6," Edit! "),l.qZA()(),l.TgZ(7,"mat-sidenav-container")(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return p.onSidenavChange()}),l.TgZ(10,"mat-form-field",6)(11,"input",7),l.NdJ("ngModelChange",function(F){return p.searchTerm=F})("ngModelChange",function(){return p.search()}),l.qZA(),l.YNc(12,Z_,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,Y_,5,2,"ng-container",9),l.qZA()(),l.TgZ(15,"mat-sidenav-content")(16,"section",10),l._UZ(17,"router-outlet"),l.qZA()()()),2&r&&(l.xp6(5),l.Q6J("ngModel",p.isEditMode),l.xp6(3),l.Q6J("opened",p.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",p.searchTerm),l.xp6(1),l.Q6J("ngIf",p.searchTerm),l.xp6(2),l.Q6J("ngForOf",p.categories))},dependencies:[G.lC,G.yS,G.Od,fe.sg,fe.O5,Es.Fj,Es.JJ,Es.On,Lc.a,pc.lW,Ub,C_,Hb,Lb,Yu.KE,Yu.R9,Wd,qe.Hw,tp,Tf,Kd,j_],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),c})(),Qi=(()=>{class c{constructor(r,p){this.mapResizeService=r,this.map=p,this.sub=new ge.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36($m),l.Y36(Pi))},c.\u0275dir=l.lG2({type:c,selectors:[["mgl-map"]]}),c})();const c1=function(c){return[c,40.7135]},Kb=function(){return["==","extrude","true"]},J_=function(){return["linear"]},ig=function(){return["zoom"]},Yb=function(){return["get","height"]},Jo=function(c,h,r){return["interpolate",c,h,15,0,15.05,r]},Q_=function(){return["get","min_height"]},Xb=function(c,h){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":c,"fill-extrusion-base":h,"fill-extrusion-opacity":.6}};let Jb=(()=>{class c{onLoad(r){const p=r.getStyle().layers;for(let M=0;M<p.length;M++)if("symbol"===p[M].type&&p[M].layout["text-field"]){this.labelLayerId=p[M].id;break}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(F){return p.onLoad(F)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",15.5)("center",l.VKq(10,c1,-74.0066))("pitch",45)("bearing",-17.6),l.xp6(1),l.Q6J("filter",l.DdM(12,Kb))("minzoom",15)("paint",l.WLB(27,Xb,l.kEZ(16,Jo,l.DdM(13,J_),l.DdM(14,ig),l.DdM(15,Yb)),l.kEZ(23,Jo,l.DdM(20,J_),l.DdM(21,ig),l.DdM(22,Q_))))("before",p.labelLayerId))},dependencies:[Pi,Cr,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const ey=function(c){return{width:64,height:64,data:c}},Qb=function(){return[0,0]},ty=function(c){return{type:"Point",coordinates:c}},ny=function(c){return{type:"Feature",geometry:c}},Yd=function(c){return[c]},e0=function(c){return{type:"FeatureCollection",features:c}},t0=function(c){return{type:"geojson",data:c}},iy=function(){return{"icon-image":"gradient"}};let n0=(()=>{class c{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const M=new Uint8Array(16384);for(let F=0;F<64;F++)for(let se=0;se<64;se++){const xe=4*(64*se+F);M[xe+0]=se/64*255,M[xe+1]=F/64*255,M[xe+2]=128,M[xe+3]=255}return M}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0)(2,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("data",l.VKq(5,ey,p.imageData)),l.xp6(1),l.Q6J("source",l.VKq(16,t0,l.VKq(14,e0,l.VKq(12,Yd,l.VKq(10,ny,l.VKq(8,ty,l.DdM(7,Qb)))))))("layout",l.DdM(18,iy)))},dependencies:[Pi,Cr,vs,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function ry(c,h){if(1&c&&l._UZ(0,"mgl-image",3),2&c){const r=h.$implicit;l.Q6J("id",r.id)("data",r)}}const u1=function(){return[0,0]},np=function(c){return{type:"Point",coordinates:c}},rg=function(){return{color:"255,0,0"}},ll=function(c,h){return{type:"Feature",geometry:c,properties:h}},r0=function(){return[50,0]},oy=function(){return{color:"255,209,28"}},fc=function(c){return[c,0]},Gl=function(){return{color:"242,127,32"}},Zl=function(c,h,r){return[c,h,r]},sy=function(c){return{type:"FeatureCollection",features:c}},ay=function(c){return{type:"geojson",data:c}},o0=function(){return["get","color"]},s0=function(c){return["concat","square-rgb-",c]},a0=function(c){return{"icon-image":c}};let l0=(()=>{class c{constructor(){this.imagesData=[]}generateImage({id:r}){const p="square-rgb-";if(0!==r.indexOf(p))return;const M=r.replace(p,"").split(",").map(Number),xe=new Uint8Array(16384);for(let vt=0;vt<64;vt++)for(let Kt=0;Kt<64;Kt++){const Jt=4*(64*Kt+vt);xe[Jt+0]=M[0],xe[Jt+1]=M[1],xe[Jt+2]=M[2],xe[Jt+3]=255}this.imagesData=[...this.imagesData,{id:r,width:64,height:64,data:xe}]}trackByImage(r,p){return p.id}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(F){return p.generateImage(F)}),l.YNc(1,ry,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngForOf",p.imagesData)("ngForTrackBy",p.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,ay,l.VKq(32,sy,l.kEZ(28,Zl,l.WLB(10,ll,l.VKq(7,np,l.DdM(6,u1)),l.DdM(9,rg)),l.WLB(17,ll,l.VKq(14,np,l.DdM(13,r0)),l.DdM(16,oy)),l.WLB(25,ll,l.VKq(22,np,l.VKq(20,fc,-50)),l.DdM(24,Gl))))))("layout",l.VKq(39,a0,l.VKq(37,s0,l.DdM(36,o0)))))},dependencies:[fe.sg,Pi,Cr,vs,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const og=function(){return[0,0]},ip=function(c){return{type:"Point",coordinates:c}},c0=function(c){return{type:"Feature",geometry:c}},ly=function(c){return[c]},u0=function(c){return{type:"FeatureCollection",features:c}},cy=function(c){return{type:"geojson",data:c}},uy=function(){return{"icon-image":"cat","icon-size":.25}};function Af(c,h){1&c&&l._UZ(0,"mgl-layer",2),2&c&&l.Q6J("source",l.VKq(11,cy,l.VKq(9,u0,l.VKq(7,ly,l.VKq(5,c0,l.VKq(3,ip,l.DdM(2,og)))))))("layout",l.DdM(13,uy))}let d0=(()=>{class c{constructor(){this.imageLoaded=!1}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map")(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return p.imageLoaded=!0}),l.qZA(),l.YNc(2,Af,1,14,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(2),l.Q6J("ngIf",p.imageLoaded))},dependencies:[fe.O5,Pi,Cr,vs,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const dy=function(c){return[c,38.907]},hy=function(){return[11.15]};let sg=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(5,dy,-77.04))("zoom",l.DdM(7,hy))("attributionControl",!1))},dependencies:[Pi,xi,Bo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Pf(c,h){1&c&&l._UZ(0,"mgl-feature",4),2&c&&l.Q6J("geometry",h.$implicit)}const py=function(){return[8]},fy=function(){return{"icon-image":"oneway"}};let my=(()=>{class c{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(r){this.center=r.features[0].geometry.coordinates}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(F){return p.map=F}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,Pf,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(F){return p.centerMapTo(F)})("layerMouseEnter",function(){return p.cursorStyle="pointer"})("layerMouseLeave",function(){return p.cursorStyle=""}),l.qZA()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,py))("center",p.center)("cursorStyle",p.cursorStyle),l.xp6(2),l.Q6J("ngForOf",p.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,fy)))},dependencies:[fe.sg,Pi,Cr,Br,Xr,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function gy(c,h){1&c&&l._UZ(0,"showcase-cluster-point",6),2&c&&l.Q6J("properties",h.$implicit.properties)}const _y=function(){return[.3]},yy=function(){return[0,20]},ag=function(){return["!=","cluster",!0]},vy=function(c){return{fill:c}};function by(c,h){if(1&c&&(l.O4$(),l._UZ(0,"path",4)),2&c){const r=h.$implicit;l.Q6J("ngStyle",l.VKq(2,vy,r.fill)),l.uIk("d",r.d)}}const h0=function(c){return{font:c}},Xd=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let p0=(()=>{class c{constructor(){const r=["<",["get","mag"],2],p=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],M=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],F=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",r,1,0]],mag2:["+",["case",p,1,0]],mag3:["+",["case",M,1,0]],mag4:["+",["case",F,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",r,Xd[0],p,Xd[1],M,Xd[2],F,Xd[3],Xd[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,gy,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(12,_y))("center",l.DdM(13,yy)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",p.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,ag))("paint",p.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,ag))("layout",p.labelLayout)("paint",p.labelPaint))},dependencies:function(){return[Pi,Cr,Br,el,wc,Qi,f0]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),f0=(()=>{class c{ngOnInit(){const r=[],p=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let M=0;for(let se=0;se<p.length;se++)r.push(M),M+=p[se];this.font=(M>=1e3?22:M>=100?20:M>=10?18:16)+"px sans-serif",this.r=M>=1e3?50:M>=100?32:M>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let se=0;se<p.length;se++)this.segments.push(this.donutSegment(r[se]/M,(r[se]+p[se])/M,Xd[se]));this.totalString=M.toLocaleString()}donutSegment(r,p,M){p-r==1&&(p-=1e-5);const F=2*Math.PI*(r-.25),se=2*Math.PI*(p-.25),xe=Math.cos(F),Ke=Math.sin(F),vt=Math.cos(se),Kt=Math.sin(se),Jt=p-r>.5?1:0;return{d:`M ${this.r+this.r0*xe} ${this.r+this.r0*Ke} L ${this.r+this.r*xe} ${this.r+this.r*Ke} A ${this.r} ${this.r} 0 ${Jt} 1 ${this.r+this.r*vt} ${this.r+this.r*Kt} L ${this.r+this.r0*vt} ${this.r+this.r0*Kt} A ${this.r0} ${this.r0} 0 ${Jt} 0 ${this.r+this.r0*xe} ${this.r+this.r0*Ke}`,fill:M}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(r,p){1&r&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,by,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA()()),2&r&&(l.Q6J("ngStyle",l.VKq(10,h0,p.font)),l.uIk("width",p.w)("height",p.w)("viewbox",p.viewbox),l.xp6(1),l.Q6J("ngForOf",p.segments),l.xp6(1),l.uIk("cx",p.r)("cy",p.r)("r",p.r0),l.xp6(1),l.uIk("transform",p.textTransform),l.xp6(1),l.hij(" ",p.totalString," "))},dependencies:[fe.sg,fe.PC],encapsulation:2}),c})();const xy=function(){return["has","point_count"]},m0=function(){return[0,"#51bbd6"]},g0=function(){return[100,"#f1f075"]},_0=function(){return[750,"#f28cb1"]},wy=function(c,h,r){return[c,h,r]},Cy=function(c){return{property:"point_count",type:"interval",stops:c}},y0=function(){return[0,20]},v0=function(){return[100,30]},b0=function(){return[750,40]},x0=function(c,h){return{"circle-color":c,"circle-radius":h}},w0=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},C0=function(c){return{"text-field":"{point_count_abbreviated}","text-font":c,"text-size":12}},E0=function(){return["!has","point_count"]},Ey=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Dy(c,h){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2)(2,"mgl-layer",3)(3,"mgl-layer",4)(4,"mgl-layer",5),l.BQk()),2&c){const r=l.oxw();l.xp6(1),l.Q6J("data",r.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,xy))("paint",l.WLB(29,x0,l.VKq(18,Cy,l.kEZ(14,wy,l.DdM(11,m0),l.DdM(12,g0),l.DdM(13,_0))),l.VKq(27,Cy,l.kEZ(23,wy,l.DdM(20,y0),l.DdM(21,v0),l.DdM(22,b0))))),l.xp6(1),l.Q6J("filter",l.DdM(32,xy))("layout",l.VKq(34,C0,l.DdM(33,w0))),l.xp6(1),l.Q6J("filter",l.DdM(36,E0))("paint",l.DdM(37,Ey))}}const My=function(){return[3]},Sy=function(c){return[c,40.66995747013945]};let Ty=(()=>{class c{ngOnInit(){var r=this;return $r(function*(){r.earthquakes=yield U.e(45).then(U.t.bind(U,3045,19))})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Dy,5,38,"ng-container",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,My))("center",l.VKq(6,Sy,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",p.earthquakes))},dependencies:[fe.O5,Pi,Cr,Br,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Iy=function(c){return[c,38.907]},Ay=function(){return[11.15]},Oy=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let lg=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(6,Iy,-77.04))("zoom",l.DdM(8,Ay))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,Oy)))},dependencies:[Pi,xi,Bo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const cg=function(){return[36.235656,50.00387]},ed=function(){return[11.15]};let D0=(()=>{class c{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1)(2,"mgl-control",2)(3,"mgl-control",3)(4,"mgl-control",4),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.DdM(5,cg))("zoom",l.DdM(6,ed))("locale",p.locale))},dependencies:[Pi,xi,ml,go,qo,xc,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const M0=function(c,h,r){return{"background-image":c,width:h,height:r}};function Jd(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"mgl-marker",2)(1,"div",3),l.NdJ("click",function(){const F=l.CHM(r).$implicit,se=l.oxw();return l.KtG(se.alert(F.properties.message))}),l.qZA()()}if(2&c){const r=h.$implicit;l.Q6J("feature",r),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,M0,"url(https://placekitten.com/g/"+r.properties.iconSize.join("/")+"/)",r.properties.iconSize[0]+"px",r.properties.iconSize[1]+"px"))}}const d1=function(){return[5]},ug=function(c,h){return[c,h]};let h1=(()=>{class c{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(r){alert(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Jd,2,6,"mgl-marker",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,d1))("center",l.WLB(6,ug,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",p.geojson.features))},dependencies:[fe.sg,fe.PC,Pi,ca,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const ky=function(){return[3]},Ry=function(c){return[c,39]};let p1=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(r,p){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,ky))("center",l.VKq(5,Ry,-77.38)))},dependencies:[Pi,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Si=function(){return[9]},S0=function(c){return[c,40]};let T0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(r,p){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Si))("center",l.VKq(5,S0,-74.5)))},dependencies:[Pi,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const I0=["*",[["mat-card-footer"]]],Qd=["*","mat-card-footer"];let eh=(()=>{class c{constructor(r){this._animationMode=r}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(r,p){2&r&&l.ekj("_mat-animation-noopable","NoopAnimations"===p._animationMode)},exportAs:["matCard"],ngContentSelectors:Qd,decls:2,vars:0,template:function(r,p){1&r&&(l.F$t(I0),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),c})(),F0=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pi.BQ,pi.BQ]}),c})();function Of(c,h){if(1&c&&(l.TgZ(0,"mgl-control",3)(1,"mat-card")(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA()()()),2&c){const r=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",r.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",r.coordinates[1],"")}}const Ly=function(){return[2]},pg=function(){return[0,0]};let Fy=(()=>{class c{constructor(){this.color="#3887be"}onDragEnd(r){this.coordinates=r.getLngLat().toArray()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(F){return p.onDragEnd(F)}),l.qZA(),l.YNc(2,Of,6,2,"mgl-control",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Ly))("center",l.DdM(8,pg)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,pg))("draggable",!0),l.xp6(1),l.Q6J("ngIf",p.coordinates))},dependencies:[fe.O5,Pi,ca,xi,eh,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const N0=function(){return[13]},rp=function(){return[11.255,43.77]};let op=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,N0))("center",l.DdM(5,rp)))},dependencies:[Pi,xi,ml,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const B0=function(){return[15]},z0=function(c){return[c,37.830348]},V0=function(){return{}},Ny=function(c){return[c,37.83381888486939]},By=function(c){return[c,37.83317489144141]},zy=function(c){return[c,37.83270036637107]},U0=function(c){return[c,37.832056363179625]},Vy=function(c){return[c,37.83114119107971]},j0=function(c){return[c,37.83049717427869]},H0=function(c){return[c,37.829920943955045]},x1=function(c){return[c,37.82954808664175]},w1=function(c){return[c,37.82944639795659]},C1=function(c){return[c,37.82880236636284]},E1=function(c){return[c,37.82931081282506]},Uy=function(c){return[c,37.83080223556934]},kf=function(c){return[c,37.83168351665737]},$0=function(c){return[c,37.832158048267786]},G0=function(c){return[c,37.83297152392784]},jy=function(c){return[c,37.83263257682617]},sp=function(c){return[c,37.832937629287755]},Z0=function(c){return[c,37.832429207817725]},W0=function(c){return[c,37.832564787218985]},q0=function(c){return[c,37.83337825839438]},K0=function(c){return[c,37.83368330777276]},Y0=function(c,h,r,p,M,F,se,xe,Ke,vt,Kt,Jt,Dn,ri,qn,Xn,bi,ki,cr,Kr,Vr){return[c,h,r,p,M,F,se,xe,Ke,vt,Kt,Jt,Dn,ri,qn,Xn,bi,ki,cr,Kr,Vr]},Hy=function(c){return{type:"LineString",coordinates:c}},X0=function(c,h){return{type:"Feature",properties:c,geometry:h}},J0=function(c){return{type:"geojson",data:c}},ap=function(){return{"line-join":"round","line-cap":"round"}},Q0=function(){return{"line-color":"#888","line-width":8}};let $y=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,B0))("center",l.VKq(8,z0,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,J0,l.WLB(77,X0,l.DdM(10,V0),l.VKq(75,Hy,l.rFY(53,Y0,[l.VKq(11,Ny,-122.48369693756104),l.VKq(13,By,-122.48348236083984),l.VKq(15,zy,-122.48339653015138),l.VKq(17,U0,-122.48356819152832),l.VKq(19,Vy,-122.48404026031496),l.VKq(21,j0,-122.48404026031496),l.VKq(23,H0,-122.48348236083984),l.VKq(25,x1,-122.48356819152832),l.VKq(27,w1,-122.48507022857666),l.VKq(29,C1,-122.48610019683838),l.VKq(31,E1,-122.48695850372314),l.VKq(33,Uy,-122.48700141906738),l.VKq(35,kf,-122.48751640319824),l.VKq(37,$0,-122.48803138732912),l.VKq(39,G0,-122.48888969421387),l.VKq(41,jy,-122.48987674713133),l.VKq(43,sp,-122.49043464660643),l.VKq(45,Z0,-122.49125003814696),l.VKq(47,W0,-122.49163627624512),l.VKq(49,q0,-122.49223709106445),l.VKq(51,K0,-122.49378204345702)])))))("layout",l.DdM(82,ap))("paint",l.DdM(83,Q0)))},dependencies:[Pi,Cr,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function ex(c,h){if(1&c&&l._UZ(0,"mgl-layer",5),2&c){const r=h.$implicit;l.Q6J("id",r.id)("type",r.type)("filter",r.filter)("paint",r.paint)}}const Gy=function(){return["!=","cluster",!0]},tx=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function Zy(c,h){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,ex,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&c){const r=l.oxw();l.xp6(1),l.Q6J("data",r.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",r.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,Gy))("paint",l.DdM(8,tx))}}const nx=function(){return[3]},fg=function(c){return[c,40.66995747013945]};let ix=(()=>{class c{ngOnInit(){var r=this;return $r(function*(){r.earthquakes=yield U.e(45).then(U.t.bind(U,3045,19));const p=[[0,"green"],[20,"orange"],[200,"red"]];r.clusterLayers=p.map((M,F)=>({type:"circle",id:`cluster-${F}`,paint:{"circle-color":M[1],"circle-radius":70,"circle-blur":1},filter:F===p.length-1?[">=","point_count",M[0]]:["all",[">=","point_count",M[0]],["<","point_count",p[F+1][0]]]}))})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Zy,4,9,"ng-container",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,nx))("center",l.VKq(6,fg,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",p.earthquakes))},dependencies:[fe.sg,fe.O5,Pi,Cr,Br,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Wy=function(){return[2]},qy=function(c){return[c,37.830348]},rx=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},ox=function(){return{"line-color":"#627BC1","line-width":2}},sx=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let mg=(()=>{class c{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(r){this.hoverFilter=["==","name",r.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(F){return p.activateHoverOn(F)})("layerMouseLeave",function(){return p.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Wy))("center",l.VKq(9,qy,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,rx)),l.xp6(1),l.Q6J("paint",l.DdM(12,ox)),l.xp6(1),l.Q6J("paint",l.DdM(13,sx))("filter",p.hoverFilter))},dependencies:[Pi,Cr,Br,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const ax=function(){return[9]},Ky=function(c){return[c,40]};let lx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(r,p){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,ax))("center",l.VKq(6,Ky,-74.5))("interactive",!1))},dependencies:[Pi,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const cx=function(){return[2.9]},ux=function(){return[16.05,48]};let dx=(()=>{class c{changeLangTo(r){!this.map||(this.map.setLayoutProperty("country_1","text-field","{name:"+r+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+r+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+r+"}"))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:7,consts:[[3,"zoom","center","preserveDrawingBuffer","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(F){return p.map=F}),l.TgZ(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return p.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return p.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return p.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return p.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,cx))("center",l.DdM(6,ux))("preserveDrawingBuffer",!0))},dependencies:[Pi,xi,pc.lW,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function hx(c,h){if(1&c&&l._UZ(0,"mgl-geojson-source",3),2&c){const r=l.oxw();l.Q6J("data",r.data)}}const px=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function fx(c,h){1&c&&l._UZ(0,"mgl-layer",4),2&c&&l.Q6J("paint",l.DdM(1,px))}let mx=(()=>{class c{constructor(){this.zoom=[0]}ngOnInit(){var r=this;return $r(function*(){const p=yield U.e(330).then(U.t.bind(U,3330,19)),M=p.features[0].geometry.coordinates;p.features[0].geometry.coordinates=[M[0]],r.data=p,r.center=M[0],r.zoom=[14],r.pitch=30;let F=0;r.timer=window.setInterval(()=>{F<M.length?(r.center=M[F],p.features[0].geometry.coordinates.push(M[F]),r.data={...r.data},F++):window.clearInterval(r.timer)},10)})()}ngOnDestroy(){window.clearInterval(this.timer)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch","preserveDrawingBuffer"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,hx,1,1,"mgl-geojson-source",1),l.YNc(2,fx,1,2,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",p.zoom)("center",p.center)("centerWithPanTo",!0)("pitch",p.pitch)("preserveDrawingBuffer",!0),l.xp6(1),l.Q6J("ngIf",p.data),l.xp6(1),l.Q6J("ngIf",p.data))},dependencies:[fe.O5,Pi,Cr,Br,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var Yy=U(4986),Xy=U(5963);const _x=function(){return[14]},Jy=function(){return{"raster-fade-duration":0}};let yx=(()=>{class c{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){var r=this;return $r(function*(){const M=(yield U.e(330).then(U.t.bind(U,3330,19))).features[0].geometry.coordinates,F=M.map(xe=>r.makeRectangle(xe));r.center=M[0],r.coordinates=F[0];let se=0;r.sub=function gx(c=0,h=Yy.z){return c<0&&(c=0),(0,Xy.H)(c,c,h)}(250).subscribe(()=>{r.url=Math.random()<.5?"assets/red.png":"assets/blue.png",r.coordinates=F[se],se=(se+1)%F.length})})()}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([r,p]){return[[r,p],[r+this.size,p],[r+this.size,p-this.size],[r,p-this.size]]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1)(2,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",p.center)("zoom",l.DdM(7,_x)),l.xp6(1),l.Q6J("url",p.url)("coordinates",p.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,Jy)))},dependencies:[Pi,Cr,hu,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const vx=function(){return{enableHighAccuracy:!0}};let bx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,vx))("trackUserLocation",!0))},dependencies:[Pi,xi,qo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Rf=function(c){return[c]},gg=function(){return[17]},Qy=function(){return[4.577979,51.038189]},_g=function(){return[4.577979,51.03816]};let xx=(()=>{class c{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let r=0;setInterval(()=>{r+=.01,1===r&&(r=0),this.pitch=45+15*Math.cos(r),this.bearing=20*Math.sin(r)-103},20)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4)(5,"polygon",5)(6,"polygon",6),l.qZA()()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("interactive",!1)("pitch",l.VKq(8,Rf,p.pitch))("bearing",l.VKq(10,Rf,p.bearing))("zoom",l.DdM(12,gg))("center",l.DdM(13,Qy)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,_g)))},dependencies:[Pi,ca,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),c})();const wx=function(){return[9]},yg=function(c){return[c,40]};let Cx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,wx))("center",l.VKq(5,yg,-74.5)))},dependencies:[Pi,xi,go,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();var vg=U(4385),du=U(8184),bg=U(2289),Ex=U(4080);const D1=["tooltip"],nv="tooltip-panel",Lf=(0,ps.i$)({passive:!0}),Ff=new l.OlP("mat-tooltip-scroll-strategy"),rv={provide:Ff,deps:[du.aV],useFactory:function iv(c){return()=>c.scrollStrategies.reposition({scrollThrottle:20})}},ov=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function sv(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Sx=(()=>{class c{constructor(r,p,M,F,se,xe,Ke,vt,Kt,Jt,Dn,ri){this._overlay=r,this._elementRef=p,this._scrollDispatcher=M,this._viewContainerRef=F,this._ngZone=se,this._platform=xe,this._ariaDescriber=Ke,this._focusMonitor=vt,this._dir=Jt,this._defaultOptions=Dn,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new re.x,this._scrollStrategy=Kt,this._document=ri,Dn&&(Dn.position&&(this.position=Dn.position),Dn.touchGestures&&(this.touchGestures=Dn.touchGestures)),Jt.change.pipe((0,Ai.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(r){r!==this._position&&(this._position=r,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,Ri.Ig)(r),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(r){this._showDelay=(0,Ri.su)(r)}get hideDelay(){return this._hideDelay}set hideDelay(r){this._hideDelay=(0,Ri.su)(r),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(r){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=r?String(r).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(r){this._tooltipClass=r,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,Ai.R)(this._destroyed)).subscribe(r=>{r?"keyboard"===r&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const r=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([p,M])=>{r.removeEventListener(p,M,Lf)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(r,this.message,"tooltip"),this._focusMonitor.stopMonitoring(r)}show(r=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const p=this._createOverlay();this._detach(),this._portal=this._portal||new Ex.C5(this._tooltipComponent,this._viewContainerRef);const M=this._tooltipInstance=p.attach(this._portal).instance;M._triggerElement=this._elementRef.nativeElement,M._mouseLeaveHideDelay=this._hideDelay,M.afterHidden().pipe((0,Ai.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),M.show(r)}hide(r=this.hideDelay){const p=this._tooltipInstance;p&&(p.isVisible()?p.hide(r):(p._cancelPendingAnimations(),this._detach()))}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),p=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return p.positionChanges.pipe((0,Ai.R)(this._destroyed)).subscribe(M=>{this._updateCurrentPositionClass(M.connectionPair),this._tooltipInstance&&M.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:p,panelClass:`${this._cssClassPrefix}-${nv}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,Ai.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,Ai.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,Ai.R)(this._destroyed)).subscribe(M=>{this._isTooltipVisible()&&M.keyCode===Cl.hY&&!(0,Cl.Vb)(M)&&(M.preventDefault(),M.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(r){const p=r.getConfig().positionStrategy,M=this._getOrigin(),F=this._getOverlayPosition();p.withPositions([this._addOffset({...M.main,...F.main}),this._addOffset({...M.fallback,...F.fallback})])}_addOffset(r){return r}_getOrigin(){const r=!this._dir||"ltr"==this._dir.value,p=this.position;let M;"above"==p||"below"==p?M={originX:"center",originY:"above"==p?"top":"bottom"}:"before"==p||"left"==p&&r||"right"==p&&!r?M={originX:"start",originY:"center"}:("after"==p||"right"==p&&r||"left"==p&&!r)&&(M={originX:"end",originY:"center"});const{x:F,y:se}=this._invertPosition(M.originX,M.originY);return{main:M,fallback:{originX:F,originY:se}}}_getOverlayPosition(){const r=!this._dir||"ltr"==this._dir.value,p=this.position;let M;"above"==p?M={overlayX:"center",overlayY:"bottom"}:"below"==p?M={overlayX:"center",overlayY:"top"}:"before"==p||"left"==p&&r||"right"==p&&!r?M={overlayX:"end",overlayY:"center"}:("after"==p||"right"==p&&r||"left"==p&&!r)&&(M={overlayX:"start",overlayY:"center"});const{x:F,y:se}=this._invertPosition(M.overlayX,M.overlayY);return{main:M,fallback:{overlayX:F,overlayY:se}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Eo.q)(1),(0,Ai.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(r){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=r,this._tooltipInstance._markForCheck())}_invertPosition(r,p){return"above"===this.position||"below"===this.position?"top"===p?p="bottom":"bottom"===p&&(p="top"):"end"===r?r="start":"start"===r&&(r="end"),{x:r,y:p}}_updateCurrentPositionClass(r){const{overlayY:p,originX:M,originY:F}=r;let se;if(se="center"===p?this._dir&&"rtl"===this._dir.value?"end"===M?"left":"right":"start"===M?"left":"right":"bottom"===p&&"top"===F?"above":"below",se!==this._currentPosition){const xe=this._overlayRef;if(xe){const Ke=`${this._cssClassPrefix}-${nv}-`;xe.removePanelClass(Ke+this._currentPosition),xe.addPanelClass(Ke+se)}this._currentPosition=se}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const r=[];if(this._platformSupportsMouseEvents())r.push(["mouseleave",p=>{const M=p.relatedTarget;(!M||!this._overlayRef?.overlayElement.contains(M))&&this.hide()}],["wheel",p=>this._wheelListener(p)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const p=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};r.push(["touchend",p],["touchcancel",p])}this._addListeners(r),this._passiveListeners.push(...r)}_addListeners(r){r.forEach(([p,M])=>{this._elementRef.nativeElement.addEventListener(p,M,Lf)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(r){if(this._isTooltipVisible()){const p=this._document.elementFromPoint(r.clientX,r.clientY),M=this._elementRef.nativeElement;p!==M&&!M.contains(p)&&this.hide()}}_disableNativeGesturesIfNecessary(){const r=this.touchGestures;if("off"!==r){const p=this._elementRef.nativeElement,M=p.style;("on"===r||"INPUT"!==p.nodeName&&"TEXTAREA"!==p.nodeName)&&(M.userSelect=M.msUserSelect=M.webkitUserSelect=M.MozUserSelect="none"),("on"===r||!p.draggable)&&(M.webkitUserDrag="none"),M.touchAction="none",M.webkitTapHighlightColor="transparent"}}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),c})(),Tx=(()=>{class c extends Sx{constructor(r,p,M,F,se,xe,Ke,vt,Kt,Jt,Dn,ri){super(r,p,M,F,se,xe,Ke,vt,Kt,Jt,Dn,ri),this._tooltipComponent=Ax}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(du.aV),l.Y36(l.SBq),l.Y36(Ds.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(ps.t4),l.Y36(Hl.$s),l.Y36(Hl.tE),l.Y36(Ff),l.Y36(Ju.Is,8),l.Y36(ov,8),l.Y36(fe.K0))},c.\u0275dir=l.lG2({type:c,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),c})(),Ix=(()=>{class c{constructor(r,p){this._changeDetectorRef=r,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new re.x,this._animationsDisabled="NoopAnimations"===p}show(r){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},r)}hide(r){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},r)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:r}){(!r||!this._triggerElement.contains(r))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:r}){(r===this._showAnimation||r===this._hideAnimation)&&this._finalizeAnimation(r===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(r){r?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(r){const p=this._tooltip.nativeElement,M=this._showAnimation,F=this._hideAnimation;if(p.classList.remove(r?F:M),p.classList.add(r?M:F),this._isVisible=r,r&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const se=getComputedStyle(p);("0s"===se.getPropertyValue("animation-duration")||"none"===se.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}r&&this._onShow(),this._animationsDisabled&&(p.classList.add("_mat-animation-noopable"),this._finalizeAnimation(r))}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36(l.QbO,8))},c.\u0275dir=l.lG2({type:c}),c})(),Ax=(()=>{class c extends Ix{constructor(r,p,M){super(r,M),this._breakpointObserver=p,this._isHandset=this._breakpointObserver.observe(bg.u3.Handset),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO),l.Y36(bg.Yg),l.Y36(l.QbO,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-tooltip-component"]],viewQuery:function(r,p){if(1&r&&l.Gf(D1,7),2&r){let M;l.iGM(M=l.CRH())&&(p._tooltip=M.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,p){1&r&&l.NdJ("mouseleave",function(F){return p._handleMouseLeave(F)}),2&r&&l.Udp("zoom",p.isVisible()?1:null)},features:[l.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(r,p){if(1&r&&(l.TgZ(0,"div",0,1),l.NdJ("animationend",function(F){return p._handleAnimationEnd(F)}),l.ALo(2,"async"),l._uU(3),l.qZA()),2&r){let M;l.ekj("mat-tooltip-handset",null==(M=l.lcZ(2,4,p._isHandset))?null:M.matches),l.Q6J("ngClass",p.tooltipClass),l.xp6(3),l.Oqu(p.message)}},dependencies:[fe.mk,fe.Ov],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),c})(),av=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[rv],imports:[Hl.rt,fe.ez,du.U8,pi.BQ,pi.BQ,Ds.ZD]}),c})();function lv(c,h){if(1&c&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&c){const r=h.$implicit;l.Q6J("value",r),l.xp6(1),l.hij(" ",r," ")}}function Px(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"mat-form-field",16)(1,"mat-select",17),l.NdJ("selectionChange",function(M){l.CHM(r);const F=l.oxw(2);return l.KtG(F._changePageSize(M.value))}),l.YNc(2,lv,2,2,"mat-option",18),l.qZA()()}if(2&c){const r=l.oxw(2);l.Q6J("appearance",r._formFieldAppearance)("color",r.color),l.xp6(1),l.Q6J("value",r.pageSize)("disabled",r.disabled)("panelClass",r.selectConfig.panelClass||"")("disableOptionCentering",r.selectConfig.disableOptionCentering)("aria-label",r._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",r._displayedPageSizeOptions)}}function Ox(c,h){if(1&c&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&c){const r=l.oxw(2);l.xp6(1),l.Oqu(r.pageSize)}}function M1(c,h){if(1&c&&(l.TgZ(0,"div",12)(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,Px,3,8,"mat-form-field",14),l.YNc(4,Ox,2,1,"div",15),l.qZA()),2&c){const r=l.oxw();l.xp6(2),l.hij(" ",r._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",r._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",r._displayedPageSizeOptions.length<=1)}}function S1(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){l.CHM(r);const M=l.oxw();return l.KtG(M.firstPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA()()}if(2&c){const r=l.oxw();l.Q6J("matTooltip",r._intl.firstPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),l.uIk("aria-label",r._intl.firstPageLabel)}}function kx(c,h){if(1&c){const r=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){l.CHM(r);const M=l.oxw();return l.KtG(M.lastPage())}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA()()}if(2&c){const r=l.oxw();l.Q6J("matTooltip",r._intl.lastPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),l.uIk("aria-label",r._intl.lastPageLabel)}}let Nf=(()=>{class c{constructor(){this.changes=new re.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(r,p,M)=>{if(0==M||0==p)return`0 of ${M}`;const F=r*p;return`${F+1} \u2013 ${F<(M=Math.max(M,0))?Math.min(F+p,M):F+p} of ${M}`}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const uv={provide:Nf,deps:[[new l.FiY,new l.tp0,Nf]],useFactory:function cv(c){return c||new Nf}},Lx=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),Fx=(0,pi.Id)((0,pi.dB)(class{}));let Nx=(()=>{class c extends Fx{constructor(r,p,M){if(super(),this._intl=r,this._changeDetectorRef=p,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new l.vpe,this._intlChanges=r.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),M){const{pageSize:F,pageSizeOptions:se,hidePageSize:xe,showFirstLastButtons:Ke}=M;null!=F&&(this._pageSize=F),null!=se&&(this._pageSizeOptions=se),null!=xe&&(this._hidePageSize=xe),null!=Ke&&(this._showFirstLastButtons=Ke)}}get pageIndex(){return this._pageIndex}set pageIndex(r){this._pageIndex=Math.max((0,Ri.su)(r),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(r){this._length=(0,Ri.su)(r),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(r){this._pageSize=Math.max((0,Ri.su)(r),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(r){this._pageSizeOptions=(r||[]).map(p=>(0,Ri.su)(p)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(r){this._hidePageSize=(0,Ri.Ig)(r)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(r){this._showFirstLastButtons=(0,Ri.Ig)(r)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const r=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(r)}previousPage(){if(!this.hasPreviousPage())return;const r=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(r)}firstPage(){if(!this.hasPreviousPage())return;const r=this.pageIndex;this.pageIndex=0,this._emitPageEvent(r)}lastPage(){if(!this.hasNextPage())return;const r=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(r)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const r=this.getNumberOfPages()-1;return this.pageIndex<r&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(r){const M=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/r)||0,this.pageSize=r,this._emitPageEvent(M)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((r,p)=>r-p),this._changeDetectorRef.markForCheck())}_emitPageEvent(r){this.page.emit({previousPageIndex:r,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[l.qOj]}),c})(),hv=(()=>{class c extends Nx{constructor(r,p,M){super(r,p,M),M&&null!=M.formFieldAppearance&&(this._formFieldAppearance=M.formFieldAppearance)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Nf),l.Y36(l.sBO),l.Y36(Lx,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(r,p){1&r&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,M1,5,3,"div",2),l.TgZ(3,"div",3)(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,S1,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return p.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA()(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return p.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA()(),l.YNc(13,kx,3,5,"button",11),l.qZA()()()),2&r&&(l.xp6(2),l.Q6J("ngIf",!p.hidePageSize),l.xp6(3),l.hij(" ",p._intl.getRangeLabel(p.pageIndex,p.pageSize,p.length)," "),l.xp6(1),l.Q6J("ngIf",p.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",p._intl.previousPageLabel)("matTooltipDisabled",p._previousButtonsDisabled())("matTooltipPosition","above")("disabled",p._previousButtonsDisabled()),l.uIk("aria-label",p._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",p._intl.nextPageLabel)("matTooltipDisabled",p._nextButtonsDisabled())("matTooltipPosition","above")("disabled",p._nextButtonsDisabled()),l.uIk("aria-label",p._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",p.showFirstLastButtons))},dependencies:[fe.sg,fe.O5,pc.lW,Yu.KE,vg.gD,pi.ey,Tx],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),c})(),Bx=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[uv],imports:[fe.ez,pc.ot,vg.LD,av,pi.BQ]}),c})();function pv(c,h){if(1&c&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&c){const r=h.$implicit;l.Q6J("title",r.properties["Secondary ID"]),l.xp6(1),l.hij(" ",r.properties["Primary ID"]," ")}}function lp(c,h){if(1&c){const r=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(M){const se=l.CHM(r).$implicit,xe=l.oxw(2);return l.KtG(xe.selectCluster(M,se))}),l._uU(1),l.qZA()}if(2&c){const r=h.$implicit;l.xp6(1),l.hij(" ",null==r.properties?null:r.properties.point_count," ")}}function fv(c,h){if(1&c&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&c){l.oxw();const r=l.MAs(2),p=l.oxw();l.Q6J("feature",p.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",r)("selectedCluster",p.selectedCluster)}}function mv(c,h){if(1&c&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,pv,2,2,"ng-template",5),l.YNc(5,lp,2,1,"ng-template",6),l.qZA(),l.YNc(6,fv,2,3,"mgl-popup",7),l.BQk()),2&c){const r=l.oxw();l.xp6(1),l.Q6J("data",r.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",r.selectedCluster)}}const gv=function(){return[3]},_v=function(c){return[c,40.66995747013945]};function yv(c,h){if(1&c&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&c){const r=h.$implicit;l.xp6(1),l.hij(" ",r.properties["Primary ID"]," ")}}let vv=(()=>{class c{ngOnInit(){var r=this;return $r(function*(){const p=yield U.e(45).then(U.t.bind(U,3045,19));setInterval(()=>{p.features.length&&p.features.pop(),r.earthquakes={...p}},500)})()}selectCluster(r,p){r.stopPropagation(),this.selectedCluster={geometry:p.geometry,properties:p.properties}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.YNc(1,mv,7,5,"ng-container",1),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,gv))("center",l.VKq(6,_v,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",p.earthquakes))},dependencies:function(){return[fe.O5,Pi,Br,Wo,ua,el,wc,Qi,zx]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),c})(),zx=(()=>{class c{ngOnChanges(r){this.changePage(),r.selectedCluster&&!r.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(r){var p=this;return $r(function*(){let M=0;r&&(M=5*r.pageIndex),p.leaves=yield p.clusterComponent.getClusterLeaves(p.selectedCluster.properties.cluster_id,5,M)})()}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-cluster-popup"]],viewQuery:function(r,p){if(1&r&&l.Gf(hv,7),2&r){let M;l.iGM(M=l.CRH())&&(p.paginator=M.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(r,p){1&r&&(l.TgZ(0,"mat-list"),l.YNc(1,yv,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(F){return p.changePage(F)}),l.qZA()),2&r&&(l.xp6(1),l.Q6J("ngForOf",p.leaves),l.xp6(1),l.Q6J("length",null==p.selectedCluster.properties?null:p.selectedCluster.properties.point_count)("pageSize",5))},dependencies:[fe.sg,jb,C_,hv],encapsulation:2}),c})(),T1=(()=>{class c{alert(r){alert(r)}onGeolocate(r){console.log("geolocate",r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:9,vars:2,consts:[["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map")(1,"mgl-control")(2,"button",0),l.NdJ("click",function(){return p.alert("Hello")}),l._uU(3," Hello "),l.qZA()(),l._UZ(4,"mgl-control",1)(5,"mgl-control",2),l.TgZ(6,"mgl-control",3),l.NdJ("geolocate",function(F){return p.onGeolocate(F)}),l.qZA(),l._UZ(7,"mgl-control",4)(8,"mgl-control",5),l.qZA()),2&r&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},dependencies:[Pi,xi,ml,go,qo,Bo,xc,pc.lW,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const bv=function(){return[5]},Bf=function(c,h){return[c,h]};let Vx=(()=>{class c{alert(r){alert(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1)(2,"div",2),l.NdJ("click",function(){return p.alert("Foo")}),l.qZA()(),l.TgZ(3,"mgl-marker",1)(4,"div",3),l.NdJ("click",function(){return p.alert("Bar")}),l.qZA()(),l.TgZ(5,"mgl-marker",1)(6,"div",4),l.NdJ("click",function(){return p.alert("Baz")}),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,bv))("center",l.WLB(8,Bf,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,Bf,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,Bf,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,Bf,-63.29223632812499,-18.28151823530889)))},dependencies:[Pi,ca,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),c})();const Ux=function(){return[2]},xv=function(){return[0,0]},cp=function(c){return{type:"Point",coordinates:c}};let jx=(()=>{class c{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(r){console.log("onDragStart",r)}onDragEnd(r){console.log("onDragEnd",r)}onDrag(r){console.log("onDrag",r),this.coordinates=r.lngLat.toArray()}changeColor(r){this.layerPaint={...this.layerPaint,"circle-color":r}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"]],template:function(r,p){if(1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1)(2,"mgl-feature",2),l.NdJ("featureDragStart",function(F){return p.onDragStart(F)})("featureDragEnd",function(F){return p.onDragEnd(F)})("featureDrag",function(F){return p.onDrag(F)}),l.qZA()(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return p.changeColor("#3bb2d0")})("layerMouseLeave",function(){return p.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5)(6,"mat-card")(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA()()()()),2&r){const M=l.MAs(4);l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(9,Ux))("center",l.DdM(10,xv)),l.xp6(2),l.Q6J("geometry",l.VKq(12,cp,l.DdM(11,xv)))("mglDraggable",M),l.xp6(1),l.Q6J("paint",p.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",p.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",p.coordinates[1],"")}},dependencies:[Pi,Cr,Ar,Br,Xr,xi,eh,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const xg=function(){return[15]},mc=function(c){return[c,37.830348]},Hx=function(){return{"line-join":"round","line-cap":"round"}},zf=function(){return{"line-color":"#888","line-width":8}};let up=(()=>{class c{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,xg))("center",l.VKq(8,mc,-122.486052)),l.xp6(2),l.Q6J("geometry",p.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,Hx))("paint",l.DdM(11,zf)))},dependencies:[Pi,Cr,Br,Xr,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),$x=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&r&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},dependencies:[Pi,xi,xc,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Gx(c,h){if(1&c&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&c){const r=l.oxw();l.Q6J("lngLat",r.selectedLngLat),l.xp6(1),l.Q6J("innerHTML",null==r.selectedElement?null:r.selectedElement.name,l.oJD)}}const Zx=function(){return[3]},Vf=function(c){return[c,38.907]},Wx=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},qx=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let wv=(()=>{class c{onClick(r){this.selectedLngLat=r.lngLat,this.selectedElement=r.features[0].properties}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat",4,"ngIf"],[3,"lngLat"],[3,"innerHTML"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return p.cursorStyle="pointer"})("layerMouseLeave",function(){return p.cursorStyle=""})("layerClick",function(F){return p.onClick(F)}),l.qZA(),l.YNc(2,Gx,2,2,"mgl-popup",2),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Zx))("center",l.VKq(9,Vf,-100.04))("cursorStyle",p.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,Wx))("paint",l.DdM(12,qx)),l.xp6(1),l.Q6J("ngIf",p.selectedLngLat))},dependencies:[fe.O5,Pi,Cr,Wo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();function Cv(c,h){if(1&c&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&c){const r=l.oxw();l.Q6J("feature",r.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==r.selectedPoint.properties?null:r.selectedPoint.properties.description,l.oJD)}}const wg=function(){return[11.15]},Ev=function(c){return[c,38.907]},Kx=function(){return["get","icon"]},Yx=function(c){return{"icon-image":c,"icon-allow-overlap":!0}};let I1=(()=>{class c{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(r){this.selectedPoint=r.features[0]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(F){return p.onClick(F)})("layerMouseEnter",function(){return p.cursorStyle="pointer"})("layerMouseLeave",function(){return p.cursorStyle=""}),l.qZA(),l.YNc(3,Cv,2,2,"mgl-popup",3),l.qZA()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,wg))("center",l.VKq(9,Ev,-77.04))("cursorStyle",p.cursorStyle),l.xp6(1),l.Q6J("data",p.points),l.xp6(1),l.Q6J("layout",l.VKq(12,Yx,l.DdM(11,Kx))),l.xp6(1),l.Q6J("ngIf",p.selectedPoint))},dependencies:[fe.O5,Pi,Cr,Br,Wo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Cg=function(){return[3]},jf=function(c){return[c,37.8]};let Dv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-popup",1)(2,"h1"),l._uU(3,"Hello world !"),l.qZA()()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Cg))("center",l.VKq(8,jf,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,jf,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},dependencies:[Pi,Wo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),c})();const Dg=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Xx=function(c){return{satellite:c}},Jx=function(){return{visibility:"visible"}},Qx=function(){return{"raster-opacity":1}},ew=function(c,h){return{id:"satellite",layout:c,minzoom:0,paint:h,"raster-opacity":1,source:"satellite",type:"raster"}},Mv=function(c){return[c]},Mg=function(c,h){return{version:8,sources:c,layers:h}},Sv=function(){return[9]},Tv=function(){return[137.9150899566626,36.25956997955441]};let Iv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(r,p){1&r&&l._UZ(0,"mgl-map",0),2&r&&(l.Akn(l.WLB(14,Mg,l.VKq(5,Xx,l.DdM(4,Dg)),l.VKq(12,Mv,l.WLB(9,ew,l.DdM(7,Jx),l.DdM(8,Qx))))),l.Q6J("zoom",l.DdM(17,Sv))("center",l.DdM(18,Tv)))},dependencies:[Pi,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Av=function(){return[15]},Pv=function(c){return[c,38.8895]},kv=function(){return{"background-image":"url(https://www.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let tw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(r,p){if(1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA()()),2&r){const M=l.MAs(2);l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,Av))("center",l.VKq(8,Pv,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,Pv,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,kv)),l.xp6(1),l.Q6J("marker",M)}},dependencies:[fe.PC,Pi,ca,Wo,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})();const Rv=["input"],nw=function(c){return{enterDuration:c}},xa=["*"],th=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function iw(){return{color:"accent"}}});let Lv=0;const A1={provide:Es.JU,useExisting:(0,l.Gpc)(()=>nh),multi:!0};class rw{constructor(h,r){this.source=h,this.value=r}}const Sg=new l.OlP("MatRadioGroup");let Fv=(()=>{class c{constructor(r){this._changeDetector=r,this._value=null,this._name="mat-radio-group-"+Lv++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(r){this._name=r,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(r){this._labelPosition="before"===r?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(r){this._selected=r,this.value=r?r.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(r){this._disabled=(0,Ri.Ig)(r),this._markRadiosForCheck()}get required(){return this._required}set required(r){this._required=(0,Ri.Ig)(r),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(r=>{r.name=this.name,r._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(p=>{p.checked=this.value===p.value,p.checked&&(this._selected=p)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new rw(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(r=>r._markForCheck())}writeValue(r){this.value=r,this._changeDetector.markForCheck()}registerOnChange(r){this._controlValueAccessorChangeFn=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetector.markForCheck()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.sBO))},c.\u0275dir=l.lG2({type:c,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),c})(),nh=(()=>{class c extends Fv{}return c.\u0275fac=function(){let h;return function(p){return(h||(h=l.n5z(c)))(p||c)}}(),c.\u0275dir=l.lG2({type:c,selectors:[["mat-radio-group"]],contentQueries:function(r,p,M){if(1&r&&l.Suo(M,Ig,5),2&r){let F;l.iGM(F=l.CRH())&&(p._radios=F)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([A1,{provide:Sg,useExisting:c}]),l.qOj]}),c})();class ow{constructor(h){this._elementRef=h}}const Tg=(0,pi.Kr)((0,pi.sb)(ow));let sw=(()=>{class c extends Tg{constructor(r,p,M,F,se,xe,Ke,vt){super(p),this._changeDetector=M,this._focusMonitor=F,this._radioDispatcher=se,this._providerOverride=Ke,this._uniqueId="mat-radio-"+ ++Lv,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=r,this._noopAnimations="NoopAnimations"===xe,vt&&(this.tabIndex=(0,Ri.su)(vt,0)),this._removeUniqueSelectionListener=se.listen((Kt,Jt)=>{Kt!==this.id&&Jt===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(r){const p=(0,Ri.Ig)(r);this._checked!==p&&(this._checked=p,p&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!p&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),p&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===r),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(r){this._labelPosition=r}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(r){this._setDisabled((0,Ri.Ig)(r))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(r){this._required=(0,Ri.Ig)(r)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(r){this._color=r}get inputId(){return`${this.id||this._uniqueId}-input`}focus(r,p){p?this._focusMonitor.focusVia(this._inputElement,p,r):this._inputElement.nativeElement.focus(r)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{!r&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new rw(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(r){r.stopPropagation()}_onInputInteraction(r){if(r.stopPropagation(),!this.checked&&!this.disabled){const p=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),p&&this.radioGroup._emitChangeEvent())}}_setDisabled(r){this._disabled!==r&&(this._disabled=r,this._changeDetector.markForCheck())}_updateTabIndex(){const r=this.radioGroup;let p;if(p=r&&r.selected&&!this.disabled?r.selected===this?this.tabIndex:-1:this.tabIndex,p!==this._previousTabIndex){const M=this._inputElement?.nativeElement;M&&(M.setAttribute("tabindex",p+""),this._previousTabIndex=p)}}}return c.\u0275fac=function(r){l.$Z()},c.\u0275dir=l.lG2({type:c,viewQuery:function(r,p){if(1&r&&l.Gf(Rv,5),2&r){let M;l.iGM(M=l.CRH())&&(p._inputElement=M.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),c})(),Ig=(()=>{class c extends sw{constructor(r,p,M,F,se,xe,Ke,vt){super(r,p,M,F,se,xe,Ke,vt)}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Sg,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Hl.tE),l.Y36(jd.A8),l.Y36(l.QbO,8),l.Y36(th,8),l.$8M("tabindex"))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(r,p){1&r&&l.NdJ("focus",function(){return p._inputElement.nativeElement.focus()}),2&r&&(l.uIk("tabindex",null)("id",p.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",p.checked)("mat-radio-disabled",p.disabled)("_mat-animation-noopable",p._noopAnimations)("mat-primary","primary"===p.color)("mat-accent","accent"===p.color)("mat-warn","warn"===p.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:xa,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(r,p){if(1&r&&(l.F$t(),l.TgZ(0,"label",0,1)(2,"span",2),l._UZ(3,"span",3)(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(F){return p._onInputInteraction(F)})("click",function(F){return p._onInputClick(F)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA()(),l.TgZ(9,"span",9)(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA()()),2&r){const M=l.MAs(1);l.uIk("for",p.inputId),l.xp6(5),l.Q6J("id",p.inputId)("checked",p.checked)("disabled",p.disabled)("required",p.required),l.uIk("name",p.name)("value",p.value)("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby)("aria-describedby",p.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",M)("matRippleDisabled",p._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(17,nw,p._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==p.labelPosition)}},dependencies:[pi.wG],styles:['.mat-radio-button{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.mat-radio-input:focus~.mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}'],encapsulation:2,changeDetection:0}),c})(),aw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pi.si,pi.BQ,pi.BQ]}),c})();const lw=function(){return[13]},cw=function(){return[4.899,52.372]};let Ag=(()=>{class c{constructor(){this.layerId="streets"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(r){this.style="streets"===r?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:6,vars:8,consts:[[3,"zoom","center","preserveDrawingBuffer"],[3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(r,p){1&r&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(F){return p.changeStyle(F)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"streets"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"from code"),l.qZA()()),2&r&&(l.Akn(p.style),l.Q6J("zoom",l.DdM(6,lw))("center",l.DdM(7,cw))("preserveDrawingBuffer",!0),l.xp6(1),l.Q6J("ngModel",p.layerId))},dependencies:[Es.JJ,Es.On,Pi,nh,Ig,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),c})();const Nv=["button"],Bv=["*"],dp=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Hf=new l.OlP("MatButtonToggleGroup");let Pg=0;class zv{constructor(h,r){this.source=h,this.value=r}}const ih=(0,pi.Kr)(class{});let Uv=(()=>{class c extends ih{constructor(r,p,M,F,se,xe){super(),this._changeDetectorRef=p,this._elementRef=M,this._focusMonitor=F,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const Ke=Number(se);this.tabIndex=Ke||0===Ke?Ke:null,this.buttonToggleGroup=r,this.appearance=xe&&xe.appearance?xe.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(r){this._appearance=r}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(r){const p=(0,Ri.Ig)(r);p!==this._checked&&(this._checked=p,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(r){this._disabled=(0,Ri.Ig)(r)}ngOnInit(){const r=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+Pg++,r&&(r._isPrechecked(this)?this.checked=!0:r._isSelected(this)!==this._checked&&r._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const r=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),r&&r._isSelected(this)&&r._syncButtonToggle(this,!1,!1,!0)}focus(r){this._buttonElement.nativeElement.focus(r)}_onButtonClick(){const r=!!this._isSingleSelector()||!this._checked;r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new zv(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(Hf,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(Hl.tE),l.$8M("tabindex"),l.Y36(dp,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["mat-button-toggle"]],viewQuery:function(r,p){if(1&r&&l.Gf(Nv,5),2&r){let M;l.iGM(M=l.CRH())&&(p._buttonElement=M.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(r,p){1&r&&l.NdJ("focus",function(){return p.focus()}),2&r&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",p.id)("name",null),l.ekj("mat-button-toggle-standalone",!p.buttonToggleGroup)("mat-button-toggle-checked",p.checked)("mat-button-toggle-disabled",p.disabled)("mat-button-toggle-appearance-standard","standard"===p.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:Bv,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,p){if(1&r&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return p._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA()(),l._UZ(4,"span",3)(5,"span",4)),2&r){const M=l.MAs(1);l.Q6J("id",p.buttonId)("disabled",p.disabled||null),l.uIk("tabindex",p.disabled?-1:p.tabIndex)("aria-pressed",p.checked)("name",p._getButtonName())("aria-label",p.ariaLabel)("aria-labelledby",p.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",M)("matRippleDisabled",p.disableRipple||p.disabled)}},dependencies:[pi.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),c})(),jv=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pi.BQ,pi.si,pi.BQ]}),c})();const Og=function(){return[3]},O1=function(c,h){return[c,h]},k1=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},dw=function(){return{"line-color":"blue"}};let hw=(()=>{class c{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(r){this.layouts[r.value]={...this.layouts[r.value],visibility:"visible"===this.layouts[r.value].visibility?"none":"visible"}}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:10,vars:17,consts:[[3,"zoom","center","preserveDrawingBuffer"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1)(2,"mgl-vector-source",2)(3,"mgl-layer",3)(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5)(6,"mat-button-toggle",6),l.NdJ("change",function(F){return p.toggleLayer(F)}),l._uU(7,"countries names"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(F){return p.toggleLayer(F)}),l._uU(9,"countries border"),l.qZA()()),2&r&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(11,Og))("center",l.WLB(12,O1,-71.97722138410576,-13.517379300798098))("preserveDrawingBuffer",!0),l.xp6(1),l.Q6J("tiles",l.DdM(15,k1)),l.xp6(2),l.Q6J("layout",p.layouts.countries)("paint",l.DdM(16,dw)),l.xp6(1),l.Q6J("layout",p.layouts.names),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},dependencies:[Pi,Cr,Qa,Uv,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),c})();const pw=function(){return[12]},Hv=function(c){return[c,38.897]},$v=function(){return{padding:20}},fw=function(){return{"line-color":"#BF93E4","line-width":5}},Gv=function(){return{"line-join":"round","line-cap":"round"}};let Zv=(()=>{class c{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const r=this.source.data.features[0].geometry.coordinates;this.bounds=r.reduce((p,M)=>p.extend(M),new j.LngLatBounds(r[0],r[0]))}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["showcase-demo"]],decls:5,vars:16,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions","preserveDrawingBuffer"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0)(1,"mgl-control")(2,"button",1),l.NdJ("click",function(){return p.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA()(),l._UZ(4,"mgl-layer",2),l.qZA()),2&r&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(10,pw))("center",l.VKq(11,Hv,-77.0214))("fitBounds",p.bounds)("fitBoundsOptions",l.DdM(13,$v))("preserveDrawingBuffer",!0),l.xp6(4),l.Q6J("source",p.source)("paint",l.DdM(14,fw))("layout",l.DdM(15,Gv)))},dependencies:[Pi,Cr,xi,pc.lW,Qi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),c})(),Wv=(()=>{class c{constructor(r){this.router=r}canActivate(r){return!!tb[0].children.some(p=>p.path===r.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(G.F0))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function rh(c){return c&&c.origin?c.origin:"https://stackblitz.com"}function Kv(){return Math.random().toString(36).substring(7)}function td(c){var h=[];return c&&(c.forceEmbedLayout&&h.push("embed=1"),c.clickToLoad&&h.push("ctl=1"),"string"==typeof c.openFile&&h.push("file="+c.openFile),Array.isArray(c.openFile)&&c.openFile.forEach(function(r){"string"==typeof r&&h.push("file="+r)}),"preview"!==c.view&&"editor"!==c.view||h.push("view="+c.view),"light"!==c.theme&&"dark"!==c.theme||h.push("theme="+c.theme),c.hideExplorer&&h.push("hideExplorer=1"),c.hideNavigation&&h.push("hideNavigation=1"),c.hideDevTools&&h.push("hidedevtools=1"),"number"==typeof c.devToolsHeight&&c.devToolsHeight>=0&&c.devToolsHeight<=100&&h.push("devtoolsheight="+Math.round(c.devToolsHeight))),h.length?"?"+h.join("&"):""}function $f(c,h,r){if(null===c.parentNode)throw new Error("Invalid Element");h.id=c.id,function mw(c,h){h&&(h.hasOwnProperty("height")&&(c.height=""+h.height),h.hasOwnProperty("width")&&(c.width=""+h.width)),c.height||(c.height="300"),c.width||c.setAttribute("style","width:100%;")}(h,r),c.parentNode.replaceChild(h,c)}function Gf(c){if("string"==typeof c){var h=document.getElementById(c);if(null!==h)return h}else if(c instanceof HTMLElement)return c;throw new Error("Invalid Element")}function Zf(c){return c&&!1===c.newWindow?"_self":"_blank"}var Yv=function(c){var h=this;this.pending={},this.port=c,this.port.onmessage=function(r){if(r.data.payload.__reqid){var p=r.data.payload.__reqid,M=r.data.payload.__success;if(h.pending[p]){if(delete r.data.payload.__reqid,delete r.data.payload.__success,M){var F=0===Object.keys(r.data.payload).length&&r.data.payload.constructor===Object?null:r.data.payload;h.pending[p].resolve(F)}else h.pending[p].reject(r.data.payload.error?r.data.type+": "+r.data.payload.error:r.data.type);delete h.pending[p]}}}};Yv.prototype.request=function(c){var h=this,r=Kv();return new Promise(function(p,M){h.pending[r]={resolve:p,reject:M},c.payload.__reqid=r,h.port.postMessage(c)})};var kg=function(c,h){var r=this;this.rdc=new Yv(c),this.preview={},Object.defineProperty(this.preview,"origin",{value:h.previewOrigin,writable:!1}),this.editor={openFile:function(p){return r.rdc.request({type:"SDK_OPEN_FILE",payload:{path:p}})}}};kg.prototype.applyFsDiff=function(c){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:c})},kg.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},kg.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var hp=[],R1=function(c){var h=this;this.id=Kv(),this.element=c,this.pending=new Promise(function(r,p){var M=function(vt){vt.data.action&&"SDK_INIT_SUCCESS"===vt.data.action&&vt.data.id===h.id&&(h.vm=new kg(vt.ports[0],vt.data.payload),r(h.vm),se())},F=function(){h.element.contentWindow&&h.element.contentWindow.postMessage({action:"SDK_INIT",id:h.id},"*")};function se(){window.clearInterval(Ke),window.removeEventListener("message",M)}window.addEventListener("message",M),F();var xe=0,Ke=window.setInterval(function(){if(h.vm)se();else{if(xe>=20)return se(),p("Timeout: Unable to establish a connection with the StackBlitz VM"),void hp.forEach(function(vt,Kt){vt.id===h.id&&hp.splice(Kt,1)});xe++,F()}},500)}),hp.push(this)},gw=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function pp(c,h){var r=document.createElement("input");return r.type="hidden",r.name=c,r.value=h,r}function _w(c){-1===gw.indexOf(c.template)&&console.warn("Unsupported project template, must be one of: "+gw.join(", "));var h=document.createElement("form");return h.method="POST",h.setAttribute("style","display:none!important;"),h.appendChild(pp("project[title]",c.title)),h.appendChild(pp("project[description]",c.description)),h.appendChild(pp("project[template]",c.template)),c.dependencies&&h.appendChild(pp("project[dependencies]",JSON.stringify(c.dependencies))),c.settings&&h.appendChild(pp("project[settings]",JSON.stringify(c.settings))),Object.keys(c.files).forEach(function(r){h.appendChild(pp("project[files]["+r+"]",c.files[r]))}),h}var Rg={connect:function(c){if(!c||!c.contentWindow)return Promise.reject("Provided element is not an iframe.");var h=function(c){var h=c instanceof Element?"element":"id";return hp.find(function(p){return p[h]===c})||null}(c);return h?h.pending:new R1(c).pending},openGithubProject:function(c,h){window.open(rh(h)+"/github/"+c+td(h),Zf(h))},openProject:function(c,h){!function N1(c,h){var r=_w(c);r.action=rh(h)+"/run"+td(h),r.target=Zf(h),document.body.appendChild(r),r.submit(),document.body.removeChild(r)}(c,h)},openProjectId:function(c,h){window.open(rh(h)+"/edit/"+c+td(h),Zf(h))},embedGithubProject:function(c,h,r){var p=Gf(c),M=document.createElement("iframe");return M.src=rh(r)+"/github/"+h+td(r),$f(p,M,r),Rg.connect(M)},embedProject:function(c,h,r){var p=Gf(c),M=function F1(c,h){var r=_w(c);return r.action=rh(h)+"/run"+td(h),r.id="sb","<html><head><title></title></head><body>"+r.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(h,r),F=document.createElement("iframe");return $f(p,F,r),F.contentDocument&&F.contentDocument.write(M),Rg.connect(F)},embedProjectId:function(c,h,r){var p=Gf(c),M=document.createElement("iframe");return M.src=rh(r)+"/edit/"+h+td(r),$f(p,M,r),Rg.connect(M)}};const Wf=Rg;var Xv=U(4128),Lg=U(9646),qf=U(2076),Kf=U(3151),Jv=U(8746);function B1(c){return c.replace(/(^\w|-\w)/g,Fg)}function Fg(c){return c.replace(/-/,"").toUpperCase()}var Ng=U(529);const Bg="app/demo/examples/";let z1=(()=>{class c{constructor(r){this.http=r,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(r){let p=this.fileCache.get(r);return p||(p=this.http.get(`${Bg}${r}.component.ts`,{responseType:"text"}).pipe((0,wi.w)(M=>this.loadAdditionnalFilesIfNecessary(M)),(0,Kf.d)(1)),this.fileCache.set(r,p),p)}loadAdditionnalFilesIfNecessary(r){const p=/'\.\/([\w-.]+\.\w+)'/g;let M;const F=[],se={"src/demo.ts":r};for(;M=p.exec(r);)F.push(this.loadFile(M[1]));return F.length?(0,Xv.D)(F).pipe((0,Mn.U)(xe=>({...Object.assign({},...xe),...se}))):(0,Lg.of)(se)}loadFile(r){let p=this.fileCache.get(r);return p||(p=this.http.get(`${Bg}${r}`,{responseType:"text"}).pipe((0,Mn.U)(M=>({[`src/${r}`]:M})),(0,Kf.d)(1)),this.fileCache.set(r,p),p)}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(Ng.eN))},c.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function yw(c,h){if(1&c&&(l.O4$(),l._UZ(0,"circle",4)),2&c){const r=l.oxw(),p=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+r._spinnerAnimationLabel)("stroke-dashoffset",r._getStrokeDashOffset(),"px")("stroke-dasharray",r._getStrokeCircumference(),"px")("stroke-width",r._getCircleStrokeWidth(),"%")("transform-origin",r._getCircleTransformOrigin(p)),l.uIk("r",r._getCircleRadius())}}function vw(c,h){if(1&c&&(l.O4$(),l._UZ(0,"circle",4)),2&c){const r=l.oxw(),p=l.MAs(1);l.Udp("stroke-dashoffset",r._getStrokeDashOffset(),"px")("stroke-dasharray",r._getStrokeCircumference(),"px")("stroke-width",r._getCircleStrokeWidth(),"%")("transform-origin",r._getCircleTransformOrigin(p)),l.uIk("r",r._getCircleRadius())}}const bw=(0,pi.pj)(class{constructor(c){this._elementRef=c}},"primary"),V1=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function U1(){return{diameter:100}}});class Fc extends bw{constructor(h,r,p,M,F,se,xe,Ke){super(h),this._document=p,this._diameter=100,this._value=0,this._resizeSubscription=ge.w0.EMPTY,this.mode="determinate";const vt=Fc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),vt.has(p.head)||vt.set(p.head,new Set([100])),this._noopAnimations="NoopAnimations"===M&&!!F&&!F._forceAnimations,"mat-spinner"===h.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),F&&(F.color&&(this.color=this.defaultColor=F.color),F.diameter&&(this.diameter=F.diameter),F.strokeWidth&&(this.strokeWidth=F.strokeWidth)),r.isBrowser&&r.SAFARI&&xe&&se&&Ke&&(this._resizeSubscription=xe.change(150).subscribe(()=>{"indeterminate"===this.mode&&Ke.run(()=>se.markForCheck())}))}get diameter(){return this._diameter}set diameter(h){this._diameter=(0,Ri.su)(h),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(h){this._strokeWidth=(0,Ri.su)(h)}get value(){return"determinate"===this.mode?this._value:0}set value(h){this._value=Math.max(0,Math.min(100,(0,Ri.su)(h)))}ngOnInit(){const h=this._elementRef.nativeElement;this._styleRoot=(0,ps.kV)(h)||this._document.head,this._attachStyleNode(),h.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const h=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${h} ${h}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(h){const r=50*(h.currentScale??1);return`${r}% ${r}%`}_attachStyleNode(){const h=this._styleRoot,r=this._diameter,p=Fc._diameters;let M=p.get(h);if(!M||!M.has(r)){const F=this._document.createElement("style");F.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),F.textContent=this._getAnimationText(),h.appendChild(F),M||(M=new Set,p.set(h,M)),M.add(r)}}_getAnimationText(){const h=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*h).replace(/END_VALUE/g,""+.2*h).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Fc._diameters=new WeakMap,Fc.\u0275fac=function(h){return new(h||Fc)(l.Y36(l.SBq),l.Y36(ps.t4),l.Y36(fe.K0,8),l.Y36(l.QbO,8),l.Y36(V1),l.Y36(l.sBO),l.Y36(Ds.rL),l.Y36(l.R0b))},Fc.\u0275cmp=l.Xpm({type:Fc,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(h,r){2&h&&(l.uIk("aria-valuemin","determinate"===r.mode?0:null)("aria-valuemax","determinate"===r.mode?100:null)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),l.Udp("width",r.diameter,"px")("height",r.diameter,"px"),l.ekj("_mat-animation-noopable",r._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(h,r){1&h&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,yw,1,11,"circle",2),l.YNc(3,vw,1,9,"circle",3),l.qZA()),2&h&&(l.Udp("width",r.diameter,"px")("height",r.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===r.mode),l.uIk("viewBox",r._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[fe.RF,fe.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let xw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pi.BQ,fe.ez,pi.BQ]}),c})();const $1=["container"];function ww(c,h){1&c&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner")(2,"div"),l.qZA())}let eb=(()=>{class c{constructor(r,p,M,F,se){this.zone=r,this.activatedRoute=p,this.demoFileLoaderService=M,this.http=F,this.ChangeDetectorRef=se,this.loading=!0,this.projectbase$=(0,Xv.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe((0,Kf.d)(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,sr.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,wi.w)(r=>(0,Xv.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(r.demoUrl),(0,Lg.of)(r.demoUrl)])),(0,wi.w)(([r,p,M])=>(0,qf.D)(this.openExample(r,p,M)).pipe((0,Jv.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(r,p,M){var F=this;return $r(function*(){if(F.vm)return void(yield F.vm.applyFsDiff({create:p,destroy:[]}));const se=function Qv(c,h,r){return{files:{"src/main.ts":c[0].replace(/###/g,B1(r)+"Component"),"angular.json":c[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n",...h},title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^13","@angular/material":"^13","@angular/animations":"^13","@angular/forms":"^13","@angular/common":"^13","@angular/compiler":"^13","@angular/core":"^13","@angular/platform-browser":"^13","@angular/platform-browser-dynamic":"^13","@angular/router":"^13",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(r,p,M);yield F.zone.runOutsideAngular($r(function*(){F.vm=yield Wf.embedProject(F.stackblitzContainer.nativeElement,se,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})()}}return c.\u0275fac=function(r){return new(r||c)(l.Y36(l.R0b),l.Y36(G.gz),l.Y36(z1),l.Y36(Ng.eN),l.Y36(l.sBO))},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],viewQuery:function(r,p){if(1&r&&l.Gf($1,5),2&r){let M;l.iGM(M=l.CRH())&&(p.stackblitzContainer=M.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(r,p){1&r&&(l._UZ(0,"div",null,0),l.YNc(2,ww,3,0,"div",1)),2&r&&(l.xp6(2),l.Q6J("ngIf",p.loading))},dependencies:[fe.O5,Fc],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),c})();var Li=(()=>(function(c){c.STYLES="Styles",c.LAYERS="Layers",c.SOURCES="Sources",c.USER_INTERACTION="User interaction",c.CAMERA="Camera",c.CONTROLS_AND_OVERLAYS="Controls and overlays"}(Li||(Li={})),Li))();const tb=[{path:"",component:X_,children:[{path:"edit/:demoUrl",component:eb,canActivate:[Wv]},{path:"display-map",component:T0,data:{label:"Display a map",cat:Li.STYLES}},{path:"custom-style-id",component:p1,data:{label:"Display a map with a custom style",cat:Li.STYLES}},{path:"set-style",component:Ag,data:{label:"Change a map's style",cat:Li.STYLES}},{path:"satellite-map",component:Iv,data:{label:"Display a satellite map",cat:Li.STYLES}},{path:"add-image-generated",component:n0,data:{label:"Add a generated icon to the map",cat:Li.LAYERS}},{path:"add-image",component:d0,data:{label:"Add an icon to the map",cat:Li.LAYERS}},{path:"toggle-layers",component:hw,data:{label:"Show and hide layers",cat:Li.LAYERS}},{path:"3d-buildings",component:Jb,data:{label:"Display 3d buildings",cat:Li.LAYERS}},{path:"cluster",component:Ty,data:{label:"Create and style clusters",cat:Li.LAYERS}},{path:"heatmap",component:ix,data:{label:"Create a heatmap layer",cat:Li.LAYERS}},{path:"geojson-line",component:$y,data:{label:"Add a GeoJSON line",cat:Li.LAYERS}},{path:"ngx-geojson-line",component:up,data:{label:"[NGX] Add a GeoJSON line",cat:Li.LAYERS}},{path:"custom-marker-icons",component:h1,data:{label:"Add custom icons with Markers",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:Vx,data:{label:"[NGX] Add custom icons with Markers",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:mx,data:{label:"Update a feature in realtime",cat:Li.SOURCES}},{path:"live-update-image-source",component:yx,data:{label:"Update an image source in realtime",cat:Li.SOURCES}},{path:"popup",component:Dv,data:{label:"Display a popup",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:tw,data:{label:"Attach a popup to a marker instance",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:op,data:{label:"View a fullscreen map",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:Cx,data:{label:"Display map navigation controls",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:bx,data:{label:"Locate the user",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:sg,data:{label:"Change the default position for attribution",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:$x,data:{label:"[NGX] Show scale information",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:T1,data:{label:"[NGX] Add a custom control",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:lx,data:{label:"Display a non-interactive map",cat:Li.USER_INTERACTION}},{path:"language-switch",component:dx,data:{label:"Change a map's language",cat:Li.USER_INTERACTION}},{path:"center-on-symbol",component:my,data:{label:"Center the map on a clicked symbol",cat:Li.USER_INTERACTION}},{path:"ngx-drag-a-point",component:jx,data:{label:"[NGX] Create a draggable point",cat:Li.USER_INTERACTION}},{path:"drag-a-marker",component:Fy,data:{label:"Create a draggable marker",cat:Li.USER_INTERACTION}},{path:"hover-styles",component:mg,data:{label:"Create a hover effect",cat:Li.USER_INTERACTION}},{path:"popup-on-click",component:I1,data:{label:"Display a popup on click",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:Zv,data:{label:"Fit to the bounds of a LineString",cat:Li.USER_INTERACTION}},{path:"cluster-html",component:p0,data:{label:"Display HTML clusters with custom properties",cat:Li.LAYERS}},{path:"ngx-cluster-html",component:vv,data:{label:"[NGX] Display HTML clusters with custom properties",cat:Li.LAYERS}},{path:"polygon-popup-on-click",component:wv,data:{label:"Show polygon information on click",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:l0,data:{label:"Generate and add a missing icon to the map",cat:Li.STYLES}},{path:"custom-attribution",component:lg,data:{label:"Add custom attributions",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:D0,data:{label:"Add custom localization for controls",cat:Li.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:xx,data:{label:"Marker alignment options",cat:Li.CAMERA}},{path:"**",redirectTo:"display-map"}]}],Wl=function(){return[2]},Vg=[{path:"",component:(()=>{class c{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:r=>r}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const r=this.center[0];0===r?this.center=[90,0]:90===r?this.center=[180,0]:180===r?this.center=[-90,0]:-90===r&&(this.center=[0,0])}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=l.Xpm({type:c,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(r,p){1&r&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return p.moveCenter()})("moveEnd",function(){return p.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of maplibre-gl-js"),l.qZA()()),2&r&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,Wl))("center",p.center)("centerWithPanTo",!0)("panToOptions",p.panToOptions)("interactive",!1))},dependencies:[Pi,qe.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),c})(),pathMatch:"full"}],El=[{path:"",component:U(6449).$,children:[{path:"demo",children:tb},...Vg,{path:"doc",loadChildren:()=>U.e(335).then(U.bind(U,335)).then(c=>c.DocModule)}]},{path:"**",redirectTo:""}];let Ew=(()=>{class c{constructor(r,p){r.addSvgIcon("ngx-maplibre-gl",p.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),r.addSvgIcon("ngx-maplibre-gl-red",p.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),r.addSvgIcon("github",p.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return c.\u0275fac=function(r){return new(r||c)(l.LFG(qe.jv),l.LFG(D.H7))},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[D.b2,Ja,qe.Ps,G.Bz.forRoot(El,{relativeLinkResolution:"legacy"}),pl,Yn.x]}),c})(),Ug=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({providers:[Wv],imports:[G.Bz,Ng.JF,fe.ez,Es.u5,pl,Yn.x,aw,jv,pc.ot,Wm,F0,xw,qd,qe.Ps,L_,Bx,ng]}),c})(),Dw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c}),c.\u0275inj=l.cJS({imports:[pl,qe.Ps]}),c})(),Mw=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=l.oAB({type:c,bootstrap:[m]}),c.\u0275inj=l.cJS({imports:[G.Bz,Ew,Dw,Ug]}),c})();(0,l.G48)(),D.q6().bootstrapModule(Mw).catch(c=>console.log(c))},1135:(Cn,gt,U)=>{"use strict";U.d(gt,{X:()=>l});var D=U(7579);class l extends D.x{constructor(m){super(),this._value=m}get value(){return this.getValue()}_subscribe(m){const qe=super._subscribe(m);return!qe.closed&&m.next(this._value),qe}getValue(){const{hasError:m,thrownError:qe,_value:ke}=this;if(m)throw qe;return this._throwIfClosed(),ke}next(m){super.next(this._value=m)}}},9751:(Cn,gt,U)=>{"use strict";U.d(gt,{y:()=>Re});var D=U(930),l=U(727),G=U(8822),m=U(9635),qe=U(2416),ke=U(576),Ye=U(2806);let Re=(()=>{class Te{constructor(lt){lt&&(this._subscribe=lt)}lift(lt){const We=new Te;return We.source=this,We.operator=lt,We}subscribe(lt,We,Dt){const wt=function rt(Te){return Te&&Te instanceof D.Lv||function Ge(Te){return Te&&(0,ke.m)(Te.next)&&(0,ke.m)(Te.error)&&(0,ke.m)(Te.complete)}(Te)&&(0,l.Nn)(Te)}(lt)?lt:new D.Hp(lt,We,Dt);return(0,Ye.x)(()=>{const{operator:Et,source:_n}=this;wt.add(Et?Et.call(wt,_n):_n?this._subscribe(wt):this._trySubscribe(wt))}),wt}_trySubscribe(lt){try{return this._subscribe(lt)}catch(We){lt.error(We)}}forEach(lt,We){return new(We=pe(We))((Dt,wt)=>{const Et=new D.Hp({next:_n=>{try{lt(_n)}catch(hn){wt(hn),Et.unsubscribe()}},error:wt,complete:Dt});this.subscribe(Et)})}_subscribe(lt){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(lt)}[G.L](){return this}pipe(...lt){return(0,m.U)(lt)(this)}toPromise(lt){return new(lt=pe(lt))((We,Dt)=>{let wt;this.subscribe(Et=>wt=Et,Et=>Dt(Et),()=>We(wt))})}}return Te.create=ut=>new Te(ut),Te})();function pe(Te){var ut;return null!==(ut=Te??qe.v.Promise)&&void 0!==ut?ut:Promise}},7579:(Cn,gt,U)=>{"use strict";U.d(gt,{x:()=>Ye});var D=U(9751),l=U(727);const m=(0,U(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=U(8737),ke=U(2806);let Ye=(()=>{class pe extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(rt){const Te=new Re(this,this);return Te.operator=rt,Te}_throwIfClosed(){if(this.closed)throw new m}next(rt){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(rt)}})}error(rt){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=rt;const{observers:Te}=this;for(;Te.length;)Te.shift().error(rt)}})}complete(){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:rt}=this;for(;rt.length;)rt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var rt;return(null===(rt=this.observers)||void 0===rt?void 0:rt.length)>0}_trySubscribe(rt){return this._throwIfClosed(),super._trySubscribe(rt)}_subscribe(rt){return this._throwIfClosed(),this._checkFinalizedStatuses(rt),this._innerSubscribe(rt)}_innerSubscribe(rt){const{hasError:Te,isStopped:ut,observers:lt}=this;return Te||ut?l.Lc:(this.currentObservers=null,lt.push(rt),new l.w0(()=>{this.currentObservers=null,(0,qe.P)(lt,rt)}))}_checkFinalizedStatuses(rt){const{hasError:Te,thrownError:ut,isStopped:lt}=this;Te?rt.error(ut):lt&&rt.complete()}asObservable(){const rt=new D.y;return rt.source=this,rt}}return pe.create=(Ge,rt)=>new Re(Ge,rt),pe})();class Re extends Ye{constructor(Ge,rt){super(),this.destination=Ge,this.source=rt}next(Ge){var rt,Te;null===(Te=null===(rt=this.destination)||void 0===rt?void 0:rt.next)||void 0===Te||Te.call(rt,Ge)}error(Ge){var rt,Te;null===(Te=null===(rt=this.destination)||void 0===rt?void 0:rt.error)||void 0===Te||Te.call(rt,Ge)}complete(){var Ge,rt;null===(rt=null===(Ge=this.destination)||void 0===Ge?void 0:Ge.complete)||void 0===rt||rt.call(Ge)}_subscribe(Ge){var rt,Te;return null!==(Te=null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(Ge))&&void 0!==Te?Te:l.Lc}}},930:(Cn,gt,U)=>{"use strict";U.d(gt,{Hp:()=>Dt,Lv:()=>Te});var D=U(576),l=U(727),G=U(2416),m=U(7849),qe=U(5032);const ke=pe("C",void 0,void 0);function pe(At,Pe,Ze){return{kind:At,value:Pe,error:Ze}}var Ge=U(3410),rt=U(2806);class Te extends l.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,l.Nn)(Pe)&&Pe.add(this)):this.destination=hn}static create(Pe,Ze,Yt){return new Dt(Pe,Ze,Yt)}next(Pe){this.isStopped?_n(function Re(At){return pe("N",At,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?_n(function Ye(At){return pe("E",void 0,At)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?_n(ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function lt(At,Pe){return ut.call(At,Pe)}class We{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Ze}=this;if(Ze.next)try{Ze.next(Pe)}catch(Yt){wt(Yt)}}error(Pe){const{partialObserver:Ze}=this;if(Ze.error)try{Ze.error(Pe)}catch(Yt){wt(Yt)}else wt(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Ze){wt(Ze)}}}class Dt extends Te{constructor(Pe,Ze,Yt){let Ot;if(super(),(0,D.m)(Pe)||!Pe)Ot={next:Pe??void 0,error:Ze??void 0,complete:Yt??void 0};else{let Ut;this&&G.v.useDeprecatedNextContext?(Ut=Object.create(Pe),Ut.unsubscribe=()=>this.unsubscribe(),Ot={next:Pe.next&&lt(Pe.next,Ut),error:Pe.error&&lt(Pe.error,Ut),complete:Pe.complete&&lt(Pe.complete,Ut)}):Ot=Pe}this.destination=new We(Ot)}}function wt(At){G.v.useDeprecatedSynchronousErrorHandling?(0,rt.O)(At):(0,m.h)(At)}function _n(At,Pe){const{onStoppedNotification:Ze}=G.v;Ze&&Ge.z.setTimeout(()=>Ze(At,Pe))}const hn={closed:!0,next:qe.Z,error:function Et(At){throw At},complete:qe.Z}},727:(Cn,gt,U)=>{"use strict";U.d(gt,{Lc:()=>ke,w0:()=>qe,Nn:()=>Ye});var D=U(576);const G=(0,U(3888).d)(pe=>function(rt){pe(this),this.message=rt?`${rt.length} errors occurred during unsubscription:\n${rt.map((Te,ut)=>`${ut+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=rt});var m=U(8737);class qe{constructor(Ge){this.initialTeardown=Ge,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ge;if(!this.closed){this.closed=!0;const{_parentage:rt}=this;if(rt)if(this._parentage=null,Array.isArray(rt))for(const lt of rt)lt.remove(this);else rt.remove(this);const{initialTeardown:Te}=this;if((0,D.m)(Te))try{Te()}catch(lt){Ge=lt instanceof G?lt.errors:[lt]}const{_finalizers:ut}=this;if(ut){this._finalizers=null;for(const lt of ut)try{Re(lt)}catch(We){Ge=Ge??[],We instanceof G?Ge=[...Ge,...We.errors]:Ge.push(We)}}if(Ge)throw new G(Ge)}}add(Ge){var rt;if(Ge&&Ge!==this)if(this.closed)Re(Ge);else{if(Ge instanceof qe){if(Ge.closed||Ge._hasParent(this))return;Ge._addParent(this)}(this._finalizers=null!==(rt=this._finalizers)&&void 0!==rt?rt:[]).push(Ge)}}_hasParent(Ge){const{_parentage:rt}=this;return rt===Ge||Array.isArray(rt)&&rt.includes(Ge)}_addParent(Ge){const{_parentage:rt}=this;this._parentage=Array.isArray(rt)?(rt.push(Ge),rt):rt?[rt,Ge]:Ge}_removeParent(Ge){const{_parentage:rt}=this;rt===Ge?this._parentage=null:Array.isArray(rt)&&(0,m.P)(rt,Ge)}remove(Ge){const{_finalizers:rt}=this;rt&&(0,m.P)(rt,Ge),Ge instanceof qe&&Ge._removeParent(this)}}qe.EMPTY=(()=>{const pe=new qe;return pe.closed=!0,pe})();const ke=qe.EMPTY;function Ye(pe){return pe instanceof qe||pe&&"closed"in pe&&(0,D.m)(pe.remove)&&(0,D.m)(pe.add)&&(0,D.m)(pe.unsubscribe)}function Re(pe){(0,D.m)(pe)?pe():pe.unsubscribe()}},2416:(Cn,gt,U)=>{"use strict";U.d(gt,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Cn,gt,U)=>{"use strict";U.d(gt,{a:()=>Ge});var D=U(9751),l=U(4742),G=U(2076),m=U(4671),qe=U(3268),ke=U(3269),Ye=U(1810),Re=U(5403),pe=U(9672);function Ge(...ut){const lt=(0,ke.yG)(ut),We=(0,ke.jO)(ut),{args:Dt,keys:wt}=(0,l.D)(ut);if(0===Dt.length)return(0,G.D)([],lt);const Et=new D.y(function rt(ut,lt,We=m.y){return Dt=>{Te(lt,()=>{const{length:wt}=ut,Et=new Array(wt);let _n=wt,hn=wt;for(let At=0;At<wt;At++)Te(lt,()=>{const Pe=(0,G.D)(ut[At],lt);let Ze=!1;Pe.subscribe((0,Re.x)(Dt,Yt=>{Et[At]=Yt,Ze||(Ze=!0,hn--),hn||Dt.next(We(Et.slice()))},()=>{--_n||Dt.complete()}))},Dt)},Dt)}}(Dt,lt,wt?_n=>(0,Ye.n)(wt,_n):m.y));return We?Et.pipe((0,qe.Z)(We)):Et}function Te(ut,lt,We){ut?(0,pe.f)(We,ut,lt):lt()}},7272:(Cn,gt,U)=>{"use strict";U.d(gt,{z:()=>qe});var D=U(8189),G=U(3269),m=U(2076);function qe(...ke){return function l(){return(0,D.J)(1)}()((0,m.D)(ke,(0,G.yG)(ke)))}},9770:(Cn,gt,U)=>{"use strict";U.d(gt,{P:()=>G});var D=U(9751),l=U(8421);function G(m){return new D.y(qe=>{(0,l.Xf)(m()).subscribe(qe)})}},515:(Cn,gt,U)=>{"use strict";U.d(gt,{E:()=>l});const l=new(U(9751).y)(qe=>qe.complete())},4128:(Cn,gt,U)=>{"use strict";U.d(gt,{D:()=>Re});var D=U(9751),l=U(4742),G=U(8421),m=U(3269),qe=U(5403),ke=U(3268),Ye=U(1810);function Re(...pe){const Ge=(0,m.jO)(pe),{args:rt,keys:Te}=(0,l.D)(pe),ut=new D.y(lt=>{const{length:We}=rt;if(!We)return void lt.complete();const Dt=new Array(We);let wt=We,Et=We;for(let _n=0;_n<We;_n++){let hn=!1;(0,G.Xf)(rt[_n]).subscribe((0,qe.x)(lt,At=>{hn||(hn=!0,Et--),Dt[_n]=At},()=>wt--,void 0,()=>{(!wt||!hn)&&(Et||lt.next(Te?(0,Ye.n)(Te,Dt):Dt),lt.complete())}))}});return Ge?ut.pipe((0,ke.Z)(Ge)):ut}},2076:(Cn,gt,U)=>{"use strict";U.d(gt,{D:()=>Yt});var D=U(8421),l=U(9672),G=U(4482),m=U(5403);function qe(Ot,Ut=0){return(0,G.e)((tn,pt)=>{tn.subscribe((0,m.x)(pt,Xe=>(0,l.f)(pt,Ot,()=>pt.next(Xe),Ut),()=>(0,l.f)(pt,Ot,()=>pt.complete(),Ut),Xe=>(0,l.f)(pt,Ot,()=>pt.error(Xe),Ut)))})}function ke(Ot,Ut=0){return(0,G.e)((tn,pt)=>{pt.add(Ot.schedule(()=>tn.subscribe(pt),Ut))})}var pe=U(9751),rt=U(2202),Te=U(576);function lt(Ot,Ut){if(!Ot)throw new Error("Iterable cannot be null");return new pe.y(tn=>{(0,l.f)(tn,Ut,()=>{const pt=Ot[Symbol.asyncIterator]();(0,l.f)(tn,Ut,()=>{pt.next().then(Xe=>{Xe.done?tn.complete():tn.next(Xe.value)})},0,!0)})})}var We=U(3670),Dt=U(8239),wt=U(1144),Et=U(6495),_n=U(2206),hn=U(4532),At=U(3260);function Yt(Ot,Ut){return Ut?function Ze(Ot,Ut){if(null!=Ot){if((0,We.c)(Ot))return function Ye(Ot,Ut){return(0,D.Xf)(Ot).pipe(ke(Ut),qe(Ut))}(Ot,Ut);if((0,wt.z)(Ot))return function Ge(Ot,Ut){return new pe.y(tn=>{let pt=0;return Ut.schedule(function(){pt===Ot.length?tn.complete():(tn.next(Ot[pt++]),tn.closed||this.schedule())})})}(Ot,Ut);if((0,Dt.t)(Ot))return function Re(Ot,Ut){return(0,D.Xf)(Ot).pipe(ke(Ut),qe(Ut))}(Ot,Ut);if((0,_n.D)(Ot))return lt(Ot,Ut);if((0,Et.T)(Ot))return function ut(Ot,Ut){return new pe.y(tn=>{let pt;return(0,l.f)(tn,Ut,()=>{pt=Ot[rt.h](),(0,l.f)(tn,Ut,()=>{let Xe,It;try{({value:Xe,done:It}=pt.next())}catch(St){return void tn.error(St)}It?tn.complete():tn.next(Xe)},0,!0)}),()=>(0,Te.m)(pt?.return)&&pt.return()})}(Ot,Ut);if((0,At.L)(Ot))return function Pe(Ot,Ut){return lt((0,At.Q)(Ot),Ut)}(Ot,Ut)}throw(0,hn.z)(Ot)}(Ot,Ut):(0,D.Xf)(Ot)}},4968:(Cn,gt,U)=>{"use strict";U.d(gt,{R:()=>Ge});var D=U(8421),l=U(9751),G=U(5577),m=U(1144),qe=U(576),ke=U(3268);const Ye=["addListener","removeListener"],Re=["addEventListener","removeEventListener"],pe=["on","off"];function Ge(We,Dt,wt,Et){if((0,qe.m)(wt)&&(Et=wt,wt=void 0),Et)return Ge(We,Dt,wt).pipe((0,ke.Z)(Et));const[_n,hn]=function lt(We){return(0,qe.m)(We.addEventListener)&&(0,qe.m)(We.removeEventListener)}(We)?Re.map(At=>Pe=>We[At](Dt,Pe,wt)):function Te(We){return(0,qe.m)(We.addListener)&&(0,qe.m)(We.removeListener)}(We)?Ye.map(rt(We,Dt)):function ut(We){return(0,qe.m)(We.on)&&(0,qe.m)(We.off)}(We)?pe.map(rt(We,Dt)):[];if(!_n&&(0,m.z)(We))return(0,G.z)(At=>Ge(At,Dt,wt))((0,D.Xf)(We));if(!_n)throw new TypeError("Invalid event target");return new l.y(At=>{const Pe=(...Ze)=>At.next(1<Ze.length?Ze:Ze[0]);return _n(Pe),()=>hn(Pe)})}function rt(We,Dt){return wt=>Et=>We[wt](Dt,Et)}},8421:(Cn,gt,U)=>{"use strict";U.d(gt,{Xf:()=>ut});var D=U(655),l=U(1144),G=U(8239),m=U(9751),qe=U(3670),ke=U(2206),Ye=U(4532),Re=U(6495),pe=U(3260),Ge=U(576),rt=U(7849),Te=U(8822);function ut(At){if(At instanceof m.y)return At;if(null!=At){if((0,qe.c)(At))return function lt(At){return new m.y(Pe=>{const Ze=At[Te.L]();if((0,Ge.m)(Ze.subscribe))return Ze.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(At);if((0,l.z)(At))return function We(At){return new m.y(Pe=>{for(let Ze=0;Ze<At.length&&!Pe.closed;Ze++)Pe.next(At[Ze]);Pe.complete()})}(At);if((0,G.t)(At))return function Dt(At){return new m.y(Pe=>{At.then(Ze=>{Pe.closed||(Pe.next(Ze),Pe.complete())},Ze=>Pe.error(Ze)).then(null,rt.h)})}(At);if((0,ke.D)(At))return Et(At);if((0,Re.T)(At))return function wt(At){return new m.y(Pe=>{for(const Ze of At)if(Pe.next(Ze),Pe.closed)return;Pe.complete()})}(At);if((0,pe.L)(At))return function _n(At){return Et((0,pe.Q)(At))}(At)}throw(0,Ye.z)(At)}function Et(At){return new m.y(Pe=>{(function hn(At,Pe){var Ze,Yt,Ot,Ut;return(0,D.mG)(this,void 0,void 0,function*(){try{for(Ze=(0,D.KL)(At);!(Yt=yield Ze.next()).done;)if(Pe.next(Yt.value),Pe.closed)return}catch(tn){Ot={error:tn}}finally{try{Yt&&!Yt.done&&(Ut=Ze.return)&&(yield Ut.call(Ze))}finally{if(Ot)throw Ot.error}}Pe.complete()})})(At,Pe).catch(Ze=>Pe.error(Ze))})}},6451:(Cn,gt,U)=>{"use strict";U.d(gt,{T:()=>ke});var D=U(8189),l=U(8421),G=U(515),m=U(3269),qe=U(2076);function ke(...Ye){const Re=(0,m.yG)(Ye),pe=(0,m._6)(Ye,1/0),Ge=Ye;return Ge.length?1===Ge.length?(0,l.Xf)(Ge[0]):(0,D.J)(pe)((0,qe.D)(Ge,Re)):G.E}},9646:(Cn,gt,U)=>{"use strict";U.d(gt,{of:()=>G});var D=U(3269),l=U(2076);function G(...m){const qe=(0,D.yG)(m);return(0,l.D)(m,qe)}},2843:(Cn,gt,U)=>{"use strict";U.d(gt,{_:()=>G});var D=U(9751),l=U(576);function G(m,qe){const ke=(0,l.m)(m)?m:()=>m,Ye=Re=>Re.error(ke());return new D.y(qe?Re=>qe.schedule(Ye,0,Re):Ye)}},5963:(Cn,gt,U)=>{"use strict";U.d(gt,{H:()=>qe});var D=U(9751),l=U(4986),G=U(3532);function qe(ke=0,Ye,Re=l.P){let pe=-1;return null!=Ye&&((0,G.K)(Ye)?Re=Ye:pe=Ye),new D.y(Ge=>{let rt=function m(ke){return ke instanceof Date&&!isNaN(ke)}(ke)?+ke-Re.now():ke;rt<0&&(rt=0);let Te=0;return Re.schedule(function(){Ge.closed||(Ge.next(Te++),0<=pe?this.schedule(void 0,pe):Ge.complete())},rt)})}},5403:(Cn,gt,U)=>{"use strict";U.d(gt,{x:()=>l});var D=U(930);function l(m,qe,ke,Ye,Re){return new G(m,qe,ke,Ye,Re)}class G extends D.Lv{constructor(qe,ke,Ye,Re,pe,Ge){super(qe),this.onFinalize=pe,this.shouldUnsubscribe=Ge,this._next=ke?function(rt){try{ke(rt)}catch(Te){qe.error(Te)}}:super._next,this._error=Re?function(rt){try{Re(rt)}catch(Te){qe.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=Ye?function(){try{Ye()}catch(rt){qe.error(rt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var qe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ke}=this;super.unsubscribe(),!ke&&(null===(qe=this.onFinalize)||void 0===qe||qe.call(this))}}}},262:(Cn,gt,U)=>{"use strict";U.d(gt,{K:()=>m});var D=U(8421),l=U(5403),G=U(4482);function m(qe){return(0,G.e)((ke,Ye)=>{let Ge,Re=null,pe=!1;Re=ke.subscribe((0,l.x)(Ye,void 0,void 0,rt=>{Ge=(0,D.Xf)(qe(rt,m(qe)(ke))),Re?(Re.unsubscribe(),Re=null,Ge.subscribe(Ye)):pe=!0})),pe&&(Re.unsubscribe(),Re=null,Ge.subscribe(Ye))})}},4351:(Cn,gt,U)=>{"use strict";U.d(gt,{b:()=>G});var D=U(5577),l=U(576);function G(m,qe){return(0,l.m)(qe)?(0,D.z)(m,qe,1):(0,D.z)(m,1)}},8372:(Cn,gt,U)=>{"use strict";U.d(gt,{b:()=>m});var D=U(4986),l=U(4482),G=U(5403);function m(qe,ke=D.z){return(0,l.e)((Ye,Re)=>{let pe=null,Ge=null,rt=null;const Te=()=>{if(pe){pe.unsubscribe(),pe=null;const lt=Ge;Ge=null,Re.next(lt)}};function ut(){const lt=rt+qe,We=ke.now();if(We<lt)return pe=this.schedule(void 0,lt-We),void Re.add(pe);Te()}Ye.subscribe((0,G.x)(Re,lt=>{Ge=lt,rt=ke.now(),pe||(pe=ke.schedule(ut,qe),Re.add(pe))},()=>{Te(),Re.complete()},void 0,()=>{Ge=pe=null}))})}},6590:(Cn,gt,U)=>{"use strict";U.d(gt,{d:()=>G});var D=U(4482),l=U(5403);function G(m){return(0,D.e)((qe,ke)=>{let Ye=!1;qe.subscribe((0,l.x)(ke,Re=>{Ye=!0,ke.next(Re)},()=>{Ye||ke.next(m),ke.complete()}))})}},1884:(Cn,gt,U)=>{"use strict";U.d(gt,{x:()=>m});var D=U(4671),l=U(4482),G=U(5403);function m(ke,Ye=D.y){return ke=ke??qe,(0,l.e)((Re,pe)=>{let Ge,rt=!0;Re.subscribe((0,G.x)(pe,Te=>{const ut=Ye(Te);(rt||!ke(Ge,ut))&&(rt=!1,Ge=ut,pe.next(Te))}))})}function qe(ke,Ye){return ke===Ye}},9300:(Cn,gt,U)=>{"use strict";U.d(gt,{h:()=>G});var D=U(4482),l=U(5403);function G(m,qe){return(0,D.e)((ke,Ye)=>{let Re=0;ke.subscribe((0,l.x)(Ye,pe=>m.call(qe,pe,Re++)&&Ye.next(pe)))})}},8746:(Cn,gt,U)=>{"use strict";U.d(gt,{x:()=>l});var D=U(4482);function l(G){return(0,D.e)((m,qe)=>{try{m.subscribe(qe)}finally{qe.add(G)}})}},590:(Cn,gt,U)=>{"use strict";U.d(gt,{P:()=>Ye});var D=U(6805),l=U(9300),G=U(5698),m=U(6590),qe=U(8068),ke=U(4671);function Ye(Re,pe){const Ge=arguments.length>=2;return rt=>rt.pipe(Re?(0,l.h)((Te,ut)=>Re(Te,ut,rt)):ke.y,(0,G.q)(1),Ge?(0,m.d)(pe):(0,qe.T)(()=>new D.K))}},4004:(Cn,gt,U)=>{"use strict";U.d(gt,{U:()=>G});var D=U(4482),l=U(5403);function G(m,qe){return(0,D.e)((ke,Ye)=>{let Re=0;ke.subscribe((0,l.x)(Ye,pe=>{Ye.next(m.call(qe,pe,Re++))}))})}},9718:(Cn,gt,U)=>{"use strict";U.d(gt,{h:()=>l});var D=U(4004);function l(G){return(0,D.U)(()=>G)}},8189:(Cn,gt,U)=>{"use strict";U.d(gt,{J:()=>G});var D=U(5577),l=U(4671);function G(m=1/0){return(0,D.z)(l.y,m)}},5577:(Cn,gt,U)=>{"use strict";U.d(gt,{z:()=>Re});var D=U(4004),l=U(8421),G=U(4482),m=U(9672),qe=U(5403),Ye=U(576);function Re(pe,Ge,rt=1/0){return(0,Ye.m)(Ge)?Re((Te,ut)=>(0,D.U)((lt,We)=>Ge(Te,lt,ut,We))((0,l.Xf)(pe(Te,ut))),rt):("number"==typeof Ge&&(rt=Ge),(0,G.e)((Te,ut)=>function ke(pe,Ge,rt,Te,ut,lt,We,Dt){const wt=[];let Et=0,_n=0,hn=!1;const At=()=>{hn&&!wt.length&&!Et&&Ge.complete()},Pe=Yt=>Et<Te?Ze(Yt):wt.push(Yt),Ze=Yt=>{lt&&Ge.next(Yt),Et++;let Ot=!1;(0,l.Xf)(rt(Yt,_n++)).subscribe((0,qe.x)(Ge,Ut=>{ut?.(Ut),lt?Pe(Ut):Ge.next(Ut)},()=>{Ot=!0},void 0,()=>{if(Ot)try{for(Et--;wt.length&&Et<Te;){const Ut=wt.shift();We?(0,m.f)(Ge,We,()=>Ze(Ut)):Ze(Ut)}At()}catch(Ut){Ge.error(Ut)}}))};return pe.subscribe((0,qe.x)(Ge,Pe,()=>{hn=!0,At()})),()=>{Dt?.()}}(Te,ut,pe,rt)))}},3099:(Cn,gt,U)=>{"use strict";U.d(gt,{B:()=>qe});var D=U(8421),l=U(7579),G=U(930),m=U(4482);function qe(Ye={}){const{connector:Re=(()=>new l.x),resetOnError:pe=!0,resetOnComplete:Ge=!0,resetOnRefCountZero:rt=!0}=Ye;return Te=>{let ut,lt,We,Dt=0,wt=!1,Et=!1;const _n=()=>{lt?.unsubscribe(),lt=void 0},hn=()=>{_n(),ut=We=void 0,wt=Et=!1},At=()=>{const Pe=ut;hn(),Pe?.unsubscribe()};return(0,m.e)((Pe,Ze)=>{Dt++,!Et&&!wt&&_n();const Yt=We=We??Re();Ze.add(()=>{Dt--,0===Dt&&!Et&&!wt&&(lt=ke(At,rt))}),Yt.subscribe(Ze),!ut&&Dt>0&&(ut=new G.Hp({next:Ot=>Yt.next(Ot),error:Ot=>{Et=!0,_n(),lt=ke(hn,pe,Ot),Yt.error(Ot)},complete:()=>{wt=!0,_n(),lt=ke(hn,Ge),Yt.complete()}}),(0,D.Xf)(Pe).subscribe(ut))})(Te)}}function ke(Ye,Re,...pe){if(!0===Re)return void Ye();if(!1===Re)return;const Ge=new G.Hp({next:()=>{Ge.unsubscribe(),Ye()}});return Re(...pe).subscribe(Ge)}},3151:(Cn,gt,U)=>{"use strict";U.d(gt,{d:()=>qe});var D=U(7579),l=U(6063);class G extends D.x{constructor(Ye=1/0,Re=1/0,pe=l.l){super(),this._bufferSize=Ye,this._windowTime=Re,this._timestampProvider=pe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Re===1/0,this._bufferSize=Math.max(1,Ye),this._windowTime=Math.max(1,Re)}next(Ye){const{isStopped:Re,_buffer:pe,_infiniteTimeWindow:Ge,_timestampProvider:rt,_windowTime:Te}=this;Re||(pe.push(Ye),!Ge&&pe.push(rt.now()+Te)),this._trimBuffer(),super.next(Ye)}_subscribe(Ye){this._throwIfClosed(),this._trimBuffer();const Re=this._innerSubscribe(Ye),{_infiniteTimeWindow:pe,_buffer:Ge}=this,rt=Ge.slice();for(let Te=0;Te<rt.length&&!Ye.closed;Te+=pe?1:2)Ye.next(rt[Te]);return this._checkFinalizedStatuses(Ye),Re}_trimBuffer(){const{_bufferSize:Ye,_timestampProvider:Re,_buffer:pe,_infiniteTimeWindow:Ge}=this,rt=(Ge?1:2)*Ye;if(Ye<1/0&&rt<pe.length&&pe.splice(0,pe.length-rt),!Ge){const Te=Re.now();let ut=0;for(let lt=1;lt<pe.length&&pe[lt]<=Te;lt+=2)ut=lt;ut&&pe.splice(0,ut+1)}}}var m=U(3099);function qe(ke,Ye,Re){let pe,Ge=!1;return ke&&"object"==typeof ke?({bufferSize:pe=1/0,windowTime:Ye=1/0,refCount:Ge=!1,scheduler:Re}=ke):pe=ke??1/0,(0,m.B)({connector:()=>new G(pe,Ye,Re),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ge})}},5684:(Cn,gt,U)=>{"use strict";U.d(gt,{T:()=>l});var D=U(9300);function l(G){return(0,D.h)((m,qe)=>G<=qe)}},8675:(Cn,gt,U)=>{"use strict";U.d(gt,{O:()=>m});var D=U(7272),l=U(3269),G=U(4482);function m(...qe){const ke=(0,l.yG)(qe);return(0,G.e)((Ye,Re)=>{(ke?(0,D.z)(qe,Ye,ke):(0,D.z)(qe,Ye)).subscribe(Re)})}},3900:(Cn,gt,U)=>{"use strict";U.d(gt,{w:()=>m});var D=U(8421),l=U(4482),G=U(5403);function m(qe,ke){return(0,l.e)((Ye,Re)=>{let pe=null,Ge=0,rt=!1;const Te=()=>rt&&!pe&&Re.complete();Ye.subscribe((0,G.x)(Re,ut=>{pe?.unsubscribe();let lt=0;const We=Ge++;(0,D.Xf)(qe(ut,We)).subscribe(pe=(0,G.x)(Re,Dt=>Re.next(ke?ke(ut,Dt,We,lt++):Dt),()=>{pe=null,Te()}))},()=>{rt=!0,Te()}))})}},5698:(Cn,gt,U)=>{"use strict";U.d(gt,{q:()=>m});var D=U(515),l=U(4482),G=U(5403);function m(qe){return qe<=0?()=>D.E:(0,l.e)((ke,Ye)=>{let Re=0;ke.subscribe((0,G.x)(Ye,pe=>{++Re<=qe&&(Ye.next(pe),qe<=Re&&Ye.complete())}))})}},2722:(Cn,gt,U)=>{"use strict";U.d(gt,{R:()=>qe});var D=U(4482),l=U(5403),G=U(8421),m=U(5032);function qe(ke){return(0,D.e)((Ye,Re)=>{(0,G.Xf)(ke).subscribe((0,l.x)(Re,()=>Re.complete(),m.Z)),!Re.closed&&Ye.subscribe(Re)})}},2529:(Cn,gt,U)=>{"use strict";U.d(gt,{o:()=>G});var D=U(4482),l=U(5403);function G(m,qe=!1){return(0,D.e)((ke,Ye)=>{let Re=0;ke.subscribe((0,l.x)(Ye,pe=>{const Ge=m(pe,Re++);(Ge||qe)&&Ye.next(pe),!Ge&&Ye.complete()}))})}},8505:(Cn,gt,U)=>{"use strict";U.d(gt,{b:()=>qe});var D=U(576),l=U(4482),G=U(5403),m=U(4671);function qe(ke,Ye,Re){const pe=(0,D.m)(ke)||Ye||Re?{next:ke,error:Ye,complete:Re}:ke;return pe?(0,l.e)((Ge,rt)=>{var Te;null===(Te=pe.subscribe)||void 0===Te||Te.call(pe);let ut=!0;Ge.subscribe((0,G.x)(rt,lt=>{var We;null===(We=pe.next)||void 0===We||We.call(pe,lt),rt.next(lt)},()=>{var lt;ut=!1,null===(lt=pe.complete)||void 0===lt||lt.call(pe),rt.complete()},lt=>{var We;ut=!1,null===(We=pe.error)||void 0===We||We.call(pe,lt),rt.error(lt)},()=>{var lt,We;ut&&(null===(lt=pe.unsubscribe)||void 0===lt||lt.call(pe)),null===(We=pe.finalize)||void 0===We||We.call(pe)}))}):m.y}},8068:(Cn,gt,U)=>{"use strict";U.d(gt,{T:()=>m});var D=U(6805),l=U(4482),G=U(5403);function m(ke=qe){return(0,l.e)((Ye,Re)=>{let pe=!1;Ye.subscribe((0,G.x)(Re,Ge=>{pe=!0,Re.next(Ge)},()=>pe?Re.complete():Re.error(ke())))})}function qe(){return new D.K}},4408:(Cn,gt,U)=>{"use strict";U.d(gt,{o:()=>qe});var D=U(727);class l extends D.w0{constructor(Ye,Re){super()}schedule(Ye,Re=0){return this}}const G={setInterval(ke,Ye,...Re){const{delegate:pe}=G;return pe?.setInterval?pe.setInterval(ke,Ye,...Re):setInterval(ke,Ye,...Re)},clearInterval(ke){const{delegate:Ye}=G;return(Ye?.clearInterval||clearInterval)(ke)},delegate:void 0};var m=U(8737);class qe extends l{constructor(Ye,Re){super(Ye,Re),this.scheduler=Ye,this.work=Re,this.pending=!1}schedule(Ye,Re=0){var pe;if(this.closed)return this;this.state=Ye;const Ge=this.id,rt=this.scheduler;return null!=Ge&&(this.id=this.recycleAsyncId(rt,Ge,Re)),this.pending=!0,this.delay=Re,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(rt,this.id,Re),this}requestAsyncId(Ye,Re,pe=0){return G.setInterval(Ye.flush.bind(Ye,this),pe)}recycleAsyncId(Ye,Re,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return Re;null!=Re&&G.clearInterval(Re)}execute(Ye,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(Ye,Re);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ye,Re){let Ge,pe=!1;try{this.work(Ye)}catch(rt){pe=!0,Ge=rt||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),Ge}unsubscribe(){if(!this.closed){const{id:Ye,scheduler:Re}=this,{actions:pe}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,m.P)(pe,this),null!=Ye&&(this.id=this.recycleAsyncId(Re,Ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(Cn,gt,U)=>{"use strict";U.d(gt,{v:()=>G});var D=U(6063);class l{constructor(qe,ke=l.now){this.schedulerActionCtor=qe,this.now=ke}schedule(qe,ke=0,Ye){return new this.schedulerActionCtor(this,qe).schedule(Ye,ke)}}l.now=D.l.now;class G extends l{constructor(qe,ke=l.now){super(qe,ke),this.actions=[],this._active=!1}flush(qe){const{actions:ke}=this;if(this._active)return void ke.push(qe);let Ye;this._active=!0;do{if(Ye=qe.execute(qe.state,qe.delay))break}while(qe=ke.shift());if(this._active=!1,Ye){for(;qe=ke.shift();)qe.unsubscribe();throw Ye}}}},4986:(Cn,gt,U)=>{"use strict";U.d(gt,{P:()=>m,z:()=>G});var D=U(4408);const G=new(U(7565).v)(D.o),m=G},6063:(Cn,gt,U)=>{"use strict";U.d(gt,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},3410:(Cn,gt,U)=>{"use strict";U.d(gt,{z:()=>D});const D={setTimeout(l,G,...m){const{delegate:qe}=D;return qe?.setTimeout?qe.setTimeout(l,G,...m):setTimeout(l,G,...m)},clearTimeout(l){const{delegate:G}=D;return(G?.clearTimeout||clearTimeout)(l)},delegate:void 0}},2202:(Cn,gt,U)=>{"use strict";U.d(gt,{h:()=>l});const l=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Cn,gt,U)=>{"use strict";U.d(gt,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Cn,gt,U)=>{"use strict";U.d(gt,{K:()=>l});const l=(0,U(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Cn,gt,U)=>{"use strict";U.d(gt,{_6:()=>ke,jO:()=>m,yG:()=>qe});var D=U(576),l=U(3532);function G(Ye){return Ye[Ye.length-1]}function m(Ye){return(0,D.m)(G(Ye))?Ye.pop():void 0}function qe(Ye){return(0,l.K)(G(Ye))?Ye.pop():void 0}function ke(Ye,Re){return"number"==typeof G(Ye)?Ye.pop():Re}},4742:(Cn,gt,U)=>{"use strict";U.d(gt,{D:()=>qe});const{isArray:D}=Array,{getPrototypeOf:l,prototype:G,keys:m}=Object;function qe(Ye){if(1===Ye.length){const Re=Ye[0];if(D(Re))return{args:Re,keys:null};if(function ke(Ye){return Ye&&"object"==typeof Ye&&l(Ye)===G}(Re)){const pe=m(Re);return{args:pe.map(Ge=>Re[Ge]),keys:pe}}}return{args:Ye,keys:null}}},8737:(Cn,gt,U)=>{"use strict";function D(l,G){if(l){const m=l.indexOf(G);0<=m&&l.splice(m,1)}}U.d(gt,{P:()=>D})},3888:(Cn,gt,U)=>{"use strict";function D(l){const m=l(qe=>{Error.call(qe),qe.stack=(new Error).stack});return m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m}U.d(gt,{d:()=>D})},1810:(Cn,gt,U)=>{"use strict";function D(l,G){return l.reduce((m,qe,ke)=>(m[qe]=G[ke],m),{})}U.d(gt,{n:()=>D})},2806:(Cn,gt,U)=>{"use strict";U.d(gt,{O:()=>m,x:()=>G});var D=U(2416);let l=null;function G(qe){if(D.v.useDeprecatedSynchronousErrorHandling){const ke=!l;if(ke&&(l={errorThrown:!1,error:null}),qe(),ke){const{errorThrown:Ye,error:Re}=l;if(l=null,Ye)throw Re}}else qe()}function m(qe){D.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=qe)}},9672:(Cn,gt,U)=>{"use strict";function D(l,G,m,qe=0,ke=!1){const Ye=G.schedule(function(){m(),ke?l.add(this.schedule(null,qe)):this.unsubscribe()},qe);if(l.add(Ye),!ke)return Ye}U.d(gt,{f:()=>D})},4671:(Cn,gt,U)=>{"use strict";function D(l){return l}U.d(gt,{y:()=>D})},1144:(Cn,gt,U)=>{"use strict";U.d(gt,{z:()=>D});const D=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(Cn,gt,U)=>{"use strict";U.d(gt,{D:()=>l});var D=U(576);function l(G){return Symbol.asyncIterator&&(0,D.m)(G?.[Symbol.asyncIterator])}},576:(Cn,gt,U)=>{"use strict";function D(l){return"function"==typeof l}U.d(gt,{m:()=>D})},3670:(Cn,gt,U)=>{"use strict";U.d(gt,{c:()=>G});var D=U(8822),l=U(576);function G(m){return(0,l.m)(m[D.L])}},6495:(Cn,gt,U)=>{"use strict";U.d(gt,{T:()=>G});var D=U(2202),l=U(576);function G(m){return(0,l.m)(m?.[D.h])}},8239:(Cn,gt,U)=>{"use strict";U.d(gt,{t:()=>l});var D=U(576);function l(G){return(0,D.m)(G?.then)}},3260:(Cn,gt,U)=>{"use strict";U.d(gt,{L:()=>m,Q:()=>G});var D=U(655),l=U(576);function G(qe){return(0,D.FC)(this,arguments,function*(){const Ye=qe.getReader();try{for(;;){const{value:Re,done:pe}=yield(0,D.qq)(Ye.read());if(pe)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(Re)}}finally{Ye.releaseLock()}})}function m(qe){return(0,l.m)(qe?.getReader)}},3532:(Cn,gt,U)=>{"use strict";U.d(gt,{K:()=>l});var D=U(576);function l(G){return G&&(0,D.m)(G.schedule)}},4482:(Cn,gt,U)=>{"use strict";U.d(gt,{A:()=>l,e:()=>G});var D=U(576);function l(m){return(0,D.m)(m?.lift)}function G(m){return qe=>{if(l(qe))return qe.lift(function(ke){try{return m(ke,this)}catch(Ye){this.error(Ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Cn,gt,U)=>{"use strict";U.d(gt,{Z:()=>m});var D=U(4004);const{isArray:l}=Array;function m(qe){return(0,D.U)(ke=>function G(qe,ke){return l(ke)?qe(...ke):qe(ke)}(qe,ke))}},5032:(Cn,gt,U)=>{"use strict";function D(){}U.d(gt,{Z:()=>D})},9635:(Cn,gt,U)=>{"use strict";U.d(gt,{U:()=>G,z:()=>l});var D=U(4671);function l(...m){return G(m)}function G(m){return 0===m.length?D.y:1===m.length?m[0]:function(ke){return m.reduce((Ye,Re)=>Re(Ye),ke)}}},7849:(Cn,gt,U)=>{"use strict";U.d(gt,{h:()=>G});var D=U(2416),l=U(3410);function G(m){l.z.setTimeout(()=>{const{onUnhandledError:qe}=D.v;if(!qe)throw m;qe(m)})}},4532:(Cn,gt,U)=>{"use strict";function D(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(gt,{z:()=>D})},655:(Cn,gt,U)=>{"use strict";function Re(pt,Xe,It,St){return new(It||(It=Promise))(function(un,Gn){function di(gi){try{yn(St.next(gi))}catch(Ei){Gn(Ei)}}function yi(gi){try{yn(St.throw(gi))}catch(Ei){Gn(Ei)}}function yn(gi){gi.done?un(gi.value):function pn(un){return un instanceof It?un:new It(function(Gn){Gn(un)})}(gi.value).then(di,yi)}yn((St=St.apply(pt,Xe||[])).next())})}function wt(pt){return this instanceof wt?(this.v=pt,this):new wt(pt)}function Et(pt,Xe,It){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pn,St=It.apply(pt,Xe||[]),un=[];return pn={},Gn("next"),Gn("throw"),Gn("return"),pn[Symbol.asyncIterator]=function(){return this},pn;function Gn(hi){St[hi]&&(pn[hi]=function(bn){return new Promise(function(wn,_t){un.push([hi,bn,wn,_t])>1||di(hi,bn)})})}function di(hi,bn){try{!function yi(hi){hi.value instanceof wt?Promise.resolve(hi.value.v).then(yn,gi):Ei(un[0][2],hi)}(St[hi](bn))}catch(wn){Ei(un[0][3],wn)}}function yn(hi){di("next",hi)}function gi(hi){di("throw",hi)}function Ei(hi,bn){hi(bn),un.shift(),un.length&&di(un[0][0],un[0][1])}}function hn(pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var It,Xe=pt[Symbol.asyncIterator];return Xe?Xe.call(pt):(pt=function Te(pt){var Xe="function"==typeof Symbol&&Symbol.iterator,It=Xe&&pt[Xe],St=0;if(It)return It.call(pt);if(pt&&"number"==typeof pt.length)return{next:function(){return pt&&St>=pt.length&&(pt=void 0),{value:pt&&pt[St++],done:!pt}}};throw new TypeError(Xe?"Object is not iterable.":"Symbol.iterator is not defined.")}(pt),It={},St("next"),St("throw"),St("return"),It[Symbol.asyncIterator]=function(){return this},It);function St(un){It[un]=pt[un]&&function(Gn){return new Promise(function(di,yi){!function pn(un,Gn,di,yi){Promise.resolve(yi).then(function(yn){un({value:yn,done:di})},Gn)}(di,yi,(Gn=pt[un](Gn)).done,Gn.value)})}}}U.d(gt,{FC:()=>Et,KL:()=>hn,mG:()=>Re,qq:()=>wt})},1943:function(Cn){Cn.exports=function(){"use strict";var gt,U,D;function l(m,qe){if(gt)if(U){var ke="var sharedChunk = {}; ("+gt+")(sharedChunk); ("+U+")(sharedChunk);",Ye={};gt(Ye),D=qe(Ye),typeof window<"u"&&(D.workerUrl=window.URL.createObjectURL(new Blob([ke],{type:"text/javascript"})))}else U=qe;else gt=qe}return l(0,function(m){var qe=ke;function ke(o,e,a,f){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(f-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=e,this.p2x=a,this.p2y=f}function Ye(o,e,a,f){const v=new qe(o,e,a,f);return function(w){return v.solve(w)}}ke.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,e){if(void 0===e&&(e=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,f=0;f<8;f++){var v=this.sampleCurveX(a)-o;if(Math.abs(v)<e)return a;var w=this.sampleCurveDerivativeX(a);if(Math.abs(w)<1e-6)break;a-=v/w}var E=0,O=1;for(a=o,f=0;f<20&&(v=this.sampleCurveX(a),!(Math.abs(v-o)<e));f++)o>v?E=a:O=a,a=.5*(O-E)+E;return a},solve:function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))}};const Re=Ye(.25,.1,.25,1);function pe(o,e,a){return Math.min(a,Math.max(e,o))}function Ge(o,e,a){const f=a-e,v=((o-e)%f+f)%f+e;return v===e?a:v}function rt(o,...e){for(const a of e)for(const f in a)o[f]=a[f];return o}let Te=1;function ut(o,e){o.forEach(a=>{e[a]&&(e[a]=e[a].bind(e))})}function lt(o,e,a){const f={};for(const v in o)f[v]=e.call(a||this,o[v],v,o);return f}function We(o,e,a){const f={};for(const v in o)e.call(a||this,o[v],v,o)&&(f[v]=o[v]);return f}function Dt(o){return Array.isArray(o)?o.map(Dt):"object"==typeof o&&o?lt(o,Dt):o}const wt={};function Et(o){wt[o]||(typeof console<"u"&&console.warn(o),wt[o]=!0)}function _n(o,e,a){return(a.y-o.y)*(e.x-o.x)>(e.y-o.y)*(a.x-o.x)}function hn(o){let e=0;for(let a,f,v=0,w=o.length,E=w-1;v<w;E=v++)a=o[v],f=o[E],e+=(f.x-a.x)*(a.y+f.y);return e}function At(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Pe(o){const e={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,f,v,w)=>{const E=v||w;return e[f]=!E||E.toLowerCase(),""}),e["max-age"]){const a=parseInt(e["max-age"],10);isNaN(a)?delete e["max-age"]:e["max-age"]=a}return e}let Ze,Yt,Ot=null;function Ut(o){if(null==Ot){const e=o.navigator?o.navigator.userAgent:null;Ot=!!o.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Ot}function tn(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const pt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const e=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(o,e=0){const a=window.document.createElement("canvas"),f=a.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return a.width=o.width,a.height=o.height,f.drawImage(o,0,0,o.width,o.height),f.getImageData(-e,-e,o.width+2*e,o.height+2*e)},resolveURL:o=>(Ze||(Ze=document.createElement("a")),Ze.href=o,Ze.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Yt&&(Yt=matchMedia("(prefers-reduced-motion: reduce)")),Yt.matches)}};var Xe=It;function It(o,e){this.x=o,this.y=e}It.prototype={clone:function(){return new It(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,e){return this.clone()._rotateAround(o,e)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var e=o.x-this.x,a=o.y-this.y;return e*e+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,e){return Math.atan2(this.x*e-this.y*o,this.x*o+this.y*e)},_matMult:function(o){var e=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=e,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var e=Math.cos(o),a=Math.sin(o),f=a*this.x+e*this.y;return this.x=e*this.x-a*this.y,this.y=f,this},_rotateAround:function(o,e){var a=Math.cos(o),f=Math.sin(o),v=e.y+f*(this.x-e.x)+a*(this.y-e.y);return this.x=e.x+a*(this.x-e.x)-f*(this.y-e.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},It.convert=function(o){return o instanceof It?o:Array.isArray(o)?new It(o[0],o[1]):o};const St={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},pn="mapbox-tiles";let un,di=500,yi=50;function yn(){typeof caches>"u"||un||(un=caches.open(pn))}let gi=1/0;const Ei={supported:!1,testSupport:function(o){!wn&&bn&&(_t?Nt(o):hi=o)}};let hi,bn,wn=!1,_t=!1;function Nt(o){const e=o.createTexture();o.bindTexture(o.TEXTURE_2D,e);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,bn),o.isContextLost())return;Ei.supported=!0}catch{}o.deleteTexture(e),wn=!0}typeof document<"u"&&(bn=document.createElement("img"),bn.onload=function(){hi&&Nt(hi),hi=null,_t=!0},bn.onerror=function(){wn=!0,hi=null},bn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const fn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(fn);class mn extends Error{constructor(e,a,f,v){super(`AJAXError: ${a} (${e}): ${f}`),this.status=e,this.statusText=a,this.url=f,this.body=v}}const On=At()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function Jn(o,e){const a=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:On(),signal:a.signal});let v=!1,w=!1;return"json"===o.type&&f.headers.set("Accept","application/json"),((E,O,N)=>{if(w)return;const K=Date.now();fetch(f).then(ie=>{return ie.ok?(oe=ie,null,K,void("arrayBuffer"===o.type?oe.arrayBuffer():"json"===o.type?oe.json():oe.text()).then(Ce=>{w||(v=!0,e(null,Ce,oe.headers.get("Cache-Control"),oe.headers.get("Expires")))}).catch(Ce=>{w||e(new Error(Ce.message))})):ie.blob().then(oe=>e(new mn(ie.status,ie.statusText,o.url,oe)));var oe}).catch(ie=>{20!==ie.code&&e(new Error(ie.message))})})(),{cancel:()=>{w=!0,v||a.abort()}}}const oi=function(o,e){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(At()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e);if(!At()){const f=o.url.substring(0,o.url.indexOf("://"));return(St.REGISTERED_PROTOCOLS[f]||Jn)(o,e)}}if(!(/^file:/.test(a=o.url)||/^file:/.test(On())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Jn(o,e);if(At()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,e,void 0,!0)}var a;return function(f,v){const w=new XMLHttpRequest;w.open(f.method||"GET",f.url,!0),"arrayBuffer"===f.type&&(w.responseType="arraybuffer");for(const E in f.headers)w.setRequestHeader(E,f.headers[E]);return"json"===f.type&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials="include"===f.credentials,w.onerror=()=>{v(new Error(w.statusText))},w.onload=()=>{if((w.status>=200&&w.status<300||0===w.status)&&null!==w.response){let E=w.response;if("json"===f.type)try{E=JSON.parse(w.response)}catch(O){return v(O)}v(null,E,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else{const E=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});v(new mn(w.status,w.statusText,f.url,E))}},w.send(f.body),{cancel:()=>w.abort()}}(o,e)},fi=function(o,e){return oi(rt(o,{type:"arrayBuffer"}),e)};function $i(o){const e=window.document.createElement("a");return e.href=o,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const Qn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Di,xn;Di=[],xn=0;const Wn=function(o,e){if(Ei.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),xn>=St.MAX_PARALLEL_IMAGE_REQUESTS){const w={requestParameters:o,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Di.push(w),w}xn++;let a=!1;const f=()=>{if(!a)for(a=!0,xn--;Di.length&&xn<St.MAX_PARALLEL_IMAGE_REQUESTS;){const w=Di.shift(),{requestParameters:E,callback:O,cancelled:N}=w;N||(w.cancel=Wn(E,O).cancel)}},v=fi(o,(w,E,O,N)=>{var K,ie;f(),w?e(w):E&&(K=E,ie=(K,ie)=>{null!=K?e(K):null!=ie&&e(null,ie,{cacheControl:O,expires:N})},"function"==typeof createImageBitmap?function(oe,_e){const be=new Blob([new Uint8Array(oe)],{type:"image/png"});createImageBitmap(be).then(Ce=>{_e(null,Ce)}).catch(Ce=>{_e(new Error(`Could not load image because of ${Ce.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(K,ie):function(oe,_e){const be=new Image;be.onload=()=>{_e(null,be),URL.revokeObjectURL(be.src),be.onload=null,window.requestAnimationFrame(()=>{be.src=Qn})},be.onerror=()=>_e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ce=new Blob([new Uint8Array(oe)],{type:"image/png"});be.src=oe.byteLength?URL.createObjectURL(Ce):Qn}(K,ie))});return{cancel:()=>{v.cancel(),f()}}};function ct(o,e,a){a[o]&&-1!==a[o].indexOf(e)||(a[o]=a[o]||[],a[o].push(e))}function Y(o,e,a){if(a&&a[o]){const f=a[o].indexOf(e);-1!==f&&a[o].splice(f,1)}}class te{constructor(e,a={}){rt(this,a),this.type=e}}class Me extends te{constructor(e,a={}){super("error",rt({error:e},a))}}class he{on(e,a){return this._listeners=this._listeners||{},ct(e,a,this._listeners),this}off(e,a){return Y(e,a,this._listeners),Y(e,a,this._oneTimeListeners),this}once(e,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},ct(e,a,this._oneTimeListeners),this):new Promise(f=>this.once(e,f))}fire(e,a){"string"==typeof e&&(e=new te(e,a||{}));const f=e.type;if(this.listens(f)){e.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const O of v)O.call(this,e);const w=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const O of w)Y(f,O,this._oneTimeListeners),O.call(this,e);const E=this._eventedParent;E&&(rt(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(e))}else e instanceof Me&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,a){return this._eventedParent=e,this._eventedParentData=a,this}}var k={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class R{constructor(e,a,f,v){this.message=(e?`${e}: `:"")+f,v&&(this.identifier=v),null!=a&&a.__line__&&(this.line=a.__line__)}}function H(o){const e=o.value;return e?[new R(o.key,e,"constants have been deprecated as of v8")]:[]}function J(o,...e){for(const a of e)for(const f in a)o[f]=a[f];return o}function le(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ae(o){if(Array.isArray(o))return o.map(Ae);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const e={};for(const a in o)e[a]=Ae(o[a]);return e}return le(o)}class Le extends Error{constructor(e,a){super(a),this.message=a,this.key=e}}class Qe{constructor(e,a=[]){this.parent=e,this.bindings={};for(const[f,v]of a)this.bindings[f]=v}concat(e){return new Qe(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const ot={kind:"null"},He={kind:"number"},dt={kind:"string"},$t={kind:"boolean"},en={kind:"color"},st={kind:"object"},De={kind:"value"},Fe={kind:"collator"},Se={kind:"formatted"},Ne={kind:"padding"},we={kind:"resolvedImage"};function $e(o,e){return{kind:"array",itemType:o,N:e}}function at(o){if("array"===o.kind){const e=at(o.itemType);return"number"==typeof o.N?`array<${e}, ${o.N}>`:"value"===o.itemType.kind?"array":`array<${e}>`}return o.kind}const on=[ot,He,dt,$t,en,Se,st,$e(De),Ne,we];function An(o,e){if("error"===e.kind)return null;if("array"===o.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!An(o.itemType,e.itemType))&&("number"!=typeof o.N||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if("value"===o.kind)for(const a of on)if(!An(a,e))return null}return`Expected ${at(o)} but found ${at(e)} instead.`}function jn(o,e){return e.some(a=>a.kind===o.kind)}function Gi(o,e){return e.some(a=>"null"===a?null===o:"array"===a?Array.isArray(o):"object"===a?o&&!Array.isArray(o)&&"object"==typeof o:a===typeof o)}var ni,yt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Tt(o){return(o=Math.round(o))<0?0:o>255?255:o}function zt(o){return Tt("%"===o[o.length-1]?parseFloat(o)/100*255:parseInt(o))}function Vt(o){return(e="%"===o[o.length-1]?parseFloat(o)/100:parseFloat(o))<0?0:e>1?1:e;var e}function jt(o,e,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(e-o)*a*6:2*a<1?e:3*a<2?o+(e-o)*(2/3-a)*6:o}try{ni={}.parseCSSColor=function(o){var e,a=o.replace(/ /g,"").toLowerCase();if(a in yt)return yt[a].slice();if("#"===a[0])return 4===a.length?(e=parseInt(a.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===a.length&&(e=parseInt(a.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var f=a.indexOf("("),v=a.indexOf(")");if(-1!==f&&v+1===a.length){var w=a.substr(0,f),E=a.substr(f+1,v-(f+1)).split(","),O=1;switch(w){case"rgba":if(4!==E.length)return null;O=Vt(E.pop());case"rgb":return 3!==E.length?null:[zt(E[0]),zt(E[1]),zt(E[2]),O];case"hsla":if(4!==E.length)return null;O=Vt(E.pop());case"hsl":if(3!==E.length)return null;var N=(parseFloat(E[0])%360+360)%360/360,K=Vt(E[1]),ie=Vt(E[2]),oe=ie<=.5?ie*(K+1):ie+K-ie*K,_e=2*ie-oe;return[Tt(255*jt(_e,oe,N+1/3)),Tt(255*jt(_e,oe,N)),Tt(255*jt(_e,oe,N-1/3)),O];default:return null}}return null}}catch{}class me{constructor(e,a,f,v=1){this.r=e,this.g=a,this.b=f,this.a=v}static parse(e){if(!e)return;if(e instanceof me)return e;if("string"!=typeof e)return;const a=ni(e);return a?new me(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[e,a,f,v]=this.toArray();return`rgba(${Math.round(e)},${Math.round(a)},${Math.round(f)},${v})`}toArray(){const{r:e,g:a,b:f,a:v}=this;return 0===v?[0,0,0,0]:[255*e/v,255*a/v,255*f/v,v]}}me.black=new me(0,0,0,1),me.white=new me(1,1,1,1),me.transparent=new me(0,0,0,0),me.red=new me(1,0,0,1);class Ee{constructor(e,a,f){this.sensitivity=e?a?"variant":"case":a?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,a){return this.collator.compare(e,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ue{constructor(e,a,f,v,w){this.text=e,this.image=a,this.scale=f,this.fontStack=v,this.textColor=w}}class Ve{constructor(e){this.sections=e}static fromString(e){return new Ve([new ue(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Ve?e:Ve.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class tt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof tt)return e;if("number"==typeof e)return new tt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const a of e)if("number"!=typeof a)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new tt(e)}}toString(){return JSON.stringify(this.values)}}class Gt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Gt({name:e,available:!1}):null}}function Sn(o,e,a,f){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===f||"number"==typeof f&&f>=0&&f<=1?null:`Invalid rgba value [${[o,e,a,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof f?[o,e,a,f]:[o,e,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nn(o){if(null===o||"string"==typeof o||"boolean"==typeof o||"number"==typeof o||o instanceof me||o instanceof Ee||o instanceof Ve||o instanceof tt||o instanceof Gt)return!0;if(Array.isArray(o)){for(const e of o)if(!nn(e))return!1;return!0}if("object"==typeof o){for(const e in o)if(!nn(o[e]))return!1;return!0}return!1}function Un(o){if(null===o)return ot;if("string"==typeof o)return dt;if("boolean"==typeof o)return $t;if("number"==typeof o)return He;if(o instanceof me)return en;if(o instanceof Ee)return Fe;if(o instanceof Ve)return Se;if(o instanceof tt)return Ne;if(o instanceof Gt)return we;if(Array.isArray(o)){const e=o.length;let a;for(const f of o){const v=Un(f);if(a){if(a===v)continue;a=De;break}a=v}return $e(a||De,e)}return st}function Ni(o){const e=typeof o;return null===o?"":"string"===e||"number"===e||"boolean"===e?String(o):o instanceof me||o instanceof Ve||o instanceof tt||o instanceof Gt?o.toString():JSON.stringify(o)}class kn{constructor(e,a){this.type=e,this.value=a}static parse(e,a){if(2!==e.length)return a.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!nn(e[1]))return a.error("invalid value");const f=e[1];let v=Un(f);const w=a.expectedType;return"array"!==v.kind||0!==v.N||!w||"array"!==w.kind||"number"==typeof w.N&&0!==w.N||(v=w),new kn(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ei{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Yi={string:dt,number:He,boolean:$t,object:st};class Xi{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");let f,v=1;const w=e[0];if("array"===w){let O,N;if(e.length>2){const K=e[1];if("string"!=typeof K||!(K in Yi)||"object"===K)return a.error('The item type argument of "array" must be one of string, number, boolean',1);O=Yi[K],v++}else O=De;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return a.error('The length argument to "array" must be a positive integer literal',2);N=e[2],v++}f=$e(O,N)}else{if(!Yi[w])throw new Error(`Types doesn't contain name = ${w}`);f=Yi[w]}const E=[];for(;v<e.length;v++){const O=a.parse(e[v],v,De);if(!O)return null;E.push(O)}return new Xi(f,E)}evaluate(e){for(let a=0;a<this.args.length;a++){const f=this.args[a].evaluate(e);if(!An(this.type,Un(f)))return f;if(a===this.args.length-1)throw new ei(`Expected value to be of type ${at(this.type)}, but found ${at(Un(f))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const nr={"to-boolean":$t,"to-color":en,"to-number":He,"to-string":dt};class Vi{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const f=e[0];if(!nr[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if(("to-boolean"===f||"to-string"===f)&&2!==e.length)return a.error("Expected one argument.");const v=nr[f],w=[];for(let E=1;E<e.length;E++){const O=a.parse(e[E],E,De);if(!O)return null;w.push(O)}return new Vi(v,w)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let a,f;for(const v of this.args){if(a=v.evaluate(e),f=null,a instanceof me)return a;if("string"==typeof a){const w=e.parseColor(a);if(w)return w}else if(Array.isArray(a)&&(f=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Sn(a[0],a[1],a[2],a[3]),!f))return new me(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new ei(f||`Could not parse color from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("padding"===this.type.kind){let a;for(const f of this.args){a=f.evaluate(e);const v=tt.parse(a);if(v)return v}throw new ei(`Could not parse padding from value '${"string"==typeof a?a:JSON.stringify(a)}'`)}if("number"===this.type.kind){let a=null;for(const f of this.args){if(a=f.evaluate(e),null===a)return 0;const v=Number(a);if(!isNaN(v))return v}throw new ei(`Could not convert ${JSON.stringify(a)} to number.`)}return"formatted"===this.type.kind?Ve.fromString(Ni(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Gt.fromString(Ni(this.args[0].evaluate(e))):Ni(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Ji=["Unknown","Point","LineString","Polygon"];class ho{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ji[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let a=this._parseColorCache[e];return a||(a=this._parseColorCache[e]=me.parse(e)),a}}class Ui{constructor(e,a,f,v){this.name=e,this.type=a,this._evaluate=f,this.args=v}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,a){const f=e[0],v=Ui.definitions[f];if(!v)return a.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,E=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,O=E.filter(([K])=>!Array.isArray(K)||K.length===e.length-1);let N=null;for(const[K,ie]of O){N=new ul(a.registry,a.path,null,a.scope);const oe=[];let _e=!1;for(let be=1;be<e.length;be++){const Ce=e[be],Je=Array.isArray(K)?K[be-1]:K.type,et=N.parse(Ce,1+oe.length,Je);if(!et){_e=!0;break}oe.push(et)}if(!_e)if(Array.isArray(K)&&K.length!==oe.length)N.error(`Expected ${K.length} arguments, but found ${oe.length} instead.`);else{for(let be=0;be<oe.length;be++){const Ce=Array.isArray(K)?K[be]:K.type,Je=oe[be];N.concat(be+1).checkSubtype(Ce,Je.type)}if(0===N.errors.length)return new Ui(f,w,ie,oe)}}if(1===O.length)a.errors.push(...N.errors);else{const K=(O.length?O:E).map(([oe])=>{return _e=oe,Array.isArray(_e)?`(${_e.map(at).join(", ")})`:`(${at(_e.type)}...)`;var _e}).join(" | "),ie=[];for(let oe=1;oe<e.length;oe++){const _e=a.parse(e[oe],1+ie.length);if(!_e)return null;ie.push(at(_e.type))}a.error(`Expected arguments of type ${K}, but found (${ie.join(", ")}) instead.`)}return null}static register(e,a){Ui.definitions=a;for(const f in a)e[f]=Ui}}class Fr{constructor(e,a,f){this.type=Fe,this.locale=f,this.caseSensitive=e,this.diacriticSensitive=a}static parse(e,a){if(2!==e.length)return a.error("Expected one argument.");const f=e[1];if("object"!=typeof f||Array.isArray(f))return a.error("Collator options argument must be an object.");const v=a.parse(void 0!==f["case-sensitive"]&&f["case-sensitive"],1,$t);if(!v)return null;const w=a.parse(void 0!==f["diacritic-sensitive"]&&f["diacritic-sensitive"],1,$t);if(!w)return null;let E=null;return f.locale&&(E=a.parse(f.locale,1,dt),!E)?null:new Fr(v,w,E)}evaluate(e){return new Ee(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const Yr=8192;function Hi(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function Bi(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function Ts(o,e){const a=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,v=Math.pow(2,e.z);return[Math.round(a*v*Yr),Math.round(f*v*Yr)]}function Ur(o,e,a){const f=o[0]-e[0],v=o[1]-e[1],w=o[0]-a[0],E=o[1]-a[1];return f*E-w*v==0&&f*w<=0&&v*E<=0}function Go(o,e){let a=!1;for(let E=0,O=e.length;E<O;E++){const N=e[E];for(let K=0,ie=N.length;K<ie-1;K++){if(Ur(o,N[K],N[K+1]))return!1;(v=N[K])[1]>(f=o)[1]!=(w=N[K+1])[1]>f[1]&&f[0]<(w[0]-v[0])*(f[1]-v[1])/(w[1]-v[1])+v[0]&&(a=!a)}}var f,v,w;return a}function Ao(o,e){for(let a=0;a<e.length;a++)if(Go(o,e[a]))return!0;return!1}function xo(o,e,a,f){const v=f[0]-a[0],w=f[1]-a[1],E=(o[0]-a[0])*w-v*(o[1]-a[1]),O=(e[0]-a[0])*w-v*(e[1]-a[1]);return E>0&&O<0||E<0&&O>0}function jr(o,e,a){for(const K of a)for(let ie=0;ie<K.length-1;++ie)if((O=[(E=K[ie+1])[0]-(w=K[ie])[0],E[1]-w[1]])[0]*(N=[(v=e)[0]-(f=o)[0],v[1]-f[1]])[1]-O[1]*N[0]!=0&&xo(f,v,w,E)&&xo(w,E,f,v))return!0;var f,v,w,E,O,N;return!1}function er(o,e){for(let a=0;a<o.length;++a)if(!Go(o[a],e))return!1;for(let a=0;a<o.length-1;++a)if(jr(o[a],o[a+1],e))return!1;return!0}function po(o,e){for(let a=0;a<e.length;a++)if(er(o,e[a]))return!0;return!1}function gr(o,e,a){const f=[];for(let v=0;v<o.length;v++){const w=[];for(let E=0;E<o[v].length;E++){const O=Ts(o[v][E],a);Hi(e,O),w.push(O)}f.push(w)}return f}function ro(o,e,a){const f=[];for(let v=0;v<o.length;v++){const w=gr(o[v],e,a);f.push(w)}return f}function Vs(o,e,a,f){if(o[0]<a[0]||o[0]>a[2]){const v=.5*f;let w=o[0]-a[0]>v?-f:a[0]-o[0]>v?f:0;0===w&&(w=o[0]-a[2]>v?-f:a[2]-o[0]>v?f:0),o[0]+=w}Hi(e,o)}function ia(o,e,a,f){const v=Math.pow(2,f.z)*Yr,w=[f.x*Yr,f.y*Yr],E=[];for(const O of o)for(const N of O){const K=[N.x+w[0],N.y+w[1]];Vs(K,e,a,v),E.push(K)}return E}function Is(o,e,a,f){const v=Math.pow(2,f.z)*Yr,w=[f.x*Yr,f.y*Yr],E=[];for(const N of o){const K=[];for(const ie of N){const oe=[ie.x+w[0],ie.y+w[1]];Hi(e,oe),K.push(oe)}E.push(K)}if(e[2]-e[0]<=v/2){(O=e)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const N of E)for(const K of N)Vs(K,e,a,v)}var O;return E}class kr{constructor(e,a){this.type=$t,this.geojson=e,this.geometries=a}static parse(e,a){if(2!==e.length)return a.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(nn(e[1])){const f=e[1];if("FeatureCollection"===f.type)for(let v=0;v<f.features.length;++v){const w=f.features[v].geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new kr(f,f.features[v].geometry)}else if("Feature"===f.type){const v=f.geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new kr(f,f.geometry)}else if("Polygon"===f.type||"MultiPolygon"===f.type)return new kr(f,f)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(a,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=a.canonicalID();if("Polygon"===f.type){const O=gr(f.coordinates,w,E),N=ia(a.geometry(),v,w,E);if(!Bi(v,w))return!1;for(const K of N)if(!Go(K,O))return!1}if("MultiPolygon"===f.type){const O=ro(f.coordinates,w,E),N=ia(a.geometry(),v,w,E);if(!Bi(v,w))return!1;for(const K of N)if(!Ao(K,O))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(a,f){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=a.canonicalID();if("Polygon"===f.type){const O=gr(f.coordinates,w,E),N=Is(a.geometry(),v,w,E);if(!Bi(v,w))return!1;for(const K of N)if(!er(K,O))return!1}if("MultiPolygon"===f.type){const O=ro(f.coordinates,w,E),N=Is(a.geometry(),v,w,E);if(!Bi(v,w))return!1;for(const K of N)if(!po(K,O))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Po(o){if(o instanceof Ui&&("get"===o.name&&1===o.args.length||"feature-state"===o.name||"has"===o.name&&1===o.args.length||"properties"===o.name||"geometry-type"===o.name||"id"===o.name||/^filter-/.test(o.name))||o instanceof kr)return!1;let e=!0;return o.eachChild(a=>{e&&!Po(a)&&(e=!1)}),e}function As(o){if(o instanceof Ui&&"feature-state"===o.name)return!1;let e=!0;return o.eachChild(a=>{e&&!As(a)&&(e=!1)}),e}function Oo(o,e){if(o instanceof Ui&&e.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(f=>{a&&!Oo(f,e)&&(a=!1)}),a}class fs{constructor(e,a){this.type=a.type,this.name=e,this.boundExpression=a}static parse(e,a){if(2!==e.length||"string"!=typeof e[1])return a.error("'var' expression requires exactly one string literal argument.");const f=e[1];return a.scope.has(f)?new fs(f,a.scope.get(f)):a.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class ul{constructor(e,a=[],f,v=new Qe,w=[]){this.registry=e,this.path=a,this.key=a.map(E=>`[${E}]`).join(""),this.scope=v,this.errors=w,this.expectedType=f}parse(e,a,f,v,w={}){return a?this.concat(a,f,v)._parse(e,w):this._parse(e,w)}_parse(e,a){function f(v,w,E){return"assert"===E?new Xi(w,[v]):"coerce"===E?new Vi(w,[v]):v}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=e[0];if("string"!=typeof v)return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let E=w.parse(e,this);if(!E)return null;if(this.expectedType){const O=this.expectedType,N=E.type;if("string"!==O.kind&&"number"!==O.kind&&"boolean"!==O.kind&&"object"!==O.kind&&"array"!==O.kind||"value"!==N.kind)if("color"!==O.kind&&"formatted"!==O.kind&&"resolvedImage"!==O.kind||"value"!==N.kind&&"string"!==N.kind)if("padding"!==O.kind||"value"!==N.kind&&"number"!==N.kind&&"array"!==N.kind){if(this.checkSubtype(O,N))return null}else E=f(E,O,a.typeAnnotation||"coerce");else E=f(E,O,a.typeAnnotation||"coerce");else E=f(E,O,a.typeAnnotation||"assert")}if(!(E instanceof kn)&&"resolvedImage"!==E.type.kind&&fo(E)){const O=new ho;try{E=new kn(E.type,E.evaluate(O))}catch(N){return this.error(N.message),null}}return E}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,a,f){const v="number"==typeof e?this.path.concat(e):this.path,w=f?this.scope.concat(f):this.scope;return new ul(this.registry,v,a||null,w,this.errors)}error(e,...a){const f=`${this.key}${a.map(v=>`[${v}]`).join("")}`;this.errors.push(new Le(f,e))}checkSubtype(e,a){const f=An(e,a);return f&&this.error(f),f}}function fo(o){if(o instanceof fs)return fo(o.boundExpression);if(o instanceof Ui&&"error"===o.name||o instanceof Fr||o instanceof kr)return!1;const e=o instanceof Vi||o instanceof Xi;let a=!0;return o.eachChild(f=>{a=e?a&&fo(f):a&&f instanceof kn}),!!a&&Po(o)&&Oo(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ea(o,e){const a=o.length-1;let f,v,w=0,E=a,O=0;for(;w<=E;)if(O=Math.floor((w+E)/2),f=o[O],v=o[O+1],f<=e){if(O===a||e<v)return O;w=O+1}else{if(!(f>e))throw new ei("Input is not a number.");E=O-1}return 0}class ra{constructor(e,a,f){this.type=e,this.input=a,this.labels=[],this.outputs=[];for(const[v,w]of f)this.labels.push(v),this.outputs.push(w)}static parse(e,a){if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");const f=a.parse(e[1],1,He);if(!f)return null;const v=[];let w=null;a.expectedType&&"value"!==a.expectedType.kind&&(w=a.expectedType);for(let E=1;E<e.length;E+=2){const O=1===E?-1/0:e[E],N=e[E+1],K=E,ie=E+1;if("number"!=typeof O)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(v.length&&v[v.length-1][0]>=O)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',K);const oe=a.parse(N,ie,w);if(!oe)return null;w=w||oe.type,v.push([O,oe])}return new ra(w,f,v)}evaluate(e){const a=this.labels,f=this.outputs;if(1===a.length)return f[0].evaluate(e);const v=this.input.evaluate(e);if(v<=a[0])return f[0].evaluate(e);const w=a.length;return v>=a[w-1]?f[w-1].evaluate(e):f[Ea(a,v)].evaluate(e)}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ar(o,e,a){return o*(1-a)+e*a}var Us=Object.freeze({__proto__:null,number:ar,color:function(o,e,a){return new me(ar(o.r,e.r,a),ar(o.g,e.g,a),ar(o.b,e.b,a),ar(o.a,e.a,a))},array:function(o,e,a){return o.map((f,v)=>ar(f,e[v],a))},padding:function(o,e,a){const f=o.values,v=e.values;return new tt([ar(f[0],v[0],a),ar(f[1],v[1],a),ar(f[2],v[2],a),ar(f[3],v[3],a)])}});const wo=4/29,ko=6/29,dl=3*ko*ko,Wa=Math.PI/180,Kl=180/Math.PI;function Ro(o){return o>.008856451679035631?Math.pow(o,1/3):o/dl+wo}function Os(o){return o>ko?o*o*o:dl*(o-wo)}function zi(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function oa(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Da(o){const e=oa(o.r),a=oa(o.g),f=oa(o.b),v=Ro((.4124564*e+.3575761*a+.1804375*f)/.95047),w=Ro((.2126729*e+.7151522*a+.072175*f)/1);return{l:116*w-16,a:500*(v-w),b:200*(w-Ro((.0193339*e+.119192*a+.9503041*f)/1.08883)),alpha:o.a}}function sa(o){let e=(o.l+16)/116,a=isNaN(o.a)?e:e+o.a/500,f=isNaN(o.b)?e:e-o.b/200;return e=1*Os(e),a=.95047*Os(a),f=1.08883*Os(f),new me(zi(3.2404542*a-1.5371385*e-.4985314*f),zi(-.969266*a+1.8760108*e+.041556*f),zi(.0556434*a-.2040259*e+1.0572252*f),o.alpha)}function Lo(o,e,a){const f=e-o;return o+a*(f>180||f<-180?f-360*Math.round(f/360):f)}const es={forward:Da,reverse:sa,interpolate:function(o,e,a){return{l:ar(o.l,e.l,a),a:ar(o.a,e.a,a),b:ar(o.b,e.b,a),alpha:ar(o.alpha,e.alpha,a)}}},ms={forward:function(o){const{l:e,a,b:f}=Da(o),v=Math.atan2(f,a)*Kl;return{h:v<0?v+360:v,c:Math.sqrt(a*a+f*f),l:e,alpha:o.a}},reverse:function(o){const e=o.h*Wa,a=o.c;return sa({l:o.l,a:Math.cos(e)*a,b:Math.sin(e)*a,alpha:o.alpha})},interpolate:function(o,e,a){return{h:Lo(o.h,e.h,a),c:ar(o.c,e.c,a),l:ar(o.l,e.l,a),alpha:ar(o.alpha,e.alpha,a)}}};var Ma=Object.freeze({__proto__:null,lab:es,hcl:ms});class Ir{constructor(e,a,f,v,w){this.type=e,this.operator=a,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[E,O]of w)this.labels.push(E),this.outputs.push(O)}static interpolationFactor(e,a,f,v){let w=0;if("exponential"===e.name)w=ks(a,e.base,f,v);else if("linear"===e.name)w=ks(a,1,f,v);else if("cubic-bezier"===e.name){const E=e.controlPoints;w=new qe(E[0],E[1],E[2],E[3]).solve(ks(a,1,f,v))}return w}static parse(e,a){let[f,v,w,...E]=e;if(!Array.isArray(v)||0===v.length)return a.error("Expected an interpolation type expression.",1);if("linear"===v[0])v={name:"linear"};else if("exponential"===v[0]){const K=v[1];if("number"!=typeof K)return a.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:K}}else{if("cubic-bezier"!==v[0])return a.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const K=v.slice(1);if(4!==K.length||K.some(ie=>"number"!=typeof ie||ie<0||ie>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:K}}}if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(w=a.parse(w,2,He),!w)return null;const O=[];let N=null;"interpolate-hcl"===f||"interpolate-lab"===f?N=en:a.expectedType&&"value"!==a.expectedType.kind&&(N=a.expectedType);for(let K=0;K<E.length;K+=2){const ie=E[K],oe=E[K+1],_e=K+3,be=K+4;if("number"!=typeof ie)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(O.length&&O[O.length-1][0]>=ie)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const Ce=a.parse(oe,be,N);if(!Ce)return null;N=N||Ce.type,O.push([ie,Ce])}return"number"===N.kind||"color"===N.kind||"padding"===N.kind||"array"===N.kind&&"number"===N.itemType.kind&&"number"==typeof N.N?new Ir(N,f,v,w,O):a.error(`Type ${at(N)} is not interpolatable.`)}evaluate(e){const a=this.labels,f=this.outputs;if(1===a.length)return f[0].evaluate(e);const v=this.input.evaluate(e);if(v<=a[0])return f[0].evaluate(e);const w=a.length;if(v>=a[w-1])return f[w-1].evaluate(e);const E=Ea(a,v),O=Ir.interpolationFactor(this.interpolation,v,a[E],a[E+1]),N=f[E].evaluate(e),K=f[E+1].evaluate(e);return"interpolate"===this.operator?Us[this.type.kind.toLowerCase()](N,K,O):"interpolate-hcl"===this.operator?ms.reverse(ms.interpolate(ms.forward(N),ms.forward(K),O)):es.reverse(es.interpolate(es.forward(N),es.forward(K),O))}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ks(o,e,a,f){const v=f-a,w=o-a;return 0===v?0:1===e?w/v:(Math.pow(e,w)-1)/(Math.pow(e,v)-1)}class aa{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expectected at least one argument.");let f=null;const v=a.expectedType;v&&"value"!==v.kind&&(f=v);const w=[];for(const O of e.slice(1)){const N=a.parse(O,1+w.length,f,void 0,{typeAnnotation:"omit"});if(!N)return null;f=f||N.type,w.push(N)}if(!f)throw new Error("No output type");const E=v&&w.some(O=>An(v,O.type));return new aa(E?De:f,w)}evaluate(e){let a,f=null,v=0;for(const w of this.args)if(v++,f=w.evaluate(e),f&&f instanceof Gt&&!f.available&&(a||(a=f.name),f=null,v===this.args.length&&(f=a)),null!==f)break;return f}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class Hs{constructor(e,a){this.type=a.type,this.bindings=[].concat(e),this.result=a}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const a of this.bindings)e(a[1]);e(this.result)}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const f=[];for(let w=1;w<e.length-1;w+=2){const E=e[w];if("string"!=typeof E)return a.error(`Expected string, but found ${typeof E} instead.`,w);if(/[^a-zA-Z0-9_]/.test(E))return a.error("Variable names must contain only alphanumeric characters or '_'.",w);const O=a.parse(e[w+1],w+1);if(!O)return null;f.push([E,O])}const v=a.parse(e[e.length-1],e.length-1,a.expectedType,f);return v?new Hs(f,v):null}outputDefined(){return this.result.outputDefined()}}class la{constructor(e,a,f){this.type=e,this.index=a,this.input=f}static parse(e,a){if(3!==e.length)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,He),v=a.parse(e[2],2,$e(a.expectedType||De));return f&&v?new la(v.type.itemType,f,v):null}evaluate(e){const a=this.index.evaluate(e),f=this.input.evaluate(e);if(a<0)throw new ei(`Array index out of bounds: ${a} < 0.`);if(a>=f.length)throw new ei(`Array index out of bounds: ${a} > ${f.length-1}.`);if(a!==Math.floor(a))throw new ei(`Array index must be an integer, but found ${a} instead.`);return f[a]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class gs{constructor(e,a){this.type=$t,this.needle=e,this.haystack=a}static parse(e,a){if(3!==e.length)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,De),v=a.parse(e[2],2,De);return f&&v?jn(f.type,[$t,dt,He,ot,De])?new gs(f,v):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(f.type)} instead`):null}evaluate(e){const a=this.needle.evaluate(e),f=this.haystack.evaluate(e);if(!f)return!1;if(!Gi(a,["boolean","string","number","null"]))throw new ei(`Expected first argument to be of type boolean, string, number or null, but found ${at(Un(a))} instead.`);if(!Gi(f,["string","array"]))throw new ei(`Expected second argument to be of type array or string, but found ${at(Un(f))} instead.`);return f.indexOf(a)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Sa{constructor(e,a,f){this.type=He,this.needle=e,this.haystack=a,this.fromIndex=f}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,De),v=a.parse(e[2],2,De);if(!f||!v)return null;if(!jn(f.type,[$t,dt,He,ot,De]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(f.type)} instead`);if(4===e.length){const w=a.parse(e[3],3,He);return w?new Sa(f,v,w):null}return new Sa(f,v)}evaluate(e){const a=this.needle.evaluate(e),f=this.haystack.evaluate(e);if(!Gi(a,["boolean","string","number","null"]))throw new ei(`Expected first argument to be of type boolean, string, number or null, but found ${at(Un(a))} instead.`);if(!Gi(f,["string","array"]))throw new ei(`Expected second argument to be of type array or string, but found ${at(Un(f))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(e);return f.indexOf(a,v)}return f.indexOf(a)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Nr{constructor(e,a,f,v,w,E){this.inputType=e,this.type=a,this.input=f,this.cases=v,this.outputs=w,this.otherwise=E}static parse(e,a){if(e.length<5)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return a.error("Expected an even number of arguments.");let f,v;a.expectedType&&"value"!==a.expectedType.kind&&(v=a.expectedType);const w={},E=[];for(let K=2;K<e.length-1;K+=2){let ie=e[K];const oe=e[K+1];Array.isArray(ie)||(ie=[ie]);const _e=a.concat(K);if(0===ie.length)return _e.error("Expected at least one branch label.");for(const Ce of ie){if("number"!=typeof Ce&&"string"!=typeof Ce)return _e.error("Branch labels must be numbers or strings.");if("number"==typeof Ce&&Math.abs(Ce)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Ce&&Math.floor(Ce)!==Ce)return _e.error("Numeric branch labels must be integer values.");if(f){if(_e.checkSubtype(f,Un(Ce)))return null}else f=Un(Ce);if(void 0!==w[String(Ce)])return _e.error("Branch labels must be unique.");w[String(Ce)]=E.length}const be=a.parse(oe,K,v);if(!be)return null;v=v||be.type,E.push(be)}const O=a.parse(e[1],1,De);if(!O)return null;const N=a.parse(e[e.length-1],e.length-1,v);return N?"value"!==O.type.kind&&a.concat(1).checkSubtype(f,O.type)?null:new Nr(f,v,O,w,E,N):null}evaluate(e){const a=this.input.evaluate(e);return(Un(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class $s{constructor(e,a,f){this.type=e,this.branches=a,this.otherwise=f}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return a.error("Expected an odd number of arguments.");let f;a.expectedType&&"value"!==a.expectedType.kind&&(f=a.expectedType);const v=[];for(let E=1;E<e.length-1;E+=2){const O=a.parse(e[E],E,$t);if(!O)return null;const N=a.parse(e[E+1],E+1,f);if(!N)return null;v.push([O,N]),f=f||N.type}const w=a.parse(e[e.length-1],e.length-1,f);if(!w)return null;if(!f)throw new Error("Can't infer output type");return new $s(f,v,w)}evaluate(e){for(const[a,f]of this.branches)if(a.evaluate(e))return f.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[a,f]of this.branches)e(a),e(f);e(this.otherwise)}outputDefined(){return this.branches.every(([e,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class ts{constructor(e,a,f,v){this.type=e,this.input=a,this.beginIndex=f,this.endIndex=v}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const f=a.parse(e[1],1,De),v=a.parse(e[2],2,He);if(!f||!v)return null;if(!jn(f.type,[$e(De),dt,De]))return a.error(`Expected first argument to be of type array or string, but found ${at(f.type)} instead`);if(4===e.length){const w=a.parse(e[3],3,He);return w?new ts(f.type,f,v,w):null}return new ts(f.type,f,v)}evaluate(e){const a=this.input.evaluate(e),f=this.beginIndex.evaluate(e);if(!Gi(a,["string","array"]))throw new ei(`Expected first argument to be of type array or string, but found ${at(Un(a))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(e);return a.slice(f,v)}return a.slice(f)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ns(o,e){return"=="===o||"!="===o?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function is(o,e,a,f){return 0===f.compare(e,a)}function Ta(o,e,a){const f="=="!==o&&"!="!==o;return class eC{constructor(w,E,O){this.type=$t,this.lhs=w,this.rhs=E,this.collator=O,this.hasUntypedArgument="value"===w.type.kind||"value"===E.type.kind}static parse(w,E){if(3!==w.length&&4!==w.length)return E.error("Expected two or three arguments.");const O=w[0];let N=E.parse(w[1],1,De);if(!N)return null;if(!ns(O,N.type))return E.concat(1).error(`"${O}" comparisons are not supported for type '${at(N.type)}'.`);let K=E.parse(w[2],2,De);if(!K)return null;if(!ns(O,K.type))return E.concat(2).error(`"${O}" comparisons are not supported for type '${at(K.type)}'.`);if(N.type.kind!==K.type.kind&&"value"!==N.type.kind&&"value"!==K.type.kind)return E.error(`Cannot compare types '${at(N.type)}' and '${at(K.type)}'.`);f&&("value"===N.type.kind&&"value"!==K.type.kind?N=new Xi(K.type,[N]):"value"!==N.type.kind&&"value"===K.type.kind&&(K=new Xi(N.type,[K])));let ie=null;if(4===w.length){if("string"!==N.type.kind&&"string"!==K.type.kind&&"value"!==N.type.kind&&"value"!==K.type.kind)return E.error("Cannot use collator to compare non-string types.");if(ie=E.parse(w[3],3,Fe),!ie)return null}return new eC(N,K,ie)}evaluate(w){const E=this.lhs.evaluate(w),O=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){const N=Un(E),K=Un(O);if(N.kind!==K.kind||"string"!==N.kind&&"number"!==N.kind)throw new ei(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${N.kind}, ${K.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const N=Un(E),K=Un(O);if("string"!==N.kind||"string"!==K.kind)return e(w,E,O)}return this.collator?a(w,E,O,this.collator.evaluate(w)):e(w,E,O)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const xr=Ta("==",function(o,e,a){return e===a},is),qa=Ta("!=",function(o,e,a){return e!==a},function(o,e,a,f){return!is(0,e,a,f)}),Ka=Ta("<",function(o,e,a){return e<a},function(o,e,a,f){return f.compare(e,a)<0}),Ia=Ta(">",function(o,e,a){return e>a},function(o,e,a,f){return f.compare(e,a)>0}),mr=Ta("<=",function(o,e,a){return e<=a},function(o,e,a,f){return f.compare(e,a)<=0}),Ya=Ta(">=",function(o,e,a){return e>=a},function(o,e,a,f){return f.compare(e,a)>=0});class Zo{constructor(e,a,f,v,w){this.type=dt,this.number=e,this.locale=a,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(e,a){if(3!==e.length)return a.error("Expected two arguments.");const f=a.parse(e[1],1,He);if(!f)return null;const v=e[2];if("object"!=typeof v||Array.isArray(v))return a.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=a.parse(v.locale,1,dt),!w))return null;let E=null;if(v.currency&&(E=a.parse(v.currency,1,dt),!E))return null;let O=null;if(v["min-fraction-digits"]&&(O=a.parse(v["min-fraction-digits"],1,He),!O))return null;let N=null;return v["max-fraction-digits"]&&(N=a.parse(v["max-fraction-digits"],1,He),!N)?null:new Zo(f,w,E,O,N)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Co{constructor(e){this.type=Se,this.sections=e}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const f=e[1];if(!Array.isArray(f)&&"object"==typeof f)return a.error("First argument must be an image or text section.");const v=[];let w=!1;for(let E=1;E<=e.length-1;++E){const O=e[E];if(w&&"object"==typeof O&&!Array.isArray(O)){w=!1;let N=null;if(O["font-scale"]&&(N=a.parse(O["font-scale"],1,He),!N))return null;let K=null;if(O["text-font"]&&(K=a.parse(O["text-font"],1,$e(dt)),!K))return null;let ie=null;if(O["text-color"]&&(ie=a.parse(O["text-color"],1,en),!ie))return null;const oe=v[v.length-1];oe.scale=N,oe.font=K,oe.textColor=ie}else{const N=a.parse(e[E],1,De);if(!N)return null;const K=N.type.kind;if("string"!==K&&"value"!==K&&"null"!==K&&"resolvedImage"!==K)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:N,scale:null,font:null,textColor:null})}}return new Co(v)}evaluate(e){return new Ve(this.sections.map(a=>{const f=a.content.evaluate(e);return Un(f)===we?new ue("",f,null,null,null):new ue(Ni(f),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null)}))}eachChild(e){for(const a of this.sections)e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}outputDefined(){return!1}}class qi{constructor(e){this.type=we,this.input=e}static parse(e,a){if(2!==e.length)return a.error("Expected two arguments.");const f=a.parse(e[1],1,dt);return f?new qi(f):a.error("No image name provided.")}evaluate(e){const a=this.input.evaluate(e),f=Gt.fromString(a);return f&&e.availableImages&&(f.available=e.availableImages.indexOf(a)>-1),f}eachChild(e){e(this.input)}outputDefined(){return!1}}class hl{constructor(e){this.type=He,this.input=e}static parse(e,a){if(2!==e.length)return a.error(`Expected 1 argument, but found ${e.length-1} instead.`);const f=a.parse(e[1],1);return f?"array"!==f.type.kind&&"string"!==f.type.kind&&"value"!==f.type.kind?a.error(`Expected argument of type string or array, but found ${at(f.type)} instead.`):new hl(f):null}evaluate(e){const a=this.input.evaluate(e);if("string"==typeof a||Array.isArray(a))return a.length;throw new ei(`Expected value to be of type string or array, but found ${at(Un(a))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const oo={"==":xr,"!=":qa,">":Ia,"<":Ka,">=":Ya,"<=":mr,array:Xi,at:la,boolean:Xi,case:$s,coalesce:aa,collator:Fr,format:Co,image:qi,in:gs,"index-of":Sa,interpolate:Ir,"interpolate-hcl":Ir,"interpolate-lab":Ir,length:hl,let:Hs,literal:kn,match:Nr,number:Xi,"number-format":Zo,object:Xi,slice:ts,step:ra,string:Xi,"to-boolean":Vi,"to-color":Vi,"to-number":Vi,"to-string":Vi,var:fs,within:kr};function Aa(o,[e,a,f,v]){e=e.evaluate(o),a=a.evaluate(o),f=f.evaluate(o);const w=v?v.evaluate(o):1,E=Sn(e,a,f,w);if(E)throw new ei(E);return new me(e/255*w,a/255*w,f/255*w,w)}function _r(o,e){return o in e}function _s(o,e){const a=e[o];return void 0===a?null:a}function so(o){return{type:o}}function Kn(o){return{result:"success",value:o}}function Gs(o){return{result:"error",value:o}}function Ii(o){return"data-driven"===o["property-type"]||"cross-faded-data-driven"===o["property-type"]}function Rr(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ki(o){return!!o.expression&&o.expression.interpolated}function ai(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":null===o?"null":typeof o}function Hr(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}function Zs(o){return o}function Sl(o,e){const a="color"===e.type,f=o.stops&&"object"==typeof o.stops[0][0],v=f||!(f||void 0!==o.property),w=o.type||(Ki(e)?"exponential":"interval");if(a||"padding"===e.type){const K=a?me.parse:tt.parse;(o=J({},o)).stops&&(o.stops=o.stops.map(ie=>[ie[0],K(ie[1])])),o.default=K(o.default?o.default:e.default)}if(o.colorSpace&&"rgb"!==o.colorSpace&&!Ma[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let E,O,N;if("exponential"===w)E=Xa;else if("interval"===w)E=Pa;else if("categorical"===w){E=Oi,O=Object.create(null);for(const K of o.stops)O[K[0]]=K[1];N=typeof o.stops[0][0]}else{if("identity"!==w)throw new Error(`Unknown function type "${w}"`);E=wr}if(f){const K={},ie=[];for(let be=0;be<o.stops.length;be++){const Ce=o.stops[be],Je=Ce[0].zoom;void 0===K[Je]&&(K[Je]={zoom:Je,type:o.type,property:o.property,default:o.default,stops:[]},ie.push(Je)),K[Je].stops.push([Ce[0].value,Ce[1]])}const oe=[];for(const be of ie)oe.push([K[be].zoom,Sl(K[be],e)]);const _e={name:"linear"};return{kind:"composite",interpolationType:_e,interpolationFactor:Ir.interpolationFactor.bind(void 0,_e),zoomStops:oe.map(be=>be[0]),evaluate:({zoom:be},Ce)=>Xa({stops:oe,base:o.base},e,be).evaluate(be,Ce)}}if(v){const K="exponential"===w?{name:"exponential",base:void 0!==o.base?o.base:1}:null;return{kind:"camera",interpolationType:K,interpolationFactor:Ir.interpolationFactor.bind(void 0,K),zoomStops:o.stops.map(ie=>ie[0]),evaluate:({zoom:ie})=>E(o,e,ie,O,N)}}return{kind:"source",evaluate(K,ie){const oe=ie&&ie.properties?ie.properties[o.property]:void 0;return void 0===oe?dn(o.default,e.default):E(o,e,oe,O,N)}}}function dn(o,e,a){return void 0!==o?o:void 0!==e?e:void 0!==a?a:void 0}function Oi(o,e,a,f,v){return dn(typeof a===v?f[a]:void 0,o.default,e.default)}function Pa(o,e,a){if("number"!==ai(a))return dn(o.default,e.default);const f=o.stops.length;if(1===f||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[f-1][0])return o.stops[f-1][1];const v=Ea(o.stops.map(w=>w[0]),a);return o.stops[v][1]}function Xa(o,e,a){const f=void 0!==o.base?o.base:1;if("number"!==ai(a))return dn(o.default,e.default);const v=o.stops.length;if(1===v||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[v-1][0])return o.stops[v-1][1];const w=Ea(o.stops.map(ie=>ie[0]),a),E=function(ie,oe,_e,be){const Ce=be-_e,Je=ie-_e;return 0===Ce?0:1===oe?Je/Ce:(Math.pow(oe,Je)-1)/(Math.pow(oe,Ce)-1)}(a,f,o.stops[w][0],o.stops[w+1][0]),O=o.stops[w][1],N=o.stops[w+1][1];let K=Us[e.type]||Zs;if(o.colorSpace&&"rgb"!==o.colorSpace){const ie=Ma[o.colorSpace];K=(oe,_e)=>ie.reverse(ie.interpolate(ie.forward(oe),ie.forward(_e),E))}return"function"==typeof O.evaluate?{evaluate(...ie){const oe=O.evaluate.apply(void 0,ie),_e=N.evaluate.apply(void 0,ie);if(void 0!==oe&&void 0!==_e)return K(oe,_e,E)}}:K(O,N,E)}function wr(o,e,a){switch(e.type){case"color":a=me.parse(a);break;case"formatted":a=Ve.fromString(a.toString());break;case"resolvedImage":a=Gt.fromString(a.toString());break;case"padding":a=tt.parse(a);break;default:ai(a)===e.type||"enum"===e.type&&e.values[a]||(a=void 0)}return dn(a,o.default,e.default)}Ui.register(oo,{error:[{kind:"error"},[dt],(o,[e])=>{throw new ei(e.evaluate(o))}],typeof:[dt,[De],(o,[e])=>at(Un(e.evaluate(o)))],"to-rgba":[$e(He,4),[en],(o,[e])=>e.evaluate(o).toArray()],rgb:[en,[He,He,He],Aa],rgba:[en,[He,He,He,He],Aa],has:{type:$t,overloads:[[[dt],(o,[e])=>_r(e.evaluate(o),o.properties())],[[dt,st],(o,[e,a])=>_r(e.evaluate(o),a.evaluate(o))]]},get:{type:De,overloads:[[[dt],(o,[e])=>_s(e.evaluate(o),o.properties())],[[dt,st],(o,[e,a])=>_s(e.evaluate(o),a.evaluate(o))]]},"feature-state":[De,[dt],(o,[e])=>_s(e.evaluate(o),o.featureState||{})],properties:[st,[],o=>o.properties()],"geometry-type":[dt,[],o=>o.geometryType()],id:[De,[],o=>o.id()],zoom:[He,[],o=>o.globals.zoom],"heatmap-density":[He,[],o=>o.globals.heatmapDensity||0],"line-progress":[He,[],o=>o.globals.lineProgress||0],accumulated:[De,[],o=>void 0===o.globals.accumulated?null:o.globals.accumulated],"+":[He,so(He),(o,e)=>{let a=0;for(const f of e)a+=f.evaluate(o);return a}],"*":[He,so(He),(o,e)=>{let a=1;for(const f of e)a*=f.evaluate(o);return a}],"-":{type:He,overloads:[[[He,He],(o,[e,a])=>e.evaluate(o)-a.evaluate(o)],[[He],(o,[e])=>-e.evaluate(o)]]},"/":[He,[He,He],(o,[e,a])=>e.evaluate(o)/a.evaluate(o)],"%":[He,[He,He],(o,[e,a])=>e.evaluate(o)%a.evaluate(o)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(o,[e,a])=>Math.pow(e.evaluate(o),a.evaluate(o))],sqrt:[He,[He],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[He,[He],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[He,[He],(o,[e])=>Math.log(e.evaluate(o))],log2:[He,[He],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[He,[He],(o,[e])=>Math.sin(e.evaluate(o))],cos:[He,[He],(o,[e])=>Math.cos(e.evaluate(o))],tan:[He,[He],(o,[e])=>Math.tan(e.evaluate(o))],asin:[He,[He],(o,[e])=>Math.asin(e.evaluate(o))],acos:[He,[He],(o,[e])=>Math.acos(e.evaluate(o))],atan:[He,[He],(o,[e])=>Math.atan(e.evaluate(o))],min:[He,so(He),(o,e)=>Math.min(...e.map(a=>a.evaluate(o)))],max:[He,so(He),(o,e)=>Math.max(...e.map(a=>a.evaluate(o)))],abs:[He,[He],(o,[e])=>Math.abs(e.evaluate(o))],round:[He,[He],(o,[e])=>{const a=e.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[He,[He],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[He,[He],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[$t,[dt,De],(o,[e,a])=>o.properties()[e.value]===a.value],"filter-id-==":[$t,[De],(o,[e])=>o.id()===e.value],"filter-type-==":[$t,[dt],(o,[e])=>o.geometryType()===e.value],"filter-<":[$t,[dt,De],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f<v}],"filter-id-<":[$t,[De],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a<f}],"filter->":[$t,[dt,De],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f>v}],"filter-id->":[$t,[De],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a>f}],"filter-<=":[$t,[dt,De],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[$t,[De],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a<=f}],"filter->=":[$t,[dt,De],(o,[e,a])=>{const f=o.properties()[e.value],v=a.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[$t,[De],(o,[e])=>{const a=o.id(),f=e.value;return typeof a==typeof f&&a>=f}],"filter-has":[$t,[De],(o,[e])=>e.value in o.properties()],"filter-has-id":[$t,[],o=>null!==o.id()&&void 0!==o.id()],"filter-type-in":[$t,[$e(dt)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[$t,[$e(De)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[$t,[dt,$e(De)],(o,[e,a])=>a.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[$t,[dt,$e(De)],(o,[e,a])=>function(f,v,w,E){for(;w<=E;){const O=w+E>>1;if(v[O]===f)return!0;v[O]>f?E=O-1:w=O+1}return!1}(o.properties()[e.value],a.value,0,a.value.length-1)],all:{type:$t,overloads:[[[$t,$t],(o,[e,a])=>e.evaluate(o)&&a.evaluate(o)],[so($t),(o,e)=>{for(const a of e)if(!a.evaluate(o))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],(o,[e,a])=>e.evaluate(o)||a.evaluate(o)],[so($t),(o,e)=>{for(const a of e)if(a.evaluate(o))return!0;return!1}]]},"!":[$t,[$t],(o,[e])=>!e.evaluate(o)],"is-supported-script":[$t,[dt],(o,[e])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(e.evaluate(o))}],upcase:[dt,[dt],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[dt,[dt],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[dt,so(De),(o,e)=>e.map(a=>Ni(a.evaluate(o))).join("")],"resolved-locale":[dt,[Fe],(o,[e])=>e.evaluate(o).resolvedLocale()]});class ee{constructor(e,a){var f;this.expression=e,this._warningHistory={},this._evaluator=new ho,this._defaultValue=a?"color"===(f=a).type&&Hr(f.default)?new me(0,0,0,0):"color"===f.type?me.parse(f.default)||null:"padding"===f.type?tt.parse(f.default)||null:void 0===f.default?null:f.default:null,this._enumValues=a&&"enum"===a.type?a.values:null}evaluateWithoutErrorHandling(e,a,f,v,w,E){return this._evaluator.globals=e,this._evaluator.feature=a,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(e,a,f,v,w,E){this._evaluator.globals=e,this._evaluator.feature=a||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E||null;try{const O=this.expression.evaluate(this._evaluator);if(null==O||"number"==typeof O&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new ei(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function X(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in oo}function W(o,e){const a=new ul(oo,[],e?function(v){const w={color:en,string:dt,number:He,enum:dt,boolean:$t,formatted:Se,padding:Ne,resolvedImage:we};return"array"===v.type?$e(w[v.value]||De,v.length):w[v.type]}(e):void 0),f=a.parse(o,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return f?Kn(new ee(f,e)):Gs(a.errors)}class fe{constructor(e,a){this.kind=e,this._styleExpression=a,this.isStateDependent="constant"!==e&&!As(a.expression)}evaluateWithoutErrorHandling(e,a,f,v,w,E){return this._styleExpression.evaluateWithoutErrorHandling(e,a,f,v,w,E)}evaluate(e,a,f,v,w,E){return this._styleExpression.evaluate(e,a,f,v,w,E)}}class Wt{constructor(e,a,f,v){this.kind=e,this.zoomStops=f,this._styleExpression=a,this.isStateDependent="camera"!==e&&!As(a.expression),this.interpolationType=v}evaluateWithoutErrorHandling(e,a,f,v,w,E){return this._styleExpression.evaluateWithoutErrorHandling(e,a,f,v,w,E)}evaluate(e,a,f,v,w,E){return this._styleExpression.evaluate(e,a,f,v,w,E)}interpolationFactor(e,a,f){return this.interpolationType?Ir.interpolationFactor(this.interpolationType,e,a,f):0}}function li(o,e){const a=W(o,e);if("error"===a.result)return a;const f=a.value.expression,v=Po(f);if(!v&&!Ii(e))return Gs([new Le("","data expressions not supported")]);const w=Oo(f,["zoom"]);if(!w&&!Rr(e))return Gs([new Le("","zoom expressions not supported")]);const E=mo(f);return E||w?E instanceof Le?Gs([E]):E instanceof Ir&&!Ki(e)?Gs([new Le("",'"interpolate" expressions cannot be used with this property')]):Kn(E?new Wt(v?"camera":"composite",a.value,E.labels,E instanceof Ir?E.interpolation:void 0):new fe(v?"constant":"source",a.value)):Gs([new Le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yr{constructor(e,a){this._parameters=e,this._specification=a,J(this,Sl(this._parameters,this._specification))}static deserialize(e){return new yr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function mo(o){let e=null;if(o instanceof Hs)e=mo(o.result);else if(o instanceof aa){for(const a of o.args)if(e=mo(a),e)break}else(o instanceof ra||o instanceof Ir)&&o.input instanceof Ui&&"zoom"===o.input.name&&(e=o);return e instanceof Le||o.eachChild(a=>{const f=mo(a);f instanceof Le?e=f:!e&&f?e=new Le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&f&&e!==f&&(e=new Le("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function or(o){const e=o.key,a=o.value,f=o.valueSpec||{},v=o.objectElementValidators||{},w=o.style,E=o.styleSpec;let O=[];const N=ai(a);if("object"!==N)return[new R(e,a,`object expected, ${N} found`)];for(const K in a){const ie=K.split(".")[0],oe=f[ie]||f["*"];let _e;if(v[ie])_e=v[ie];else if(f[ie])_e=Mi;else if(v["*"])_e=v["*"];else{if(!f["*"]){O.push(new R(e,a[K],`unknown property "${K}"`));continue}_e=Mi}O=O.concat(_e({key:(e&&`${e}.`)+K,value:a[K],valueSpec:oe,style:w,styleSpec:E,object:a,objectKey:K},a))}for(const K in f)v[K]||f[K].required&&void 0===f[K].default&&void 0===a[K]&&O.push(new R(e,a,`missing required property "${K}"`));return O}function ur(o){const e=o.value,a=o.valueSpec,f=o.style,v=o.styleSpec,w=o.key,E=o.arrayElementValidator||Mi;if("array"!==ai(e))return[new R(w,e,`array expected, ${ai(e)} found`)];if(a.length&&e.length!==a.length)return[new R(w,e,`array length ${a.length} expected, length ${e.length} found`)];if(a["min-length"]&&e.length<a["min-length"])return[new R(w,e,`array length at least ${a["min-length"]} expected, length ${e.length} found`)];let O={type:a.value,values:a.values};v.$version<7&&(O.function=a.function),"object"===ai(a.value)&&(O=a.value);let N=[];for(let K=0;K<e.length;K++)N=N.concat(E({array:e,arrayIndex:K,value:e[K],valueSpec:O,style:f,styleSpec:v,key:`${w}[${K}]`}));return N}function Fo(o){const e=o.key,a=o.value,f=o.valueSpec;let v=ai(a);return"number"===v&&a!=a&&(v="NaN"),"number"!==v?[new R(e,a,`number expected, ${v} found`)]:"minimum"in f&&a<f.minimum?[new R(e,a,`${a} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&a>f.maximum?[new R(e,a,`${a} is greater than the maximum value ${f.maximum}`)]:[]}function Oa(o){const e=o.valueSpec,a=le(o.value.type);let f,v,w,E={};const O="categorical"!==a&&void 0===o.value.property,N=!O,K="array"===ai(o.value.stops)&&"array"===ai(o.value.stops[0])&&"object"===ai(o.value.stops[0][0]),ie=or({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(be){if("identity"===a)return[new R(be.key,be.value,'identity function may not have a "stops" property')];let Ce=[];const Je=be.value;return Ce=Ce.concat(ur({key:be.key,value:Je,valueSpec:be.valueSpec,style:be.style,styleSpec:be.styleSpec,arrayElementValidator:oe})),"array"===ai(Je)&&0===Je.length&&Ce.push(new R(be.key,Je,"array must have at least one stop")),Ce},default:function(be){return Mi({key:be.key,value:be.value,valueSpec:e,style:be.style,styleSpec:be.styleSpec})}}});return"identity"===a&&O&&ie.push(new R(o.key,o.value,'missing required property "property"')),"identity"===a||o.value.stops||ie.push(new R(o.key,o.value,'missing required property "stops"')),"exponential"===a&&o.valueSpec.expression&&!Ki(o.valueSpec)&&ie.push(new R(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(N&&!Ii(o.valueSpec)?ie.push(new R(o.key,o.value,"property functions not supported")):O&&!Rr(o.valueSpec)&&ie.push(new R(o.key,o.value,"zoom functions not supported"))),"categorical"!==a&&!K||void 0!==o.value.property||ie.push(new R(o.key,o.value,'"property" property is required')),ie;function oe(be){let Ce=[];const Je=be.value,et=be.key;if("array"!==ai(Je))return[new R(et,Je,`array expected, ${ai(Je)} found`)];if(2!==Je.length)return[new R(et,Je,`array length 2 expected, length ${Je.length} found`)];if(K){if("object"!==ai(Je[0]))return[new R(et,Je,`object expected, ${ai(Je[0])} found`)];if(void 0===Je[0].zoom)return[new R(et,Je,"object stop key must have zoom")];if(void 0===Je[0].value)return[new R(et,Je,"object stop key must have value")];if(w&&w>le(Je[0].zoom))return[new R(et,Je[0].zoom,"stop zoom values must appear in ascending order")];le(Je[0].zoom)!==w&&(w=le(Je[0].zoom),v=void 0,E={}),Ce=Ce.concat(or({key:`${et}[0]`,value:Je[0],valueSpec:{zoom:{}},style:be.style,styleSpec:be.styleSpec,objectElementValidators:{zoom:Fo,value:_e}}))}else Ce=Ce.concat(_e({key:`${et}[0]`,value:Je[0],valueSpec:{},style:be.style,styleSpec:be.styleSpec},Je));return X(Ae(Je[1]))?Ce.concat([new R(`${et}[1]`,Je[1],"expressions are not allowed in function stops.")]):Ce.concat(Mi({key:`${et}[1]`,value:Je[1],valueSpec:e,style:be.style,styleSpec:be.styleSpec}))}function _e(be,Ce){const Je=ai(be.value),et=le(be.value),Mt=null!==be.value?be.value:Ce;if(f){if(Je!==f)return[new R(be.key,Mt,`${Je} stop domain type must match previous stop domain type ${f}`)]}else f=Je;if("number"!==Je&&"string"!==Je&&"boolean"!==Je)return[new R(be.key,Mt,"stop domain value must be a number, string, or boolean")];if("number"!==Je&&"categorical"!==a){let Bt=`number expected, ${Je} found`;return Ii(e)&&void 0===a&&(Bt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new R(be.key,Mt,Bt)]}return"categorical"!==a||"number"!==Je||isFinite(et)&&Math.floor(et)===et?"categorical"!==a&&"number"===Je&&void 0!==v&&et<v?[new R(be.key,Mt,"stop domain values must appear in ascending order")]:(v=et,"categorical"===a&&et in E?[new R(be.key,Mt,"stop domain values must be unique")]:(E[et]=!0,[])):[new R(be.key,Mt,`integer expected, found ${et}`)]}}function No(o){const e=("property"===o.expressionContext?li:W)(Ae(o.value),o.valueSpec);if("error"===e.result)return e.value.map(f=>new R(`${o.key}${f.key}`,o.value,f.message));const a=e.value.expression||e.value._styleExpression.expression;if("property"===o.expressionContext&&"text-font"===o.propertyKey&&!a.outputDefined())return[new R(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===o.expressionContext&&"layout"===o.propertyType&&!As(a))return[new R(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===o.expressionContext&&!As(a))return[new R(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf("cluster")){if(!Oo(a,["zoom","feature-state"]))return[new R(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===o.expressionContext&&!Po(a))return[new R(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rs(o){const e=o.key,a=o.value,f=o.valueSpec,v=[];return Array.isArray(f.values)?-1===f.values.indexOf(le(a))&&v.push(new R(e,a,`expected one of [${f.values.join(", ")}], ${JSON.stringify(a)} found`)):-1===Object.keys(f.values).indexOf(le(a))&&v.push(new R(e,a,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(a)} found`)),v}function Tl(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!Tl(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Yl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xl(o){if(null==o)return{filter:()=>!0,needGeometry:!1};Tl(o)||(o=ys(o));const e=W(o,Yl);if("error"===e.result)throw new Error(e.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,f,v)=>e.value.evaluate(a,f,{},v),needGeometry:Ws(o)}}function Jl(o,e){return o<e?-1:o>e?1:0}function Ws(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(let e=1;e<o.length;e++)if(Ws(o[e]))return!0;return!1}function ys(o){if(!o)return!0;const e=o[0];return o.length<=1?"any"!==e:"=="===e?qs(o[1],o[2],"=="):"!="===e?Ra(qs(o[1],o[2],"==")):"<"===e||">"===e||"<="===e||">="===e?qs(o[1],o[2],e):"any"===e?(a=o.slice(1),["any"].concat(a.map(ys))):"all"===e?["all"].concat(o.slice(1).map(ys)):"none"===e?["all"].concat(o.slice(1).map(ys).map(Ra)):"in"===e?Ja(o[1],o.slice(2)):"!in"===e?Ra(Ja(o[1],o.slice(2))):"has"===e?ka(o[1]):"!has"===e?Ra(ka(o[1])):"within"!==e||o;var a}function qs(o,e,a){switch(o){case"$type":return[`filter-type-${a}`,e];case"$id":return[`filter-id-${a}`,e];default:return[`filter-${a}`,o,e]}}function Ja(o,e){if(0===e.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(a=>typeof a!=typeof e[0])?["filter-in-large",o,["literal",e.sort(Jl)]]:["filter-in-small",o,["literal",e]]}}function ka(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ra(o){return["!",o]}function Il(o){return Tl(Ae(o.value))?No(J({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pl(o)}function pl(o){const e=o.value,a=o.key;if("array"!==ai(e))return[new R(a,e,`array expected, ${ai(e)} found`)];const f=o.styleSpec;let v,w=[];if(e.length<1)return[new R(a,e,"filter array must have at least 1 element")];switch(w=w.concat(rs({key:`${a}[0]`,value:e[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),le(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===le(e[1])&&w.push(new R(a,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&w.push(new R(a,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(v=ai(e[1]),"string"!==v&&w.push(new R(`${a}[1]`,e[1],`string expected, ${v} found`)));for(let E=2;E<e.length;E++)v=ai(e[E]),"$type"===le(e[1])?w=w.concat(rs({key:`${a}[${E}]`,value:e[E],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):"string"!==v&&"number"!==v&&"boolean"!==v&&w.push(new R(`${a}[${E}]`,e[E],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let E=1;E<e.length;E++)w=w.concat(pl({key:`${a}[${E}]`,value:e[E],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":v=ai(e[1]),2!==e.length?w.push(new R(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==v&&w.push(new R(`${a}[1]`,e[1],`string expected, ${v} found`));break;case"within":v=ai(e[1]),2!==e.length?w.push(new R(a,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==v&&w.push(new R(`${a}[1]`,e[1],`object expected, ${v} found`))}return w}function Al(o,e){const a=o.key,f=o.style,v=o.styleSpec,w=o.value,E=o.objectKey,O=v[`${e}_${o.layerType}`];if(!O)return[];const N=E.match(/^(.*)-transition$/);if("paint"===e&&N&&O[N[1]]&&O[N[1]].transition)return Mi({key:a,value:w,valueSpec:v.transition,style:f,styleSpec:v});const K=o.valueSpec||O[E];if(!K)return[new R(a,w,`unknown property "${E}"`)];let ie;if("string"===ai(w)&&Ii(K)&&!K.tokens&&(ie=/^{([^}]+)}$/.exec(w)))return[new R(a,w,`"${E}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const oe=[];return"symbol"===o.layerType&&("text-field"===E&&f&&!f.glyphs&&oe.push(new R(a,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===E&&Hr(Ae(w))&&"identity"===le(w.type)&&oe.push(new R(a,w,'"text-font" does not support identity functions'))),oe.concat(Mi({key:o.key,value:w,valueSpec:K,style:f,styleSpec:v,expressionContext:"property",propertyType:e,propertyKey:E}))}function $r(o){return Al(o,"paint")}function j(o){return Al(o,"layout")}function re(o){let e=[];const a=o.value,f=o.key,v=o.style,w=o.styleSpec;a.type||a.ref||e.push(new R(f,a,'either "type" or "ref" is required'));let E=le(a.type);const O=le(a.ref);if(a.id){const N=le(a.id);for(let K=0;K<o.arrayIndex;K++){const ie=v.layers[K];le(ie.id)===N&&e.push(new R(f,a.id,`duplicate layer id "${a.id}", previously used at line ${ie.id.__line__}`))}}if("ref"in a){let N;["type","source","source-layer","filter","layout"].forEach(K=>{K in a&&e.push(new R(f,a[K],`"${K}" is prohibited for ref layers`))}),v.layers.forEach(K=>{le(K.id)===O&&(N=K)}),N?N.ref?e.push(new R(f,a.ref,"ref cannot reference another ref layer")):E=le(N.type):e.push(new R(f,a.ref,`ref layer "${O}" not found`))}else if("background"!==E)if(a.source){const N=v.sources&&v.sources[a.source],K=N&&le(N.type);N?"vector"===K&&"raster"===E?e.push(new R(f,a.source,`layer "${a.id}" requires a raster source`)):"raster"===K&&"raster"!==E?e.push(new R(f,a.source,`layer "${a.id}" requires a vector source`)):"vector"!==K||a["source-layer"]?"raster-dem"===K&&"hillshade"!==E?e.push(new R(f,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==E||!a.paint||!a.paint["line-gradient"]||"geojson"===K&&N.lineMetrics||e.push(new R(f,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new R(f,a,`layer "${a.id}" must specify a "source-layer"`)):e.push(new R(f,a.source,`source "${a.source}" not found`))}else e.push(new R(f,a,'missing required property "source"'));return e=e.concat(or({key:f,value:a,valueSpec:w.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mi({key:`${f}.type`,value:a.type,valueSpec:w.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:Il,layout:N=>or({layer:a,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":K=>j(J({layerType:E},K))}}),paint:N=>or({layer:a,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":K=>$r(J({layerType:E},K))}})}})),e}function Z(o){const e=o.value,a=o.key,f=ai(e);return"string"!==f?[new R(a,e,`string expected, ${f} found`)]:[]}const ge={promoteId:function({key:o,value:e}){if("string"===ai(e))return Z({key:o,value:e});{const a=[];for(const f in e)a.push(...Z({key:`${o}.${f}`,value:e[f]}));return a}}};function nt(o){const e=o.value,a=o.key,f=o.styleSpec,v=o.style;if(!e.type)return[new R(a,e,'"type" is required')];const w=le(e.type);let E;switch(w){case"vector":case"raster":case"raster-dem":return E=or({key:a,value:e,valueSpec:f[`source_${w.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:ge}),E;case"geojson":if(E=or({key:a,value:e,valueSpec:f.source_geojson,style:v,styleSpec:f,objectElementValidators:ge}),e.cluster)for(const O in e.clusterProperties){const[N,K]=e.clusterProperties[O],ie="string"==typeof N?[N,["accumulated"],["get",O]]:N;E.push(...No({key:`${a}.${O}.map`,value:K,expressionContext:"cluster-map"})),E.push(...No({key:`${a}.${O}.reduce`,value:ie,expressionContext:"cluster-reduce"}))}return E;case"video":return or({key:a,value:e,valueSpec:f.source_video,style:v,styleSpec:f});case"image":return or({key:a,value:e,valueSpec:f.source_image,style:v,styleSpec:f});case"canvas":return[new R(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rs({key:`${a}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,styleSpec:f})}}function Pt(o){const e=o.value,a=o.styleSpec,f=a.light,v=o.style;let w=[];const E=ai(e);if(void 0===e)return w;if("object"!==E)return w=w.concat([new R("light",e,`object expected, ${E} found`)]),w;for(const O in e){const N=O.match(/^(.*)-transition$/);w=w.concat(N&&f[N[1]]&&f[N[1]].transition?Mi({key:O,value:e[O],valueSpec:a.transition,style:v,styleSpec:a}):f[O]?Mi({key:O,value:e[O],valueSpec:f[O],style:v,styleSpec:a}):[new R(O,e[O],`unknown property "${O}"`)])}return w}function qt(o){const e=o.value,a=o.styleSpec,f=a.terrain,v=o.style;let w=[];const E=ai(e);if(void 0===e)return w;if("object"!==E)return w=w.concat([new R("terrain",e,`object expected, ${E} found`)]),w;for(const O in e)w=w.concat(f[O]?Mi({key:O,value:e[O],valueSpec:f[O],style:v,styleSpec:a}):[new R(O,e[O],`unknown property "${O}"`)]);return w}const Zn={"*":()=>[],array:ur,boolean:function(o){const e=o.value,a=o.key,f=ai(e);return"boolean"!==f?[new R(a,e,`boolean expected, ${f} found`)]:[]},number:Fo,color:function(o){const e=o.key,a=o.value,f=ai(a);return"string"!==f?[new R(e,a,`color expected, ${f} found`)]:null===ni(a)?[new R(e,a,`color expected, "${a}" found`)]:[]},constants:H,enum:rs,filter:Il,function:Oa,layer:re,object:or,source:nt,light:Pt,terrain:qt,string:Z,formatted:function(o){return 0===Z(o).length?[]:No(o)},resolvedImage:function(o){return 0===Z(o).length?[]:No(o)},padding:function(o){const e=o.key,a=o.value;if("array"===ai(a)){if(a.length<1||a.length>4)return[new R(e,a,`padding requires 1 to 4 values; ${a.length} values found`)];const f={type:"number"};let v=[];for(let w=0;w<a.length;w++)v=v.concat(Mi({key:`${e}[${w}]`,value:a[w],valueSpec:f}));return v}return Fo({key:e,value:a,valueSpec:{}})}};function Mi(o){const e=o.value,a=o.valueSpec,f=o.styleSpec;return a.expression&&Hr(le(e))?Oa(o):a.expression&&X(Ae(e))?No(o):a.type&&Zn[a.type]?Zn[a.type](o):or(J({},o,{valueSpec:a.type?f[a.type]:a}))}function xi(o){const e=o.value,a=o.key,f=Z(o);return f.length||(-1===e.indexOf("{fontstack}")&&f.push(new R(a,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&f.push(new R(a,e,'"glyphs" url must include a "{range}" token'))),f}function vi(o,e=k){let a=[];return a=a.concat(Mi({key:"",value:o,valueSpec:e.$root,styleSpec:e,style:o,objectElementValidators:{glyphs:xi,"*":()=>[]}})),o.constants&&(a=a.concat(H({key:"constants",value:o.constants,style:o,styleSpec:e}))),_i(a)}function _i(o){return[].concat(o).sort((e,a)=>e.line-a.line)}function sr(o){return function(...e){return _i(o.apply(this,e))}}vi.source=sr(nt),vi.light=sr(Pt),vi.terrain=sr(qt),vi.layer=sr(re),vi.filter=sr(Il),vi.paintProperty=sr($r),vi.layoutProperty=sr(j);const wi=vi,Ai=wi.light,Eo=wi.paintProperty,Do=wi.layoutProperty;function Br(o,e){let a=!1;if(e&&e.length)for(const f of e)o.fire(new Me(new Error(f.message))),a=!0;return a}class Xr{constructor(e,a,f){const v=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const E=new Int32Array(this.arrayBuffer);e=E[0],this.d=(a=E[1])+2*(f=E[2]);for(let N=0;N<this.d*this.d;N++){const K=E[3+N],ie=E[3+N+1];v.push(K===ie?null:E.subarray(K,ie))}const O=E[3+v.length+1];this.keys=E.subarray(E[3+v.length],O),this.bboxes=E.subarray(O),this.insert=this._insertReadonly}else{this.d=a+2*f;for(let E=0;E<this.d*this.d;E++)v.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=e,this.padding=f,this.scale=a/e,this.uid=0;const w=f/a*e;this.min=-w,this.max=e+w}insert(e,a,f,v,w){this._forEachCell(a,f,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,a,f,v,w,E){this.cells[w].push(E)}query(e,a,f,v,w){const E=this.min,O=this.max;if(e<=E&&a<=E&&O<=f&&O<=v&&!w)return Array.prototype.slice.call(this.keys);{const N=[];return this._forEachCell(e,a,f,v,this._queryCell,N,{},w),N}}_queryCell(e,a,f,v,w,E,O,N){const K=this.cells[w];if(null!==K){const ie=this.keys,oe=this.bboxes;for(let _e=0;_e<K.length;_e++){const be=K[_e];if(void 0===O[be]){const Ce=4*be;(N?N(oe[Ce+0],oe[Ce+1],oe[Ce+2],oe[Ce+3]):e<=oe[Ce+2]&&a<=oe[Ce+3]&&f>=oe[Ce+0]&&v>=oe[Ce+1])?(O[be]=!0,E.push(ie[be])):O[be]=!1}}}}_forEachCell(e,a,f,v,w,E,O,N){const K=this._convertToCellCoord(e),ie=this._convertToCellCoord(a),oe=this._convertToCellCoord(f),_e=this._convertToCellCoord(v);for(let be=K;be<=oe;be++)for(let Ce=ie;Ce<=_e;Ce++){const Je=this.d*Ce+be;if((!N||N(this._convertFromCellCoord(be),this._convertFromCellCoord(Ce),this._convertFromCellCoord(be+1),this._convertFromCellCoord(Ce+1)))&&w.call(this,e,a,f,v,Je,E,O,N))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,a=3+this.cells.length+1+1;let f=0;for(let E=0;E<this.cells.length;E++)f+=this.cells[E].length;const v=new Int32Array(a+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=a;for(let E=0;E<e.length;E++){const O=e[E];v[3+E]=w,v.set(O,w),w+=O.length}return v[3+e.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+e.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(e,a){const f=e.toArrayBuffer();return a&&a.push(f),{buffer:f}}static deserialize(e){return new Xr(e.buffer)}}const Ar={};function Mn(o,e,a={}){if(Ar[o])throw new Error(`${o} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:o,writeable:!1}),Ar[o]={klass:e,omit:a.omit||[],shallow:a.shallow||[]}}Mn("Object",Object),Mn("TransferableGridIndex",Xr),Mn("Color",me),Mn("Error",Error),Mn("AJAXError",mn),Mn("ResolvedImage",Gt),Mn("StylePropertyFunction",yr),Mn("StyleExpression",ee,{omit:["_evaluator"]}),Mn("ZoomDependentExpression",Wt),Mn("ZoomConstantExpression",fe),Mn("CompoundExpression",Ui,{omit:["_evaluate"]});for(const o in oo)oo[o]._classRegistryKey||Mn(`Expression_${o}`,oo[o]);function Rs(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&"ArrayBuffer"===o.constructor.name)}function Cr(o,e){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Rs(o)||tn(o))return e&&e.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return e&&e.push(a.buffer),a}if(o instanceof ImageData)return e&&e.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const f of o)a.push(Cr(f,e));return a}if("object"==typeof o){const a=o.constructor,f=a._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Ar[f])throw new Error(`${f} is not registered.`);const v=a.serialize?a.serialize(o,e):{};if(a.serialize){if(e&&v===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in o){if(!o.hasOwnProperty(w)||Ar[f].omit.indexOf(w)>=0)continue;const E=o[w];v[w]=Ar[f].shallow.indexOf(w)>=0?E:Cr(E,e)}o instanceof Error&&(v.message=o.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==f&&(v.$name=f),v}throw new Error("can't serialize object of type "+typeof o)}function vs(o){if(null==o||"boolean"==typeof o||"number"==typeof o||"string"==typeof o||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Rs(o)||tn(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(vs);if("object"==typeof o){const e=o.$name||"Object";if(!Ar[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:a}=Ar[e];if(!a)throw new Error(`can't deserialize unregistered class ${e}`);if(a.deserialize)return a.deserialize(o);const f=Object.create(a.prototype);for(const v of Object.keys(o)){if("$name"===v)continue;const w=o[v];f[v]=Ar[e].shallow.indexOf(v)>=0?w:vs(w)}return f}throw new Error("can't deserialize object of type "+typeof o)}class Qa{constructor(){this.first=!0}update(e,a){const f=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=a),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=f,!0))}}const Ln={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function yc(o){for(const e of o)if(fl(e.charCodeAt(0)))return!0;return!1}function hu(o){for(const e of o)if(!sh(e.charCodeAt(0)))return!1;return!0}function sh(o){return!(Ln.Arabic(o)||Ln["Arabic Supplement"](o)||Ln["Arabic Extended-A"](o)||Ln["Arabic Presentation Forms-A"](o)||Ln["Arabic Presentation Forms-B"](o))}function fl(o){return!(746!==o&&747!==o&&(o<4352||!(Ln["Bopomofo Extended"](o)||Ln.Bopomofo(o)||Ln["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ln["CJK Compatibility Ideographs"](o)||Ln["CJK Compatibility"](o)||Ln["CJK Radicals Supplement"](o)||Ln["CJK Strokes"](o)||!(!Ln["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||12336===o)||Ln["CJK Unified Ideographs Extension A"](o)||Ln["CJK Unified Ideographs"](o)||Ln["Enclosed CJK Letters and Months"](o)||Ln["Hangul Compatibility Jamo"](o)||Ln["Hangul Jamo Extended-A"](o)||Ln["Hangul Jamo Extended-B"](o)||Ln["Hangul Jamo"](o)||Ln["Hangul Syllables"](o)||Ln.Hiragana(o)||Ln["Ideographic Description Characters"](o)||Ln.Kanbun(o)||Ln["Kangxi Radicals"](o)||Ln["Katakana Phonetic Extensions"](o)||Ln.Katakana(o)&&12540!==o||!(!Ln["Halfwidth and Fullwidth Forms"](o)||65288===o||65289===o||65293===o||o>=65306&&o<=65310||65339===o||65341===o||65343===o||o>=65371&&o<=65503||65507===o||o>=65512&&o<=65519)||!(!Ln["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ln["Unified Canadian Aboriginal Syllabics"](o)||Ln["Unified Canadian Aboriginal Syllabics Extended"](o)||Ln["Vertical Forms"](o)||Ln["Yijing Hexagram Symbols"](o)||Ln["Yi Syllables"](o)||Ln["Yi Radicals"](o))))}function vc(o){return!(fl(o)||(e=o,Ln["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Ln["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Ln["Letterlike Symbols"](e)||Ln["Number Forms"](e)||Ln["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Ln["Control Pictures"](e)&&9251!==e||Ln["Optical Character Recognition"](e)||Ln["Enclosed Alphanumerics"](e)||Ln["Geometric Shapes"](e)||Ln["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Ln["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ln["CJK Symbols and Punctuation"](e)||Ln.Katakana(e)||Ln["Private Use Area"](e)||Ln["CJK Compatibility Forms"](e)||Ln["Small Form Variants"](e)||Ln["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function bc(o){return o>=1424&&o<=2303||Ln["Arabic Presentation Forms-A"](o)||Ln["Arabic Presentation Forms-B"](o)}function ca(o,e){return!(!e&&bc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ln.Khmer(o))}function Nc(o){for(const e of o)if(bc(e.charCodeAt(0)))return!0;return!1}const Pl="deferred",Wo="loading",ml="loaded";let qo=null,go="unavailable",Bo=null;const xc=function(o){o&&"string"==typeof o&&o.indexOf("NetworkError")>-1&&(go="error"),qo&&qo(o)};function Ol(){Ql.fire(new te("pluginStateChange",{pluginStatus:go,pluginURL:Bo}))}const Ql=new he,La=function(){return go},os=function(){if(go!==Pl||!Bo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");go=Wo,Ol(),Bo&&fi({url:Bo},o=>{o?xc(o):(go=ml,Ol())})},Ko={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>go===ml||null!=Ko.applyArabicShaping,isLoading:()=>go===Wo,setState(o){if(!At())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");go=o.pluginStatus,Bo=o.pluginURL},isParsed(){if(!At())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Ko.applyArabicShaping&&null!=Ko.processBidirectionalText&&null!=Ko.processStyledBidirectionalText},getPluginURL(){if(!At())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Bo}};class ir{constructor(e,a){this.zoom=e,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Qa,this.transition={})}isSupportedScript(e){return function(a,f){for(const v of a)if(!ca(v.charCodeAt(0),f))return!1;return!0}(e,Ko.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,a=e-Math.floor(e),f=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*a}}}class gl{constructor(e,a){this.property=e,this.value=a,this.expression=function(f,v){if(Hr(f))return new yr(f,v);if(X(f)){const w=li(f,v);if("error"===w.result)throw new Error(w.value.map(E=>`${E.key}: ${E.message}`).join(", "));return w.value}{let w=f;return"color"===v.type&&"string"==typeof f?w=me.parse(f):"padding"!==v.type||"number"!=typeof f&&!Array.isArray(f)||(w=tt.parse(f)),{kind:"constant",evaluate:()=>w}}}(void 0===a?e.specification.default:a,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,a,f){return this.property.possiblyEvaluate(this,e,a,f)}}class kl{constructor(e){this.property=e,this.value=new gl(e,void 0)}transitioned(e,a){return new el(this.property,this.value,a,rt({},e.transition,this.transition),e.now)}untransitioned(){return new el(this.property,this.value,null,{},0)}}class ua{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Dt(this._values[e].value.value)}setValue(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new kl(this._values[e].property)),this._values[e].value=new gl(this._values[e].property,null===a?void 0:Dt(a))}getTransition(e){return Dt(this._values[e].transition)}setTransition(e,a){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new kl(this._values[e].property)),this._values[e].transition=Dt(a)||void 0}serialize(){const e={};for(const a of Object.keys(this._values)){const f=this.getValue(a);void 0!==f&&(e[a]=f);const v=this.getTransition(a);void 0!==v&&(e[`${a}-transition`]=v)}return e}transitioned(e,a){const f=new tl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(e,a._values[v]);return f}untransitioned(){const e=new tl(this._properties);for(const a of Object.keys(this._values))e._values[a]=this._values[a].untransitioned();return e}}class el{constructor(e,a,f,v,w){this.property=e,this.value=a,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,e.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(e,a,f){const v=e.now||0,w=this.value.possiblyEvaluate(e,a,f),E=this.prior;if(E){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return E.possiblyEvaluate(e,a,f);{const O=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(e,a,f),w,function(N){if(N<=0)return 0;if(N>=1)return 1;const K=N*N,ie=K*N;return 4*(N<.5?ie:3*(N-K)+ie-.75)}(O))}}return w}}class tl{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,a,f){const v=new Pi(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(e,a,f);return v}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class wc{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Dt(this._values[e].value)}setValue(e,a){this._values[e]=new gl(this._values[e].property,null===a?void 0:Dt(a))}serialize(){const e={};for(const a of Object.keys(this._values)){const f=this.getValue(a);void 0!==f&&(e[a]=f)}return e}possiblyEvaluate(e,a,f){const v=new Pi(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(e,a,f);return v}}class Ls{constructor(e,a,f){this.property=e,this.value=a,this.parameters=f}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,a,f,v){return this.property.evaluate(this.value,this.parameters,e,a,f,v)}}class Pi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Yn{constructor(e){this.specification=e}possiblyEvaluate(e,a){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(a)}interpolate(e,a,f){const v=Us[this.specification.type];return v?v(e,a,f):e}}class zn{constructor(e,a){this.specification=e,this.overrides=a}possiblyEvaluate(e,a,f,v){return new Ls(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(a,null,{},f,v)}:e.expression,a)}interpolate(e,a,f){if("constant"!==e.value.kind||"constant"!==a.value.kind)return e;if(void 0===e.value.value||void 0===a.value.value)return new Ls(this,{kind:"constant",value:void 0},e.parameters);const v=Us[this.specification.type];return v?new Ls(this,{kind:"constant",value:v(e.value.value,a.value.value,f)},e.parameters):e}evaluate(e,a,f,v,w,E){return"constant"===e.kind?e.value:e.evaluate(a,f,v,w,E)}}class Ks extends zn{possiblyEvaluate(e,a,f,v){if(void 0===e.value)return new Ls(this,{kind:"constant",value:void 0},a);if("constant"===e.expression.kind){const w=e.expression.evaluate(a,null,{},f,v),E="resolvedImage"===e.property.specification.type&&"string"!=typeof w?w.name:w,O=this._calculate(E,E,E,a);return new Ls(this,{kind:"constant",value:O},a)}if("camera"===e.expression.kind){const w=this._calculate(e.expression.evaluate({zoom:a.zoom-1}),e.expression.evaluate({zoom:a.zoom}),e.expression.evaluate({zoom:a.zoom+1}),a);return new Ls(this,{kind:"constant",value:w},a)}return new Ls(this,e.expression,a)}evaluate(e,a,f,v,w,E){if("source"===e.kind){const O=e.evaluate(a,f,v,w,E);return this._calculate(O,O,O,a)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(a.zoom)-1},f,v),e.evaluate({zoom:Math.floor(a.zoom)},f,v),e.evaluate({zoom:Math.floor(a.zoom)+1},f,v),a):e.value}_calculate(e,a,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:f,to:a}}interpolate(e){return e}}class da{constructor(e){this.specification=e}possiblyEvaluate(e,a,f,v){if(void 0!==e.value){if("constant"===e.expression.kind){const w=e.expression.evaluate(a,null,{},f,v);return this._calculate(w,w,w,a)}return this._calculate(e.expression.evaluate(new ir(Math.floor(a.zoom-1),a)),e.expression.evaluate(new ir(Math.floor(a.zoom),a)),e.expression.evaluate(new ir(Math.floor(a.zoom+1),a)),a)}}_calculate(e,a,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:e,to:a}:{from:f,to:a}}interpolate(e){return e}}class nl{constructor(e){this.specification=e}possiblyEvaluate(e,a,f,v){return!!e.expression.evaluate(a,null,{},f,v)}interpolate(){return!1}}class dr{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in e){const f=e[a];f.specification.overridable&&this.overridableProperties.push(a);const v=this.defaultPropertyValues[a]=new gl(f,void 0),w=this.defaultTransitionablePropertyValues[a]=new kl(f);this.defaultTransitioningPropertyValues[a]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=v.possiblyEvaluate({})}}}Mn("DataDrivenProperty",zn),Mn("DataConstantProperty",Yn),Mn("CrossFadedDataDrivenProperty",Ks),Mn("CrossFadedProperty",da),Mn("ColorRampProperty",nl);const Fs="-transition";class hr extends he{constructor(e,a){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),a.layout&&(this._unevaluatedLayout=new wc(a.layout)),a.paint)){this._transitionablePaint=new ua(a.paint);for(const f in e.paint)this.setPaintProperty(f,e.paint[f],{validate:!1});for(const f in e.layout)this.setLayoutProperty(f,e.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pi(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,a,f={}){null!=a&&this._validate(Do,`layers.${this.id}.layout.${e}`,e,a,f)||("visibility"!==e?this._unevaluatedLayout.setValue(e,a):this.visibility=a)}getPaintProperty(e){return e.endsWith(Fs)?this._transitionablePaint.getTransition(e.slice(0,-Fs.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,a,f={}){if(null!=a&&this._validate(Eo,`layers.${this.id}.paint.${e}`,e,a,f))return!1;if(e.endsWith(Fs))return this._transitionablePaint.setTransition(e.slice(0,-Fs.length),a||void 0),!1;{const v=this._transitionablePaint._values[e],w="cross-faded-data-driven"===v.property.specification["property-type"],E=v.value.isDataDriven(),O=v.value;this._transitionablePaint.setValue(e,a),this._handleSpecialPaintPropertyUpdate(e);const N=this._transitionablePaint._values[e].value;return N.isDataDriven()||E||w||this._handleOverridablePaintPropertyUpdate(e,O,N)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,a,f){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,a){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,a)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),We(e,(a,f)=>!(void 0===a||"layout"===f&&!Object.keys(a).length||"paint"===f&&!Object.keys(a).length))}_validate(e,a,f,v,w={}){return(!w||!1!==w.validate)&&Br(this,e.call(wi,{key:a,layerType:this.type,objectKey:f,value:v,styleSpec:k,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const a=this.paint.get(e);if(a instanceof Ls&&Ii(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1}}const il={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ec{constructor(e,a){this._structArray=e,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Er{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,a){return e._trim(),a&&(e.isTransferred=!0,a.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const a=Object.create(this.prototype);return a.arrayBuffer=e.arrayBuffer,a.length=e.length,a.capacity=e.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function lr(o,e=1){let a=0,f=0;return{members:o.map(v=>{const w=il[v.type].BYTES_PER_ELEMENT,E=a=Rl(a,Math.max(e,w)),O=v.components||1;return f=Math.max(f,w),a+=w*O,{name:v.name,type:v.type,components:O,offset:E}}),size:Rl(a,Math.max(f,e)),alignment:e}}function Rl(o,e){return Math.ceil(o/e)*e}class Fa extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a){const f=this.length;return this.resize(f+1),this.emplace(f,e,a)}emplace(e,a,f){const v=2*e;return this.int16[v+0]=a,this.int16[v+1]=f,e}}Fa.prototype.bytesPerElement=4,Mn("StructArrayLayout2i4",Fa);class ss extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=3*e;return this.int16[w+0]=a,this.int16[w+1]=f,this.int16[w+2]=v,e}}ss.prototype.bytesPerElement=6,Mn("StructArrayLayout3i6",ss);class ha extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,a,f,v)}emplace(e,a,f,v,w){const E=4*e;return this.int16[E+0]=a,this.int16[E+1]=f,this.int16[E+2]=v,this.int16[E+3]=w,e}}ha.prototype.bytesPerElement=8,Mn("StructArrayLayout4i8",ha);class y extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,f,v,w,E)}emplace(e,a,f,v,w,E,O){const N=6*e;return this.int16[N+0]=a,this.int16[N+1]=f,this.int16[N+2]=v,this.int16[N+3]=w,this.int16[N+4]=E,this.int16[N+5]=O,e}}y.prototype.bytesPerElement=12,Mn("StructArrayLayout2i4i12",y);class n extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,f,v,w,E)}emplace(e,a,f,v,w,E,O){const N=4*e,K=8*e;return this.int16[N+0]=a,this.int16[N+1]=f,this.uint8[K+4]=v,this.uint8[K+5]=w,this.uint8[K+6]=E,this.uint8[K+7]=O,e}}n.prototype.bytesPerElement=8,Mn("StructArrayLayout2i4ub8",n);class u extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a){const f=this.length;return this.resize(f+1),this.emplace(f,e,a)}emplace(e,a,f){const v=2*e;return this.float32[v+0]=a,this.float32[v+1]=f,e}}u.prototype.bytesPerElement=8,Mn("StructArrayLayout2f8",u);class g extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E,O,N,K,ie){const oe=this.length;return this.resize(oe+1),this.emplace(oe,e,a,f,v,w,E,O,N,K,ie)}emplace(e,a,f,v,w,E,O,N,K,ie,oe){const _e=10*e;return this.uint16[_e+0]=a,this.uint16[_e+1]=f,this.uint16[_e+2]=v,this.uint16[_e+3]=w,this.uint16[_e+4]=E,this.uint16[_e+5]=O,this.uint16[_e+6]=N,this.uint16[_e+7]=K,this.uint16[_e+8]=ie,this.uint16[_e+9]=oe,e}}g.prototype.bytesPerElement=20,Mn("StructArrayLayout10ui20",g);class b extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E,O,N,K,ie,oe,_e){const be=this.length;return this.resize(be+1),this.emplace(be,e,a,f,v,w,E,O,N,K,ie,oe,_e)}emplace(e,a,f,v,w,E,O,N,K,ie,oe,_e,be){const Ce=12*e;return this.int16[Ce+0]=a,this.int16[Ce+1]=f,this.int16[Ce+2]=v,this.int16[Ce+3]=w,this.uint16[Ce+4]=E,this.uint16[Ce+5]=O,this.uint16[Ce+6]=N,this.uint16[Ce+7]=K,this.int16[Ce+8]=ie,this.int16[Ce+9]=oe,this.int16[Ce+10]=_e,this.int16[Ce+11]=be,e}}b.prototype.bytesPerElement=24,Mn("StructArrayLayout4i4ui4i24",b);class C extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=3*e;return this.float32[w+0]=a,this.float32[w+1]=f,this.float32[w+2]=v,e}}C.prototype.bytesPerElement=12,Mn("StructArrayLayout3f12",C);class A extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint32[1*e+0]=a,e}}A.prototype.bytesPerElement=4,Mn("StructArrayLayout1ul4",A);class B extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E,O,N,K){const ie=this.length;return this.resize(ie+1),this.emplace(ie,e,a,f,v,w,E,O,N,K)}emplace(e,a,f,v,w,E,O,N,K,ie){const oe=10*e,_e=5*e;return this.int16[oe+0]=a,this.int16[oe+1]=f,this.int16[oe+2]=v,this.int16[oe+3]=w,this.int16[oe+4]=E,this.int16[oe+5]=O,this.uint32[_e+3]=N,this.uint16[oe+8]=K,this.uint16[oe+9]=ie,e}}B.prototype.bytesPerElement=20,Mn("StructArrayLayout6i1ul2ui20",B);class V extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E){const O=this.length;return this.resize(O+1),this.emplace(O,e,a,f,v,w,E)}emplace(e,a,f,v,w,E,O){const N=6*e;return this.int16[N+0]=a,this.int16[N+1]=f,this.int16[N+2]=v,this.int16[N+3]=w,this.int16[N+4]=E,this.int16[N+5]=O,e}}V.prototype.bytesPerElement=12,Mn("StructArrayLayout2i2i2i12",V);class Q extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w){const E=this.length;return this.resize(E+1),this.emplace(E,e,a,f,v,w)}emplace(e,a,f,v,w,E){const O=4*e,N=8*e;return this.float32[O+0]=a,this.float32[O+1]=f,this.float32[O+2]=v,this.int16[N+6]=w,this.int16[N+7]=E,e}}Q.prototype.bytesPerElement=16,Mn("StructArrayLayout2f1f2i16",Q);class ae extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,a,f,v)}emplace(e,a,f,v,w){const E=12*e,O=3*e;return this.uint8[E+0]=a,this.uint8[E+1]=f,this.float32[O+1]=v,this.float32[O+2]=w,e}}ae.prototype.bytesPerElement=12,Mn("StructArrayLayout2ub2f12",ae);class ce extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=3*e;return this.uint16[w+0]=a,this.uint16[w+1]=f,this.uint16[w+2]=v,e}}ce.prototype.bytesPerElement=6,Mn("StructArrayLayout3ui6",ce);class ye extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je,et,Mt){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je,et,Mt)}emplace(e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je,et,Mt,Bt){const bt=24*e,Rt=12*e,rn=48*e;return this.int16[bt+0]=a,this.int16[bt+1]=f,this.uint16[bt+2]=v,this.uint16[bt+3]=w,this.uint32[Rt+2]=E,this.uint32[Rt+3]=O,this.uint32[Rt+4]=N,this.uint16[bt+10]=K,this.uint16[bt+11]=ie,this.uint16[bt+12]=oe,this.float32[Rt+7]=_e,this.float32[Rt+8]=be,this.uint8[rn+36]=Ce,this.uint8[rn+37]=Je,this.uint8[rn+38]=et,this.uint32[Rt+10]=Mt,this.int16[bt+22]=Bt,e}}ye.prototype.bytesPerElement=48,Mn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ye);class Be extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je,et,Mt,Bt,bt,Rt,rn,Xt,Vn,Hn,Fn,Tn,En,Nn){const Rn=this.length;return this.resize(Rn+1),this.emplace(Rn,e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je,et,Mt,Bt,bt,Rt,rn,Xt,Vn,Hn,Fn,Tn,En,Nn)}emplace(e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je,et,Mt,Bt,bt,Rt,rn,Xt,Vn,Hn,Fn,Tn,En,Nn,Rn){const gn=34*e,si=17*e;return this.int16[gn+0]=a,this.int16[gn+1]=f,this.int16[gn+2]=v,this.int16[gn+3]=w,this.int16[gn+4]=E,this.int16[gn+5]=O,this.int16[gn+6]=N,this.int16[gn+7]=K,this.uint16[gn+8]=ie,this.uint16[gn+9]=oe,this.uint16[gn+10]=_e,this.uint16[gn+11]=be,this.uint16[gn+12]=Ce,this.uint16[gn+13]=Je,this.uint16[gn+14]=et,this.uint16[gn+15]=Mt,this.uint16[gn+16]=Bt,this.uint16[gn+17]=bt,this.uint16[gn+18]=Rt,this.uint16[gn+19]=rn,this.uint16[gn+20]=Xt,this.uint16[gn+21]=Vn,this.uint16[gn+22]=Hn,this.uint32[si+12]=Fn,this.float32[si+13]=Tn,this.float32[si+14]=En,this.float32[si+15]=Nn,this.float32[si+16]=Rn,e}}Be.prototype.bytesPerElement=68,Mn("StructArrayLayout8i15ui1ul4f68",Be);class Ue extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.float32[1*e+0]=a,e}}Ue.prototype.bytesPerElement=4,Mn("StructArrayLayout1f4",Ue);class Oe extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a,f){const v=this.length;return this.resize(v+1),this.emplace(v,e,a,f)}emplace(e,a,f,v){const w=4*e;return this.uint32[2*e+0]=a,this.uint16[w+2]=f,this.uint16[w+3]=v,e}}Oe.prototype.bytesPerElement=8,Mn("StructArrayLayout1ul2ui8",Oe);class ht extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,a){const f=this.length;return this.resize(f+1),this.emplace(f,e,a)}emplace(e,a,f){const v=2*e;return this.uint16[v+0]=a,this.uint16[v+1]=f,e}}ht.prototype.bytesPerElement=4,Mn("StructArrayLayout2ui4",ht);class mt extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const a=this.length;return this.resize(a+1),this.emplace(a,e)}emplace(e,a){return this.uint16[1*e+0]=a,e}}mt.prototype.bytesPerElement=2,Mn("StructArrayLayout1ui2",mt);class xt extends Er{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,a,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,a,f,v)}emplace(e,a,f,v,w){const E=4*e;return this.float32[E+0]=a,this.float32[E+1]=f,this.float32[E+2]=v,this.float32[E+3]=w,e}}xt.prototype.bytesPerElement=16,Mn("StructArrayLayout4f16",xt);class it extends ec{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Xe(this.anchorPointX,this.anchorPointY)}}it.prototype.size=20;class kt extends B{get(e){return new it(this,e)}}Mn("CollisionBoxArray",kt);class Ht extends ec{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ht.prototype.size=48;class Ft extends ye{get(e){return new Ht(this,e)}}Mn("PlacedSymbolArray",Ft);class Zt extends ec{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Zt.prototype.size=68;class Qt extends Be{get(e){return new Zt(this,e)}}Mn("SymbolInstanceArray",Qt);class sn extends Ue{getoffsetX(e){return this.float32[1*e+0]}}Mn("GlyphOffsetArray",sn);class an extends ss{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Mn("SymbolLineVertexArray",an);class I extends ec{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}I.prototype.size=8;class P extends Oe{get(e){return new I(this,e)}}Mn("FeatureIndexArray",P);class S extends Fa{}class z extends Fa{}class q extends Fa{}class de extends y{}class Ie extends n{}class je extends u{}class Ct extends g{}class ln extends b{}class ci extends C{}class Bn extends A{}class ji extends V{}class vr extends ae{}class Gr extends ce{}class Zr extends ht{}const Jr=lr([{name:"a_pos",components:2,type:"Int16"}],4),{members:pa}=Jr;class pr{constructor(e=[]){this.segments=e}prepareSegment(e,a,f,v){let w=this.segments[this.segments.length-1];return e>pr.MAX_VERTEX_ARRAY_LENGTH&&Et(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!w||w.vertexLength+e>pr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v)&&(w={vertexOffset:a.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},void 0!==v&&(w.sortKey=v),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const e of this.segments)for(const a in e.vaos)e.vaos[a].destroy()}static simpleSegment(e,a,f,v){return new pr([{vertexOffset:e,primitiveOffset:a,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function Qr(o,e){return 256*(o=pe(Math.floor(o),0,255))+pe(Math.floor(e),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mn("SegmentVector",pr);const rr=lr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Wi={exports:{}},Pr=function(o,e){var a,f,v,w,E,O,N,K;for(f=o.length-(a=3&o.length),v=e,E=3432918353,O=461845907,K=0;K<f;)N=255&o.charCodeAt(K)|(255&o.charCodeAt(++K))<<8|(255&o.charCodeAt(++K))<<16|(255&o.charCodeAt(++K))<<24,++K,v=27492+(65535&(w=5*(65535&(v=(v^=N=(65535&(N=(N=(65535&N)*E+(((N>>>16)*E&65535)<<16)&4294967295)<<15|N>>>17))*O+(((N>>>16)*O&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(N=0,a){case 3:N^=(255&o.charCodeAt(K+2))<<16;case 2:N^=(255&o.charCodeAt(K+1))<<8;case 1:v^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(K)))*E+(((N>>>16)*E&65535)<<16)&4294967295)<<15|N>>>17))*O+(((N>>>16)*O&65535)<<16)&4294967295}return v^=o.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0},fa=function(o,e){for(var a,f=o.length,v=e^f,w=0;f>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(w)|(255&o.charCodeAt(++w))<<8|(255&o.charCodeAt(++w))<<16|(255&o.charCodeAt(++w))<<24))+((1540483477*(a>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),f-=4,++w;switch(f){case 3:v^=(255&o.charCodeAt(w+2))<<16;case 2:v^=(255&o.charCodeAt(w+1))<<8;case 1:v=1540483477*(65535&(v^=255&o.charCodeAt(w)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};Wi.exports=Pr,Wi.exports.murmur3=Pr,Wi.exports.murmur2=fa;class ma{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,a,f,v){this.ids.push(rl(e)),this.positions.push(a,f,v)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=rl(e);let f=0,v=this.ids.length-1;for(;f<v;){const E=f+v>>1;this.ids[E]>=a?v=E:f=E+1}const w=[];for(;this.ids[f]===a;)w.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return w}static serialize(e,a){const f=new Float64Array(e.ids),v=new Uint32Array(e.positions);return Na(f,v,0,f.length-1),a&&a.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(e){const a=new ma;return a.ids=e.ids,a.positions=e.positions,a.indexed=!0,a}}function rl(o){const e=+o;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Wi.exports(String(o))}function Na(o,e,a,f){for(;a<f;){const v=o[a+f>>1];let w=a-1,E=f+1;for(;;){do{w++}while(o[w]<v);do{E--}while(o[E]>v);if(w>=E)break;Bc(o,w,E),Bc(e,3*w,3*E),Bc(e,3*w+1,3*E+1),Bc(e,3*w+2,3*E+2)}E-a<f-E?(Na(o,e,a,E),a=E+1):(Na(o,e,E+1,f),f=E)}}function Bc(o,e,a){const f=o[e];o[e]=o[a],o[a]=f}Mn("FeaturePositionMap",ma);class Dr{constructor(e,a){this.gl=e.gl,this.location=a}}class Ba extends Dr{constructor(e,a){super(e,a),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class pu extends Dr{constructor(e,a){super(e,a),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class zo extends Dr{constructor(e,a){super(e,a),this.current=me.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Ll=new Float32Array(16);function ah(o){return[Qr(255*o.r,255*o.g),Qr(255*o.b,255*o.a)]}class zc{constructor(e,a,f){this.value=e,this.uniformNames=a.map(v=>`u_${v}`),this.type=f}setUniform(e,a,f){e.set(f.constantOr(this.value))}getBinding(e,a,f){return"color"===this.type?new zo(e,a):new Ba(e,a)}}class Cc{constructor(e,a){this.uniformNames=a.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=e.tlbr}setUniform(e,a,f,v){const w="u_pattern_to"===v?this.patternTo:"u_pattern_from"===v?this.patternFrom:"u_pixel_ratio_to"===v?this.pixelRatioTo:"u_pixel_ratio_from"===v?this.pixelRatioFrom:null;w&&e.set(w)}getBinding(e,a,f){return"u_pattern"===f.substr(0,9)?new pu(e,a):new Ba(e,a)}}class ol{constructor(e,a,f,v){this.expression=e,this.type=f,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:"color"===f?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(e,a,f,v,w){const E=this.paintVertexArray.length,O=this.expression.evaluate(new ir(0),a,{},v,[],w);this.paintVertexArray.resize(e),this._setPaintValue(E,e,O)}updatePaintArray(e,a,f,v){const w=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(e,a,w)}_setPaintValue(e,a,f){if("color"===this.type){const v=ah(f);for(let w=e;w<a;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=e;v<a;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bs{constructor(e,a,f,v,w,E){this.expression=e,this.uniformNames=a.map(O=>`u_${O}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=a.map(O=>({name:`a_${O}`,type:"Float32",components:"color"===f?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(e,a,f,v,w){const E=this.expression.evaluate(new ir(this.zoom),a,{},v,[],w),O=this.expression.evaluate(new ir(this.zoom+1),a,{},v,[],w),N=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(N,e,E,O)}updatePaintArray(e,a,f,v){const w=this.expression.evaluate({zoom:this.zoom},f,v),E=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(e,a,w,E)}_setPaintValue(e,a,f,v){if("color"===this.type){const w=ah(f),E=ah(v);for(let O=e;O<a;O++)this.paintVertexArray.emplace(O,w[0],w[1],E[0],E[1])}else{for(let w=e;w<a;w++)this.paintVertexArray.emplace(w,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,a){const f=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,v=pe(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);e.set(v)}getBinding(e,a,f){return new Ba(e,a)}}class Fl{constructor(e,a,f,v,w,E){this.expression=e,this.type=a,this.useIntegerZoom=f,this.zoom=v,this.layerId=E,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(e,a,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(v,e,a.patterns&&a.patterns[this.layerId],f)}updatePaintArray(e,a,f,v,w){this._setPaintValues(e,a,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(e,a,f,v){if(!v||!f)return;const{min:w,mid:E,max:O}=f,N=v[w],K=v[E],ie=v[O];if(N&&K&&ie)for(let oe=e;oe<a;oe++)this.zoomInPaintVertexArray.emplace(oe,K.tl[0],K.tl[1],K.br[0],K.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],K.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(oe,K.tl[0],K.tl[1],K.br[0],K.br[1],ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],K.pixelRatio,ie.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,rr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,rr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Vc{constructor(e,a,f){this.binders={},this._buffers=[];const v=[];for(const w in e.paint._values){if(!f(w))continue;const E=e.paint.get(w);if(!(E instanceof Ls&&Ii(E.property.specification)))continue;const O=_p(w,e.type),N=E.value,K=E.property.specification.type,ie=E.property.useIntegerZoom,oe=E.property.specification["property-type"],_e="cross-faded"===oe||"cross-faded-data-driven"===oe;if("constant"===N.kind)this.binders[w]=_e?new Cc(N.value,O):new zc(N.value,O,K),v.push(`/u_${w}`);else if("source"===N.kind||_e){const be=Uc(w,K,"source");this.binders[w]=_e?new Fl(N,K,ie,a,be,e.id):new ol(N,O,K,be),v.push(`/a_${w}`)}else{const be=Uc(w,K,"composite");this.binders[w]=new bs(N,O,K,ie,a,be),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(e){const a=this.binders[e];return a instanceof ol||a instanceof bs?a.maxValue:0}populatePaintArrays(e,a,f,v,w){for(const E in this.binders){const O=this.binders[E];(O instanceof ol||O instanceof bs||O instanceof Fl)&&O.populatePaintArray(e,a,f,v,w)}}setConstantPatternPositions(e,a){for(const f in this.binders){const v=this.binders[f];v instanceof Cc&&v.setConstantPatternPositions(e,a)}}updatePaintArrays(e,a,f,v,w){let E=!1;for(const O in e){const N=a.getPositions(O);for(const K of N){const ie=f.feature(K.index);for(const oe in this.binders){const _e=this.binders[oe];if((_e instanceof ol||_e instanceof bs||_e instanceof Fl)&&!0===_e.expression.isStateDependent){const be=v.paint.get(oe);_e.expression=be.value,_e.updatePaintArray(K.start,K.end,ie,e[O],w),E=!0}}}}return E}defines(){const e=[];for(const a in this.binders){const f=this.binders[a];(f instanceof zc||f instanceof Cc)&&e.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return e}getBinderAttributes(){const e=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof ol||f instanceof bs)for(let v=0;v<f.paintVertexAttributes.length;v++)e.push(f.paintVertexAttributes[v].name);else if(f instanceof Fl)for(let v=0;v<rr.members.length;v++)e.push(rr.members[v].name)}return e}getBinderUniforms(){const e=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof zc||f instanceof Cc||f instanceof bs)for(const v of f.uniformNames)e.push(v)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,a){const f=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof zc||w instanceof Cc||w instanceof bs)for(const E of w.uniformNames)if(a[E]){const O=w.getBinding(e,a[E],E);f.push({name:E,property:v,binding:O})}}return f}setUniforms(e,a,f,v){for(const{name:w,property:E,binding:O}of a)this.binders[E].setUniform(O,v,f.get(E),w)}updatePaintBuffers(e){this._buffers=[];for(const a in this.binders){const f=this.binders[a];if(e&&f instanceof Fl){const v=2===e.fromScale?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof ol||f instanceof bs)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(e){for(const a in this.binders){const f=this.binders[a];(f instanceof ol||f instanceof bs||f instanceof Fl)&&f.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const a=this.binders[e];(a instanceof ol||a instanceof bs||a instanceof Fl)&&a.destroy()}}}class _l{constructor(e,a,f=(()=>!0)){this.programConfigurations={};for(const v of e)this.programConfigurations[v.id]=new Vc(v,a,f);this.needsUpload=!1,this._featureMap=new ma,this._bufferOffset=0}populatePaintArrays(e,a,f,v,w,E){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(e,a,v,w,E);void 0!==a.id&&this._featureMap.add(a.id,f,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,a,f,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(e,this._featureMap,a,w,v)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function _p(o,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${e}-`,"").replace(/-/g,"_")]}function Uc(o,e,a){const v={"line-pattern":{source:Ct,composite:Ct},"fill-pattern":{source:Ct,composite:Ct},"fill-extrusion-pattern":{source:Ct,composite:Ct}}[o];return v&&v[a]||{color:{source:u,composite:xt},number:{source:Ue,composite:u}}[e][a]}Mn("ConstantBinder",zc),Mn("CrossFadedConstantBinder",Cc),Mn("SourceExpressionBinder",ol),Mn("CrossFadedCompositeBinder",Fl),Mn("CompositeExpressionBinder",bs),Mn("ProgramConfiguration",Vc,{omit:["_buffers"]}),Mn("ProgramConfigurationSet",_l);var Wr=8192;const fu=Math.pow(2,14)-1,yp=-fu-1;function Ec(o){const e=Wr/o.extent,a=o.loadGeometry();for(let f=0;f<a.length;f++){const v=a[f];for(let w=0;w<v.length;w++){const E=v[w],O=Math.round(E.x*e),N=Math.round(E.y*e);E.x=pe(O,yp,fu),E.y=pe(N,yp,fu),(O<E.x||O>E.x+1||N<E.y||N>E.y+1)&&Et("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Ys(o,e){return{type:o.type,id:o.id,properties:o.properties,geometry:e?Ec(o):[]}}function tc(o,e,a,f,v){o.emplaceBack(2*e+(f+1)/2,2*a+(v+1)/2)}class lh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new z,this.indexArray=new Gr,this.segments=new pr,this.programConfigurations=new _l(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){const v=this.layers[0],w=[];let E=null,O=!1;"circle"===v.type&&(E=v.layout.get("circle-sort-key"),O=!E.isConstant());for(const{feature:N,id:K,index:ie,sourceLayerIndex:oe}of e){const _e=this.layers[0]._featureFilter.needGeometry,be=Ys(N,_e);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),be,f))continue;const Ce=O?E.evaluate(be,{},f):void 0,Je={id:K,properties:N.properties,type:N.type,sourceLayerIndex:oe,index:ie,geometry:_e?be.geometry:Ec(N),patterns:{},sortKey:Ce};w.push(Je)}O&&w.sort((N,K)=>N.sortKey-K.sortKey);for(const N of w){const{geometry:K,index:ie,sourceLayerIndex:oe}=N,_e=e[ie].feature;this.addFeature(N,K,ie,f),a.featureIndex.insert(_e,K,ie,oe,this.index)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pa),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,a,f,v){for(const w of a)for(const E of w){const O=E.x,N=E.y;if(O<0||O>=Wr||N<0||N>=Wr)continue;const K=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),ie=K.vertexLength;tc(this.layoutVertexArray,O,N,-1,-1),tc(this.layoutVertexArray,O,N,1,-1),tc(this.layoutVertexArray,O,N,1,1),tc(this.layoutVertexArray,O,N,-1,1),this.indexArray.emplaceBack(ie,ie+1,ie+2),this.indexArray.emplaceBack(ie,ie+3,ie+2),K.vertexLength+=4,K.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,{},v)}}function Xf(o,e){for(let a=0;a<o.length;a++)if(jc(e,o[a]))return!0;for(let a=0;a<e.length;a++)if(jc(o,e[a]))return!0;return!!ch(o,e)}function vp(o,e,a){return!!jc(o,e)||!!uh(e,o,a)}function bp(o,e){if(1===o.length)return dh(e,o[0]);for(let a=0;a<e.length;a++){const f=e[a];for(let v=0;v<f.length;v++)if(jc(o,f[v]))return!0}for(let a=0;a<o.length;a++)if(dh(e,o[a]))return!0;for(let a=0;a<e.length;a++)if(ch(o,e[a]))return!0;return!1}function jg(o,e,a){if(o.length>1){if(ch(o,e))return!0;for(let f=0;f<e.length;f++)if(uh(e[f],o,a))return!0}for(let f=0;f<o.length;f++)if(uh(o[f],e,a))return!0;return!1}function ch(o,e){if(0===o.length||0===e.length)return!1;for(let a=0;a<o.length-1;a++){const f=o[a],v=o[a+1];for(let w=0;w<e.length-1;w++)if(Jf(f,v,e[w],e[w+1]))return!0}return!1}function Jf(o,e,a,f){return _n(o,a,f)!==_n(e,a,f)&&_n(o,e,a)!==_n(o,e,f)}function uh(o,e,a){const f=a*a;if(1===e.length)return o.distSqr(e[0])<f;for(let v=1;v<e.length;v++)if(mu(o,e[v-1],e[v])<f)return!0;return!1}function mu(o,e,a){const f=e.distSqr(a);if(0===f)return o.distSqr(e);const v=((o.x-e.x)*(a.x-e.x)+(o.y-e.y)*(a.y-e.y))/f;return o.distSqr(v<0?e:v>1?a:a.sub(e)._mult(v)._add(e))}function dh(o,e){let a,f,v,w=!1;for(let E=0;E<o.length;E++){a=o[E];for(let O=0,N=a.length-1;O<a.length;N=O++)f=a[O],v=a[N],f.y>e.y!=v.y>e.y&&e.x<(v.x-f.x)*(e.y-f.y)/(v.y-f.y)+f.x&&(w=!w)}return w}function jc(o,e){let a=!1;for(let f=0,v=o.length-1;f<o.length;v=f++){const w=o[f],E=o[v];w.y>e.y!=E.y>e.y&&e.x<(E.x-w.x)*(e.y-w.y)/(E.y-w.y)+w.x&&(a=!a)}return a}function xp(o,e,a){const f=a[0],v=a[2];if(o.x<f.x&&e.x<f.x||o.x>v.x&&e.x>v.x||o.y<f.y&&e.y<f.y||o.y>v.y&&e.y>v.y)return!1;const w=_n(o,e,a[0]);return w!==_n(o,e,a[1])||w!==_n(o,e,a[2])||w!==_n(o,e,a[3])}function id(o,e,a){const f=e.paint.get(o).value;return"constant"===f.kind?f.value:a.programConfigurations.get(e.id).getMaxValue(o)}function gu(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function hh(o,e,a,f,v){if(!e[0]&&!e[1])return o;const w=Xe.convert(e)._mult(v);"viewport"===a&&w._rotate(-f);const E=[];for(let O=0;O<o.length;O++)E.push(o[O].sub(w));return E}Mn("CircleBucket",lh,{omit:["layers"]});const ph=new dr({"circle-sort-key":new zn(k.layout_circle["circle-sort-key"])});var Qf={paint:new dr({"circle-radius":new zn(k.paint_circle["circle-radius"]),"circle-color":new zn(k.paint_circle["circle-color"]),"circle-blur":new zn(k.paint_circle["circle-blur"]),"circle-opacity":new zn(k.paint_circle["circle-opacity"]),"circle-translate":new Yn(k.paint_circle["circle-translate"]),"circle-translate-anchor":new Yn(k.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yn(k.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yn(k.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zn(k.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zn(k.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zn(k.paint_circle["circle-stroke-opacity"])}),layout:ph},as=1e-6,Vo=typeof Float32Array<"u"?Float32Array:Array;function rd(){var o=new Vo(9);return Vo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function nc(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function wp(o,e,a){var f=e[0],v=e[1],w=e[2],E=e[3],O=e[4],N=e[5],K=e[6],ie=e[7],oe=e[8],_e=e[9],be=e[10],Ce=e[11],Je=e[12],et=e[13],Mt=e[14],Bt=e[15],bt=a[0],Rt=a[1],rn=a[2],Xt=a[3];return o[0]=bt*f+Rt*O+rn*oe+Xt*Je,o[1]=bt*v+Rt*N+rn*_e+Xt*et,o[2]=bt*w+Rt*K+rn*be+Xt*Mt,o[3]=bt*E+Rt*ie+rn*Ce+Xt*Bt,o[4]=(bt=a[4])*f+(Rt=a[5])*O+(rn=a[6])*oe+(Xt=a[7])*Je,o[5]=bt*v+Rt*N+rn*_e+Xt*et,o[6]=bt*w+Rt*K+rn*be+Xt*Mt,o[7]=bt*E+Rt*ie+rn*Ce+Xt*Bt,o[8]=(bt=a[8])*f+(Rt=a[9])*O+(rn=a[10])*oe+(Xt=a[11])*Je,o[9]=bt*v+Rt*N+rn*_e+Xt*et,o[10]=bt*w+Rt*K+rn*be+Xt*Mt,o[11]=bt*E+Rt*ie+rn*Ce+Xt*Bt,o[12]=(bt=a[12])*f+(Rt=a[13])*O+(rn=a[14])*oe+(Xt=a[15])*Je,o[13]=bt*v+Rt*N+rn*_e+Xt*et,o[14]=bt*w+Rt*K+rn*be+Xt*Mt,o[15]=bt*E+Rt*ie+rn*Ce+Xt*Bt,o}Math.hypot||(Math.hypot=function(){for(var o=0,e=arguments.length;e--;)o+=arguments[e]*arguments[e];return Math.sqrt(o)});var _u,o,qr=wp;function yu(){var o=new Vo(3);return Vo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function od(o,e,a){var f=new Vo(3);return f[0]=o,f[1]=e,f[2]=a,f}function vu(o,e,a){var f=e[0],v=e[1],w=e[2],E=e[3];return o[0]=a[0]*f+a[4]*v+a[8]*w+a[12]*E,o[1]=a[1]*f+a[5]*v+a[9]*w+a[13]*E,o[2]=a[2]*f+a[6]*v+a[10]*w+a[14]*E,o[3]=a[3]*f+a[7]*v+a[11]*w+a[15]*E,o}function bu(){var o=new Vo(4);return Vo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function sd(o,e){const a=vu([],[o.x,o.y,0,1],e);return new Xe(a[0]/a[3],a[1]/a[3])}yu(),_u=new Vo(4),Vo!=Float32Array&&(_u[0]=0,_u[1]=0,_u[2]=0,_u[3]=0),yu(),od(1,0,0),od(0,1,0),bu(),bu(),rd(),o=new Vo(2),Vo!=Float32Array&&(o[0]=0,o[1]=0);class za extends lh{}Mn("HeatmapBucket",za,{omit:["layers"]});var em={paint:new dr({"heatmap-radius":new zn(k.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zn(k.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yn(k.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nl(k.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yn(k.paint_heatmap["heatmap-opacity"])})};function xu(o,{width:e,height:a},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==e*a*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${e*a*f}`)}else v=new Uint8Array(e*a*f);return o.width=e,o.height=a,o.data=v,o}function Cp(o,{width:e,height:a},f){if(e===o.width&&a===o.height)return;const v=xu({},{width:e,height:a},f);ic(o,v,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,e),height:Math.min(o.height,a)},f),o.width=e,o.height=a,o.data=v.data}function ic(o,e,a,f,v,w){if(0===v.width||0===v.height)return e;if(v.width>o.width||v.height>o.height||a.x>o.width-v.width||a.y>o.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>e.width||v.height>e.height||f.x>e.width-v.width||f.y>e.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const E=o.data,O=e.data;if(E===O)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<v.height;N++){const K=((a.y+N)*o.width+a.x)*w,ie=((f.y+N)*e.width+f.x)*w;for(let oe=0;oe<v.width*w;oe++)O[ie+oe]=E[K+oe]}return e}class Hc{constructor(e,a){xu(this,e,1,a)}resize(e){Cp(this,e,1)}clone(){return new Hc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,f,v,w){ic(e,a,f,v,w,1)}}class yo{constructor(e,a){xu(this,e,4,a)}resize(e){Cp(this,e,4)}replace(e,a){a?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new yo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,a,f,v,w){ic(e,a,f,v,w,4)}}function rc(o){const e={},a=o.resolution||256,f=o.clips?o.clips.length:1,v=o.image||new yo({width:a,height:f});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const w=(E,O,N)=>{e[o.evaluationKey]=N;const K=o.expression.evaluate(e);v.data[E+O+0]=Math.floor(255*K.r/K.a),v.data[E+O+1]=Math.floor(255*K.g/K.a),v.data[E+O+2]=Math.floor(255*K.b/K.a),v.data[E+O+3]=Math.floor(255*K.a)};if(o.clips)for(let E=0,O=0;E<f;++E,O+=4*a)for(let N=0,K=0;N<a;N++,K+=4){const ie=N/(a-1),{start:oe,end:_e}=o.clips[E];w(O,K,oe*(1-ie)+_e*ie)}else for(let E=0,O=0;E<a;E++,O+=4)w(0,O,E/(a-1));return v}Mn("AlphaImage",Hc),Mn("RGBAImage",yo);var tm={paint:new dr({"hillshade-illumination-direction":new Yn(k.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yn(k.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yn(k.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yn(k.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yn(k.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yn(k.paint_hillshade["hillshade-accent-color"])})};const nm=lr([{name:"a_pos",components:2,type:"Int16"}],4),{members:im}=nm;var wu={exports:{}};function ad(o,e,a){a=a||2;var f,v,w,E,O,N,K,ie=e&&e.length,oe=ie?e[0]*a:o.length,_e=Ep(o,0,oe,a,!0),be=[];if(!_e||_e.next===_e.prev)return be;if(ie&&(_e=function(Je,et,Mt,Bt){var bt,Rt,rn,Xt=[];for(bt=0,Rt=et.length;bt<Rt;bt++)(rn=Ep(Je,et[bt]*Bt,bt<Rt-1?et[bt+1]*Bt:Je.length,Bt,!1))===rn.next&&(rn.steiner=!0),Xt.push(ud(rn));for(Xt.sort(Nl),bt=0;bt<Xt.length;bt++)Mt=Eu(Xt[bt],Mt);return Mt}(o,e,_e,a)),o.length>80*a){f=w=o[0],v=E=o[1];for(var Ce=a;Ce<oe;Ce+=a)(O=o[Ce])<f&&(f=O),(N=o[Ce+1])<v&&(v=N),O>w&&(w=O),N>E&&(E=N);K=0!==(K=Math.max(w-f,E-v))?32767/K:0}return Cu(_e,be,a,f,v,K,0),be}function Ep(o,e,a,f,v){var w,E;if(v===pd(o,e,a,f)>0)for(w=e;w<a;w+=f)E=Ip(w,o[w],o[w+1],E);else for(w=a-f;w>=e;w-=f)E=Ip(w,o[w],o[w+1],E);return E&&$c(E,E.next)&&(Mu(E),E=E.next),E}function yl(o,e){if(!o)return o;e||(e=o);var a,f=o;do{if(a=!1,f.steiner||!$c(f,f.next)&&0!==ao(f.prev,f,f.next))f=f.next;else{if(Mu(f),(f=e=f.prev)===f.next)break;a=!0}}while(a||f!==e);return e}function Cu(o,e,a,f,v,w,E){if(o){!E&&w&&function(ie,oe,_e,be){var Ce=ie;do{0===Ce.z&&(Ce.z=cd(Ce.x,Ce.y,oe,_e,be)),Ce.prevZ=Ce.prev,Ce.nextZ=Ce.next,Ce=Ce.next}while(Ce!==ie);Ce.prevZ.nextZ=null,Ce.prevZ=null,function(Je){var et,Mt,Bt,bt,Rt,rn,Xt,Vn,Hn=1;do{for(Mt=Je,Je=null,Rt=null,rn=0;Mt;){for(rn++,Bt=Mt,Xt=0,et=0;et<Hn&&(Xt++,Bt=Bt.nextZ);et++);for(Vn=Hn;Xt>0||Vn>0&&Bt;)0!==Xt&&(0===Vn||!Bt||Mt.z<=Bt.z)?(bt=Mt,Mt=Mt.nextZ,Xt--):(bt=Bt,Bt=Bt.nextZ,Vn--),Rt?Rt.nextZ=bt:Je=bt,bt.prevZ=Rt,Rt=bt;Mt=Bt}Rt.nextZ=null,Hn*=2}while(rn>1)}(Ce)}(o,f,v,w);for(var O,N,K=o;o.prev!==o.next;)if(O=o.prev,N=o.next,w?rm(o,f,v,w):Dp(o))e.push(O.i/a|0),e.push(o.i/a|0),e.push(N.i/a|0),Mu(o),o=N.next,K=N.next;else if((o=N)===K){E?1===E?Cu(o=om(yl(o),e,a),e,a,f,v,w,2):2===E&&ld(o,e,a,f,v,w):Cu(yl(o),e,a,f,v,w,1);break}}}function Dp(o){var e=o.prev,a=o,f=o.next;if(ao(e,a,f)>=0)return!1;for(var v=e.x,w=a.x,E=f.x,O=e.y,N=a.y,K=f.y,ie=v<w?v<E?v:E:w<E?w:E,oe=O<N?O<K?O:K:N<K?N:K,_e=v>w?v>E?v:E:w>E?w:E,be=O>N?O>K?O:K:N>K?N:K,Ce=f.next;Ce!==e;){if(Ce.x>=ie&&Ce.x<=_e&&Ce.y>=oe&&Ce.y<=be&&Du(v,O,w,N,E,K,Ce.x,Ce.y)&&ao(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.next}return!0}function rm(o,e,a,f){var v=o.prev,w=o,E=o.next;if(ao(v,w,E)>=0)return!1;for(var O=v.x,N=w.x,K=E.x,ie=v.y,oe=w.y,_e=E.y,be=O<N?O<K?O:K:N<K?N:K,Ce=ie<oe?ie<_e?ie:_e:oe<_e?oe:_e,Je=O>N?O>K?O:K:N>K?N:K,et=ie>oe?ie>_e?ie:_e:oe>_e?oe:_e,Mt=cd(be,Ce,e,a,f),Bt=cd(Je,et,e,a,f),bt=o.prevZ,Rt=o.nextZ;bt&&bt.z>=Mt&&Rt&&Rt.z<=Bt;){if(bt.x>=be&&bt.x<=Je&&bt.y>=Ce&&bt.y<=et&&bt!==v&&bt!==E&&Du(O,ie,N,oe,K,_e,bt.x,bt.y)&&ao(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,Rt.x>=be&&Rt.x<=Je&&Rt.y>=Ce&&Rt.y<=et&&Rt!==v&&Rt!==E&&Du(O,ie,N,oe,K,_e,Rt.x,Rt.y)&&ao(Rt.prev,Rt,Rt.next)>=0))return!1;Rt=Rt.nextZ}for(;bt&&bt.z>=Mt;){if(bt.x>=be&&bt.x<=Je&&bt.y>=Ce&&bt.y<=et&&bt!==v&&bt!==E&&Du(O,ie,N,oe,K,_e,bt.x,bt.y)&&ao(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;Rt&&Rt.z<=Bt;){if(Rt.x>=be&&Rt.x<=Je&&Rt.y>=Ce&&Rt.y<=et&&Rt!==v&&Rt!==E&&Du(O,ie,N,oe,K,_e,Rt.x,Rt.y)&&ao(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.nextZ}return!0}function om(o,e,a){var f=o;do{var v=f.prev,w=f.next.next;!$c(v,w)&&hd(v,f,f.next,w)&&Gc(v,w)&&Gc(w,v)&&(e.push(v.i/a|0),e.push(f.i/a|0),e.push(w.i/a|0),Mu(f),Mu(f.next),f=o=w),f=f.next}while(f!==o);return yl(f)}function ld(o,e,a,f,v,w){var E=o;do{for(var O=E.next.next;O!==E.prev;){if(E.i!==O.i&&dd(E,O)){var N=Tp(E,O);return E=yl(E,E.next),N=yl(N,N.next),Cu(E,e,a,f,v,w,0),void Cu(N,e,a,f,v,w,0)}O=O.next}E=E.next}while(E!==o)}function Nl(o,e){return o.x-e.x}function Eu(o,e){var a=function(v,w){var E,O=w,N=v.x,K=v.y,ie=-1/0;do{if(K<=O.y&&K>=O.next.y&&O.next.y!==O.y){var oe=O.x+(K-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(oe<=N&&oe>ie&&(ie=oe,E=O.x<O.next.x?O:O.next,oe===N))return E}O=O.next}while(O!==w);if(!E)return null;var _e,be=E,Ce=E.x,Je=E.y,et=1/0;O=E;do{N>=O.x&&O.x>=Ce&&N!==O.x&&Du(K<Je?N:ie,K,Ce,Je,K<Je?ie:N,K,O.x,O.y)&&(_e=Math.abs(K-O.y)/(N-O.x),Gc(O,v)&&(_e<et||_e===et&&(O.x>E.x||O.x===E.x&&Mp(E,O)))&&(E=O,et=_e)),O=O.next}while(O!==be);return E}(o,e);if(!a)return e;var f=Tp(a,o);return yl(f,f.next),yl(a,a.next)}function Mp(o,e){return ao(o.prev,o,e.prev)<0&&ao(e.next,o,o.next)<0}function cd(o,e,a,f,v){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-f)*v|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ud(o){var e=o,a=o;do{(e.x<a.x||e.x===a.x&&e.y<a.y)&&(a=e),e=e.next}while(e!==o);return a}function Du(o,e,a,f,v,w,E,O){return(v-E)*(e-O)>=(o-E)*(w-O)&&(o-E)*(f-O)>=(a-E)*(e-O)&&(a-E)*(w-O)>=(v-E)*(f-O)}function dd(o,e){return o.next.i!==e.i&&o.prev.i!==e.i&&!function(a,f){var v=a;do{if(v.i!==a.i&&v.next.i!==a.i&&v.i!==f.i&&v.next.i!==f.i&&hd(v,v.next,a,f))return!0;v=v.next}while(v!==a);return!1}(o,e)&&(Gc(o,e)&&Gc(e,o)&&function(a,f){var v=a,w=!1,E=(a.x+f.x)/2,O=(a.y+f.y)/2;do{v.y>O!=v.next.y>O&&v.next.y!==v.y&&E<(v.next.x-v.x)*(O-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next}while(v!==a);return w}(o,e)&&(ao(o.prev,o,e.prev)||ao(o,e.prev,e))||$c(o,e)&&ao(o.prev,o,o.next)>0&&ao(e.prev,e,e.next)>0)}function ao(o,e,a){return(e.y-o.y)*(a.x-e.x)-(e.x-o.x)*(a.y-e.y)}function $c(o,e){return o.x===e.x&&o.y===e.y}function hd(o,e,a,f){var v=fh(ao(o,e,a)),w=fh(ao(o,e,f)),E=fh(ao(a,f,o)),O=fh(ao(a,f,e));return v!==w&&E!==O||!(0!==v||!Sp(o,a,e))||!(0!==w||!Sp(o,f,e))||!(0!==E||!Sp(a,o,f))||!(0!==O||!Sp(a,e,f))}function Sp(o,e,a){return e.x<=Math.max(o.x,a.x)&&e.x>=Math.min(o.x,a.x)&&e.y<=Math.max(o.y,a.y)&&e.y>=Math.min(o.y,a.y)}function fh(o){return o>0?1:o<0?-1:0}function Gc(o,e){return ao(o.prev,o,o.next)<0?ao(o,e,o.next)>=0&&ao(o,o.prev,e)>=0:ao(o,e,o.prev)<0||ao(o,o.next,e)<0}function Tp(o,e){var a=new mh(o.i,o.x,o.y),f=new mh(e.i,e.x,e.y),v=o.next,w=e.prev;return o.next=e,e.prev=o,a.next=v,v.prev=a,f.next=a,a.prev=f,w.next=f,f.prev=w,f}function Ip(o,e,a,f){var v=new mh(o,e,a);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Mu(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function mh(o,e,a){this.i=o,this.x=e,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pd(o,e,a,f){for(var v=0,w=e,E=a-f;w<a;w+=f)v+=(o[E]-o[w])*(o[w+1]+o[E+1]),E=w;return v}wu.exports=ad,wu.exports.default=ad,ad.deviation=function(o,e,a,f){var v=e&&e.length,w=Math.abs(pd(o,0,v?e[0]*a:o.length,a));if(v)for(var E=0,O=e.length;E<O;E++)w-=Math.abs(pd(o,e[E]*a,E<O-1?e[E+1]*a:o.length,a));var N=0;for(E=0;E<f.length;E+=3){var K=f[E]*a,ie=f[E+1]*a,oe=f[E+2]*a;N+=Math.abs((o[K]-o[oe])*(o[ie+1]-o[K+1])-(o[K]-o[ie])*(o[oe+1]-o[K+1]))}return 0===w&&0===N?0:Math.abs((N-w)/w)},ad.flatten=function(o){for(var e=o[0][0].length,a={vertices:[],holes:[],dimensions:e},f=0,v=0;v<o.length;v++){for(var w=0;w<o[v].length;w++)for(var E=0;E<e;E++)a.vertices.push(o[v][w][E]);v>0&&a.holes.push(f+=o[v-1].length)}return a};var Dc={exports:{}};Dc.exports=function(){function o(f,v,w,E,O){for(;E>w;){if(E-w>600){var N=E-w+1,K=v-w+1,ie=Math.log(N),oe=.5*Math.exp(2*ie/3),_e=.5*Math.sqrt(ie*oe*(N-oe)/N)*(K-N/2<0?-1:1);o(f,v,Math.max(w,Math.floor(v-K*oe/N+_e)),Math.min(E,Math.floor(v+(N-K)*oe/N+_e)),O)}var be=f[v],Ce=w,Je=E;for(e(f,w,v),O(f[E],be)>0&&e(f,w,E);Ce<Je;){for(e(f,Ce,Je),Ce++,Je--;O(f[Ce],be)<0;)Ce++;for(;O(f[Je],be)>0;)Je--}0===O(f[w],be)?e(f,w,Je):e(f,++Je,E),Je<=v&&(w=Je+1),v<=Je&&(E=Je-1)}}function e(f,v,w){var E=f[v];f[v]=f[w],f[w]=E}function a(f,v){return f<v?-1:f>v?1:0}return function(f,v,w,E,O){o(f,v,w||0,E||f.length-1,O||a)}}();var Ap=Dc.exports;function oc(o,e){const a=o.length;if(a<=1)return[o];const f=[];let v,w;for(let E=0;E<a;E++){const O=hn(o[E]);0!==O&&(o[E].area=Math.abs(O),void 0===w&&(w=O<0),w===O<0?(v&&f.push(v),v=[o[E]]):v.push(o[E]))}if(v&&f.push(v),e>1)for(let E=0;E<f.length;E++)f[E].length<=e||(Ap(f[E],e,1,f[E].length-1,sm),f[E]=f[E].slice(0,e));return f}function sm(o,e){return e.area-o.area}function to(o,e,a){const f=a.patternDependencies;let v=!1;for(const w of e){const E=w.paint.get(`${o}-pattern`);E.isConstant()||(v=!0);const O=E.constantOr(null);O&&(v=!0,f[O.to]=!0,f[O.from]=!0)}return v}function fd(o,e,a,f,v){const w=v.patternDependencies;for(const E of e){const O=E.paint.get(`${o}-pattern`).value;if("constant"!==O.kind){let N=O.evaluate({zoom:f-1},a,{},v.availableImages),K=O.evaluate({zoom:f},a,{},v.availableImages),ie=O.evaluate({zoom:f+1},a,{},v.availableImages);N=N&&N.name?N.name:N,K=K&&K.name?K.name:K,ie=ie&&ie.name?ie.name:ie,w[N]=!0,w[K]=!0,w[ie]=!0,a.patterns[E.id]={min:N,mid:K,max:ie}}}return a}class gh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new q,this.indexArray=new Gr,this.indexArray2=new Zr,this.programConfigurations=new _l(e.layers,e.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){this.hasPattern=to("fill",this.layers,a);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),E=[];for(const{feature:O,id:N,index:K,sourceLayerIndex:ie}of e){const oe=this.layers[0]._featureFilter.needGeometry,_e=Ys(O,oe);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),_e,f))continue;const be=w?v.evaluate(_e,{},f,a.availableImages):void 0,Ce={id:N,properties:O.properties,type:O.type,sourceLayerIndex:ie,index:K,geometry:oe?_e.geometry:Ec(O),patterns:{},sortKey:be};E.push(Ce)}w&&E.sort((O,N)=>O.sortKey-N.sortKey);for(const O of E){const{geometry:N,index:K,sourceLayerIndex:ie}=O;if(this.hasPattern){const oe=fd("fill",this.layers,O,this.zoom,a);this.patternFeatures.push(oe)}else this.addFeature(O,N,K,f,{});a.featureIndex.insert(e[K].feature,N,K,ie,this.index)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}addFeatures(e,a,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,im),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,a,f,v,w){for(const E of oc(a,500)){let O=0;for(const be of E)O+=be.length;const N=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),K=N.vertexLength,ie=[],oe=[];for(const be of E){if(0===be.length)continue;be!==E[0]&&oe.push(ie.length/2);const Ce=this.segments2.prepareSegment(be.length,this.layoutVertexArray,this.indexArray2),Je=Ce.vertexLength;this.layoutVertexArray.emplaceBack(be[0].x,be[0].y),this.indexArray2.emplaceBack(Je+be.length-1,Je),ie.push(be[0].x),ie.push(be[0].y);for(let et=1;et<be.length;et++)this.layoutVertexArray.emplaceBack(be[et].x,be[et].y),this.indexArray2.emplaceBack(Je+et-1,Je+et),ie.push(be[et].x),ie.push(be[et].y);Ce.vertexLength+=be.length,Ce.primitiveLength+=be.length}const _e=wu.exports(ie,oe);for(let be=0;be<_e.length;be+=3)this.indexArray.emplaceBack(K+_e[be],K+_e[be+1],K+_e[be+2]);N.vertexLength+=O,N.primitiveLength+=_e.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,w,v)}}Mn("FillBucket",gh,{omit:["layers","patternFeatures"]});const _h=new dr({"fill-sort-key":new zn(k.layout_fill["fill-sort-key"])});var Pp={paint:new dr({"fill-antialias":new Yn(k.paint_fill["fill-antialias"]),"fill-opacity":new zn(k.paint_fill["fill-opacity"]),"fill-color":new zn(k.paint_fill["fill-color"]),"fill-outline-color":new zn(k.paint_fill["fill-outline-color"]),"fill-translate":new Yn(k.paint_fill["fill-translate"]),"fill-translate-anchor":new Yn(k.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ks(k.paint_fill["fill-pattern"])}),layout:_h};const am=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),lm=lr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:cm}=am;var sc={},Zc=Xe,md=Su;function Su(o,e,a,f,v){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=v,o.readFields(Tu,this,e)}function Tu(o,e,a){1==o?e.id=a.readVarint():2==o?function(f,v){for(var w=f.readVarint()+f.pos;f.pos<w;){var E=v._keys[f.readVarint()],O=v._values[f.readVarint()];v.properties[E]=O}}(a,e):3==o?e.type=a.readVarint():4==o&&(e._geometry=a.pos)}function yh(o){for(var e,a,f=0,v=0,w=o.length,E=w-1;v<w;E=v++)f+=((a=o[E]).x-(e=o[v]).x)*(e.y+a.y);return f}Su.types=["Unknown","Point","LineString","Polygon"],Su.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var e,a=o.readVarint()+o.pos,f=1,v=0,w=0,E=0,O=[];o.pos<a;){if(v<=0){var N=o.readVarint();f=7&N,v=N>>3}if(v--,1===f||2===f)w+=o.readSVarint(),E+=o.readSVarint(),1===f&&(e&&O.push(e),e=[]),e.push(new Zc(w,E));else{if(7!==f)throw new Error("unknown command "+f);e&&e.push(e[0].clone())}}return e&&O.push(e),O},Su.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var e=o.readVarint()+o.pos,a=1,f=0,v=0,w=0,E=1/0,O=-1/0,N=1/0,K=-1/0;o.pos<e;){if(f<=0){var ie=o.readVarint();a=7&ie,f=ie>>3}if(f--,1===a||2===a)(v+=o.readSVarint())<E&&(E=v),v>O&&(O=v),(w+=o.readSVarint())<N&&(N=w),w>K&&(K=w);else if(7!==a)throw new Error("unknown command "+a)}return[E,N,O,K]},Su.prototype.toGeoJSON=function(o,e,a){var f,v,w=this.extent*Math.pow(2,a),E=this.extent*o,O=this.extent*e,N=this.loadGeometry(),K=Su.types[this.type];function ie(be){for(var Ce=0;Ce<be.length;Ce++){var Je=be[Ce];be[Ce]=[360*(Je.x+E)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(Je.y+O)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(f=0;f<N.length;f++)oe[f]=N[f][0];ie(N=oe);break;case 2:for(f=0;f<N.length;f++)ie(N[f]);break;case 3:for(N=function(be){var Ce=be.length;if(Ce<=1)return[be];for(var Je,et,Mt=[],Bt=0;Bt<Ce;Bt++){var bt=yh(be[Bt]);0!==bt&&(void 0===et&&(et=bt<0),et===bt<0?(Je&&Mt.push(Je),Je=[be[Bt]]):Je.push(be[Bt]))}return Je&&Mt.push(Je),Mt}(N),f=0;f<N.length;f++)for(v=0;v<N[f].length;v++)ie(N[f][v])}1===N.length?N=N[0]:K="Multi"+K;var _e={type:"Feature",geometry:{type:K,coordinates:N},properties:this.properties};return"id"in this&&(_e.id=this.id),_e};var Op=md,vh=bh;function bh(o,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(um,this,e),this.length=this._features.length}function um(o,e,a){15===o?e.version=a.readVarint():1===o?e.name=a.readString():5===o?e.extent=a.readVarint():2===o?e._features.push(a.pos):3===o?e._keys.push(a.readString()):4===o&&e._values.push(function(f){for(var v=null,w=f.readVarint()+f.pos;f.pos<w;){var E=f.readVarint()>>3;v=1===E?f.readString():2===E?f.readFloat():3===E?f.readDouble():4===E?f.readVarint64():5===E?f.readVarint():6===E?f.readSVarint():7===E?f.readBoolean():null}return v}(a))}bh.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var e=this._pbf.readVarint()+this._pbf.pos;return new Op(this._pbf,e,this.extent,this._keys,this._values)};var kp=vh;function Rp(o,e,a){if(3===o){var f=new kp(a,a.readVarint()+a.pos);f.length&&(e[f.name]=f)}}sc.VectorTile=function(o,e){this.layers=o.readFields(Rp,{},e)},sc.VectorTileFeature=md,sc.VectorTileLayer=vh;const Mc=sc.VectorTileFeature.types,Lp=Math.pow(2,13);function Bl(o,e,a,f,v,w,E,O){o.emplaceBack(e,a,2*Math.floor(f*Lp)+E,v*Lp*2,w*Lp*2,Math.round(O))}class Iu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new de,this.centroidVertexArray=new S,this.indexArray=new Gr,this.programConfigurations=new _l(e.layers,e.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){this.features=[],this.hasPattern=to("fill-extrusion",this.layers,a);for(const{feature:v,id:w,index:E,sourceLayerIndex:O}of e){const N=this.layers[0]._featureFilter.needGeometry,K=Ys(v,N);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),K,f))continue;const ie={id:w,sourceLayerIndex:O,index:E,geometry:N?K.geometry:Ec(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(fd("fill-extrusion",this.layers,ie,this.zoom,a)):this.addFeature(ie,ie.geometry,E,f,{}),a.featureIndex.insert(v,ie.geometry,E,O,this.index,!0)}}addFeatures(e,a,f){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,a,f)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cm),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,lm.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,a,f,v,w){const E={x:0,y:0,vertexCount:0};for(const O of oc(a,500)){let N=0;for(const Ce of O)N+=Ce.length;let K=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ce of O){if(0===Ce.length||Np(Ce))continue;let Je=0;for(let et=0;et<Ce.length;et++){const Mt=Ce[et];if(et>=1){const Bt=Ce[et-1];if(!Fp(Mt,Bt)){K.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(K=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const bt=Mt.sub(Bt)._perp()._unit(),Rt=Bt.dist(Mt);Je+Rt>32768&&(Je=0),Bl(this.layoutVertexArray,Mt.x,Mt.y,bt.x,bt.y,0,0,Je),Bl(this.layoutVertexArray,Mt.x,Mt.y,bt.x,bt.y,0,1,Je),E.x+=2*Mt.x,E.y+=2*Mt.y,E.vertexCount+=2,Je+=Rt,Bl(this.layoutVertexArray,Bt.x,Bt.y,bt.x,bt.y,0,0,Je),Bl(this.layoutVertexArray,Bt.x,Bt.y,bt.x,bt.y,0,1,Je),E.x+=2*Bt.x,E.y+=2*Bt.y,E.vertexCount+=2;const rn=K.vertexLength;this.indexArray.emplaceBack(rn,rn+2,rn+1),this.indexArray.emplaceBack(rn+1,rn+2,rn+3),K.vertexLength+=4,K.primitiveLength+=2}}}}if(K.vertexLength+N>pr.MAX_VERTEX_ARRAY_LENGTH&&(K=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray)),"Polygon"!==Mc[e.type])continue;const ie=[],oe=[],_e=K.vertexLength;for(const Ce of O)if(0!==Ce.length){Ce!==O[0]&&oe.push(ie.length/2);for(let Je=0;Je<Ce.length;Je++){const et=Ce[Je];Bl(this.layoutVertexArray,et.x,et.y,0,0,1,1,0),E.x+=et.x,E.y+=et.y,E.vertexCount+=1,ie.push(et.x),ie.push(et.y)}}const be=wu.exports(ie,oe);for(let Ce=0;Ce<be.length;Ce+=3)this.indexArray.emplaceBack(_e+be[Ce],_e+be[Ce+2],_e+be[Ce+1]);K.primitiveLength+=be.length/3,K.vertexLength+=N}for(let O=0;O<E.vertexCount;O++)this.centroidVertexArray.emplaceBack(Math.floor(E.x/E.vertexCount),Math.floor(E.y/E.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,w,v)}}function Fp(o,e){return o.x===e.x&&(o.x<0||o.x>Wr)||o.y===e.y&&(o.y<0||o.y>Wr)}function Np(o){return o.every(e=>e.x<0)||o.every(e=>e.x>Wr)||o.every(e=>e.y<0)||o.every(e=>e.y>Wr)}Mn("FillExtrusionBucket",Iu,{omit:["layers","features"]});var Sc={paint:new dr({"fill-extrusion-opacity":new Yn(k["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zn(k["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yn(k["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yn(k["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ks(k["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zn(k["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zn(k["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yn(k["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Au(o,e){return o.x*e.x+o.y*e.y}function gd(o,e){if(1===o.length){let a=0;const f=e[a++];let v;for(;!v||f.equals(v);)if(v=e[a++],!v)return 1/0;for(;a<e.length;a++){const w=e[a],E=o[0],O=v.sub(f),N=w.sub(f),K=E.sub(f),ie=Au(O,O),oe=Au(O,N),_e=Au(N,N),be=Au(K,O),Ce=Au(K,N),Je=ie*_e-oe*oe,et=(_e*be-oe*Ce)/Je,Mt=(ie*Ce-oe*be)/Je,Bt=f.z*(1-et-Mt)+v.z*et+w.z*Mt;if(isFinite(Bt))return Bt}return 1/0}{let a=1/0;for(const f of e)a=Math.min(a,f.z);return a}}const _d=lr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:dm}=_d,xh=lr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:yd}=xh,Tc=sc.VectorTileFeature.types,Bp=Math.cos(Math.PI/180*37.5),vd=Math.pow(2,14)/.5;class wh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(a=>a.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Ie,this.layoutVertexArray2=new je,this.indexArray=new Gr,this.programConfigurations=new _l(e.layers,e.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(e,a,f){this.hasPattern=to("line",this.layers,a);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),E=[];for(const{feature:O,id:N,index:K,sourceLayerIndex:ie}of e){const oe=this.layers[0]._featureFilter.needGeometry,_e=Ys(O,oe);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),_e,f))continue;const be=w?v.evaluate(_e,{},f):void 0,Ce={id:N,properties:O.properties,type:O.type,sourceLayerIndex:ie,index:K,geometry:oe?_e.geometry:Ec(O),patterns:{},sortKey:be};E.push(Ce)}w&&E.sort((O,N)=>O.sortKey-N.sortKey);for(const O of E){const{geometry:N,index:K,sourceLayerIndex:ie}=O;if(this.hasPattern){const oe=fd("line",this.layers,O,this.zoom,a);this.patternFeatures.push(oe)}else this.addFeature(O,N,K,f,{});a.featureIndex.insert(e[K].feature,N,K,ie,this.index)}}update(e,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,a,this.stateDependentLayers,f)}addFeatures(e,a,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,yd)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,dm),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,a,f,v,w){const E=this.layers[0].layout,O=E.get("line-join").evaluate(e,{}),N=E.get("line-cap"),K=E.get("line-miter-limit"),ie=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const oe of a)this.addLine(oe,e,O,N,K,ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,f,w,v)}addLine(e,a,f,v,w,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Mt=0;Mt<e.length-1;Mt++)this.totalDistance+=e[Mt].dist(e[Mt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O="Polygon"===Tc[a.type];let N=e.length;for(;N>=2&&e[N-1].equals(e[N-2]);)N--;let K=0;for(;K<N-1&&e[K].equals(e[K+1]);)K++;if(N<(O?3:2))return;"bevel"===f&&(w=1.05);const ie=this.overscaling<=16?122880/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let _e,be,Ce,Je,et;this.e1=this.e2=-1,O&&(_e=e[N-2],et=e[K].sub(_e)._unit()._perp());for(let Mt=K;Mt<N;Mt++){if(Ce=Mt===N-1?O?e[K+1]:void 0:e[Mt+1],Ce&&e[Mt].equals(Ce))continue;et&&(Je=et),_e&&(be=_e),_e=e[Mt],et=Ce?Ce.sub(_e)._unit()._perp():Je,Je=Je||et;let Bt=Je.add(et);0===Bt.x&&0===Bt.y||Bt._unit();const bt=Je.x*et.x+Je.y*et.y,Rt=Bt.x*et.x+Bt.y*et.y,rn=0!==Rt?1/Rt:1/0,Xt=2*Math.sqrt(2-2*Rt),Vn=Rt<Bp&&be&&Ce,Hn=Je.x*et.y-Je.y*et.x>0;if(Vn&&Mt>K){const En=_e.dist(be);if(En>2*ie){const Nn=_e.sub(_e.sub(be)._mult(ie/En)._round());this.updateDistance(be,Nn),this.addCurrentVertex(Nn,Je,0,0,oe),be=Nn}}const Fn=be&&Ce;let Tn=Fn?f:O?"butt":v;if(Fn&&"round"===Tn&&(rn<E?Tn="miter":rn<=2&&(Tn="fakeround")),"miter"===Tn&&rn>w&&(Tn="bevel"),"bevel"===Tn&&(rn>2&&(Tn="flipbevel"),rn<w&&(Tn="miter")),be&&this.updateDistance(be,_e),"miter"===Tn)Bt._mult(rn),this.addCurrentVertex(_e,Bt,0,0,oe);else if("flipbevel"===Tn){if(rn>100)Bt=et.mult(-1);else{const En=rn*Je.add(et).mag()/Je.sub(et).mag();Bt._perp()._mult(En*(Hn?-1:1))}this.addCurrentVertex(_e,Bt,0,0,oe),this.addCurrentVertex(_e,Bt.mult(-1),0,0,oe)}else if("bevel"===Tn||"fakeround"===Tn){const En=-Math.sqrt(rn*rn-1),Nn=Hn?En:0,Rn=Hn?0:En;if(be&&this.addCurrentVertex(_e,Je,Nn,Rn,oe),"fakeround"===Tn){const gn=Math.round(180*Xt/Math.PI/20);for(let si=1;si<gn;si++){let ti=si/gn;if(.5!==ti){const br=ti-.5;ti+=ti*br*(ti-1)*((1.0904+bt*(bt*(3.55645-1.43519*bt)-3.2452))*br*br+(.848013+bt*(.215638*bt-1.06021)))}const Pn=et.sub(Je)._mult(ti)._add(Je)._unit()._mult(Hn?-1:1);this.addHalfVertex(_e,Pn.x,Pn.y,!1,Hn,0,oe)}}Ce&&this.addCurrentVertex(_e,et,-Nn,-Rn,oe)}else if("butt"===Tn)this.addCurrentVertex(_e,Bt,0,0,oe);else if("square"===Tn){const En=be?1:-1;this.addCurrentVertex(_e,Bt,En,En,oe)}else"round"===Tn&&(be&&(this.addCurrentVertex(_e,Je,0,0,oe),this.addCurrentVertex(_e,Je,1,1,oe,!0)),Ce&&(this.addCurrentVertex(_e,et,-1,-1,oe,!0),this.addCurrentVertex(_e,et,0,0,oe)));if(Vn&&Mt<N-1){const En=_e.dist(Ce);if(En>2*ie){const Nn=_e.add(Ce.sub(_e)._mult(ie/En)._round());this.updateDistance(_e,Nn),this.addCurrentVertex(Nn,et,0,0,oe),_e=Nn}}}}addCurrentVertex(e,a,f,v,w,E=!1){const O=a.y*v-a.x,N=-a.y-a.x*v;this.addHalfVertex(e,a.x+a.y*f,a.y-a.x*f,E,!1,f,w),this.addHalfVertex(e,O,N,E,!0,-v,w),this.distance>vd/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,a,f,v,w,E))}addHalfVertex({x:e,y:a},f,v,w,E,O,N){const K=.5*(this.lineClips?this.scaledDistance*(vd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(w?1:0),(a<<1)+(E?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(0===O?0:O<0?-1:1)|(63&K)<<2,K>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ie=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ie),N.primitiveLength++),E?this.e2=ie:this.e1=ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,a){this.distance+=e.dist(a),this.updateScaledDistance()}}Mn("LineBucket",wh,{omit:["layers","patternFeatures"]});const hm=new dr({"line-cap":new Yn(k.layout_line["line-cap"]),"line-join":new zn(k.layout_line["line-join"]),"line-miter-limit":new Yn(k.layout_line["line-miter-limit"]),"line-round-limit":new Yn(k.layout_line["line-round-limit"]),"line-sort-key":new zn(k.layout_line["line-sort-key"])});var Ch={paint:new dr({"line-opacity":new zn(k.paint_line["line-opacity"]),"line-color":new zn(k.paint_line["line-color"]),"line-translate":new Yn(k.paint_line["line-translate"]),"line-translate-anchor":new Yn(k.paint_line["line-translate-anchor"]),"line-width":new zn(k.paint_line["line-width"]),"line-gap-width":new zn(k.paint_line["line-gap-width"]),"line-offset":new zn(k.paint_line["line-offset"]),"line-blur":new zn(k.paint_line["line-blur"]),"line-dasharray":new da(k.paint_line["line-dasharray"]),"line-pattern":new Ks(k.paint_line["line-pattern"]),"line-gradient":new nl(k.paint_line["line-gradient"])}),layout:hm};const Va=new class extends zn{possiblyEvaluate(o,e){return e=new ir(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(o,e)}evaluate(o,e,a,f){return e=rt({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(o,e,a,f)}}(Ch.paint.properties["line-width"].specification);function Eh(o,e){return e>0?e+2*o:o}Va.useIntegerZoom=!0;const pm=lr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fm=lr([{name:"a_projected_pos",components:3,type:"Float32"}],4);lr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mm=lr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);lr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bd=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gm=lr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Pu(o,e,a){return o.sections.forEach(f=>{f.text=function(v,w,E){const O=w.layout.get("text-transform").evaluate(E,{});return"uppercase"===O?v=v.toLocaleUpperCase():"lowercase"===O&&(v=v.toLocaleLowerCase()),Ko.applyArabicShaping&&(v=Ko.applyArabicShaping(v)),v}(f.text,e,a)}),o}lr([{name:"triangle",components:3,type:"Uint16"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),lr([{type:"Float32",name:"offsetX"}]),lr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Ou={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var zp=fr,Vp=function(o,e,a,f,v){var w,E,O=8*v-f-1,N=(1<<O)-1,K=N>>1,ie=-7,oe=a?v-1:0,_e=a?-1:1,be=o[e+oe];for(oe+=_e,w=be&(1<<-ie)-1,be>>=-ie,ie+=O;ie>0;w=256*w+o[e+oe],oe+=_e,ie-=8);for(E=w&(1<<-ie)-1,w>>=-ie,ie+=f;ie>0;E=256*E+o[e+oe],oe+=_e,ie-=8);if(0===w)w=1-K;else{if(w===N)return E?NaN:1/0*(be?-1:1);E+=Math.pow(2,f),w-=K}return(be?-1:1)*E*Math.pow(2,w-f)},Wc=function(o,e,a,f,v,w){var E,O,N,K=8*w-v-1,ie=(1<<K)-1,oe=ie>>1,_e=23===v?Math.pow(2,-24)-Math.pow(2,-77):0,be=f?0:w-1,Ce=f?1:-1,Je=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(O=isNaN(e)?1:0,E=ie):(E=Math.floor(Math.log(e)/Math.LN2),e*(N=Math.pow(2,-E))<1&&(E--,N*=2),(e+=E+oe>=1?_e/N:_e*Math.pow(2,1-oe))*N>=2&&(E++,N/=2),E+oe>=ie?(O=0,E=ie):E+oe>=1?(O=(e*N-1)*Math.pow(2,v),E+=oe):(O=e*Math.pow(2,oe-1)*Math.pow(2,v),E=0));v>=8;o[a+be]=255&O,be+=Ce,O/=256,v-=8);for(E=E<<v|O,K+=v;K>0;o[a+be]=255&E,be+=Ce,E/=256,K-=8);o[a+be-Ce]|=128*Je};function fr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}fr.Varint=0,fr.Fixed64=1,fr.Bytes=2,fr.Fixed32=5;var ga,Ic=4294967296,Ac=1/Ic,xd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function vl(o){return o.type===fr.Bytes?o.readVarint()+o.pos:o.pos+1}function Up(o,e,a){var f=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));a.realloc(f);for(var v=a.pos-1;v>=o;v--)a.buf[v+f]=a.buf[v]}function Kc(o,e){for(var a=0;a<o.length;a++)e.writeVarint(o[a])}function Yc(o,e){for(var a=0;a<o.length;a++)e.writeSVarint(o[a])}function _m(o,e){for(var a=0;a<o.length;a++)e.writeFloat(o[a])}function Dh(o,e){for(var a=0;a<o.length;a++)e.writeDouble(o[a])}function ym(o,e){for(var a=0;a<o.length;a++)e.writeBoolean(o[a])}function vm(o,e){for(var a=0;a<o.length;a++)e.writeFixed32(o[a])}function Mh(o,e){for(var a=0;a<o.length;a++)e.writeSFixed32(o[a])}function Sh(o,e){for(var a=0;a<o.length;a++)e.writeFixed64(o[a])}function Hg(o,e){for(var a=0;a<o.length;a++)e.writeSFixed64(o[a])}function Xc(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+16777216*o[e+3]}function ku(o,e,a){o[a]=e,o[a+1]=e>>>8,o[a+2]=e>>>16,o[a+3]=e>>>24}function bm(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+(o[e+3]<<24)}function $g(o,e,a){1===o&&a.readMessage(Gg,e)}function Gg(o,e,a){if(3===o){const{id:f,bitmap:v,width:w,height:E,left:O,top:N,advance:K}=a.readMessage(Zg,{});e.push({id:f,bitmap:new Hc({width:w+6,height:E+6},v),metrics:{width:w,height:E,left:O,top:N,advance:K}})}}function Zg(o,e,a){1===o?e.id=a.readVarint():2===o?e.bitmap=a.readBytes():3===o?e.width=a.readVarint():4===o?e.height=a.readVarint():5===o?e.left=a.readSVarint():6===o?e.top=a.readSVarint():7===o&&(e.advance=a.readVarint())}function jp(o){let e=0,a=0;for(const E of o)e+=E.w*E.h,a=Math.max(a,E.w);o.sort((E,O)=>O.h-E.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),a),h:1/0}];let v=0,w=0;for(const E of o)for(let O=f.length-1;O>=0;O--){const N=f[O];if(!(E.w>N.w||E.h>N.h)){if(E.x=N.x,E.y=N.y,w=Math.max(w,E.y+E.h),v=Math.max(v,E.x+E.w),E.w===N.w&&E.h===N.h){const K=f.pop();O<f.length&&(f[O]=K)}else E.h===N.h?(N.x+=E.w,N.w-=E.w):E.w===N.w?(N.y+=E.h,N.h-=E.h):(f.push({x:N.x+E.w,y:N.y,w:N.w-E.w,h:E.h}),N.y+=E.h,N.h-=E.h);break}}return{w:v,h:w,fill:e/(v*w)||0}}fr.prototype={destroy:function(){this.buf=null},readFields:function(o,e,a){for(a=a||this.length;this.pos<a;){var f=this.readVarint(),v=f>>3,w=this.pos;this.type=7&f,o(v,e,this),this.pos===w&&this.skip(f)}return e},readMessage:function(o,e){return this.readFields(o,e,this.readVarint()+this.pos)},readFixed32:function(){var o=Xc(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=bm(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Xc(this.buf,this.pos)+Xc(this.buf,this.pos+4)*Ic;return this.pos+=8,o},readSFixed64:function(){var o=Xc(this.buf,this.pos)+bm(this.buf,this.pos+4)*Ic;return this.pos+=8,o},readFloat:function(){var o=Vp(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Vp(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var e,a,f=this.buf;return e=127&(a=f[this.pos++]),a<128?e:(e|=(127&(a=f[this.pos++]))<<7,a<128?e:(e|=(127&(a=f[this.pos++]))<<14,a<128?e:(e|=(127&(a=f[this.pos++]))<<21,a<128?e:function(v,w,E){var O,N,K=E.buf;if(O=(112&(N=K[E.pos++]))>>4,N<128||(O|=(127&(N=K[E.pos++]))<<3,N<128)||(O|=(127&(N=K[E.pos++]))<<10,N<128)||(O|=(127&(N=K[E.pos++]))<<17,N<128)||(O|=(127&(N=K[E.pos++]))<<24,N<128)||(O|=(1&(N=K[E.pos++]))<<31,N<128))return function qc(o,e,a){return a?4294967296*e+(o>>>0):4294967296*(e>>>0)+(o>>>0)}(v,O,w);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(a=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,e=this.pos;return this.pos=o,o-e>=12&&xd?xd.decode(this.buf.subarray(e,o)):function(a,f,v){for(var w="",E=f;E<v;){var O,N,K,ie=a[E],oe=null,_e=ie>239?4:ie>223?3:ie>191?2:1;if(E+_e>v)break;1===_e?ie<128&&(oe=ie):2===_e?128==(192&(O=a[E+1]))&&(oe=(31&ie)<<6|63&O)<=127&&(oe=null):3===_e?(N=a[E+2],128==(192&(O=a[E+1]))&&128==(192&N)&&((oe=(15&ie)<<12|(63&O)<<6|63&N)<=2047||oe>=55296&&oe<=57343)&&(oe=null)):4===_e&&(N=a[E+2],K=a[E+3],128==(192&(O=a[E+1]))&&128==(192&N)&&128==(192&K)&&((oe=(15&ie)<<18|(63&O)<<12|(63&N)<<6|63&K)<=65535||oe>=1114112)&&(oe=null)),null===oe?(oe=65533,_e=1):oe>65535&&(oe-=65536,w+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),w+=String.fromCharCode(oe),E+=_e}return w}(this.buf,e,o)},readBytes:function(){var o=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,o);return this.pos=o,e},readPackedVarint:function(o,e){if(this.type!==fr.Bytes)return o.push(this.readVarint(e));var a=vl(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(e));return o},readPackedSVarint:function(o){if(this.type!==fr.Bytes)return o.push(this.readSVarint());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==fr.Bytes)return o.push(this.readBoolean());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==fr.Bytes)return o.push(this.readFloat());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==fr.Bytes)return o.push(this.readDouble());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==fr.Bytes)return o.push(this.readFixed32());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==fr.Bytes)return o.push(this.readSFixed32());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==fr.Bytes)return o.push(this.readFixed64());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==fr.Bytes)return o.push(this.readSFixed64());var e=vl(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed64());return o},skip:function(o){var e=7&o;if(e===fr.Varint)for(;this.buf[this.pos++]>127;);else if(e===fr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===fr.Fixed32)this.pos+=4;else{if(e!==fr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(o,e){this.writeVarint(o<<3|e)},realloc:function(o){for(var e=this.length||16;e<this.pos+o;)e*=2;if(e!==this.length){var a=new Uint8Array(e);a.set(this.buf),this.buf=a,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),ku(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),ku(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),ku(this.buf,-1&o,this.pos),ku(this.buf,Math.floor(o*Ac),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),ku(this.buf,-1&o,this.pos),ku(this.buf,Math.floor(o*Ac),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(e,a){var f,v,w,O;if(e>=0?(f=e%4294967296|0,v=e/4294967296|0):(v=~(-e/4294967296),4294967295^(f=~(-e%4294967296))?f=f+1|0:(f=0,v=v+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),w=f,(O=a).buf[O.pos++]=127&w|128,w>>>=7,O.buf[O.pos++]=127&w|128,w>>>=7,O.buf[O.pos++]=127&w|128,w>>>=7,O.buf[O.pos++]=127&w|128,O.buf[O.pos]=127&(w>>>=7),function(w,E){var O=(7&w)<<4;E.buf[E.pos++]|=O|((w>>>=3)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w)))))}(v,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var e=this.pos;this.pos=function(f,v,w){for(var E,O,N=0;N<v.length;N++){if((E=v.charCodeAt(N))>55295&&E<57344){if(!O){E>56319||N+1===v.length?(f[w++]=239,f[w++]=191,f[w++]=189):O=E;continue}if(E<56320){f[w++]=239,f[w++]=191,f[w++]=189,O=E;continue}E=O-55296<<10|E-56320|65536,O=null}else O&&(f[w++]=239,f[w++]=191,f[w++]=189,O=null);E<128?f[w++]=E:(E<2048?f[w++]=E>>6|192:(E<65536?f[w++]=E>>12|224:(f[w++]=E>>18|240,f[w++]=E>>12&63|128),f[w++]=E>>6&63|128),f[w++]=63&E|128)}return w}(this.buf,o,this.pos);var a=this.pos-e;a>=128&&Up(e,a,this),this.pos=e-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),Wc(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Wc(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var e=o.length;this.writeVarint(e),this.realloc(e);for(var a=0;a<e;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,e){this.pos++;var a=this.pos;o(e,this);var f=this.pos-a;f>=128&&Up(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,e,a){this.writeTag(o,fr.Bytes),this.writeRawMessage(e,a)},writePackedVarint:function(o,e){e.length&&this.writeMessage(o,Kc,e)},writePackedSVarint:function(o,e){e.length&&this.writeMessage(o,Yc,e)},writePackedBoolean:function(o,e){e.length&&this.writeMessage(o,ym,e)},writePackedFloat:function(o,e){e.length&&this.writeMessage(o,_m,e)},writePackedDouble:function(o,e){e.length&&this.writeMessage(o,Dh,e)},writePackedFixed32:function(o,e){e.length&&this.writeMessage(o,vm,e)},writePackedSFixed32:function(o,e){e.length&&this.writeMessage(o,Mh,e)},writePackedFixed64:function(o,e){e.length&&this.writeMessage(o,Sh,e)},writePackedSFixed64:function(o,e){e.length&&this.writeMessage(o,Hg,e)},writeBytesField:function(o,e){this.writeTag(o,fr.Bytes),this.writeBytes(e)},writeFixed32Field:function(o,e){this.writeTag(o,fr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(o,e){this.writeTag(o,fr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(o,e){this.writeTag(o,fr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(o,e){this.writeTag(o,fr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(o,e){this.writeTag(o,fr.Varint),this.writeVarint(e)},writeSVarintField:function(o,e){this.writeTag(o,fr.Varint),this.writeSVarint(e)},writeStringField:function(o,e){this.writeTag(o,fr.Bytes),this.writeString(e)},writeFloatField:function(o,e){this.writeTag(o,fr.Fixed32),this.writeFloat(e)},writeDoubleField:function(o,e){this.writeTag(o,fr.Fixed64),this.writeDouble(e)},writeBooleanField:function(o,e){this.writeVarintField(o,Boolean(e))}};class Ru{constructor(e,{pixelRatio:a,version:f,stretchX:v,stretchY:w,content:E}){this.paddedRect=e,this.pixelRatio=a,this.stretchX=v,this.stretchY=w,this.content=E,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class wd{constructor(e,a){const f={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(e,f,w),this.addImages(a,v,w);const{w:E,h:O}=jp(w),N=new yo({width:E||1,height:O||1});for(const K in e){const ie=e[K],oe=f[K].paddedRect;yo.copy(ie.data,N,{x:0,y:0},{x:oe.x+1,y:oe.y+1},ie.data)}for(const K in a){const ie=a[K],oe=v[K].paddedRect,_e=oe.x+1,be=oe.y+1,Ce=ie.data.width,Je=ie.data.height;yo.copy(ie.data,N,{x:0,y:0},{x:_e,y:be},ie.data),yo.copy(ie.data,N,{x:0,y:Je-1},{x:_e,y:be-1},{width:Ce,height:1}),yo.copy(ie.data,N,{x:0,y:0},{x:_e,y:be+Je},{width:Ce,height:1}),yo.copy(ie.data,N,{x:Ce-1,y:0},{x:_e-1,y:be},{width:1,height:Je}),yo.copy(ie.data,N,{x:0,y:0},{x:_e+Ce,y:be},{width:1,height:Je})}this.image=N,this.iconPositions=f,this.patternPositions=v}addImages(e,a,f){for(const v in e){const w=e[v],E={x:0,y:0,w:w.data.width+2,h:w.data.height+2};f.push(E),a[v]=new Ru(E,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(e,a){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in e.updatedImages)this.patchUpdatedImage(this.iconPositions[f],e.getImage(f),a),this.patchUpdatedImage(this.patternPositions[f],e.getImage(f),a)}patchUpdatedImage(e,a,f){if(!e||!a||e.version===a.version)return;e.version=a.version;const[v,w]=e.tl;f.update(a.data,void 0,{x:v,y:w})}}Mn("ImagePosition",Ru),Mn("ImageAtlas",wd),m.WritingMode=void 0,(ga=m.WritingMode||(m.WritingMode={}))[ga.none=0]="none",ga[ga.horizontal=1]="horizontal",ga[ga.vertical=2]="vertical",ga[ga.horizontalOnly=3]="horizontalOnly";class Jc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,a){const f=new Jc;return f.scale=e||1,f.fontStack=a,f}static forImage(e){const a=new Jc;return a.imageName=e,a}}class Pc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,a){const f=new Pc;for(let v=0;v<e.sections.length;v++){const w=e.sections[v];w.image?f.addImageSection(w):f.addTextSection(w,a)}return f}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let a="";for(let f=0;f<e.length;f++){const v=e.charCodeAt(f+1)||null,w=e.charCodeAt(f-1)||null;a+=v&&vc(v)&&!Ou[e[f+1]]||w&&vc(w)&&!Ou[e[f-1]]||!Ou[e[f]]?e[f]:Ou[e[f]]}return a}(this.text)}trim(){let e=0;for(let f=0;f<this.text.length&&Cd[this.text.charCodeAt(f)];f++)e++;let a=this.text.length;for(let f=this.text.length-1;f>=0&&f>=e&&Cd[this.text.charCodeAt(f)];f--)a--;this.text=this.text.substring(e,a),this.sectionIndex=this.sectionIndex.slice(e,a)}substring(e,a){const f=new Pc;return f.text=this.text.substring(e,a),f.sectionIndex=this.sectionIndex.slice(e,a),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,a)=>Math.max(e,this.sections[a].scale),0)}addTextSection(e,a){this.text+=e.text,this.sections.push(Jc.forText(e.scale,e.fontStack||a));const f=this.sections.length-1;for(let v=0;v<e.text.length;++v)this.sectionIndex.push(f)}addImageSection(e){const a=e.image?e.image.name:"";if(0===a.length)return void Et("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Jc.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Et("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Qc(o,e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je){const et=Pc.fromFeature(o,v);let Mt;oe===m.WritingMode.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Bt,processStyledBidirectionalText:bt}=Ko;if(Bt&&1===et.sections.length){Mt=[];const Xt=Bt(et.toString(),Ah(et,K,w,e,f,be,Ce));for(const Vn of Xt){const Hn=new Pc;Hn.text=Vn,Hn.sections=et.sections;for(let Fn=0;Fn<Vn.length;Fn++)Hn.sectionIndex.push(0);Mt.push(Hn)}}else if(bt){Mt=[];const Xt=bt(et.text,et.sectionIndex,Ah(et,K,w,e,f,be,Ce));for(const Vn of Xt){const Hn=new Pc;Hn.text=Vn[0],Hn.sectionIndex=Vn[1],Hn.sections=et.sections,Mt.push(Hn)}}else Mt=function(Xt,Vn){const Hn=[],Fn=Xt.text;let Tn=0;for(const En of Vn)Hn.push(Xt.substring(Tn,En)),Tn=En;return Tn<Fn.length&&Hn.push(Xt.substring(Tn,Fn.length)),Hn}(et,Ah(et,K,w,e,f,be,Ce));const Rt=[],rn={positionedLines:Rt,text:et.toString(),top:ie[1],bottom:ie[1],left:ie[0],right:ie[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return function(Xt,Vn,Hn,Fn,Tn,En,Nn,Rn,gn,si,ti,Pn){let br=0,Mr=-17,lo=0,_a=0;const Yo="right"===Rn?1:"left"===Rn?0:.5;let no=0;for(const vo of Tn){vo.trim();const jo=vo.getMaxScale(),Xo=24*(jo-1),co={positionedGlyphs:[],lineOffset:0};Xt.positionedLines[no]=co;const Bs=co.positionedGlyphs;let us=0;if(!vo.length()){Mr+=En,++no;continue}for(let To=0;To<vo.length();To++){const Zi=vo.getSection(To),ya=vo.getSectionIndex(To),ds=vo.getCharCode(To);let hs=0,va=null,xl=null,sl=null,Qs=24;const ba=!(gn===m.WritingMode.horizontal||!ti&&!fl(ds)||ti&&(Cd[ds]||(So=ds,Ln.Arabic(So)||Ln["Arabic Supplement"](So)||Ln["Arabic Extended-A"](So)||Ln["Arabic Presentation Forms-A"](So)||Ln["Arabic Presentation Forms-B"](So))));if(Zi.imageName){const ea=Fn[Zi.imageName];if(!ea)continue;sl=Zi.imageName,Xt.iconsInText=Xt.iconsInText||!0,xl=ea.paddedRect;const bo=ea.displaySize;Zi.scale=24*Zi.scale/Pn,va={width:bo[0],height:bo[1],left:1,top:-3,advance:ba?bo[1]:bo[0]},hs=Xo+(24-bo[1]*Zi.scale),Qs=va.advance;const Ul=ba?bo[0]*Zi.scale-24*jo:bo[1]*Zi.scale-24*jo;Ul>0&&Ul>us&&(us=Ul)}else{const ea=Hn[Zi.fontStack],bo=ea&&ea[ds];if(bo&&bo.rect)xl=bo.rect,va=bo.metrics;else{const Ul=Vn[Zi.fontStack],lu=Ul&&Ul[ds];if(!lu)continue;va=lu.metrics}hs=24*(jo-Zi.scale)}ba?(Xt.verticalizable=!0,Bs.push({glyph:ds,imageName:sl,x:br,y:Mr+hs,vertical:ba,scale:Zi.scale,fontStack:Zi.fontStack,sectionIndex:ya,metrics:va,rect:xl}),br+=Qs*Zi.scale+si):(Bs.push({glyph:ds,imageName:sl,x:br,y:Mr+hs,vertical:ba,scale:Zi.scale,fontStack:Zi.fontStack,sectionIndex:ya,metrics:va,rect:xl}),br+=va.advance*Zi.scale+si)}0!==Bs.length&&(lo=Math.max(br-si,lo),wm(Bs,0,Bs.length-1,Yo,us)),br=0;const Sr=En*jo+us;co.lineOffset=Math.max(us,Xo),Mr+=Sr,_a=Math.max(Sr,_a),++no}var So;const Uo=Mr- -17,{horizontalAlign:cs,verticalAlign:Ns}=Ph(Nn);(function(vo,jo,Xo,co,Bs,us,Sr,To,Zi){const ya=(jo-Xo)*Bs;let ds=0;ds=us!==Sr?-To*co- -17:(-co*Zi+.5)*Sr;for(const hs of vo)for(const va of hs.positionedGlyphs)va.x+=ya,va.y+=ds})(Xt.positionedLines,Yo,cs,Ns,lo,_a,En,Uo,Tn.length),Xt.top+=-Ns*Uo,Xt.bottom=Xt.top+Uo,Xt.left+=-cs*lo,Xt.right=Xt.left+lo}(rn,e,a,f,Mt,E,O,N,oe,K,_e,Je),!function(Xt){for(const Vn of Xt)if(0!==Vn.positionedGlyphs.length)return!1;return!0}(Rt)&&rn}const Cd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Th={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function eu(o,e,a,f,v,w){if(e.imageName){const E=f[e.imageName];return E?E.displaySize[0]*e.scale*24/w+v:0}{const E=a[e.fontStack],O=E&&E[o];return O?O.metrics.advance*e.scale+v:0}}function Hp(o,e,a,f){const v=Math.pow(o-e,2);return f?o<e?v/2:2*v:v+Math.abs(a)*a}function xm(o,e,a){let f=0;return 10===o&&(f-=1e4),a&&(f+=150),40!==o&&65288!==o||(f+=50),41!==e&&65289!==e||(f+=50),f}function $p(o,e,a,f,v,w){let E=null,O=Hp(e,a,v,w);for(const N of f){const K=Hp(e-N.x,a,v,w)+N.badness;K<=O&&(E=N,O=K)}return{index:o,x:e,priorBreak:E,badness:O}}function Ih(o){return o?Ih(o.priorBreak).concat(o.index):[]}function Ah(o,e,a,f,v,w,E){if("point"!==w)return[];if(!o)return[];const O=[],N=function(_e,be,Ce,Je,et,Mt){let Bt=0;for(let bt=0;bt<_e.length();bt++){const Rt=_e.getSection(bt);Bt+=eu(_e.getCharCode(bt),Rt,Je,et,be,Mt)}return Bt/Math.max(1,Math.ceil(Bt/Ce))}(o,e,a,f,v,E),K=o.text.indexOf("\u200b")>=0;let ie=0;for(let _e=0;_e<o.length();_e++){const be=o.getSection(_e),Ce=o.getCharCode(_e);if(Cd[Ce]||(ie+=eu(Ce,be,f,v,e,E)),_e<o.length()-1){const Je=!((oe=Ce)<11904||!(Ln["Bopomofo Extended"](oe)||Ln.Bopomofo(oe)||Ln["CJK Compatibility Forms"](oe)||Ln["CJK Compatibility Ideographs"](oe)||Ln["CJK Compatibility"](oe)||Ln["CJK Radicals Supplement"](oe)||Ln["CJK Strokes"](oe)||Ln["CJK Symbols and Punctuation"](oe)||Ln["CJK Unified Ideographs Extension A"](oe)||Ln["CJK Unified Ideographs"](oe)||Ln["Enclosed CJK Letters and Months"](oe)||Ln["Halfwidth and Fullwidth Forms"](oe)||Ln.Hiragana(oe)||Ln["Ideographic Description Characters"](oe)||Ln["Kangxi Radicals"](oe)||Ln["Katakana Phonetic Extensions"](oe)||Ln.Katakana(oe)||Ln["Vertical Forms"](oe)||Ln["Yi Radicals"](oe)||Ln["Yi Syllables"](oe)));(Th[Ce]||Je||be.imageName)&&O.push($p(_e+1,ie,N,O,xm(Ce,o.getCharCode(_e+1),Je&&K),!1))}}var oe;return Ih($p(o.length(),ie,N,O,0,!0))}function Ph(o){let e=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:e,verticalAlign:a}}function wm(o,e,a,f,v){if(!f&&!v)return;const w=o[a],E=(o[a].x+w.metrics.advance*w.scale)*f;for(let O=e;O<=a;O++)o[O].x-=E,o[O].y+=v}function Cm(o,e,a){const{horizontalAlign:f,verticalAlign:v}=Ph(a),w=e[0]-o.displaySize[0]*f,E=e[1]-o.displaySize[1]*v;return{image:o,top:E,bottom:E+o.displaySize[1],left:w,right:w+o.displaySize[0]}}function Ed(o,e,a,f,v,w){const E=o.image;let O;if(E.content){const et=E.content,Mt=E.pixelRatio||1;O=[et[0]/Mt,et[1]/Mt,E.displaySize[0]-et[2]/Mt,E.displaySize[1]-et[3]/Mt]}const N=e.left*w,K=e.right*w;let ie,oe,_e,be;"width"===a||"both"===a?(be=v[0]+N-f[3],oe=v[0]+K+f[1]):(be=v[0]+(N+K-E.displaySize[0])/2,oe=be+E.displaySize[0]);const Ce=e.top*w,Je=e.bottom*w;return"height"===a||"both"===a?(ie=v[1]+Ce-f[0],_e=v[1]+Je+f[2]):(ie=v[1]+(Ce+Je-E.displaySize[1])/2,_e=ie+E.displaySize[1]),{image:E,top:ie,right:oe,bottom:_e,left:be,collisionPadding:O}}const zl=128;function Gp(o,e){const{expression:a}=e;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new ir(o+1))};if("source"===a.kind)return{kind:"source"};{const{zoomStops:f,interpolationType:v}=a;let w=0;for(;w<f.length&&f[w]<=o;)w++;w=Math.max(0,w-1);let E=w;for(;E<f.length&&f[E]<o+1;)E++;E=Math.min(f.length-1,E);const O=f[w],N=f[E];return"composite"===a.kind?{kind:"composite",minZoom:O,maxZoom:N,interpolationType:v}:{kind:"camera",minZoom:O,maxZoom:N,minSize:a.evaluate(new ir(O)),maxSize:a.evaluate(new ir(N)),interpolationType:v}}}class Vl extends Xe{constructor(e,a,f,v){super(e,a),this.angle=f,void 0!==v&&(this.segment=v)}clone(){return new Vl(this.x,this.y,this.angle,this.segment)}}function Lu(o,e,a,f,v){if(void 0===e.segment)return!0;let w=e,E=e.segment+1,O=0;for(;O>-a/2;){if(E--,E<0)return!1;O-=o[E].dist(w),w=o[E]}O+=o[E].dist(o[E+1]),E++;const N=[];let K=0;for(;O<a/2;){const ie=o[E],oe=o[E+1];if(!oe)return!1;let _e=o[E-1].angleTo(ie)-ie.angleTo(oe);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:O,angleDelta:_e}),K+=_e;O-N[0].distance>f;)K-=N.shift().angleDelta;if(K>v)return!1;E++,O+=ie.dist(oe)}return!0}function Zp(o){let e=0;for(let a=0;a<o.length-1;a++)e+=o[a].dist(o[a+1]);return e}function Wp(o,e,a){return o?.6*e*a:0}function xs(o,e){return Math.max(o?o.right-o.left:0,e?e.right-e.left:0)}function Dd(o,e,a,f,v,w){const E=Wp(a,v,w),O=xs(a,f)*w;let N=0;const K=Zp(o)/2;for(let ie=0;ie<o.length-1;ie++){const oe=o[ie],_e=o[ie+1],be=oe.dist(_e);if(N+be>K){const Ce=(K-N)/be,Je=ar(oe.x,_e.x,Ce),et=ar(oe.y,_e.y,Ce),Mt=new Vl(Je,et,_e.angleTo(oe),ie);return Mt._round(),!E||Lu(o,Mt,O,E,e)?Mt:void 0}N+=be}}function qp(o,e,a,f,v,w,E,O,N){const K=Wp(f,w,E),ie=xs(f,v),oe=ie*E,_e=0===o[0].x||o[0].x===N||0===o[0].y||o[0].y===N;return e-oe<e/4&&(e=oe+e/4),Fu(o,_e?e/2*O%e:(ie/2+2*w)*E*O%e,e,K,a,oe,_e,!1,N)}function Fu(o,e,a,f,v,w,E,O,N){const K=w/2,ie=Zp(o);let oe=0,_e=e-a,be=[];for(let Ce=0;Ce<o.length-1;Ce++){const Je=o[Ce],et=o[Ce+1],Mt=Je.dist(et),Bt=et.angleTo(Je);for(;_e+a<oe+Mt;){_e+=a;const bt=(_e-oe)/Mt,Rt=ar(Je.x,et.x,bt),rn=ar(Je.y,et.y,bt);if(Rt>=0&&Rt<N&&rn>=0&&rn<N&&_e-K>=0&&_e+K<=ie){const Xt=new Vl(Rt,rn,Bt,Ce);Xt._round(),f&&!Lu(o,Xt,w,f,v)||be.push(Xt)}}oe+=Mt}return O||be.length||E||(be=Fu(o,oe/2,a,f,v,w,E,!0,N)),be}function ls(o,e,a,f,v){const w=[];for(let E=0;E<o.length;E++){const O=o[E];let N;for(let K=0;K<O.length-1;K++){let ie=O[K],oe=O[K+1];ie.x<e&&oe.x<e||(ie.x<e?ie=new Xe(e,ie.y+(e-ie.x)/(oe.x-ie.x)*(oe.y-ie.y))._round():oe.x<e&&(oe=new Xe(e,ie.y+(e-ie.x)/(oe.x-ie.x)*(oe.y-ie.y))._round()),ie.y<a&&oe.y<a||(ie.y<a?ie=new Xe(ie.x+(a-ie.y)/(oe.y-ie.y)*(oe.x-ie.x),a)._round():oe.y<a&&(oe=new Xe(ie.x+(a-ie.y)/(oe.y-ie.y)*(oe.x-ie.x),a)._round()),ie.x>=f&&oe.x>=f||(ie.x>=f?ie=new Xe(f,ie.y+(f-ie.x)/(oe.x-ie.x)*(oe.y-ie.y))._round():oe.x>=f&&(oe=new Xe(f,ie.y+(f-ie.x)/(oe.x-ie.x)*(oe.y-ie.y))._round()),ie.y>=v&&oe.y>=v||(ie.y>=v?ie=new Xe(ie.x+(v-ie.y)/(oe.y-ie.y)*(oe.x-ie.x),v)._round():oe.y>=v&&(oe=new Xe(ie.x+(v-ie.y)/(oe.y-ie.y)*(oe.x-ie.x),v)._round()),N&&ie.equals(N[N.length-1])||(N=[ie],w.push(N)),N.push(oe)))))}}return w}function tu(o,e,a,f){const v=[],w=o.image,E=w.pixelRatio,O=w.paddedRect.w-2,N=w.paddedRect.h-2,K=o.right-o.left,ie=o.bottom-o.top,oe=w.stretchX||[[0,O]],_e=w.stretchY||[[0,N]],be=(En,Nn)=>En+Nn[1]-Nn[0],Ce=oe.reduce(be,0),Je=_e.reduce(be,0),et=O-Ce,Mt=N-Je;let Bt=0,bt=Ce,Rt=0,rn=Je,Xt=0,Vn=et,Hn=0,Fn=Mt;if(w.content&&f){const En=w.content;Bt=Nu(oe,0,En[0]),Rt=Nu(_e,0,En[1]),bt=Nu(oe,En[0],En[2]),rn=Nu(_e,En[1],En[3]),Xt=En[0]-Bt,Hn=En[1]-Rt,Vn=En[2]-En[0]-bt,Fn=En[3]-En[1]-rn}const Tn=(En,Nn,Rn,gn)=>{const si=Md(En.stretch-Bt,bt,K,o.left),ti=Bu(En.fixed-Xt,Vn,En.stretch,Ce),Pn=Md(Nn.stretch-Rt,rn,ie,o.top),br=Bu(Nn.fixed-Hn,Fn,Nn.stretch,Je),Mr=Md(Rn.stretch-Bt,bt,K,o.left),lo=Bu(Rn.fixed-Xt,Vn,Rn.stretch,Ce),_a=Md(gn.stretch-Rt,rn,ie,o.top),Yo=Bu(gn.fixed-Hn,Fn,gn.stretch,Je),no=new Xe(si,Pn),So=new Xe(Mr,Pn),Uo=new Xe(Mr,_a),cs=new Xe(si,_a),Ns=new Xe(ti/E,br/E),vo=new Xe(lo/E,Yo/E),jo=e*Math.PI/180;if(jo){const Bs=Math.sin(jo),us=Math.cos(jo),Sr=[us,-Bs,Bs,us];no._matMult(Sr),So._matMult(Sr),cs._matMult(Sr),Uo._matMult(Sr)}const Xo=En.stretch+En.fixed,co=Nn.stretch+Nn.fixed;return{tl:no,tr:So,bl:cs,br:Uo,tex:{x:w.paddedRect.x+1+Xo,y:w.paddedRect.y+1+co,w:Rn.stretch+Rn.fixed-Xo,h:gn.stretch+gn.fixed-co},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ns,pixelOffsetBR:vo,minFontScaleX:Vn/E/K,minFontScaleY:Fn/E/ie,isSDF:a}};if(f&&(w.stretchX||w.stretchY)){const En=Oh(oe,et,Ce),Nn=Oh(_e,Mt,Je);for(let Rn=0;Rn<En.length-1;Rn++){const gn=En[Rn],si=En[Rn+1];for(let ti=0;ti<Nn.length-1;ti++)v.push(Tn(gn,Nn[ti],si,Nn[ti+1]))}}else v.push(Tn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:N+1}));return v}function Nu(o,e,a){let f=0;for(const v of o)f+=Math.max(e,Math.min(a,v[1]))-Math.max(e,Math.min(a,v[0]));return f}function Oh(o,e,a){const f=[{fixed:-1,stretch:0}];for(const[v,w]of o){const E=f[f.length-1];f.push({fixed:v-E.stretch,stretch:E.stretch}),f.push({fixed:v-E.stretch,stretch:E.stretch+(w-v)})}return f.push({fixed:e+1,stretch:a}),f}function Md(o,e,a,f){return o/e*a+f}function Bu(o,e,a,f){return o-e*a/f}Mn("Anchor",Vl);class zu{constructor(e,a,f,v,w,E,O,N,K,ie){if(this.boxStartIndex=e.length,K){let oe=E.top,_e=E.bottom;const be=E.collisionPadding;be&&(oe-=be[1],_e+=be[3]);let Ce=_e-oe;Ce>0&&(Ce=Math.max(10,Ce),this.circleDiameter=Ce)}else{let oe=E.top*O-N[0],_e=E.bottom*O+N[2],be=E.left*O-N[3],Ce=E.right*O+N[1];const Je=E.collisionPadding;if(Je&&(be-=Je[0]*O,oe-=Je[1]*O,Ce+=Je[2]*O,_e+=Je[3]*O),ie){const et=new Xe(be,oe),Mt=new Xe(Ce,oe),Bt=new Xe(be,_e),bt=new Xe(Ce,_e),Rt=ie*Math.PI/180;et._rotate(Rt),Mt._rotate(Rt),Bt._rotate(Rt),bt._rotate(Rt),be=Math.min(et.x,Mt.x,Bt.x,bt.x),Ce=Math.max(et.x,Mt.x,Bt.x,bt.x),oe=Math.min(et.y,Mt.y,Bt.y,bt.y),_e=Math.max(et.y,Mt.y,Bt.y,bt.y)}e.emplaceBack(a.x,a.y,be,oe,Ce,_e,f,v,w)}this.boxEndIndex=e.length}}class Kp{constructor(e=[],a=kh){if(this.data=e,this.length=this.data.length,this.compare=a,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:a,compare:f}=this,v=a[e];for(;e>0;){const w=e-1>>1,E=a[w];if(f(v,E)>=0)break;a[e]=E,e=w}a[e]=v}_down(e){const{data:a,compare:f}=this,v=this.length>>1,w=a[e];for(;e<v;){let E=1+(e<<1),O=a[E];const N=E+1;if(N<this.length&&f(a[N],O)<0&&(E=N,O=a[N]),f(O,w)>=0)break;a[e]=O,e=E}a[e]=w}}function kh(o,e){return o<e?-1:o>e?1:0}function Yp(o,e=1,a=!1){let f=1/0,v=1/0,w=-1/0,E=-1/0;const O=o[0];for(let be=0;be<O.length;be++){const Ce=O[be];(!be||Ce.x<f)&&(f=Ce.x),(!be||Ce.y<v)&&(v=Ce.y),(!be||Ce.x>w)&&(w=Ce.x),(!be||Ce.y>E)&&(E=Ce.y)}const N=Math.min(w-f,E-v);let K=N/2;const ie=new Kp([],Rh);if(0===N)return new Xe(f,v);for(let be=f;be<w;be+=N)for(let Ce=v;Ce<E;Ce+=N)ie.push(new nu(be+K,Ce+K,K,o));let oe=function(be){let Ce=0,Je=0,et=0;const Mt=be[0];for(let Bt=0,bt=Mt.length,Rt=bt-1;Bt<bt;Rt=Bt++){const rn=Mt[Bt],Xt=Mt[Rt],Vn=rn.x*Xt.y-Xt.x*rn.y;Je+=(rn.x+Xt.x)*Vn,et+=(rn.y+Xt.y)*Vn,Ce+=3*Vn}return new nu(Je/Ce,et/Ce,0,be)}(o),_e=ie.length;for(;ie.length;){const be=ie.pop();(be.d>oe.d||!oe.d)&&(oe=be,a&&console.log("found best %d after %d probes",Math.round(1e4*be.d)/1e4,_e)),be.max-oe.d<=e||(K=be.h/2,ie.push(new nu(be.p.x-K,be.p.y-K,K,o)),ie.push(new nu(be.p.x+K,be.p.y-K,K,o)),ie.push(new nu(be.p.x-K,be.p.y+K,K,o)),ie.push(new nu(be.p.x+K,be.p.y+K,K,o)),_e+=4)}return a&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${oe.d}`)),oe.p}function Rh(o,e){return e.max-o.max}function nu(o,e,a,f){this.p=new Xe(o,e),this.h=a,this.d=function(v,w){let E=!1,O=1/0;for(let N=0;N<w.length;N++){const K=w[N];for(let ie=0,oe=K.length,_e=oe-1;ie<oe;_e=ie++){const be=K[ie],Ce=K[_e];be.y>v.y!=Ce.y>v.y&&v.x<(Ce.x-be.x)*(v.y-be.y)/(Ce.y-be.y)+be.x&&(E=!E),O=Math.min(O,mu(v,be,Ce))}}return(E?1:-1)*Math.sqrt(O)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Sd=Number.POSITIVE_INFINITY;function Xp(o,e){return e[1]!==Sd?function(a,f,v){let w=0,E=0;switch(f=Math.abs(f),v=Math.abs(v),a){case"top-right":case"top-left":case"top":E=v-7;break;case"bottom-right":case"bottom-left":case"bottom":E=7-v}switch(a){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,E]}(o,e[0],e[1]):function(a,f){let v=0,w=0;f<0&&(f=0);const E=f/Math.sqrt(2);switch(a){case"top-right":case"top-left":w=E-7;break;case"bottom-right":case"bottom-left":w=7-E;break;case"bottom":w=7-f;break;case"top":w=f-7}switch(a){case"top-right":case"bottom-right":v=-E;break;case"top-left":case"bottom-left":v=E;break;case"left":v=f;break;case"right":v=-f}return[v,w]}(o,e[0])}function Lh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function iu(o,e,a,f,v,w,E,O,N,K,ie){let oe=w.textMaxSize.evaluate(e,{});void 0===oe&&(oe=E);const _e=o.layers[0].layout,be=_e.get("icon-offset").evaluate(e,{},ie),Ce=Jp(a.horizontal),Je=E/24,et=o.tilePixelRatio*Je,Mt=o.tilePixelRatio*oe/24,Bt=o.tilePixelRatio*O,bt=o.tilePixelRatio*_e.get("symbol-spacing"),Rt=_e.get("text-padding")*o.tilePixelRatio,rn=function(gn,si,ti,Pn=1){const br=gn.get("icon-padding").evaluate(si,{},ti),Mr=br&&br.values;return[Mr[0]*Pn,Mr[1]*Pn,Mr[2]*Pn,Mr[3]*Pn]}(_e,e,ie,o.tilePixelRatio),Xt=_e.get("text-max-angle")/180*Math.PI,Vn="viewport"!==_e.get("text-rotation-alignment")&&"point"!==_e.get("symbol-placement"),Hn="map"===_e.get("icon-rotation-alignment")&&"point"!==_e.get("symbol-placement"),Fn=_e.get("symbol-placement"),Tn=bt/2,En=_e.get("icon-text-fit");let Nn;f&&"none"!==En&&(o.allowVerticalPlacement&&a.vertical&&(Nn=Ed(f,a.vertical,En,_e.get("icon-text-fit-padding"),be,Je)),Ce&&(f=Ed(f,Ce,En,_e.get("icon-text-fit-padding"),be,Je)));const Rn=(gn,si)=>{si.x<0||si.x>=Wr||si.y<0||si.y>=Wr||function(ti,Pn,br,Mr,lo,_a,Yo,no,So,Uo,cs,Ns,vo,jo,Xo,co,Bs,us,Sr,To,Zi,ya,ds,hs,va){const xl=ti.addToLineVertexArray(Pn,br);let sl,Qs,ba,ea,bo=0,Ul=0,lu=0,df=0,$h=-1,Gh=-1;const jl={};let hf=Wi.exports(""),Nd=0,Zh=0;if(void 0===no._unevaluatedLayout.getValue("text-radial-offset")?[Nd,Zh]=no.layout.get("text-offset").evaluate(Zi,{},hs).map(Cs=>24*Cs):(Nd=24*no.layout.get("text-radial-offset").evaluate(Zi,{},hs),Zh=Sd),ti.allowVerticalPlacement&&Mr.vertical){const Cs=no.layout.get("text-rotate").evaluate(Zi,{},hs)+90;ba=new zu(So,Pn,Uo,cs,Ns,Mr.vertical,vo,jo,Xo,Cs),Yo&&(ea=new zu(So,Pn,Uo,cs,Ns,Yo,Bs,us,Xo,Cs))}if(lo){const Cs=no.layout.get("icon-rotate").evaluate(Zi,{}),wl="none"!==no.layout.get("icon-text-fit"),Rc=tu(lo,Cs,ds,wl),ta=Yo?tu(Yo,Cs,ds,wl):void 0;Qs=new zu(So,Pn,Uo,cs,Ns,lo,Bs,us,!1,Cs),bo=4*Rc.length;const zd=ti.iconSizeData;let dc=null;"source"===zd.kind?(dc=[zl*no.layout.get("icon-size").evaluate(Zi,{})],dc[0]>ws&&Et(`${ti.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===zd.kind&&(dc=[zl*ya.compositeIconSizes[0].evaluate(Zi,{},hs),zl*ya.compositeIconSizes[1].evaluate(Zi,{},hs)],(dc[0]>ws||dc[1]>ws)&&Et(`${ti.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ti.addSymbols(ti.icon,Rc,dc,To,Sr,Zi,m.WritingMode.none,Pn,xl.lineStartIndex,xl.lineLength,-1,hs),$h=ti.icon.placedSymbolArray.length-1,ta&&(Ul=4*ta.length,ti.addSymbols(ti.icon,ta,dc,To,Sr,Zi,m.WritingMode.vertical,Pn,xl.lineStartIndex,xl.lineLength,-1,hs),Gh=ti.icon.placedSymbolArray.length-1)}const Zu=Object.keys(Mr.horizontal);for(const Cs of Zu){const wl=Mr.horizontal[Cs];if(!sl){hf=Wi.exports(wl.text);const ta=no.layout.get("text-rotate").evaluate(Zi,{},hs);sl=new zu(So,Pn,Uo,cs,Ns,wl,vo,jo,Xo,ta)}const Rc=1===wl.positionedLines.length;if(lu+=Td(ti,Pn,wl,_a,no,Xo,Zi,co,xl,Mr.vertical?m.WritingMode.horizontal:m.WritingMode.horizontalOnly,Rc?Zu:[Cs],jl,$h,ya,hs),Rc)break}Mr.vertical&&(df+=Td(ti,Pn,Mr.vertical,_a,no,Xo,Zi,co,xl,m.WritingMode.vertical,["vertical"],jl,Gh,ya,hs));const pf=sl?sl.boxStartIndex:ti.collisionBoxArray.length,Wh=sl?sl.boxEndIndex:ti.collisionBoxArray.length,Dm=ba?ba.boxStartIndex:ti.collisionBoxArray.length,Bd=ba?ba.boxEndIndex:ti.collisionBoxArray.length,Mm=Qs?Qs.boxStartIndex:ti.collisionBoxArray.length,Sm=Qs?Qs.boxEndIndex:ti.collisionBoxArray.length,Oc=ea?ea.boxStartIndex:ti.collisionBoxArray.length,ff=ea?ea.boxEndIndex:ti.collisionBoxArray.length;let ja=-1;const kc=(Cs,wl)=>Cs&&Cs.circleDiameter?Math.max(Cs.circleDiameter,wl):wl;ja=kc(sl,ja),ja=kc(ba,ja),ja=kc(Qs,ja),ja=kc(ea,ja);const Ha=ja>-1?1:0;Ha&&(ja*=va/24),ti.glyphOffsetArray.length>=lc.MAX_GLYPHS&&Et("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Zi.sortKey&&ti.addToSortKeyRanges(ti.symbolInstances.length,Zi.sortKey),ti.symbolInstances.emplaceBack(Pn.x,Pn.y,jl.right>=0?jl.right:-1,jl.center>=0?jl.center:-1,jl.left>=0?jl.left:-1,jl.vertical||-1,$h,Gh,hf,pf,Wh,Dm,Bd,Mm,Sm,Oc,ff,Uo,lu,df,bo,Ul,Ha,0,vo,Nd,Zh,ja)}(o,si,gn,a,f,v,Nn,o.layers[0],o.collisionBoxArray,e.index,e.sourceLayerIndex,o.index,et,[Rt,Rt,Rt,Rt],Vn,N,Bt,rn,Hn,be,e,w,K,ie,E)};if("line"===Fn)for(const gn of ls(e.geometry,0,0,Wr,Wr)){const si=qp(gn,bt,Xt,a.vertical||Ce,f,24,Mt,o.overscaling,Wr);for(const ti of si){const Pn=Ce;Pn&&Qp(o,Pn.text,Tn,ti)||Rn(gn,ti)}}else if("line-center"===Fn){for(const gn of e.geometry)if(gn.length>1){const si=Dd(gn,Xt,a.vertical||Ce,f,24,Mt);si&&Rn(gn,si)}}else if("Polygon"===e.type)for(const gn of oc(e.geometry,0)){const si=Yp(gn,16);Rn(gn[0],new Vl(si.x,si.y,0))}else if("LineString"===e.type)for(const gn of e.geometry)Rn(gn,new Vl(gn[0].x,gn[0].y,0));else if("Point"===e.type)for(const gn of e.geometry)for(const si of gn)Rn([si],new Vl(si.x,si.y,0))}const ws=32640;function Td(o,e,a,f,v,w,E,O,N,K,ie,oe,_e,be,Ce){const Je=function(Bt,bt,Rt,rn,Xt,Vn,Hn,Fn){const Tn=rn.layout.get("text-rotate").evaluate(Vn,{})*Math.PI/180,En=[];for(const Nn of bt.positionedLines)for(const Rn of Nn.positionedGlyphs){if(!Rn.rect)continue;const gn=Rn.rect||{};let si=4,ti=!0,Pn=1,br=0;const Mr=(Xt||Fn)&&Rn.vertical,lo=Rn.metrics.advance*Rn.scale/2;if(Fn&&bt.verticalizable){const Sr=24*(Rn.scale-1),To=(24-Rn.metrics.width*Rn.scale)/2;br=Nn.lineOffset/2-(Rn.imageName?-To:Sr)}if(Rn.imageName){const Sr=Hn[Rn.imageName];ti=Sr.sdf,Pn=Sr.pixelRatio,si=1/Pn}const _a=Xt?[Rn.x+lo,Rn.y]:[0,0];let Yo=Xt?[0,0]:[Rn.x+lo+Rt[0],Rn.y+Rt[1]-br],no=[0,0];Mr&&(no=Yo,Yo=[0,0]);const So=(Rn.metrics.left-si)*Rn.scale-lo+Yo[0],Uo=(-Rn.metrics.top-si)*Rn.scale+Yo[1],cs=So+gn.w*Rn.scale/Pn,Ns=Uo+gn.h*Rn.scale/Pn,vo=new Xe(So,Uo),jo=new Xe(cs,Uo),Xo=new Xe(So,Ns),co=new Xe(cs,Ns);if(Mr){const Sr=new Xe(-lo,lo- -17),To=-Math.PI/2,Zi=12-lo,ya=new Xe(22-Zi,-(Rn.imageName?Zi:0)),ds=new Xe(...no);vo._rotateAround(To,Sr)._add(ya)._add(ds),jo._rotateAround(To,Sr)._add(ya)._add(ds),Xo._rotateAround(To,Sr)._add(ya)._add(ds),co._rotateAround(To,Sr)._add(ya)._add(ds)}if(Tn){const Sr=Math.sin(Tn),To=Math.cos(Tn),Zi=[To,-Sr,Sr,To];vo._matMult(Zi),jo._matMult(Zi),Xo._matMult(Zi),co._matMult(Zi)}const Bs=new Xe(0,0),us=new Xe(0,0);En.push({tl:vo,tr:jo,bl:Xo,br:co,tex:gn,writingMode:bt.writingMode,glyphOffset:_a,sectionIndex:Rn.sectionIndex,isSDF:ti,pixelOffsetTL:Bs,pixelOffsetBR:us,minFontScaleX:0,minFontScaleY:0})}return En}(0,a,O,v,w,E,f,o.allowVerticalPlacement),et=o.textSizeData;let Mt=null;"source"===et.kind?(Mt=[zl*v.layout.get("text-size").evaluate(E,{})],Mt[0]>ws&&Et(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===et.kind&&(Mt=[zl*be.compositeTextSizes[0].evaluate(E,{},Ce),zl*be.compositeTextSizes[1].evaluate(E,{},Ce)],(Mt[0]>ws||Mt[1]>ws)&&Et(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Je,Mt,O,w,E,K,e,N.lineStartIndex,N.lineLength,_e,Ce);for(const Bt of ie)oe[Bt]=o.text.placedSymbolArray.length-1;return 4*Je.length}function Jp(o){for(const e in o)return o[e];return null}function Qp(o,e,a,f){const v=o.compareText;if(e in v){const w=v[e];for(let E=w.length-1;E>=0;E--)if(f.dist(w[E])<a)return!0}else v[e]=[];return v[e].push(f),!1}const Wg=sc.VectorTileFeature.types,Id=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fh(o,e,a,f,v,w,E,O,N,K,ie,oe,_e){const be=O?Math.min(ws,Math.round(O[0])):0,Ce=O?Math.min(ws,Math.round(O[1])):0;o.emplaceBack(e,a,Math.round(32*f),Math.round(32*v),w,E,(be<<1)+(N?1:0),Ce,16*K,16*ie,256*oe,256*_e)}function Xs(o,e,a){o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a),o.emplaceBack(e.x,e.y,a)}function Ad(o){for(const e of o.sections)if(Nc(e.text))return!0;return!1}class Vu{constructor(e){this.layoutVertexArray=new ln,this.indexArray=new Gr,this.programConfigurations=e,this.segments=new pr,this.dynamicLayoutVertexArray=new ci,this.opacityVertexArray=new Bn,this.placedSymbolArray=new Ft}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,a,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pm.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,fm.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Id,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mn("SymbolBuffers",Vu);class Pd{constructor(e,a,f){this.layoutVertexArray=new e,this.layoutAttributes=a,this.indexArray=new f,this.segments=new pr,this.collisionVertexArray=new vr}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,mm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mn("CollisionBuffers",Pd);class lc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(E=>E.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nc([]),this.placementViewportMatrix=nc([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gp(this.zoom,a["text-size"]),this.iconSizeData=Gp(this.zoom,a["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),w=f.get("symbol-z-order");this.canOverlap="never"!==Uu(f,"text-overlap","text-allow-overlap")||"never"!==Uu(f,"icon-overlap","icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==w&&!v.isConstant(),this.sortFeaturesByY=("viewport-y"===w||"auto"===w&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===f.get("symbol-placement")&&(this.writingModes=f.get("text-writing-mode").map(E=>m.WritingMode[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=e.sourceID}createArrays(){this.text=new Vu(new _l(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Vu(new _l(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new sn,this.lineVertexArray=new an,this.symbolInstances=new Qt}calculateGlyphDependencies(e,a,f,v,w){for(let E=0;E<e.length;E++)if(a[e.charCodeAt(E)]=!0,(f||v)&&w){const O=Ou[e.charAt(E)];O&&(a[O.charCodeAt(0)]=!0)}}populate(e,a,f){const v=this.layers[0],w=v.layout,E=w.get("text-font"),O=w.get("text-field"),N=w.get("icon-image"),K=("constant"!==O.value.kind||O.value.value instanceof Ve&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&("constant"!==E.value.kind||E.value.value.length>0),ie="constant"!==N.value.kind||!!N.value.value||Object.keys(N.parameters).length>0,oe=w.get("symbol-sort-key");if(this.features=[],!K&&!ie)return;const _e=a.iconDependencies,be=a.glyphDependencies,Ce=a.availableImages,Je=new ir(this.zoom);for(const{feature:et,id:Mt,index:Bt,sourceLayerIndex:bt}of e){const Rt=v._featureFilter.needGeometry,rn=Ys(et,Rt);if(!v._featureFilter.filter(Je,rn,f))continue;let Xt,Vn;if(Rt||(rn.geometry=Ec(et)),K){const Fn=v.getValueAndResolveTokens("text-field",rn,f,Ce),Tn=Ve.factory(Fn);Ad(Tn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===La()||this.hasRTLText&&Ko.isParsed())&&(Xt=Pu(Tn,v,rn))}if(ie){const Fn=v.getValueAndResolveTokens("icon-image",rn,f,Ce);Vn=Fn instanceof Gt?Fn:Gt.fromString(Fn)}if(!Xt&&!Vn)continue;const Hn=this.sortFeaturesByKey?oe.evaluate(rn,{},f):void 0;if(this.features.push({id:Mt,text:Xt,icon:Vn,index:Bt,sourceLayerIndex:bt,geometry:rn.geometry,properties:et.properties,type:Wg[et.type],sortKey:Hn}),Vn&&(_e[Vn.name]=!0),Xt){const Fn=E.evaluate(rn,{},f).join(","),Tn="viewport"!==w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.WritingMode.vertical)>=0;for(const En of Xt.sections)if(En.image)_e[En.image.name]=!0;else{const Nn=yc(Xt.toString()),Rn=En.fontStack||Fn,gn=be[Rn]=be[Rn]||{};this.calculateGlyphDependencies(En.text,gn,Tn,this.allowVerticalPlacement,Nn)}}}"line"===w.get("symbol-placement")&&(this.features=function(et){const Mt={},Bt={},bt=[];let Rt=0;function rn(Fn){bt.push(et[Fn]),Rt++}function Xt(Fn,Tn,En){const Nn=Bt[Fn];return delete Bt[Fn],Bt[Tn]=Nn,bt[Nn].geometry[0].pop(),bt[Nn].geometry[0]=bt[Nn].geometry[0].concat(En[0]),Nn}function Vn(Fn,Tn,En){const Nn=Mt[Tn];return delete Mt[Tn],Mt[Fn]=Nn,bt[Nn].geometry[0].shift(),bt[Nn].geometry[0]=En[0].concat(bt[Nn].geometry[0]),Nn}function Hn(Fn,Tn,En){const Nn=En?Tn[0][Tn[0].length-1]:Tn[0][0];return`${Fn}:${Nn.x}:${Nn.y}`}for(let Fn=0;Fn<et.length;Fn++){const Tn=et[Fn],En=Tn.geometry,Nn=Tn.text?Tn.text.toString():null;if(!Nn){rn(Fn);continue}const Rn=Hn(Nn,En),gn=Hn(Nn,En,!0);if(Rn in Bt&&gn in Mt&&Bt[Rn]!==Mt[gn]){const si=Vn(Rn,gn,En),ti=Xt(Rn,gn,bt[si].geometry);delete Mt[Rn],delete Bt[gn],Bt[Hn(Nn,bt[ti].geometry,!0)]=ti,bt[si].geometry=null}else Rn in Bt?Xt(Rn,gn,En):gn in Mt?Vn(Rn,gn,En):(rn(Fn),Mt[Rn]=Rt-1,Bt[gn]=Rt-1)}return bt.filter(Fn=>Fn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((et,Mt)=>et.sortKey-Mt.sortKey)}update(e,a,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,a,this.layers,f),this.icon.programConfigurations.updatePaintArrays(e,a,this.layers,f))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,a){const f=this.lineVertexArray.length;if(void 0!==e.segment){let v=e.dist(a[e.segment+1]),w=e.dist(a[e.segment]);const E={};for(let O=e.segment+1;O<a.length;O++)E[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:v},O<a.length-1&&(v+=a[O+1].dist(a[O]));for(let O=e.segment||0;O>=0;O--)E[O]={x:a[O].x,y:a[O].y,tileUnitDistanceFromAnchor:w},O>0&&(w+=a[O-1].dist(a[O]));for(let O=0;O<a.length;O++){const N=E[O];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(e,a,f,v,w,E,O,N,K,ie,oe,_e){const be=e.indexArray,Ce=e.layoutVertexArray,Je=e.segments.prepareSegment(4*a.length,Ce,be,this.canOverlap?E.sortKey:void 0),et=this.glyphOffsetArray.length,Mt=Je.vertexLength,Bt=this.allowVerticalPlacement&&O===m.WritingMode.vertical?Math.PI/2:0,bt=E.text&&E.text.sections;for(let Rt=0;Rt<a.length;Rt++){const{tl:rn,tr:Xt,bl:Vn,br:Hn,tex:Fn,pixelOffsetTL:Tn,pixelOffsetBR:En,minFontScaleX:Nn,minFontScaleY:Rn,glyphOffset:gn,isSDF:si,sectionIndex:ti}=a[Rt],Pn=Je.vertexLength,br=gn[1];Fh(Ce,N.x,N.y,rn.x,br+rn.y,Fn.x,Fn.y,f,si,Tn.x,Tn.y,Nn,Rn),Fh(Ce,N.x,N.y,Xt.x,br+Xt.y,Fn.x+Fn.w,Fn.y,f,si,En.x,Tn.y,Nn,Rn),Fh(Ce,N.x,N.y,Vn.x,br+Vn.y,Fn.x,Fn.y+Fn.h,f,si,Tn.x,En.y,Nn,Rn),Fh(Ce,N.x,N.y,Hn.x,br+Hn.y,Fn.x+Fn.w,Fn.y+Fn.h,f,si,En.x,En.y,Nn,Rn),Xs(e.dynamicLayoutVertexArray,N,Bt),be.emplaceBack(Pn,Pn+1,Pn+2),be.emplaceBack(Pn+1,Pn+2,Pn+3),Je.vertexLength+=4,Je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(gn[0]),Rt!==a.length-1&&ti===a[Rt+1].sectionIndex||e.programConfigurations.populatePaintArrays(Ce.length,E,E.index,{},_e,bt&&bt[ti])}e.placedSymbolArray.emplaceBack(N.x,N.y,et,this.glyphOffsetArray.length-et,Mt,K,ie,N.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],O,0,!1,0,oe)}_addCollisionDebugVertex(e,a,f,v,w,E){return a.emplaceBack(0,0),e.emplaceBack(f.x,f.y,v,w,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(e,a,f,v,w,E,O){const N=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),K=N.vertexLength,ie=w.layoutVertexArray,oe=w.collisionVertexArray,_e=O.anchorX,be=O.anchorY;this._addCollisionDebugVertex(ie,oe,E,_e,be,new Xe(e,a)),this._addCollisionDebugVertex(ie,oe,E,_e,be,new Xe(f,a)),this._addCollisionDebugVertex(ie,oe,E,_e,be,new Xe(f,v)),this._addCollisionDebugVertex(ie,oe,E,_e,be,new Xe(e,v)),N.vertexLength+=4;const Ce=w.indexArray;Ce.emplaceBack(K,K+1),Ce.emplaceBack(K+1,K+2),Ce.emplaceBack(K+2,K+3),Ce.emplaceBack(K+3,K),N.primitiveLength+=4}addDebugCollisionBoxes(e,a,f,v){for(let w=e;w<a;w++){const E=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,v?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Pd(ji,bd.members,Zr),this.iconCollisionBox=new Pd(ji,bd.members,Zr);for(let e=0;e<this.symbolInstances.length;e++){const a=this.symbolInstances.get(e);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(e,a,f,v,w,E,O,N,K){const ie={};for(let oe=a;oe<f;oe++){const _e=e.get(oe);ie.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.textFeatureIndex=_e.featureIndex;break}for(let oe=v;oe<w;oe++){const _e=e.get(oe);ie.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.verticalTextFeatureIndex=_e.featureIndex;break}for(let oe=E;oe<O;oe++){const _e=e.get(oe);ie.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.iconFeatureIndex=_e.featureIndex;break}for(let oe=N;oe<K;oe++){const _e=e.get(oe);ie.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.verticalIconFeatureIndex=_e.featureIndex;break}return ie}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const f=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,a){const f=e.placedSymbolArray.get(a),v=f.vertexStartIndex+4*f.numGlyphs;for(let w=f.vertexStartIndex;w<v;w+=4)e.indexArray.emplaceBack(w,w+1,w+2),e.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const a=Math.sin(e),f=Math.cos(e),v=[],w=[],E=[];for(let O=0;O<this.symbolInstances.length;++O){E.push(O);const N=this.symbolInstances.get(O);v.push(0|Math.round(a*N.anchorX+f*N.anchorY)),w.push(N.featureIndex)}return E.sort((O,N)=>v[O]-v[N]||w[N]-w[O]),E}addToSortKeyRanges(e,a){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===a?f.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const f=this.symbolInstances.get(a);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,w,E)=>{v>=0&&E.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Mn("SymbolBucket",lc,{omit:["layers","collisionBoxArray","features","compareText"]}),lc.MAX_GLYPHS=65535,lc.addDynamicAttributes=Xs;const ef=new dr({"symbol-placement":new Yn(k.layout_symbol["symbol-placement"]),"symbol-spacing":new Yn(k.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yn(k.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zn(k.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yn(k.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yn(k.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Yn(k.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Yn(k.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yn(k.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yn(k.layout_symbol["icon-rotation-alignment"]),"icon-size":new zn(k.layout_symbol["icon-size"]),"icon-text-fit":new Yn(k.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yn(k.layout_symbol["icon-text-fit-padding"]),"icon-image":new zn(k.layout_symbol["icon-image"]),"icon-rotate":new zn(k.layout_symbol["icon-rotate"]),"icon-padding":new zn(k.layout_symbol["icon-padding"]),"icon-keep-upright":new Yn(k.layout_symbol["icon-keep-upright"]),"icon-offset":new zn(k.layout_symbol["icon-offset"]),"icon-anchor":new zn(k.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yn(k.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yn(k.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yn(k.layout_symbol["text-rotation-alignment"]),"text-field":new zn(k.layout_symbol["text-field"]),"text-font":new zn(k.layout_symbol["text-font"]),"text-size":new zn(k.layout_symbol["text-size"]),"text-max-width":new zn(k.layout_symbol["text-max-width"]),"text-line-height":new Yn(k.layout_symbol["text-line-height"]),"text-letter-spacing":new zn(k.layout_symbol["text-letter-spacing"]),"text-justify":new zn(k.layout_symbol["text-justify"]),"text-radial-offset":new zn(k.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yn(k.layout_symbol["text-variable-anchor"]),"text-anchor":new zn(k.layout_symbol["text-anchor"]),"text-max-angle":new Yn(k.layout_symbol["text-max-angle"]),"text-writing-mode":new Yn(k.layout_symbol["text-writing-mode"]),"text-rotate":new zn(k.layout_symbol["text-rotate"]),"text-padding":new Yn(k.layout_symbol["text-padding"]),"text-keep-upright":new Yn(k.layout_symbol["text-keep-upright"]),"text-transform":new zn(k.layout_symbol["text-transform"]),"text-offset":new zn(k.layout_symbol["text-offset"]),"text-allow-overlap":new Yn(k.layout_symbol["text-allow-overlap"]),"text-overlap":new Yn(k.layout_symbol["text-overlap"]),"text-ignore-placement":new Yn(k.layout_symbol["text-ignore-placement"]),"text-optional":new Yn(k.layout_symbol["text-optional"])});var cc={paint:new dr({"icon-opacity":new zn(k.paint_symbol["icon-opacity"]),"icon-color":new zn(k.paint_symbol["icon-color"]),"icon-halo-color":new zn(k.paint_symbol["icon-halo-color"]),"icon-halo-width":new zn(k.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zn(k.paint_symbol["icon-halo-blur"]),"icon-translate":new Yn(k.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yn(k.paint_symbol["icon-translate-anchor"]),"text-opacity":new zn(k.paint_symbol["text-opacity"]),"text-color":new zn(k.paint_symbol["text-color"],{runtimeType:en,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new zn(k.paint_symbol["text-halo-color"]),"text-halo-width":new zn(k.paint_symbol["text-halo-width"]),"text-halo-blur":new zn(k.paint_symbol["text-halo-blur"]),"text-translate":new Yn(k.paint_symbol["text-translate"]),"text-translate-anchor":new Yn(k.paint_symbol["text-translate-anchor"])}),layout:ef};class tf{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ot,this.defaultValue=e}evaluate(e){if(e.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(e.formattedSection))return a.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mn("FormatSectionOverride",tf,{omit:["defaultValue"]});class Od extends hr{constructor(e){super(e,cc)}recalculate(e,a){if(super.recalculate(e,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const w of f)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,a,f,v){const w=this.layout.get(e).evaluate(a,{},f,v),E=this._unevaluatedLayout._values[e];return E.isDataDriven()||X(E.value)||!w?w:(O=a.properties,w.replace(/{([^{}]+)}/g,(K,ie)=>ie in O?String(O[ie]):""));var O}createBucket(e){return new lc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of cc.paint.overridableProperties){if(!Od.hasPaintOverride(this.layout,e))continue;const a=this.paint.get(e),f=new tf(a),v=new ee(f,a.property.specification);let w=null;w="constant"===a.value.kind||"source"===a.value.kind?new fe("source",v):new Wt("composite",v,a.value.zoomStops),this.paint._values[e]=new Ls(a.property,w,a.parameters)}}_handleOverridablePaintPropertyUpdate(e,a,f){return!(!this.layout||a.isDataDriven()||f.isDataDriven())&&Od.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,a){const f=e.get("text-field"),v=cc.paint.properties[a];let w=!1;const E=O=>{for(const N of O)if(v.overrides&&v.overrides.hasOverride(N))return void(w=!0)};if("constant"===f.value.kind&&f.value.value instanceof Ve)E(f.value.value.sections);else if("source"===f.value.kind){const O=K=>{w||(K instanceof kn&&Un(K.value)===Se?E(K.value.sections):K instanceof Co?E(K.sections):K.eachChild(O))},N=f.value;N._styleExpression&&O(N._styleExpression.expression)}return w}}function Uu(o,e,a){let f="never";const v=o.get(e);return v?f=v:o.get(a)&&(f="always"),f}var Nh={paint:new dr({"background-color":new Yn(k.paint_background["background-color"]),"background-pattern":new da(k.paint_background["background-pattern"]),"background-opacity":new Yn(k.paint_background["background-opacity"])})},nf={paint:new dr({"raster-opacity":new Yn(k.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yn(k.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yn(k.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yn(k.paint_raster["raster-brightness-max"]),"raster-saturation":new Yn(k.paint_raster["raster-saturation"]),"raster-contrast":new Yn(k.paint_raster["raster-contrast"]),"raster-resampling":new Yn(k.paint_raster["raster-resampling"]),"raster-fade-duration":new Yn(k.paint_raster["raster-fade-duration"])})};class ru extends hr{constructor(e){super(e,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const bl={circle:class extends hr{constructor(o){super(o,Qf)}createBucket(o){return new lh(o)}queryRadius(o){const e=o;return id("circle-radius",this,e)+id("circle-stroke-width",this,e)+gu(this.paint.get("circle-translate"))}queryIntersectsFeature(o,e,a,f,v,w,E,O){const N=hh(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,E),K=this.paint.get("circle-radius").evaluate(e,a)+this.paint.get("circle-stroke-width").evaluate(e,a),ie="map"===this.paint.get("circle-pitch-alignment"),oe=ie?N:(Ce=O,N.map(Je=>sd(Je,Ce))),_e=ie?K*E:K;var Ce;for(const be of f)for(const Ce of be){const Je=ie?Ce:sd(Ce,O);let et=_e;const Mt=vu([],[Ce.x,Ce.y,0,1],O);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?et*=Mt[3]/w.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(et*=w.cameraToCenterDistance/Mt[3]),vp(oe,Je,et))return!0}return!1}},heatmap:class extends hr{constructor(o){super(o,em),this._updateColorRamp()}createBucket(o){return new za(o)}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=rc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends hr{constructor(o){super(o,tm)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends hr{constructor(o){super(o,Pp)}recalculate(o,e){super.recalculate(o,e);const a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new gh(o)}queryRadius(){return gu(this.paint.get("fill-translate"))}queryIntersectsFeature(o,e,a,f,v,w,E){return bp(hh(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,E),f)}isTileClipped(){return!0}},"fill-extrusion":class extends hr{constructor(o){super(o,Sc)}createBucket(o){return new Iu(o)}queryRadius(){return gu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,e,a,f,v,w,E,O){const N=hh(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,E),K=this.paint.get("fill-extrusion-height").evaluate(e,a),ie=this.paint.get("fill-extrusion-base").evaluate(e,a),oe=function(be,Ce,Je,et){const Mt=[];for(const Bt of be){const bt=[Bt.x,Bt.y,0,1];vu(bt,bt,Ce),Mt.push(new Xe(bt[0]/bt[3],bt[1]/bt[3]))}return Mt}(N,O),_e=function(be,Ce,Je,et){const Mt=[],Bt=[],bt=et[8]*Ce,Rt=et[9]*Ce,rn=et[10]*Ce,Xt=et[11]*Ce,Vn=et[8]*Je,Hn=et[9]*Je,Fn=et[10]*Je,Tn=et[11]*Je;for(const En of be){const Nn=[],Rn=[];for(const gn of En){const si=gn.x,ti=gn.y,Pn=et[0]*si+et[4]*ti+et[12],br=et[1]*si+et[5]*ti+et[13],Mr=et[2]*si+et[6]*ti+et[14],lo=et[3]*si+et[7]*ti+et[15],_a=Mr+rn,Yo=lo+Xt,no=Pn+Vn,So=br+Hn,Uo=Mr+Fn,cs=lo+Tn,Ns=new Xe((Pn+bt)/Yo,(br+Rt)/Yo);Ns.z=_a/Yo,Nn.push(Ns);const vo=new Xe(no/cs,So/cs);vo.z=Uo/cs,Rn.push(vo)}Mt.push(Nn),Bt.push(Rn)}return[Mt,Bt]}(f,ie,K,O);return function(be,Ce,Je){let et=1/0;bp(Je,Ce)&&(et=gd(Je,Ce[0]));for(let Mt=0;Mt<Ce.length;Mt++){const Bt=Ce[Mt],bt=be[Mt];for(let Rt=0;Rt<Bt.length-1;Rt++){const rn=Bt[Rt],Xt=[rn,Bt[Rt+1],bt[Rt+1],bt[Rt],rn];Xf(Je,Xt)&&(et=Math.min(et,gd(Je,Xt)))}}return et!==1/0&&et}(_e[0],_e[1],oe)}},line:class extends hr{constructor(o){super(o,Ch),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){"line-gradient"===o&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ra,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,e){super.recalculate(o,e),this.paint._values["line-floorwidth"]=Va.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new wh(o)}queryRadius(o){const e=o,a=Eh(id("line-width",this,e),id("line-gap-width",this,e)),f=id("line-offset",this,e);return a/2+Math.abs(f)+gu(this.paint.get("line-translate"))}queryIntersectsFeature(o,e,a,f,v,w,E){const O=hh(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,E),N=E/2*Eh(this.paint.get("line-width").evaluate(e,a),this.paint.get("line-gap-width").evaluate(e,a)),K=this.paint.get("line-offset").evaluate(e,a);return K&&(f=function(ie,oe){const _e=[];for(let be=0;be<ie.length;be++){const Ce=ie[be],Je=[];for(let et=0;et<Ce.length;et++){const Mt=Ce[et-1],Bt=Ce[et],bt=Ce[et+1],Rt=0===et?new Xe(0,0):Bt.sub(Mt)._unit()._perp(),rn=et===Ce.length-1?new Xe(0,0):bt.sub(Bt)._unit()._perp(),Xt=Rt._add(rn)._unit(),Vn=Xt.x*rn.x+Xt.y*rn.y;0!==Vn&&Xt._mult(1/Vn),Je.push(Xt._mult(oe)._add(Bt))}_e.push(Je)}return _e}(f,K*E)),function(ie,oe,_e){for(let be=0;be<oe.length;be++){const Ce=oe[be];if(ie.length>=3)for(let Je=0;Je<Ce.length;Je++)if(jc(ie,Ce[Je]))return!0;if(jg(ie,Ce,_e))return!0}return!1}(O,f,N)}isTileClipped(){return!0}},symbol:Od,background:class extends hr{constructor(o){super(o,Nh)}},raster:class extends hr{constructor(o){super(o,nf)}}};class Bh{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ju=6371008.8;class zr{constructor(e,a){if(isNaN(e)||isNaN(a))throw new Error(`Invalid LngLat object: (${e}, ${a})`);if(this.lng=+e,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zr(Ge(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const a=Math.PI/180,f=this.lat*a,v=e.lat*a,w=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((e.lng-this.lng)*a);return ju*Math.acos(Math.min(w,1))}toBounds(e=0){const a=360*e/40075017,f=a/Math.cos(Math.PI/180*this.lat);return new Ua(new zr(this.lng-f,this.lat-a),new zr(this.lng+f,this.lat+a))}static convert(e){if(e instanceof zr)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new zr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new zr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ua{constructor(e,a){e&&(a?this.setSouthWest(e).setNorthEast(a):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof zr?new zr(e.lng,e.lat):zr.convert(e),this}setSouthWest(e){return this._sw=e instanceof zr?new zr(e.lng,e.lat):zr.convert(e),this}extend(e){const a=this._sw,f=this._ne;let v,w;if(e instanceof zr)v=e,w=e;else{if(!(e instanceof Ua))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ua.convert(e)):this.extend(zr.convert(e)):this;if(v=e._sw,w=e._ne,!v||!w)return this}return a||f?(a.lng=Math.min(v.lng,a.lng),a.lat=Math.min(v.lat,a.lat),f.lng=Math.max(w.lng,f.lng),f.lat=Math.max(w.lat,f.lat)):(this._sw=new zr(v.lng,v.lat),this._ne=new zr(w.lng,w.lat)),this}getCenter(){return new zr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new zr(this.getWest(),this.getNorth())}getSouthEast(){return new zr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:a,lat:f}=zr.convert(e);let v=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&v}static convert(e){return e instanceof Ua?e:e&&new Ua(e)}}const rf=2*Math.PI*ju;function zh(o){return rf*Math.cos(o*Math.PI/180)}function sf(o){return(180+o)/360}function af(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Vh(o,e){return o/zh(e)}function kd(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Hu{constructor(e,a,f=0){this.x=+e,this.y=+a,this.z=+f}static fromLngLat(e,a=0){const f=zr.convert(e);return new Hu(sf(f.lng),af(f.lat),Vh(a,f.lat))}toLngLat(){return new zr(360*this.x-180,kd(this.y))}toAltitude(){return this.z*zh(kd(this.y))}meterInMercatorCoordinateUnits(){return 1/rf*(e=kd(this.y),1/Math.cos(e*Math.PI/180));var e}}var $u,Uh={exports:{}};!function(a){function f(w,E,O){var N=v(256*w,256*(E=Math.pow(2,O)-E-1),O),K=v(256*(w+1),256*(E+1),O);return N[0]+","+N[1]+","+K[0]+","+K[1]}function v(w,E,O){var N=2*Math.PI*6378137/256/Math.pow(2,O);return[w*N-2*Math.PI*6378137/2,E*N-2*Math.PI*6378137/2]}a.getURL=function(w,E,O,N,K,ie){return ie=ie||{},w+"?"+["bbox="+f(O,N,K),"format="+(ie.format||"image/png"),"service="+(ie.service||"WMS"),"version="+(ie.version||"1.1.1"),"request="+(ie.request||"GetMap"),"srs="+(ie.srs||"EPSG:3857"),"width="+(ie.width||256),"height="+(ie.height||256),"layers="+E].join("&")},a.getTileBBox=f,a.getMercCoords=v,Object.defineProperty(a,"__esModule",{value:!0})}(Uh.exports);class Gu{constructor(e,a,f){if(e<0||e>25||f<0||f>=Math.pow(2,e)||a<0||a>=Math.pow(2,e))throw new Error(`x=${a}, y=${f}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=a,this.y=f,this.key=ou(0,e,e,a,f)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,a,f){const v=Uh.exports.getTileBBox(this.x,this.y,this.z),w=function(E,O,N){let K,ie="";for(let oe=E;oe>0;oe--)K=1<<oe-1,ie+=(O&K?1:0)+(N&K?2:0);return ie}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===f?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,w).replace(/{bbox-epsg-3857}/g,v)}isChildOf(e){const a=this.z-e.z;return a>0&&e.x===this.x>>a&&e.y===this.y>>a}getTilePoint(e){const a=Math.pow(2,this.z);return new Xe((e.x*a-this.x)*Wr,(e.y*a-this.y)*Wr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lf{constructor(e,a){this.wrap=e,this.canonical=a,this.key=ou(e,a.z,a.z,a.x,a.y)}}class Js{constructor(e,a,f,v,w){if(e<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${f}`);this.overscaledZ=e,this.wrap=a,this.canonical=new Gu(f,+v,+w),this.key=ou(a,e,f,v,w)}clone(){return new Js(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-e;return e>this.canonical.z?new Js(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Js(e,this.wrap,e,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(e,a){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-e;return e>this.canonical.z?ou(this.wrap*+a,e,this.canonical.z,this.canonical.x,this.canonical.y):ou(this.wrap*+a,e,e,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const a=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>a&&e.canonical.y===this.canonical.y>>a}children(e){if(this.overscaledZ>=e)return[new Js(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new Js(a,this.wrap,a,f,v),new Js(a,this.wrap,a,f+1,v),new Js(a,this.wrap,a,f,v+1),new Js(a,this.wrap,a,f+1,v+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Js(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Js(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Hu(e.x-this.wrap,e.y))}}function ou(o,e,a,f,v){(o*=2)<0&&(o=-1*o-1);const w=1<<a;return(w*w*o+w*v+f).toString(36)+a.toString(36)+e.toString(36)}Mn("CanonicalTileID",Gu),Mn("OverscaledTileID",Js,{omit:["posMatrix"]});class jh{constructor(e,a,f){if(this.uid=e,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(f&&"mapbox"!==f&&"terrarium"!==f)return void Et(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const v=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=f||"mapbox";for(let w=0;w<v;w++)this.data[this._idx(-1,w)]=this.data[this._idx(0,w)],this.data[this._idx(v,w)]=this.data[this._idx(v-1,w)],this.data[this._idx(w,-1)]=this.data[this._idx(w,0)],this.data[this._idx(w,v)]=this.data[this._idx(w,v-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(v,-1)]=this.data[this._idx(v-1,0)],this.data[this._idx(-1,v)]=this.data[this._idx(0,v-1)],this.data[this._idx(v,v)]=this.data[this._idx(v-1,v-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let w=0;w<v;w++)for(let E=0;E<v;E++){const O=this.get(w,E);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(e,a){const f=new Uint8Array(this.data.buffer),v=4*this._idx(e,a);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(f[v],f[v+1],f[v+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,a){if(e<-1||e>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(e+1)}_unpackMapbox(e,a,f){return(256*e*256+256*a+f)/10-1e4}_unpackTerrarium(e,a,f){return 256*e+a+f/256-32768}getPixels(){return new yo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,a,f){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let v=a*this.dim,w=a*this.dim+this.dim,E=f*this.dim,O=f*this.dim+this.dim;switch(a){case-1:v=w-1;break;case 1:w=v+1}switch(f){case-1:E=O-1;break;case 1:O=E+1}const N=-a*this.dim,K=-f*this.dim;for(let ie=E;ie<O;ie++)for(let oe=v;oe<w;oe++)this.data[this._idx(oe,ie)]=e.data[this._idx(oe+N,ie+K)]}}Mn("DEMData",jh);class uc{constructor(e){this._stringToNumber={},this._numberToString=[];for(let a=0;a<e.length;a++){const f=e[a];this._stringToNumber[f]=a,this._numberToString[a]=f}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Rd{constructor(e,a,f,v,w){this.type="Feature",this._vectorTileFeature=e,e._z=a,e._x=f,e._y=v,this.properties=e.properties,this.id=w}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(e[a]=this[a]);return e}}class Hh{constructor(e,a){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Xr(Wr,16,0),this.grid3D=new Xr(Wr,16,0),this.featureIndexArray=new P,this.promoteId=a}insert(e,a,f,v,w,E){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,w);const N=E?this.grid3D:this.grid;for(let K=0;K<a.length;K++){const ie=a[K],oe=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ie.length;_e++){const be=ie[_e];oe[0]=Math.min(oe[0],be.x),oe[1]=Math.min(oe[1],be.y),oe[2]=Math.max(oe[2],be.x),oe[3]=Math.max(oe[3],be.y)}oe[0]<Wr&&oe[1]<Wr&&oe[2]>=0&&oe[3]>=0&&N.insert(O,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sc.VectorTile(new zp(this.rawTileData)).layers,this.sourceLayerCoder=new uc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,a,f,v){this.loadVTLayers();const w=e.params||{},E=Wr/e.tileSize/e.scale,O=Xl(w.filter),N=e.queryGeometry,K=e.queryPadding*E,ie=Em(N),oe=this.grid.query(ie.minX-K,ie.minY-K,ie.maxX+K,ie.maxY+K),_e=Em(e.cameraQueryGeometry),be=this.grid3D.query(_e.minX-K,_e.minY-K,_e.maxX+K,_e.maxY+K,(et,Mt,Bt,bt)=>function(Rt,rn,Xt,Vn,Hn){for(const Tn of Rt)if(rn<=Tn.x&&Xt<=Tn.y&&Vn>=Tn.x&&Hn>=Tn.y)return!0;const Fn=[new Xe(rn,Xt),new Xe(rn,Hn),new Xe(Vn,Hn),new Xe(Vn,Xt)];if(Rt.length>2)for(const Tn of Fn)if(jc(Rt,Tn))return!0;for(let Tn=0;Tn<Rt.length-1;Tn++)if(xp(Rt[Tn],Rt[Tn+1],Fn))return!0;return!1}(e.cameraQueryGeometry,et-K,Mt-K,Bt+K,bt+K));for(const et of be)oe.push(et);oe.sort(Ld);const Ce={};let Je;for(let et=0;et<oe.length;et++){const Mt=oe[et];if(Mt===Je)continue;Je=Mt;const Bt=this.featureIndexArray.get(Mt);let bt=null;this.loadMatchingFeature(Ce,Bt.bucketIndex,Bt.sourceLayerIndex,Bt.featureIndex,O,w.layers,w.availableImages,a,f,v,(Rt,rn,Xt)=>(bt||(bt=Ec(Rt)),rn.queryIntersectsFeature(N,Rt,Xt,bt,this.z,e.transform,E,e.pixelPosMatrix)))}return Ce}loadMatchingFeature(e,a,f,v,w,E,O,N,K,ie,oe){const _e=this.bucketLayerIDs[a];if(E&&!function(et,Mt){for(let Bt=0;Bt<et.length;Bt++)if(Mt.indexOf(et[Bt])>=0)return!0;return!1}(E,_e))return;const be=this.sourceLayerCoder.decode(f),Ce=this.vtLayers[be].feature(v);if(w.needGeometry){const et=Ys(Ce,!0);if(!w.filter(new ir(this.tileID.overscaledZ),et,this.tileID.canonical))return}else if(!w.filter(new ir(this.tileID.overscaledZ),Ce))return;const Je=this.getId(Ce,be);for(let et=0;et<_e.length;et++){const Mt=_e[et];if(E&&E.indexOf(Mt)<0)continue;const Bt=N[Mt];if(!Bt)continue;let bt={};Je&&ie&&(bt=ie.getState(Bt.sourceLayer||"_geojsonTileLayer",Je));const Rt=rt({},K[Mt]);Rt.paint=cf(Rt.paint,Bt.paint,Ce,bt,O),Rt.layout=cf(Rt.layout,Bt.layout,Ce,bt,O);const rn=!oe||oe(Ce,Bt,bt);if(!rn)continue;const Xt=new Rd(Ce,this.z,this.x,this.y,Je);Xt.layer=Rt;let Vn=e[Mt];void 0===Vn&&(Vn=e[Mt]=[]),Vn.push({featureIndex:v,feature:Xt,intersectionZ:rn})}}lookupSymbolFeatures(e,a,f,v,w,E,O,N){const K={};this.loadVTLayers();const ie=Xl(w);for(const oe of e)this.loadMatchingFeature(K,f,v,oe,ie,E,O,N,a);return K}hasLayer(e){for(const a of this.bucketLayerIDs)for(const f of a)if(e===f)return!0;return!1}getId(e,a){let f=e.id;return this.promoteId&&(f=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[a]],"boolean"==typeof f&&(f=Number(f))),f}}function cf(o,e,a,f,v){return lt(o,(w,E)=>{const O=e instanceof Pi?e.get(E):null;return O&&O.evaluate?O.evaluate(a,f,v):O})}function Em(o){let e=1/0,a=1/0,f=-1/0,v=-1/0;for(const w of o)e=Math.min(e,w.x),a=Math.min(a,w.y),f=Math.max(f,w.x),v=Math.max(v,w.y);return{minX:e,minY:a,maxX:f,maxY:v}}function Ld(o,e){return e-o}Mn("FeatureIndex",Hh,{omit:["rawTileData","sourceLayerCoder"]}),m.PerformanceMarkers=void 0,($u=m.PerformanceMarkers||(m.PerformanceMarkers={})).create="create",$u.load="load",$u.fullLoad="fullLoad";let su=null,au=[];const Fd=1e3/30,uf={mark(o){performance.mark(o)},frame(o){const e=o;null!=su&&au.push(e-su),su=e},clearMetrics(){su=null,au=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in m.PerformanceMarkers)performance.clearMarks(m.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",m.PerformanceMarkers.create,m.PerformanceMarkers.load),performance.measure("fullLoadTime",m.PerformanceMarkers.create,m.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,e=performance.getEntriesByName("fullLoadTime")[0].duration,a=au.length,f=1/(au.reduce((w,E)=>w+E,0)/a/1e3),v=au.filter(w=>w>Fd).reduce((w,E)=>w+(E-Fd)/Fd,0);return{loadTime:o,fullLoadTime:e,fps:f,percentDroppedFrames:v/(a+v)*100}}};m.AJAXError=mn,m.ARRAY_TYPE=Vo,m.Actor=class{constructor(o,e,a){this.target=o,this.parent=e,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ut(["receive","process"],this),this.invoker=new Bh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=At()?o:window}send(o,e,a,f,v=!1){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[w]=a);const E=Ut(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:o,hasCallback:!!a,targetMapId:f,mustQueue:v,sourceMapId:this.mapId,data:Cr(e,E)},E),{cancel:()=>{a&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(o){const e=o.data,a=e.id;if(a&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[a];const f=this.cancelCallbacks[a];delete this.cancelCallbacks[a],f&&f()}else At()||e.mustQueue?(this.tasks[a]=e,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,e)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),e=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(o,e)}processTask(o,e){if("<response>"===e.type){const a=this.callbacks[o];delete this.callbacks[o],a&&(e.error?a(vs(e.error)):a(null,vs(e.data)))}else{let a=!1;const f=Ut(this.globalScope)?void 0:[],v=e.hasCallback?(O,N)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:O?Cr(O):null,data:Cr(N,f)},f)}:O=>{a=!0};let w=null;const E=vs(e.data);if(this.parent[e.type])w=this.parent[e.type](e.sourceMapId,E,v);else if(this.parent.getWorkerSource){const O=e.type.split(".");w=this.parent.getWorkerSource(e.sourceMapId,O[0],E.source)[O[1]](E,v)}else v(new Error(`Could not find function ${e.type}`));!a&&w&&w.cancel&&(this.cancelCallbacks[o]=w.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},m.AlphaImage=Hc,m.CanonicalTileID=Gu,m.CollisionBoxArray=kt,m.CollisionCircleLayoutArray=class extends Q{},m.Color=me,m.DEMData=jh,m.DataConstantProperty=Yn,m.DictionaryCoder=uc,m.EXTENT=Wr,m.ErrorEvent=Me,m.EvaluationParameters=ir,m.Event=te,m.Evented=he,m.FeatureIndex=Hh,m.FillBucket=gh,m.FillExtrusionBucket=Iu,m.GeoJSONFeature=Rd,m.ImageAtlas=wd,m.ImagePosition=Ru,m.LineBucket=wh,m.LineStripIndexArray=class extends mt{},m.LngLat=zr,m.LngLatBounds=Ua,m.MercatorCoordinate=Hu,m.ONE_EM=24,m.OverscaledTileID=Js,m.PerformanceUtils=uf,m.Pos3dArray=class extends ss{},m.PosArray=S,m.Properties=dr,m.QuadTriangleArray=class extends ce{},m.RGBAImage=yo,m.RasterBoundsArray=class extends ha{},m.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return 0===o.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},m.ResourceType=fn,m.SegmentVector=pr,m.SymbolBucket=lc,m.Transitionable=ua,m.TriangleIndexArray=Gr,m.Uniform1f=Ba,m.Uniform1i=class extends Dr{constructor(o,e){super(o,e),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},m.Uniform2f=class extends Dr{constructor(o,e){super(o,e),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},m.Uniform3f=class extends Dr{constructor(o,e){super(o,e),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},m.Uniform4f=pu,m.UniformColor=zo,m.UniformMatrix4f=class extends Dr{constructor(o,e){super(o,e),this.current=Ll}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let e=1;e<16;e++)if(o[e]!==this.current[e]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},m.UnwrappedTileID=lf,m.ValidationError=R,m.ZoomHistory=Qa,m.add=function(o,e,a){return o[0]=e[0]+a[0],o[1]=e[1]+a[1],o[2]=e[2]+a[2],o},m.addDynamicAttributes=Xs,m.asyncAll=function(o,e,a){if(!o.length)return a(null,[]);let f=o.length;const v=new Array(o.length);let w=null;o.forEach((E,O)=>{e(E,(N,K)=>{N&&(w=N),v[O]=K,0==--f&&a(w,v)})})},m.bezier=Ye,m.bindAll=ut,m.cacheEntryPossiblyAdded=function(o){gi++,gi>yi&&(o.getActor().send("enforceCacheSizeLimit",di),gi=0)},m.clamp=pe,m.clearTileCache=function(o){const e=caches.delete(pn);o&&e.catch(o).then(()=>o())},m.clipLine=ls,m.clone=function(o){var e=new Vo(16);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e},m.clone$1=Dt,m.clone$2=function(o){var e=new Vo(3);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e},m.collisionCircleLayout=gm,m.config=St,m.copy=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},m.create=function(){var o=new Vo(16);return Vo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},m.create$1=rd,m.createExpression=W,m.createFilter=Xl,m.createLayout=lr,m.createStyleLayer=function(o){return"custom"===o.type?new ru(o):new bl[o.type](o)},m.cross=function(o,e,a){var f=e[0],v=e[1],w=e[2],E=a[0],O=a[1],N=a[2];return o[0]=v*N-w*O,o[1]=w*E-f*N,o[2]=f*O-v*E,o},m.dot=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]},m.dot$1=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]},m.earthRadius=ju,m.ease=Re,m.emitValidationErrors=Br,m.enforceCacheSizeLimit=function(o){yn(),un&&un.then(e=>{e.keys().then(a=>{for(let f=0;f<a.length-o;f++)e.delete(a[f])})})},m.equals=function(o,e){var a=o[0],f=o[1],v=o[2],w=o[3],E=o[4],O=o[5],N=o[6],K=o[7],ie=o[8],oe=o[9],_e=o[10],be=o[11],Ce=o[12],Je=o[13],et=o[14],Mt=o[15],Bt=e[0],bt=e[1],Rt=e[2],rn=e[3],Xt=e[4],Vn=e[5],Hn=e[6],Fn=e[7],Tn=e[8],En=e[9],Nn=e[10],Rn=e[11],gn=e[12],si=e[13],ti=e[14],Pn=e[15];return Math.abs(a-Bt)<=as*Math.max(1,Math.abs(a),Math.abs(Bt))&&Math.abs(f-bt)<=as*Math.max(1,Math.abs(f),Math.abs(bt))&&Math.abs(v-Rt)<=as*Math.max(1,Math.abs(v),Math.abs(Rt))&&Math.abs(w-rn)<=as*Math.max(1,Math.abs(w),Math.abs(rn))&&Math.abs(E-Xt)<=as*Math.max(1,Math.abs(E),Math.abs(Xt))&&Math.abs(O-Vn)<=as*Math.max(1,Math.abs(O),Math.abs(Vn))&&Math.abs(N-Hn)<=as*Math.max(1,Math.abs(N),Math.abs(Hn))&&Math.abs(K-Fn)<=as*Math.max(1,Math.abs(K),Math.abs(Fn))&&Math.abs(ie-Tn)<=as*Math.max(1,Math.abs(ie),Math.abs(Tn))&&Math.abs(oe-En)<=as*Math.max(1,Math.abs(oe),Math.abs(En))&&Math.abs(_e-Nn)<=as*Math.max(1,Math.abs(_e),Math.abs(Nn))&&Math.abs(be-Rn)<=as*Math.max(1,Math.abs(be),Math.abs(Rn))&&Math.abs(Ce-gn)<=as*Math.max(1,Math.abs(Ce),Math.abs(gn))&&Math.abs(Je-si)<=as*Math.max(1,Math.abs(Je),Math.abs(si))&&Math.abs(et-ti)<=as*Math.max(1,Math.abs(et),Math.abs(ti))&&Math.abs(Mt-Pn)<=as*Math.max(1,Math.abs(Mt),Math.abs(Pn))},m.evaluateSizeForFeature=function(o,{uSize:e,uSizeT:a},{lowerSize:f,upperSize:v}){return"source"===o.kind?f/zl:"composite"===o.kind?ar(f/zl,v/zl,a):e},m.evaluateSizeForZoom=function(o,e){let a=0,f=0;if("constant"===o.kind)f=o.layoutSize;else if("source"!==o.kind){const{interpolationType:v,minZoom:w,maxZoom:E}=o,O=v?pe(Ir.interpolationFactor(v,e,w,E),0,1):0;"camera"===o.kind?f=ar(o.minSize,o.maxSize,O):a=O}return{uSizeT:a,uSize:f}},m.evaluateVariableOffset=Xp,m.evented=Ql,m.exported=pt,m.exported$1=Ei,m.extend=rt,m.filterObject=We,m.fromRotation=function(o,e){var a=Math.sin(e),f=Math.cos(e);return o[0]=f,o[1]=a,o[2]=0,o[3]=-a,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},m.fromScaling=function(o,e){return o[0]=e[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=e[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=e[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},m.getAnchorAlignment=Ph,m.getAnchorJustification=Lh,m.getArrayBuffer=fi,m.getImage=Wn,m.getJSON=function(o,e){return oi(rt(o,{type:"json"}),e)},m.getOverlapMode=Uu,m.getRTLTextPluginStatus=La,m.getReferrer=On,m.getVideo=function(o,e){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){e(null,a)};for(let f=0;f<o.length;f++){const v=window.document.createElement("source");$i(o[f])||(a.crossOrigin="Anonymous"),v.src=o[f],a.appendChild(v)}return{cancel:()=>{}}},m.identity=nc,m.invert=function(o,e){var a=e[0],f=e[1],v=e[2],w=e[3],E=e[4],O=e[5],N=e[6],K=e[7],ie=e[8],oe=e[9],_e=e[10],be=e[11],Ce=e[12],Je=e[13],et=e[14],Mt=e[15],Bt=a*O-f*E,bt=a*N-v*E,Rt=a*K-w*E,rn=f*N-v*O,Xt=f*K-w*O,Vn=v*K-w*N,Hn=ie*Je-oe*Ce,Fn=ie*et-_e*Ce,Tn=ie*Mt-be*Ce,En=oe*et-_e*Je,Nn=oe*Mt-be*Je,Rn=_e*Mt-be*et,gn=Bt*Rn-bt*Nn+Rt*En+rn*Tn-Xt*Fn+Vn*Hn;return gn?(o[0]=(O*Rn-N*Nn+K*En)*(gn=1/gn),o[1]=(v*Nn-f*Rn-w*En)*gn,o[2]=(Je*Vn-et*Xt+Mt*rn)*gn,o[3]=(_e*Xt-oe*Vn-be*rn)*gn,o[4]=(N*Tn-E*Rn-K*Fn)*gn,o[5]=(a*Rn-v*Tn+w*Fn)*gn,o[6]=(et*Rt-Ce*Vn-Mt*bt)*gn,o[7]=(ie*Vn-_e*Rt+be*bt)*gn,o[8]=(E*Nn-O*Tn+K*Hn)*gn,o[9]=(f*Tn-a*Nn-w*Hn)*gn,o[10]=(Ce*Xt-Je*Rt+Mt*Bt)*gn,o[11]=(oe*Rt-ie*Xt-be*Bt)*gn,o[12]=(O*Fn-E*En-N*Hn)*gn,o[13]=(a*En-f*Fn+v*Hn)*gn,o[14]=(Je*bt-Ce*rn-et*Bt)*gn,o[15]=(ie*rn-oe*bt+_e*Bt)*gn,o):null},m.isImageBitmap=tn,m.isSafari=Ut,m.isWorker=At,m.keysDifference=function(o,e){const a=[];for(const f in o)f in e||a.push(f);return a},m.lazyLoadRTLTextPlugin=function(){Ko.isLoading()||Ko.isLoaded()||"deferred"!==La()||os()},m.makeRequest=oi,m.mapObject=lt,m.mercatorXfromLng=sf,m.mercatorYfromLat=af,m.mercatorZfromAltitude=Vh,m.mul=qr,m.mul$1=function(o,e,a){return o[0]=e[0]*a[0],o[1]=e[1]*a[1],o[2]=e[2]*a[2],o[3]=e[3]*a[3],o},m.multiply=wp,m.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},m.normalize=function(o,e){var a=e[0],f=e[1],v=e[2],w=a*a+f*f+v*v;return w>0&&(w=1/Math.sqrt(w)),o[0]=e[0]*w,o[1]=e[1]*w,o[2]=e[2]*w,o},m.number=ar,m.ortho=function(o,e,a,f,v,w,E){var O=1/(e-a),N=1/(f-v),K=1/(w-E);return o[0]=-2*O,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*N,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*K,o[11]=0,o[12]=(e+a)*O,o[13]=(v+f)*N,o[14]=(E+w)*K,o[15]=1,o},m.parseCacheControl=Pe,m.parseGlyphPbf=function(o){return new zp(o).readFields($g,[])},m.pbf=zp,m.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Wr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const e=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:a["icon-size"].possiblyEvaluate(new ir(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new ir(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new ir(18))};if("composite"===o.bucket.textSizeData.kind){const{minZoom:N,maxZoom:K}=o.bucket.textSizeData;f.compositeTextSizes=[a["text-size"].possiblyEvaluate(new ir(N),o.canonical),a["text-size"].possiblyEvaluate(new ir(K),o.canonical)]}if("composite"===o.bucket.iconSizeData.kind){const{minZoom:N,maxZoom:K}=o.bucket.iconSizeData;f.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new ir(N),o.canonical),a["icon-size"].possiblyEvaluate(new ir(K),o.canonical)]}const v=24*e.get("text-line-height"),w="viewport"!==e.get("text-rotation-alignment")&&"point"!==e.get("symbol-placement"),E=e.get("text-keep-upright"),O=e.get("text-size");for(const N of o.bucket.features){const K=e.get("text-font").evaluate(N,{},o.canonical).join(","),ie=O.evaluate(N,{},o.canonical),oe=f.layoutTextSize.evaluate(N,{},o.canonical),_e=f.layoutIconSize.evaluate(N,{},o.canonical),be={horizontal:{},vertical:void 0},Ce=N.text;let Je,et=[0,0];if(Ce){const bt=Ce.toString(),Rt=24*e.get("text-letter-spacing").evaluate(N,{},o.canonical),rn=hu(bt)?Rt:0,Xt=e.get("text-anchor").evaluate(N,{},o.canonical),Vn=e.get("text-variable-anchor");if(!Vn){const Nn=e.get("text-radial-offset").evaluate(N,{},o.canonical);et=Nn?Xp(Xt,[24*Nn,Sd]):e.get("text-offset").evaluate(N,{},o.canonical).map(Rn=>24*Rn)}let Hn=w?"center":e.get("text-justify").evaluate(N,{},o.canonical);const Fn=e.get("symbol-placement"),Tn="point"===Fn?24*e.get("text-max-width").evaluate(N,{},o.canonical):0,En=()=>{o.bucket.allowVerticalPlacement&&yc(bt)&&(be.vertical=Qc(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,K,Tn,v,Xt,"left",rn,et,m.WritingMode.vertical,!0,Fn,oe,ie))};if(!w&&Vn){const Nn="auto"===Hn?Vn.map(gn=>Lh(gn)):[Hn];let Rn=!1;for(let gn=0;gn<Nn.length;gn++){const si=Nn[gn];if(!be.horizontal[si])if(Rn)be.horizontal[si]=be.horizontal[0];else{const ti=Qc(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,K,Tn,v,"center",si,rn,et,m.WritingMode.horizontal,!1,Fn,oe,ie);ti&&(be.horizontal[si]=ti,Rn=1===ti.positionedLines.length)}}En()}else{"auto"===Hn&&(Hn=Lh(Xt));const Nn=Qc(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,K,Tn,v,Xt,Hn,rn,et,m.WritingMode.horizontal,!1,Fn,oe,ie);Nn&&(be.horizontal[Hn]=Nn),En(),yc(bt)&&w&&E&&(be.vertical=Qc(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,K,Tn,v,Xt,Hn,rn,et,m.WritingMode.vertical,!1,Fn,oe,ie))}}let Mt=!1;if(N.icon&&N.icon.name){const bt=o.imageMap[N.icon.name];bt&&(Je=Cm(o.imagePositions[N.icon.name],e.get("icon-offset").evaluate(N,{},o.canonical),e.get("icon-anchor").evaluate(N,{},o.canonical)),Mt=!!bt.sdf,void 0===o.bucket.sdfIcons?o.bucket.sdfIcons=Mt:o.bucket.sdfIcons!==Mt&&Et("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(bt.pixelRatio!==o.bucket.pixelRatio||0!==e.get("icon-rotate").constantOr(1))&&(o.bucket.iconsNeedLinear=!0))}const Bt=Jp(be.horizontal)||be.vertical;o.bucket.iconsInText=!!Bt&&Bt.iconsInText,(Bt||Je)&&iu(o.bucket,N,be,Je,o.imageMap,f,oe,_e,et,Mt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},m.perspective=function(o,e,a,f,v){var w,E=1/Math.tan(e/2);return o[0]=E/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=E,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!=v&&v!==1/0?(o[10]=(v+f)*(w=1/(f-v)),o[14]=2*v*f*w):(o[10]=-1,o[14]=-2*f),o},m.pick=function(o,e){const a={};for(let f=0;f<e.length;f++){const v=e[f];v in o&&(a[v]=o[v])}return a},m.plugin=Ko,m.pointGeometry=Xe,m.polygonIntersectsPolygon=Xf,m.potpack=jp,m.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],m.register=Mn,m.registerForPluginStateChange=function(o){return o({pluginStatus:go,pluginURL:Bo}),Ql.on("pluginStateChange",o),o},m.renderColorRamp=rc,m.rotateX=function(o,e,a){var f=Math.sin(a),v=Math.cos(a),w=e[4],E=e[5],O=e[6],N=e[7],K=e[8],ie=e[9],oe=e[10],_e=e[11];return e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[4]=w*v+K*f,o[5]=E*v+ie*f,o[6]=O*v+oe*f,o[7]=N*v+_e*f,o[8]=K*v-w*f,o[9]=ie*v-E*f,o[10]=oe*v-O*f,o[11]=_e*v-N*f,o},m.rotateZ=function(o,e,a){var f=Math.sin(a),v=Math.cos(a),w=e[0],E=e[1],O=e[2],N=e[3],K=e[4],ie=e[5],oe=e[6],_e=e[7];return e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=w*v+K*f,o[1]=E*v+ie*f,o[2]=O*v+oe*f,o[3]=N*v+_e*f,o[4]=K*v-w*f,o[5]=ie*v-E*f,o[6]=oe*v-O*f,o[7]=_e*v-N*f,o},m.scale=function(o,e,a){var f=a[0],v=a[1],w=a[2];return o[0]=e[0]*f,o[1]=e[1]*f,o[2]=e[2]*f,o[3]=e[3]*f,o[4]=e[4]*v,o[5]=e[5]*v,o[6]=e[6]*v,o[7]=e[7]*v,o[8]=e[8]*w,o[9]=e[9]*w,o[10]=e[10]*w,o[11]=e[11]*w,o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o},m.scale$1=function(o,e,a){return o[0]=e[0]*a,o[1]=e[1]*a,o[2]=e[2]*a,o},m.setCacheLimits=function(o,e){di=o,yi=e},m.setRTLTextPlugin=function(o,e,a=!1){if(go===Pl||go===Wo||go===ml)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bo=pt.resolveURL(o),go=Pl,qo=e,Ol(),a||os()},m.spec=k,m.sphericalToCartesian=function([o,e,a]){return e+=90,e*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(e)*Math.sin(a),y:o*Math.sin(e)*Math.sin(a),z:o*Math.cos(a)}},m.sqrLen=function(o){var e=o[0],a=o[1];return e*e+a*a},m.sub=function(o,e,a){return o[0]=e[0]-a[0],o[1]=e[1]-a[1],o[2]=e[2]-a[2],o},m.toEvaluationFeature=Ys,m.transformMat3=function(o,e,a){var f=e[0],v=e[1],w=e[2];return o[0]=f*a[0]+v*a[3]+w*a[6],o[1]=f*a[1]+v*a[4]+w*a[7],o[2]=f*a[2]+v*a[5]+w*a[8],o},m.transformMat4=vu,m.transformMat4$1=function(o,e,a){var f=e[0],v=e[1];return o[0]=a[0]*f+a[4]*v+a[12],o[1]=a[1]*f+a[5]*v+a[13],o},m.translate=function(o,e,a){var f,v,w,E,O,N,K,ie,oe,_e,be,Ce,Je=a[0],et=a[1],Mt=a[2];return e===o?(o[12]=e[0]*Je+e[4]*et+e[8]*Mt+e[12],o[13]=e[1]*Je+e[5]*et+e[9]*Mt+e[13],o[14]=e[2]*Je+e[6]*et+e[10]*Mt+e[14],o[15]=e[3]*Je+e[7]*et+e[11]*Mt+e[15]):(v=e[1],w=e[2],E=e[3],O=e[4],N=e[5],K=e[6],ie=e[7],oe=e[8],_e=e[9],be=e[10],Ce=e[11],o[0]=f=e[0],o[1]=v,o[2]=w,o[3]=E,o[4]=O,o[5]=N,o[6]=K,o[7]=ie,o[8]=oe,o[9]=_e,o[10]=be,o[11]=Ce,o[12]=f*Je+O*et+oe*Mt+e[12],o[13]=v*Je+N*et+_e*Mt+e[13],o[14]=w*Je+K*et+be*Mt+e[14],o[15]=E*Je+ie*et+Ce*Mt+e[15]),o},m.triggerPluginCompletionEvent=xc,m.unicodeBlockLookup=Ln,m.uniqueId=function(){return Te++},m.validateCustomStyleLayer=function(o){const e=[],a=o.id;return void 0===a&&e.push({message:`layers.${a}: missing required property "id"`}),void 0===o.render&&e.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&"2d"!==o.renderingMode&&"3d"!==o.renderingMode&&e.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),e},m.validateLight=Ai,m.validateStyle=wi,m.vectorTile=sc,m.warnOnce=Et,m.wrap=Ge}),l(0,function(m){function qe(he){const k=typeof he;if("number"===k||"boolean"===k||"string"===k||null==he)return JSON.stringify(he);if(Array.isArray(he)){let J="[";for(const le of he)J+=`${qe(le)},`;return`${J}]`}const R=Object.keys(he).sort();let H="{";for(let J=0;J<R.length;J++)H+=`${JSON.stringify(R[J])}:${qe(he[R[J]])},`;return`${H}}`}function ke(he){let k="";for(const R of m.refProperties)k+=`/${qe(he[R])}`;return k}class Ye{constructor(k){this.keyCache={},k&&this.replace(k)}replace(k){this._layerConfigs={},this._layers={},this.update(k,[])}update(k,R){for(const J of k){this._layerConfigs[J.id]=J;const le=this._layers[J.id]=m.createStyleLayer(J);le._featureFilter=m.createFilter(le.filter),this.keyCache[J.id]&&delete this.keyCache[J.id]}for(const J of R)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};const H=function(J,le){const Ae={};for(let Qe=0;Qe<J.length;Qe++){const ot=le&&le[J[Qe].id]||ke(J[Qe]);le&&(le[J[Qe].id]=ot);let He=Ae[ot];He||(He=Ae[ot]=[]),He.push(J[Qe])}const Le=[];for(const Qe in Ae)Le.push(Ae[Qe]);return Le}(Object.values(this._layerConfigs),this.keyCache);for(const J of H){const le=J.map(dt=>this._layers[dt.id]),Ae=le[0];if("none"===Ae.visibility)continue;const Le=Ae.source||"";let Qe=this.familiesBySource[Le];Qe||(Qe=this.familiesBySource[Le]={});const ot=Ae.sourceLayer||"_geojsonTileLayer";let He=Qe[ot];He||(He=Qe[ot]=[]),He.push(le)}}}class Re{constructor(k){const R={},H=[];for(const Le in k){const Qe=k[Le],ot=R[Le]={};for(const He in Qe){const dt=Qe[+He];if(!dt||0===dt.bitmap.width||0===dt.bitmap.height)continue;const $t={x:0,y:0,w:dt.bitmap.width+2,h:dt.bitmap.height+2};H.push($t),ot[He]={rect:$t,metrics:dt.metrics}}}const{w:J,h:le}=m.potpack(H),Ae=new m.AlphaImage({width:J||1,height:le||1});for(const Le in k){const Qe=k[Le];for(const ot in Qe){const He=Qe[+ot];if(!He||0===He.bitmap.width||0===He.bitmap.height)continue;const dt=R[Le][ot].rect;m.AlphaImage.copy(He.bitmap,Ae,{x:0,y:0},{x:dt.x+1,y:dt.y+1},He.bitmap)}}this.image=Ae,this.positions=R}}m.register("GlyphAtlas",Re);class pe{constructor(k){this.tileID=new m.OverscaledTileID(k.tileID.overscaledZ,k.tileID.wrap,k.tileID.canonical.z,k.tileID.canonical.x,k.tileID.canonical.y),this.uid=k.uid,this.zoom=k.zoom,this.pixelRatio=k.pixelRatio,this.tileSize=k.tileSize,this.source=k.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=k.showCollisionBoxes,this.collectResourceTiming=!!k.collectResourceTiming,this.returnDependencies=!!k.returnDependencies,this.promoteId=k.promoteId}parse(k,R,H,J,le){this.status="parsing",this.data=k,this.collisionBoxArray=new m.CollisionBoxArray;const Ae=new m.DictionaryCoder(Object.keys(k.layers).sort()),Le=new m.FeatureIndex(this.tileID,this.promoteId);Le.bucketLayerIDs=[];const Qe={},ot={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:H},He=R.familiesBySource[this.source];for(const we in He){const $e=k.layers[we];if(!$e)continue;1===$e.version&&m.warnOnce(`Vector tile source "${this.source}" layer "${we}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const at=Ae.encode(we),on=[];for(let An=0;An<$e.length;An++){const jn=$e.feature(An),Gi=Le.getId(jn,we);on.push({feature:jn,id:Gi,index:An,sourceLayerIndex:at})}for(const An of He[we]){const jn=An[0];jn.source!==this.source&&m.warnOnce(`layer.source = ${jn.source} does not equal this.source = ${this.source}`),jn.minzoom&&this.zoom<Math.floor(jn.minzoom)||jn.maxzoom&&this.zoom>=jn.maxzoom||"none"!==jn.visibility&&(Ge(An,this.zoom,H),(Qe[jn.id]=jn.createBucket({index:Le.bucketLayerIDs.length,layers:An,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:at,sourceID:this.source})).populate(on,ot,this.tileID.canonical),Le.bucketLayerIDs.push(An.map(Gi=>Gi.id)))}}let dt,$t,en,st;const De=m.mapObject(ot.glyphDependencies,we=>Object.keys(we).map(Number));Object.keys(De).length?J.send("getGlyphs",{uid:this.uid,stacks:De},(we,$e)=>{dt||(dt=we,$t=$e,Ne.call(this))}):$t={};const Fe=Object.keys(ot.iconDependencies);Fe.length?J.send("getImages",{icons:Fe,source:this.source,tileID:this.tileID,type:"icons"},(we,$e)=>{dt||(dt=we,en=$e,Ne.call(this))}):en={};const Se=Object.keys(ot.patternDependencies);function Ne(){if(dt)return le(dt);if($t&&en&&st){const we=new Re($t),$e=new m.ImageAtlas(en,st);for(const at in Qe){const on=Qe[at];on instanceof m.SymbolBucket?(Ge(on.layers,this.zoom,H),m.performSymbolLayout({bucket:on,glyphMap:$t,glyphPositions:we.positions,imageMap:en,imagePositions:$e.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):on.hasPattern&&(on instanceof m.LineBucket||on instanceof m.FillBucket||on instanceof m.FillExtrusionBucket)&&(Ge(on.layers,this.zoom,H),on.addFeatures(ot,this.tileID.canonical,$e.patternPositions))}this.status="done",le(null,{buckets:Object.values(Qe).filter(at=>!at.isEmpty()),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:we.image,imageAtlas:$e,glyphMap:this.returnDependencies?$t:null,iconMap:this.returnDependencies?en:null,glyphPositions:this.returnDependencies?we.positions:null})}}Se.length?J.send("getImages",{icons:Se,source:this.source,tileID:this.tileID,type:"patterns"},(we,$e)=>{dt||(dt=we,st=$e,Ne.call(this))}):st={},Ne.call(this)}}function Ge(he,k,R){const H=new m.EvaluationParameters(k);for(const J of he)J.recalculate(H,R)}function rt(he,k){const R=m.getArrayBuffer(he.request,(H,J,le,Ae)=>{H?k(H):J&&k(null,{vectorTile:new m.vectorTile.VectorTile(new m.pbf(J)),rawData:J,cacheControl:le,expires:Ae})});return()=>{R.cancel(),k()}}class Te{constructor(k,R,H,J){this.actor=k,this.layerIndex=R,this.availableImages=H,this.loadVectorData=J||rt,this.loading={},this.loaded={}}loadTile(k,R){const H=k.uid;this.loading||(this.loading={});const J=!!(k&&k.request&&k.request.collectResourceTiming)&&new m.RequestPerformance(k.request),le=this.loading[H]=new pe(k);le.abort=this.loadVectorData(k,(Ae,Le)=>{if(delete this.loading[H],Ae||!Le)return le.status="done",this.loaded[H]=le,R(Ae);const Qe=Le.rawData,ot={};Le.expires&&(ot.expires=Le.expires),Le.cacheControl&&(ot.cacheControl=Le.cacheControl);const He={};if(J){const dt=J.finish();dt&&(He.resourceTiming=JSON.parse(JSON.stringify(dt)))}le.vectorTile=Le.vectorTile,le.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,(dt,$t)=>{if(dt||!$t)return R(dt);R(null,m.extend({rawTileData:Qe.slice(0)},$t,ot,He))}),this.loaded=this.loaded||{},this.loaded[H]=le})}reloadTile(k,R){const H=this.loaded,J=k.uid,le=this;if(H&&H[J]){const Ae=H[J];Ae.showCollisionBoxes=k.showCollisionBoxes;const Le=(Qe,ot)=>{const He=Ae.reloadCallback;He&&(delete Ae.reloadCallback,Ae.parse(Ae.vectorTile,le.layerIndex,this.availableImages,le.actor,He)),R(Qe,ot)};"parsing"===Ae.status?Ae.reloadCallback=Le:"done"===Ae.status&&(Ae.vectorTile?Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,Le):Le())}}abortTile(k,R){const H=this.loading,J=k.uid;H&&H[J]&&H[J].abort&&(H[J].abort(),delete H[J]),R()}removeTile(k,R){const H=this.loaded,J=k.uid;H&&H[J]&&delete H[J],R()}}class ut{constructor(){this.loaded={}}loadTile(k,R){const{uid:H,encoding:J,rawImageData:le}=k,Ae=m.isImageBitmap(le)?this.getImageData(le):le,Le=new m.DEMData(H,Ae,J);this.loaded=this.loaded||{},this.loaded[H]=Le,R(null,Le)}getImageData(k){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(k.width,k.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=k.width,this.offscreenCanvas.height=k.height,this.offscreenCanvasContext.drawImage(k,0,0,k.width,k.height);const R=this.offscreenCanvasContext.getImageData(-1,-1,k.width+2,k.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new m.RGBAImage({width:R.width,height:R.height},R.data)}removeTile(k){const R=this.loaded,H=k.uid;R&&R[H]&&delete R[H]}}var lt=function he(k,R){var H,J=k&&k.type;if("FeatureCollection"===J)for(H=0;H<k.features.length;H++)he(k.features[H],R);else if("GeometryCollection"===J)for(H=0;H<k.geometries.length;H++)he(k.geometries[H],R);else if("Feature"===J)he(k.geometry,R);else if("Polygon"===J)We(k.coordinates,R);else if("MultiPolygon"===J)for(H=0;H<k.coordinates.length;H++)We(k.coordinates[H],R);return k};function We(he,k){if(0!==he.length){Dt(he[0],k);for(var R=1;R<he.length;R++)Dt(he[R],!k)}}function Dt(he,k){for(var R=0,H=0,J=0,le=he.length,Ae=le-1;J<le;Ae=J++){var Le=(he[J][0]-he[Ae][0])*(he[Ae][1]+he[J][1]),Qe=R+Le;H+=Math.abs(R)>=Math.abs(Le)?R-Qe+Le:Le-Qe+R,R=Qe}R+H>=0!=!!k&&he.reverse()}const wt=m.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Et{constructor(k){this._feature=k,this.extent=m.EXTENT,this.type=k.type,this.properties=k.tags,"id"in k&&!isNaN(k.id)&&(this.id=parseInt(k.id,10))}loadGeometry(){if(1===this._feature.type){const k=[];for(const R of this._feature.geometry)k.push([new m.pointGeometry(R[0],R[1])]);return k}{const k=[];for(const R of this._feature.geometry){const H=[];for(const J of R)H.push(new m.pointGeometry(J[0],J[1]));k.push(H)}return k}}toGeoJSON(k,R,H){return wt.call(this,k,R,H)}}class _n{constructor(k){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.EXTENT,this.length=k.length,this._features=k}feature(k){return new Et(this._features[k])}}var hn={exports:{}},At=m.pointGeometry,Pe=m.vectorTile.VectorTileFeature,Ze=Yt;function Yt(he,k){this.options=k||{},this.features=he,this.length=he.length}function Ot(he,k){this.id="number"==typeof he.id?he.id:void 0,this.type=he.type,this.rawGeometry=1===he.type?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=k||4096}Yt.prototype.feature=function(he){return new Ot(this.features[he],this.options.extent)},Ot.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var k=0;k<he.length;k++){for(var R=he[k],H=[],J=0;J<R.length;J++)H.push(new At(R[J][0],R[J][1]));this.geometry.push(H)}return this.geometry},Ot.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,k=1/0,R=-1/0,H=1/0,J=-1/0,le=0;le<he.length;le++)for(var Ae=he[le],Le=0;Le<Ae.length;Le++){var Qe=Ae[Le];k=Math.min(k,Qe.x),R=Math.max(R,Qe.x),H=Math.min(H,Qe.y),J=Math.max(J,Qe.y)}return[k,H,R,J]},Ot.prototype.toGeoJSON=Pe.prototype.toGeoJSON;var Ut=m.pbf,tn=Ze;function pt(he){var k=new Ut;return function(R,H){for(var J in R.layers)H.writeMessage(3,Xe,R.layers[J])}(he,k),k.finish()}function Xe(he,k){var R;k.writeVarintField(15,he.version||1),k.writeStringField(1,he.name||""),k.writeVarintField(5,he.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(R=0;R<he.length;R++)H.feature=he.feature(R),k.writeMessage(2,It,H);var J=H.keys;for(R=0;R<J.length;R++)k.writeStringField(3,J[R]);var le=H.values;for(R=0;R<le.length;R++)k.writeMessage(4,di,le[R])}function It(he,k){var R=he.feature;void 0!==R.id&&k.writeVarintField(1,R.id),k.writeMessage(2,St,he),k.writeVarintField(3,R.type),k.writeMessage(4,Gn,R)}function St(he,k){var R=he.feature,H=he.keys,J=he.values,le=he.keycache,Ae=he.valuecache;for(var Le in R.properties){var Qe=R.properties[Le],ot=le[Le];if(null!==Qe){void 0===ot&&(H.push(Le),le[Le]=ot=H.length-1),k.writeVarint(ot);var He=typeof Qe;"string"!==He&&"boolean"!==He&&"number"!==He&&(Qe=JSON.stringify(Qe));var dt=He+":"+Qe,$t=Ae[dt];void 0===$t&&(J.push(Qe),Ae[dt]=$t=J.length-1),k.writeVarint($t)}}}function pn(he,k){return(k<<3)+(7&he)}function un(he){return he<<1^he>>31}function Gn(he,k){for(var R=he.loadGeometry(),H=he.type,J=0,le=0,Ae=R.length,Le=0;Le<Ae;Le++){var Qe=R[Le],ot=1;1===H&&(ot=Qe.length),k.writeVarint(pn(1,ot));for(var He=3===H?Qe.length-1:Qe.length,dt=0;dt<He;dt++){1===dt&&1!==H&&k.writeVarint(pn(2,He-1));var $t=Qe[dt].x-J,en=Qe[dt].y-le;k.writeVarint(un($t)),k.writeVarint(un(en)),J+=$t,le+=en}3===H&&k.writeVarint(pn(7,1))}}function di(he,k){var R=typeof he;"string"===R?k.writeStringField(1,he):"boolean"===R?k.writeBooleanField(7,he):"number"===R&&(he%1!=0?k.writeDoubleField(3,he):he<0?k.writeSVarintField(6,he):k.writeVarintField(5,he))}hn.exports=pt,hn.exports.fromVectorTileJs=pt,hn.exports.fromGeojsonVt=function(he,k){k=k||{};var R={};for(var H in he)R[H]=new tn(he[H].features,k),R[H].name=H,R[H].version=k.version,R[H].extent=k.extent;return pt({layers:R})},hn.exports.GeoJSONWrapper=tn;var yi={exports:{}};yi.exports=function(){function he(Qe,ot,He,dt,$t,en){if(!($t-dt<=He)){var st=dt+$t>>1;k(Qe,ot,st,dt,$t,en%2),he(Qe,ot,He,dt,st-1,en+1),he(Qe,ot,He,st+1,$t,en+1)}}function k(Qe,ot,He,dt,$t,en){for(;$t>dt;){if($t-dt>600){var st=$t-dt+1,De=He-dt+1,Fe=Math.log(st),Se=.5*Math.exp(2*Fe/3),Ne=.5*Math.sqrt(Fe*Se*(st-Se)/st)*(De-st/2<0?-1:1);k(Qe,ot,He,Math.max(dt,Math.floor(He-De*Se/st+Ne)),Math.min($t,Math.floor(He+(st-De)*Se/st+Ne)),en)}var we=ot[2*He+en],$e=dt,at=$t;for(R(Qe,ot,dt,He),ot[2*$t+en]>we&&R(Qe,ot,dt,$t);$e<at;){for(R(Qe,ot,$e,at),$e++,at--;ot[2*$e+en]<we;)$e++;for(;ot[2*at+en]>we;)at--}ot[2*dt+en]===we?R(Qe,ot,dt,at):R(Qe,ot,++at,$t),at<=He&&(dt=at+1),He<=at&&($t=at-1)}}function R(Qe,ot,He,dt){H(Qe,He,dt),H(ot,2*He,2*dt),H(ot,2*He+1,2*dt+1)}function H(Qe,ot,He){var dt=Qe[ot];Qe[ot]=Qe[He],Qe[He]=dt}function J(Qe,ot,He,dt){var $t=Qe-He,en=ot-dt;return $t*$t+en*en}var le=function(Qe){return Qe[0]},Ae=function(Qe){return Qe[1]},Le=function(Qe,ot,He,dt,$t){void 0===ot&&(ot=le),void 0===He&&(He=Ae),void 0===dt&&(dt=64),void 0===$t&&($t=Float64Array),this.nodeSize=dt,this.points=Qe;for(var en=Qe.length<65536?Uint16Array:Uint32Array,st=this.ids=new en(Qe.length),De=this.coords=new $t(2*Qe.length),Fe=0;Fe<Qe.length;Fe++)st[Fe]=Fe,De[2*Fe]=ot(Qe[Fe]),De[2*Fe+1]=He(Qe[Fe]);he(st,De,dt,0,st.length-1,0)};return Le.prototype.range=function(Qe,ot,He,dt){return function($t,en,st,De,Fe,Se,Ne){for(var we,$e,at=[0,$t.length-1,0],on=[];at.length;){var An=at.pop(),jn=at.pop(),Gi=at.pop();if(jn-Gi<=Ne)for(var ni=Gi;ni<=jn;ni++)$e=en[2*ni+1],(we=en[2*ni])>=st&&we<=Fe&&$e>=De&&$e<=Se&&on.push($t[ni]);else{var yt=Math.floor((Gi+jn)/2);$e=en[2*yt+1],(we=en[2*yt])>=st&&we<=Fe&&$e>=De&&$e<=Se&&on.push($t[yt]);var Tt=(An+1)%2;(0===An?st<=we:De<=$e)&&(at.push(Gi),at.push(yt-1),at.push(Tt)),(0===An?Fe>=we:Se>=$e)&&(at.push(yt+1),at.push(jn),at.push(Tt))}}return on}(this.ids,this.coords,Qe,ot,He,dt,this.nodeSize)},Le.prototype.within=function(Qe,ot,He){return function(dt,$t,en,st,De,Fe){for(var Se=[0,dt.length-1,0],Ne=[],we=De*De;Se.length;){var $e=Se.pop(),at=Se.pop(),on=Se.pop();if(at-on<=Fe)for(var An=on;An<=at;An++)J($t[2*An],$t[2*An+1],en,st)<=we&&Ne.push(dt[An]);else{var jn=Math.floor((on+at)/2),Gi=$t[2*jn],ni=$t[2*jn+1];J(Gi,ni,en,st)<=we&&Ne.push(dt[jn]);var yt=($e+1)%2;(0===$e?en-De<=Gi:st-De<=ni)&&(Se.push(on),Se.push(jn-1),Se.push(yt)),(0===$e?en+De>=Gi:st+De>=ni)&&(Se.push(jn+1),Se.push(at),Se.push(yt))}}return Ne}(this.ids,this.coords,Qe,ot,He,this.nodeSize)},Le}();var yn=yi.exports;const gi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Ei=Math.fround||(hi=new Float32Array(1),he=>(hi[0]=+he,hi[0]));var hi;class bn{constructor(k){this.options=oi(Object.create(gi),k),this.trees=new Array(this.options.maxZoom+1)}load(k){const{log:R,minZoom:H,maxZoom:J,nodeSize:le}=this.options;R&&console.time("total time");const Ae=`prepare ${k.length} points`;R&&console.time(Ae),this.points=k;let Le=[];for(let Qe=0;Qe<k.length;Qe++)k[Qe].geometry&&Le.push(_t(k[Qe],Qe));this.trees[J+1]=new yn(Le,fi,$i,le,Float32Array),R&&console.timeEnd(Ae);for(let Qe=J;Qe>=H;Qe--){const ot=+Date.now();Le=this._cluster(Le,Qe),this.trees[Qe]=new yn(Le,fi,$i,le,Float32Array),R&&console.log("z%d: %d clusters in %dms",Qe,Le.length,+Date.now()-ot)}return R&&console.timeEnd("total time"),this}getClusters(k,R){let H=((k[0]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,k[1]));let le=180===k[2]?180:((k[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,k[3]));if(k[2]-k[0]>=360)H=-180,le=180;else if(H>le){const He=this.getClusters([H,J,180,Ae],R),dt=this.getClusters([-180,J,le,Ae],R);return He.concat(dt)}const Le=this.trees[this._limitZoom(R)],Qe=Le.range(mn(H),On(Ae),mn(le),On(J)),ot=[];for(const He of Qe){const dt=Le.points[He];ot.push(dt.numPoints?Nt(dt):this.points[dt.index])}return ot}getChildren(k){const R=this._getOriginId(k),H=this._getOriginZoom(k),J="No cluster with the specified id.",le=this.trees[H];if(!le)throw new Error(J);const Ae=le.points[R];if(!Ae)throw new Error(J);const Le=this.options.radius/(this.options.extent*Math.pow(2,H-1)),Qe=le.within(Ae.x,Ae.y,Le),ot=[];for(const He of Qe){const dt=le.points[He];dt.parentId===k&&ot.push(dt.numPoints?Nt(dt):this.points[dt.index])}if(0===ot.length)throw new Error(J);return ot}getLeaves(k,R,H){const J=[];return this._appendLeaves(J,k,R=R||10,H=H||0,0),J}getTile(k,R,H){const J=this.trees[this._limitZoom(k)],le=Math.pow(2,k),{extent:Ae,radius:Le}=this.options,Qe=Le/Ae,ot=(H-Qe)/le,He=(H+1+Qe)/le,dt={features:[]};return this._addTileFeatures(J.range((R-Qe)/le,ot,(R+1+Qe)/le,He),J.points,R,H,le,dt),0===R&&this._addTileFeatures(J.range(1-Qe/le,ot,1,He),J.points,le,H,le,dt),R===le-1&&this._addTileFeatures(J.range(0,ot,Qe/le,He),J.points,-1,H,le,dt),dt.features.length?dt:null}getClusterExpansionZoom(k){let R=this._getOriginZoom(k)-1;for(;R<=this.options.maxZoom;){const H=this.getChildren(k);if(R++,1!==H.length)break;k=H[0].properties.cluster_id}return R}_appendLeaves(k,R,H,J,le){const Ae=this.getChildren(R);for(const Le of Ae){const Qe=Le.properties;if(Qe&&Qe.cluster?le+Qe.point_count<=J?le+=Qe.point_count:le=this._appendLeaves(k,Qe.cluster_id,H,J,le):le<J?le++:k.push(Le),k.length===H)break}return le}_addTileFeatures(k,R,H,J,le,Ae){for(const Le of k){const Qe=R[Le],ot=Qe.numPoints;let He,dt,$t;if(ot)He=fn(Qe),dt=Qe.x,$t=Qe.y;else{const De=this.points[Qe.index];He=De.properties,dt=mn(De.geometry.coordinates[0]),$t=On(De.geometry.coordinates[1])}const en={type:1,geometry:[[Math.round(this.options.extent*(dt*le-H)),Math.round(this.options.extent*($t*le-J))]],tags:He};let st;ot?st=Qe.id:this.options.generateId?st=Qe.index:this.points[Qe.index].id&&(st=this.points[Qe.index].id),void 0!==st&&(en.id=st),Ae.features.push(en)}}_limitZoom(k){return Math.max(this.options.minZoom,Math.min(Math.floor(+k),this.options.maxZoom+1))}_cluster(k,R){const H=[],{radius:J,extent:le,reduce:Ae,minPoints:Le}=this.options,Qe=J/(le*Math.pow(2,R));for(let ot=0;ot<k.length;ot++){const He=k[ot];if(He.zoom<=R)continue;He.zoom=R;const dt=this.trees[R+1],$t=dt.within(He.x,He.y,Qe),en=He.numPoints||1;let st=en;for(const De of $t){const Fe=dt.points[De];Fe.zoom>R&&(st+=Fe.numPoints||1)}if(st>en&&st>=Le){let De=He.x*en,Fe=He.y*en,Se=Ae&&en>1?this._map(He,!0):null;const Ne=(ot<<5)+(R+1)+this.points.length;for(const we of $t){const $e=dt.points[we];if($e.zoom<=R)continue;$e.zoom=R;const at=$e.numPoints||1;De+=$e.x*at,Fe+=$e.y*at,$e.parentId=Ne,Ae&&(Se||(Se=this._map(He,!0)),Ae(Se,this._map($e)))}He.parentId=Ne,H.push(wn(De/st,Fe/st,Ne,st,Se))}else if(H.push(He),st>1)for(const De of $t){const Fe=dt.points[De];Fe.zoom<=R||(Fe.zoom=R,H.push(Fe))}}return H}_getOriginId(k){return k-this.points.length>>5}_getOriginZoom(k){return(k-this.points.length)%32}_map(k,R){if(k.numPoints)return R?oi({},k.properties):k.properties;const H=this.points[k.index].properties,J=this.options.map(H);return R&&J===H?oi({},J):J}}function wn(he,k,R,H,J){return{x:Ei(he),y:Ei(k),zoom:1/0,id:R,parentId:-1,numPoints:H,properties:J}}function _t(he,k){const[R,H]=he.geometry.coordinates;return{x:Ei(mn(R)),y:Ei(On(H)),zoom:1/0,index:k,parentId:-1}}function Nt(he){return{type:"Feature",id:he.id,properties:fn(he),geometry:{type:"Point",coordinates:[(k=he.x,360*(k-.5)),Jn(he.y)]}};var k}function fn(he){const k=he.numPoints,R=k>=1e4?`${Math.round(k/1e3)}k`:k>=1e3?Math.round(k/100)/10+"k":k;return oi(oi({},he.properties),{cluster:!0,cluster_id:he.id,point_count:k,point_count_abbreviated:R})}function mn(he){return he/360+.5}function On(he){const k=Math.sin(he*Math.PI/180),R=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return R<0?0:R>1?1:R}function Jn(he){const k=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(k))/Math.PI-90}function oi(he,k){for(const R in k)he[R]=k[R];return he}function fi(he){return he.x}function $i(he){return he.y}var Qn={exports:{}};Qn.exports=function(){function he(yt,Tt,zt,Vt){for(var jt,me=Vt,Ee=zt-Tt>>1,ue=zt-Tt,Ve=yt[Tt],tt=yt[Tt+1],Gt=yt[zt],Sn=yt[zt+1],nn=Tt+3;nn<zt;nn+=3){var Un=k(yt[nn],yt[nn+1],Ve,tt,Gt,Sn);if(Un>me)jt=nn,me=Un;else if(Un===me){var Ni=Math.abs(nn-Ee);Ni<ue&&(jt=nn,ue=Ni)}}me>Vt&&(jt-Tt>3&&he(yt,Tt,jt,Vt),yt[jt+2]=me,zt-jt>3&&he(yt,jt,zt,Vt))}function k(yt,Tt,zt,Vt,jt,me){var Ee=jt-zt,ue=me-Vt;if(0!==Ee||0!==ue){var Ve=((yt-zt)*Ee+(Tt-Vt)*ue)/(Ee*Ee+ue*ue);Ve>1?(zt=jt,Vt=me):Ve>0&&(zt+=Ee*Ve,Vt+=ue*Ve)}return(Ee=yt-zt)*Ee+(ue=Tt-Vt)*ue}function R(yt,Tt,zt,Vt){var jt={id:void 0===yt?null:yt,type:Tt,geometry:zt,tags:Vt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var Ee=me.geometry,ue=me.type;if("Point"===ue||"MultiPoint"===ue||"LineString"===ue)H(me,Ee);else if("Polygon"===ue||"MultiLineString"===ue)for(var Ve=0;Ve<Ee.length;Ve++)H(me,Ee[Ve]);else if("MultiPolygon"===ue)for(Ve=0;Ve<Ee.length;Ve++)for(var tt=0;tt<Ee[Ve].length;tt++)H(me,Ee[Ve][tt])}(jt),jt}function H(yt,Tt){for(var zt=0;zt<Tt.length;zt+=3)yt.minX=Math.min(yt.minX,Tt[zt]),yt.minY=Math.min(yt.minY,Tt[zt+1]),yt.maxX=Math.max(yt.maxX,Tt[zt]),yt.maxY=Math.max(yt.maxY,Tt[zt+1])}function J(yt,Tt,zt,Vt){if(Tt.geometry){var jt=Tt.geometry.coordinates,me=Tt.geometry.type,Ee=Math.pow(zt.tolerance/((1<<zt.maxZoom)*zt.extent),2),ue=[],Ve=Tt.id;if(zt.promoteId?Ve=Tt.properties[zt.promoteId]:zt.generateId&&(Ve=Vt||0),"Point"===me)le(jt,ue);else if("MultiPoint"===me)for(var tt=0;tt<jt.length;tt++)le(jt[tt],ue);else if("LineString"===me)Ae(jt,ue,Ee,!1);else if("MultiLineString"===me){if(zt.lineMetrics){for(tt=0;tt<jt.length;tt++)Ae(jt[tt],ue=[],Ee,!1),yt.push(R(Ve,"LineString",ue,Tt.properties));return}Le(jt,ue,Ee,!1)}else if("Polygon"===me)Le(jt,ue,Ee,!0);else{if("MultiPolygon"!==me){if("GeometryCollection"===me){for(tt=0;tt<Tt.geometry.geometries.length;tt++)J(yt,{id:Ve,geometry:Tt.geometry.geometries[tt],properties:Tt.properties},zt,Vt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<jt.length;tt++){var Gt=[];Le(jt[tt],Gt,Ee,!0),ue.push(Gt)}}yt.push(R(Ve,me,ue,Tt.properties))}}function le(yt,Tt){Tt.push(Qe(yt[0])),Tt.push(ot(yt[1])),Tt.push(0)}function Ae(yt,Tt,zt,Vt){for(var jt,me,Ee=0,ue=0;ue<yt.length;ue++){var Ve=Qe(yt[ue][0]),tt=ot(yt[ue][1]);Tt.push(Ve),Tt.push(tt),Tt.push(0),ue>0&&(Ee+=Vt?(jt*tt-Ve*me)/2:Math.sqrt(Math.pow(Ve-jt,2)+Math.pow(tt-me,2))),jt=Ve,me=tt}var Gt=Tt.length-3;Tt[2]=1,he(Tt,0,Gt,zt),Tt[Gt+2]=1,Tt.size=Math.abs(Ee),Tt.start=0,Tt.end=Tt.size}function Le(yt,Tt,zt,Vt){for(var jt=0;jt<yt.length;jt++){var me=[];Ae(yt[jt],me,zt,Vt),Tt.push(me)}}function Qe(yt){return yt/360+.5}function ot(yt){var Tt=Math.sin(yt*Math.PI/180),zt=.5-.25*Math.log((1+Tt)/(1-Tt))/Math.PI;return zt<0?0:zt>1?1:zt}function He(yt,Tt,zt,Vt,jt,me,Ee,ue){if(Vt/=Tt,me>=(zt/=Tt)&&Ee<Vt)return yt;if(Ee<zt||me>=Vt)return null;for(var Ve=[],tt=0;tt<yt.length;tt++){var Gt=yt[tt],Sn=Gt.geometry,nn=Gt.type,Un=0===jt?Gt.minX:Gt.minY,Ni=0===jt?Gt.maxX:Gt.maxY;if(Un>=zt&&Ni<Vt)Ve.push(Gt);else if(!(Ni<zt||Un>=Vt)){var kn=[];if("Point"===nn||"MultiPoint"===nn)dt(Sn,kn,zt,Vt,jt);else if("LineString"===nn)$t(Sn,kn,zt,Vt,jt,!1,ue.lineMetrics);else if("MultiLineString"===nn)st(Sn,kn,zt,Vt,jt,!1);else if("Polygon"===nn)st(Sn,kn,zt,Vt,jt,!0);else if("MultiPolygon"===nn)for(var ei=0;ei<Sn.length;ei++){var Yi=[];st(Sn[ei],Yi,zt,Vt,jt,!0),Yi.length&&kn.push(Yi)}if(kn.length){if(ue.lineMetrics&&"LineString"===nn){for(ei=0;ei<kn.length;ei++)Ve.push(R(Gt.id,nn,kn[ei],Gt.tags));continue}"LineString"!==nn&&"MultiLineString"!==nn||(1===kn.length?(nn="LineString",kn=kn[0]):nn="MultiLineString"),"Point"!==nn&&"MultiPoint"!==nn||(nn=3===kn.length?"Point":"MultiPoint"),Ve.push(R(Gt.id,nn,kn,Gt.tags))}}}return Ve.length?Ve:null}function dt(yt,Tt,zt,Vt,jt){for(var me=0;me<yt.length;me+=3){var Ee=yt[me+jt];Ee>=zt&&Ee<=Vt&&(Tt.push(yt[me]),Tt.push(yt[me+1]),Tt.push(yt[me+2]))}}function $t(yt,Tt,zt,Vt,jt,me,Ee){for(var ue,Ve,tt=en(yt),Gt=0===jt?Fe:Se,Sn=yt.start,nn=0;nn<yt.length-3;nn+=3){var Un=yt[nn],Ni=yt[nn+1],kn=yt[nn+2],ei=yt[nn+3],Yi=yt[nn+4],Xi=0===jt?Un:Ni,nr=0===jt?ei:Yi,Vi=!1;Ee&&(ue=Math.sqrt(Math.pow(Un-ei,2)+Math.pow(Ni-Yi,2))),Xi<zt?nr>zt&&(Ve=Gt(tt,Un,Ni,ei,Yi,zt),Ee&&(tt.start=Sn+ue*Ve)):Xi>Vt?nr<Vt&&(Ve=Gt(tt,Un,Ni,ei,Yi,Vt),Ee&&(tt.start=Sn+ue*Ve)):De(tt,Un,Ni,kn),nr<zt&&Xi>=zt&&(Ve=Gt(tt,Un,Ni,ei,Yi,zt),Vi=!0),nr>Vt&&Xi<=Vt&&(Ve=Gt(tt,Un,Ni,ei,Yi,Vt),Vi=!0),!me&&Vi&&(Ee&&(tt.end=Sn+ue*Ve),Tt.push(tt),tt=en(yt)),Ee&&(Sn+=ue)}var Ji=yt.length-3;Un=yt[Ji],Ni=yt[Ji+1],kn=yt[Ji+2],(Xi=0===jt?Un:Ni)>=zt&&Xi<=Vt&&De(tt,Un,Ni,kn),Ji=tt.length-3,me&&Ji>=3&&(tt[Ji]!==tt[0]||tt[Ji+1]!==tt[1])&&De(tt,tt[0],tt[1],tt[2]),tt.length&&Tt.push(tt)}function en(yt){var Tt=[];return Tt.size=yt.size,Tt.start=yt.start,Tt.end=yt.end,Tt}function st(yt,Tt,zt,Vt,jt,me){for(var Ee=0;Ee<yt.length;Ee++)$t(yt[Ee],Tt,zt,Vt,jt,me,!1)}function De(yt,Tt,zt,Vt){yt.push(Tt),yt.push(zt),yt.push(Vt)}function Fe(yt,Tt,zt,Vt,jt,me){var Ee=(me-Tt)/(Vt-Tt);return yt.push(me),yt.push(zt+(jt-zt)*Ee),yt.push(1),Ee}function Se(yt,Tt,zt,Vt,jt,me){var Ee=(me-zt)/(jt-zt);return yt.push(Tt+(Vt-Tt)*Ee),yt.push(me),yt.push(1),Ee}function Ne(yt,Tt){for(var zt=[],Vt=0;Vt<yt.length;Vt++){var jt,me=yt[Vt],Ee=me.type;if("Point"===Ee||"MultiPoint"===Ee||"LineString"===Ee)jt=we(me.geometry,Tt);else if("MultiLineString"===Ee||"Polygon"===Ee){jt=[];for(var ue=0;ue<me.geometry.length;ue++)jt.push(we(me.geometry[ue],Tt))}else if("MultiPolygon"===Ee)for(jt=[],ue=0;ue<me.geometry.length;ue++){for(var Ve=[],tt=0;tt<me.geometry[ue].length;tt++)Ve.push(we(me.geometry[ue][tt],Tt));jt.push(Ve)}zt.push(R(me.id,Ee,jt,me.tags))}return zt}function we(yt,Tt){var zt=[];zt.size=yt.size,void 0!==yt.start&&(zt.start=yt.start,zt.end=yt.end);for(var Vt=0;Vt<yt.length;Vt+=3)zt.push(yt[Vt]+Tt,yt[Vt+1],yt[Vt+2]);return zt}function $e(yt,Tt){if(yt.transformed)return yt;var zt,Vt,jt,me=1<<yt.z,Ee=yt.x,ue=yt.y;for(zt=0;zt<yt.features.length;zt++){var Ve=yt.features[zt],tt=Ve.geometry,Gt=Ve.type;if(Ve.geometry=[],1===Gt)for(Vt=0;Vt<tt.length;Vt+=2)Ve.geometry.push(at(tt[Vt],tt[Vt+1],Tt,me,Ee,ue));else for(Vt=0;Vt<tt.length;Vt++){var Sn=[];for(jt=0;jt<tt[Vt].length;jt+=2)Sn.push(at(tt[Vt][jt],tt[Vt][jt+1],Tt,me,Ee,ue));Ve.geometry.push(Sn)}}return yt.transformed=!0,yt}function at(yt,Tt,zt,Vt,jt,me){return[Math.round(zt*(yt*Vt-jt)),Math.round(zt*(Tt*Vt-me))]}function on(yt,Tt,zt,Vt,jt){for(var me=Tt===jt.maxZoom?0:jt.tolerance/((1<<Tt)*jt.extent),Ee={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:zt,y:Vt,z:Tt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ue=0;ue<yt.length;ue++){Ee.numFeatures++,An(Ee,yt[ue],me,jt);var Ve=yt[ue].minX,tt=yt[ue].minY,Gt=yt[ue].maxX,Sn=yt[ue].maxY;Ve<Ee.minX&&(Ee.minX=Ve),tt<Ee.minY&&(Ee.minY=tt),Gt>Ee.maxX&&(Ee.maxX=Gt),Sn>Ee.maxY&&(Ee.maxY=Sn)}return Ee}function An(yt,Tt,zt,Vt){var jt=Tt.geometry,me=Tt.type,Ee=[];if("Point"===me||"MultiPoint"===me)for(var ue=0;ue<jt.length;ue+=3)Ee.push(jt[ue]),Ee.push(jt[ue+1]),yt.numPoints++,yt.numSimplified++;else if("LineString"===me)jn(Ee,jt,yt,zt,!1,!1);else if("MultiLineString"===me||"Polygon"===me)for(ue=0;ue<jt.length;ue++)jn(Ee,jt[ue],yt,zt,"Polygon"===me,0===ue);else if("MultiPolygon"===me)for(var Ve=0;Ve<jt.length;Ve++){var tt=jt[Ve];for(ue=0;ue<tt.length;ue++)jn(Ee,tt[ue],yt,zt,!0,0===ue)}if(Ee.length){var Gt=Tt.tags||null;if("LineString"===me&&Vt.lineMetrics){for(var Sn in Gt={},Tt.tags)Gt[Sn]=Tt.tags[Sn];Gt.mapbox_clip_start=jt.start/jt.size,Gt.mapbox_clip_end=jt.end/jt.size}var nn={geometry:Ee,type:"Polygon"===me||"MultiPolygon"===me?3:"LineString"===me||"MultiLineString"===me?2:1,tags:Gt};null!==Tt.id&&(nn.id=Tt.id),yt.features.push(nn)}}function jn(yt,Tt,zt,Vt,jt,me){var Ee=Vt*Vt;if(Vt>0&&Tt.size<(jt?Ee:Vt))zt.numPoints+=Tt.length/3;else{for(var ue=[],Ve=0;Ve<Tt.length;Ve+=3)(0===Vt||Tt[Ve+2]>Ee)&&(zt.numSimplified++,ue.push(Tt[Ve]),ue.push(Tt[Ve+1])),zt.numPoints++;jt&&function(tt,Gt){for(var Sn=0,nn=0,Un=tt.length,Ni=Un-2;nn<Un;Ni=nn,nn+=2)Sn+=(tt[nn]-tt[Ni])*(tt[nn+1]+tt[Ni+1]);if(Sn>0===Gt)for(nn=0,Un=tt.length;nn<Un/2;nn+=2){var kn=tt[nn],ei=tt[nn+1];tt[nn]=tt[Un-2-nn],tt[nn+1]=tt[Un-1-nn],tt[Un-2-nn]=kn,tt[Un-1-nn]=ei}}(ue,me),yt.push(ue)}}function Gi(yt,Tt){var zt=(Tt=this.options=function(jt,me){for(var Ee in me)jt[Ee]=me[Ee];return jt}(Object.create(this.options),Tt)).debug;if(zt&&console.time("preprocess data"),Tt.maxZoom<0||Tt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Tt.promoteId&&Tt.generateId)throw new Error("promoteId and generateId cannot be used together.");var jt,me,Ee,ue,Ve,tt,Vt=function(jt,me){var Ee=[];if("FeatureCollection"===jt.type)for(var ue=0;ue<jt.features.length;ue++)J(Ee,jt.features[ue],me,ue);else J(Ee,"Feature"===jt.type?jt:{geometry:jt},me);return Ee}(yt,Tt);this.tiles={},this.tileCoords=[],zt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Tt.indexMaxZoom,Tt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(jt=Vt,me=Tt,Ee=me.buffer/me.extent,ue=jt,Ve=He(jt,1,-1-Ee,Ee,0,-1,2,me),tt=He(jt,1,1-Ee,2+Ee,0,-1,2,me),(Ve||tt)&&(ue=He(jt,1,-Ee,1+Ee,0,-1,2,me)||[],Ve&&(ue=Ne(Ve,1).concat(ue)),tt&&(ue=ue.concat(Ne(tt,-1)))),Vt=ue).length&&this.splitTile(Vt,0,0,0),zt&&(Vt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ni(yt,Tt,zt){return 32*((1<<yt)*zt+Tt)+yt}return Gi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gi.prototype.splitTile=function(yt,Tt,zt,Vt,jt,me,Ee){for(var ue=[yt,Tt,zt,Vt],Ve=this.options,tt=Ve.debug;ue.length;){Vt=ue.pop(),zt=ue.pop(),Tt=ue.pop(),yt=ue.pop();var Gt=1<<Tt,Sn=ni(Tt,zt,Vt),nn=this.tiles[Sn];if(!nn&&(tt>1&&console.time("creation"),nn=this.tiles[Sn]=on(yt,Tt,zt,Vt,Ve),this.tileCoords.push({z:Tt,x:zt,y:Vt}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Tt,zt,Vt,nn.numFeatures,nn.numPoints,nn.numSimplified),console.timeEnd("creation"));var Un="z"+Tt;this.stats[Un]=(this.stats[Un]||0)+1,this.total++}if(nn.source=yt,jt){if(Tt===Ve.maxZoom||Tt===jt)continue;var Ni=1<<jt-Tt;if(zt!==Math.floor(me/Ni)||Vt!==Math.floor(Ee/Ni))continue}else if(Tt===Ve.indexMaxZoom||nn.numPoints<=Ve.indexMaxPoints)continue;if(nn.source=null,0!==yt.length){tt>1&&console.time("clipping");var kn,ei,Yi,Xi,nr,Vi,Ji=.5*Ve.buffer/Ve.extent,ho=.5-Ji,Ui=.5+Ji,Fr=1+Ji;kn=ei=Yi=Xi=null,nr=He(yt,Gt,zt-Ji,zt+Ui,0,nn.minX,nn.maxX,Ve),Vi=He(yt,Gt,zt+ho,zt+Fr,0,nn.minX,nn.maxX,Ve),yt=null,nr&&(kn=He(nr,Gt,Vt-Ji,Vt+Ui,1,nn.minY,nn.maxY,Ve),ei=He(nr,Gt,Vt+ho,Vt+Fr,1,nn.minY,nn.maxY,Ve),nr=null),Vi&&(Yi=He(Vi,Gt,Vt-Ji,Vt+Ui,1,nn.minY,nn.maxY,Ve),Xi=He(Vi,Gt,Vt+ho,Vt+Fr,1,nn.minY,nn.maxY,Ve),Vi=null),tt>1&&console.timeEnd("clipping"),ue.push(kn||[],Tt+1,2*zt,2*Vt),ue.push(ei||[],Tt+1,2*zt,2*Vt+1),ue.push(Yi||[],Tt+1,2*zt+1,2*Vt),ue.push(Xi||[],Tt+1,2*zt+1,2*Vt+1)}}},Gi.prototype.getTile=function(yt,Tt,zt){var Vt=this.options,jt=Vt.extent,me=Vt.debug;if(yt<0||yt>24)return null;var Ee=1<<yt,ue=ni(yt,Tt=(Tt%Ee+Ee)%Ee,zt);if(this.tiles[ue])return $e(this.tiles[ue],jt);me>1&&console.log("drilling down to z%d-%d-%d",yt,Tt,zt);for(var Ve,tt=yt,Gt=Tt,Sn=zt;!Ve&&tt>0;)tt--,Gt=Math.floor(Gt/2),Sn=Math.floor(Sn/2),Ve=this.tiles[ni(tt,Gt,Sn)];return Ve&&Ve.source?(me>1&&console.log("found parent tile z%d-%d-%d",tt,Gt,Sn),me>1&&console.time("drilling down"),this.splitTile(Ve.source,tt,Gt,Sn,yt,Tt,zt),me>1&&console.timeEnd("drilling down"),this.tiles[ue]?$e(this.tiles[ue],jt):null):null},function(yt,Tt){return new Gi(yt,Tt)}}();var Di=Qn.exports;function xn(he,k){return k?he.properties[k]:he.id}function Wn(he,k){if(null==he)return!0;if("Feature"===he.type)return null!=xn(he,k);if("FeatureCollection"===he.type){const R=new Set;for(const H of he.features){const J=xn(H,k);if(null==J||R.has(J))return!1;R.add(J)}return!0}return!1}function ct(he,k){const R=new Map;if(null!=he)if("Feature"===he.type)R.set(xn(he,k),he);else for(const H of he.features)R.set(xn(H,k),H);return R}function Y(he,k){const R=he.tileID.canonical;if(!this._geoJSONIndex)return k(null,null);const H=this._geoJSONIndex.getTile(R.z,R.x,R.y);if(!H)return k(null,null);const J=new _n(H.features);let le=hn.exports(J);0===le.byteOffset&&le.byteLength===le.buffer.byteLength||(le=new Uint8Array(le)),k(null,{vectorTile:J,rawData:le.buffer})}class te extends Te{constructor(k,R,H,J){super(k,R,H,Y),this._dataUpdateable=new Map,this.loadGeoJSON=(le,Ae)=>{const{promoteId:Le}=le;if(le.request)return m.getJSON(le.request,(Qe,ot,He,dt)=>{this._dataUpdateable=Wn(ot,Le)?ct(ot,Le):void 0,Ae(Qe,ot,He,dt)});if("string"==typeof le.data)try{const Qe=JSON.parse(le.data);this._dataUpdateable=Wn(Qe,Le)?ct(Qe,Le):void 0,Ae(null,Qe)}catch{Ae(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else le.dataDiff?this._dataUpdateable?(function(Qe,ot,He){var dt,$t,en,st;if(ot.removeAll&&Qe.clear(),ot.remove)for(const De of ot.remove)Qe.delete(De);if(ot.add)for(const De of ot.add){const Fe=xn(De,He);null!=Fe&&Qe.set(Fe,De)}if(ot.update)for(const De of ot.update){let Fe=Qe.get(De.id);if(null==Fe)continue;const Se=!De.removeAllProperties&&((null===(dt=De.removeProperties)||void 0===dt?void 0:dt.length)>0||(null===($t=De.addOrUpdateProperties)||void 0===$t?void 0:$t.length)>0);if((De.newGeometry||De.removeAllProperties||Se)&&(Fe={...Fe},Qe.set(De.id,Fe),Se&&(Fe.properties={...Fe.properties})),De.newGeometry&&(Fe.geometry=De.newGeometry),De.removeAllProperties)Fe.properties={};else if((null===(en=De.removeProperties)||void 0===en?void 0:en.length)>0)for(const Ne of De.removeProperties)Object.prototype.hasOwnProperty.call(Fe.properties,Ne)&&delete Fe.properties[Ne];if((null===(st=De.addOrUpdateProperties)||void 0===st?void 0:st.length)>0)for(const{key:Ne,value:we}of De.addOrUpdateProperties)Fe.properties[Ne]=we}}(this._dataUpdateable,le.dataDiff,Le),Ae(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ae(new Error(`Cannot update existing geojson data in ${le.source}`)):Ae(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},J&&(this.loadGeoJSON=J)}loadData(k,R){var H;null===(H=this._pendingRequest)||void 0===H||H.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const J=!!(k&&k.request&&k.request.collectResourceTiming)&&new m.RequestPerformance(k.request);this._pendingCallback=R,this._pendingRequest=this.loadGeoJSON(k,(le,Ae)=>{if(delete this._pendingCallback,delete this._pendingRequest,le||!Ae)return R(le);if("object"!=typeof Ae)return R(new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`));{lt(Ae,!0);try{if(k.filter){const Qe=m.createExpression(k.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Qe.result)throw new Error(Qe.value.map(He=>`${He.key}: ${He.message}`).join(", "));const ot=Ae.features.filter(He=>Qe.value.evaluate({zoom:0},He));Ae={type:"FeatureCollection",features:ot}}this._geoJSONIndex=k.cluster?new bn(function({superclusterOptions:Qe,clusterProperties:ot}){if(!ot||!Qe)return Qe;const He={},dt={},$t={accumulated:null,zoom:0},en={properties:null},st=Object.keys(ot);for(const De of st){const[Fe,Se]=ot[De],Ne=m.createExpression(Se),we=m.createExpression("string"==typeof Fe?[Fe,["accumulated"],["get",De]]:Fe);He[De]=Ne.value,dt[De]=we.value}return Qe.map=De=>{en.properties=De;const Fe={};for(const Se of st)Fe[Se]=He[Se].evaluate($t,en);return Fe},Qe.reduce=(De,Fe)=>{en.properties=Fe;for(const Se of st)$t.accumulated=De[Se],De[Se]=dt[Se].evaluate($t,en)},Qe}(k)).load(Ae.features):Di(Ae,k.geojsonVtOptions)}catch(Qe){return R(Qe)}this.loaded={};const Le={};if(J){const Qe=J.finish();Qe&&(Le.resourceTiming={},Le.resourceTiming[k.source]=JSON.parse(JSON.stringify(Qe)))}R(null,Le)}})}reloadTile(k,R){const H=this.loaded;return H&&H[k.uid]?super.reloadTile(k,R):this.loadTile(k,R)}removeSource(k,R){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),R()}getClusterExpansionZoom(k,R){try{R(null,this._geoJSONIndex.getClusterExpansionZoom(k.clusterId))}catch(H){R(H)}}getClusterChildren(k,R){try{R(null,this._geoJSONIndex.getChildren(k.clusterId))}catch(H){R(H)}}getClusterLeaves(k,R){try{R(null,this._geoJSONIndex.getLeaves(k.clusterId,k.limit,k.offset))}catch(H){R(H)}}}class Me{constructor(k){this.self=k,this.actor=new m.Actor(k,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Te,geojson:te},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(R,H)=>{if(this.workerSourceTypes[R])throw new Error(`Worker source with name "${R}" already registered.`);this.workerSourceTypes[R]=H},this.self.registerRTLTextPlugin=R=>{if(m.plugin.isParsed())throw new Error("RTL text plugin already registered.");m.plugin.applyArabicShaping=R.applyArabicShaping,m.plugin.processBidirectionalText=R.processBidirectionalText,m.plugin.processStyledBidirectionalText=R.processStyledBidirectionalText}}setReferrer(k,R){this.referrer=R}setImages(k,R,H){this.availableImages[k]=R;for(const J in this.workerSources[k]){const le=this.workerSources[k][J];for(const Ae in le)le[Ae].availableImages=R}H()}setLayers(k,R,H){this.getLayerIndex(k).replace(R),H()}updateLayers(k,R,H){this.getLayerIndex(k).update(R.layers,R.removedIds),H()}loadTile(k,R,H){this.getWorkerSource(k,R.type,R.source).loadTile(R,H)}loadDEMTile(k,R,H){this.getDEMWorkerSource(k,R.source).loadTile(R,H)}reloadTile(k,R,H){this.getWorkerSource(k,R.type,R.source).reloadTile(R,H)}abortTile(k,R,H){this.getWorkerSource(k,R.type,R.source).abortTile(R,H)}removeTile(k,R,H){this.getWorkerSource(k,R.type,R.source).removeTile(R,H)}removeDEMTile(k,R){this.getDEMWorkerSource(k,R.source).removeTile(R)}removeSource(k,R,H){if(!this.workerSources[k]||!this.workerSources[k][R.type]||!this.workerSources[k][R.type][R.source])return;const J=this.workerSources[k][R.type][R.source];delete this.workerSources[k][R.type][R.source],void 0!==J.removeSource?J.removeSource(R,H):H()}loadWorkerSource(k,R,H){try{this.self.importScripts(R.url),H()}catch(J){H(J.toString())}}syncRTLPluginState(k,R,H){try{m.plugin.setState(R);const J=m.plugin.getPluginURL();if(m.plugin.isLoaded()&&!m.plugin.isParsed()&&null!=J){this.self.importScripts(J);const le=m.plugin.isParsed();H(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${J}`),le)}}catch(J){H(J.toString())}}getAvailableImages(k){let R=this.availableImages[k];return R||(R=[]),R}getLayerIndex(k){let R=this.layerIndexes[k];return R||(R=this.layerIndexes[k]=new Ye),R}getWorkerSource(k,R,H){return this.workerSources[k]||(this.workerSources[k]={}),this.workerSources[k][R]||(this.workerSources[k][R]={}),this.workerSources[k][R][H]||(this.workerSources[k][R][H]=new this.workerSourceTypes[R]({send:(le,Ae,Le)=>{this.actor.send(le,Ae,Le,k)}},this.getLayerIndex(k),this.getAvailableImages(k))),this.workerSources[k][R][H]}getDEMWorkerSource(k,R){return this.demWorkerSources[k]||(this.demWorkerSources[k]={}),this.demWorkerSources[k][R]||(this.demWorkerSources[k][R]=new ut),this.demWorkerSources[k][R]}enforceCacheSizeLimit(k,R){m.enforceCacheSizeLimit(R)}}return m.isWorker()&&(self.worker=new Me(self)),Me}),l(0,function(m){var qe=ke;function ke(y){return n=y,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,b,C=new Blob([""],{type:"text/javascript"}),A=URL.createObjectURL(C);try{b=new Worker(A),g=!0}catch{g=!1}return b&&b.terminate(),URL.revokeObjectURL(A),g}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var g=document.createElement("canvas");g.width=g.height=1;var b=g.getContext("2d");if(!b)return!1;var C=b.getImageData(0,0,1,1);return C&&C.width===g.width}()||(void 0===Ye[u=n&&n.failIfMajorPerformanceCaveat]&&(Ye[u]=function(g){var b,A,B,V,C=(A=g,B=document.createElement("canvas"),(V=Object.create(ke.webGLContextAttributes)).failIfMajorPerformanceCaveat=A,B.getContext("webgl",V)||B.getContext("experimental-webgl",V));if(!C)return!1;try{b=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!b||C.isContextLost())&&(C.shaderSource(b,"void main() {}"),C.compileShader(b),!0===C.getShaderParameter(b,C.COMPILE_STATUS))}(u)),!Ye[u]||document.documentMode));var n,u}var Ye={};function Re(y,n){if(Array.isArray(y)){if(!Array.isArray(n)||y.length!==n.length)return!1;for(let u=0;u<y.length;u++)if(!Re(y[u],n[u]))return!1;return!0}if("object"==typeof y&&null!==y&&null!==n){if("object"!=typeof n||Object.keys(y).length!==Object.keys(n).length)return!1;for(const u in y)if(!Re(y[u],n[u]))return!1;return!0}return y===n}ke.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class pe{static testProp(n){if(!pe.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in pe.docStyle)return n[u];return n[0]}static create(n,u,g){const b=window.document.createElement(n);return void 0!==u&&(b.className=u),g&&g.appendChild(b),b}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){pe.docStyle&&pe.selectProp&&(pe.userSelect=pe.docStyle[pe.selectProp],pe.docStyle[pe.selectProp]="none")}static enableDrag(){pe.docStyle&&pe.selectProp&&(pe.docStyle[pe.selectProp]=pe.userSelect)}static setTransform(n,u){n.style[pe.transformProp]=u}static addEventListener(n,u,g,b={}){n.addEventListener(u,g,"passive"in b?b:b.capture)}static removeEventListener(n,u,g,b={}){n.removeEventListener(u,g,"passive"in b?b:b.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",pe.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",pe.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",pe.suppressClickInternal,!0)},0)}static mousePos(n,u){const g=n.getBoundingClientRect();return new m.pointGeometry(u.clientX-g.left-n.clientLeft,u.clientY-g.top-n.clientTop)}static touchPos(n,u){const g=n.getBoundingClientRect(),b=[];for(let C=0;C<u.length;C++)b.push(new m.pointGeometry(u[C].clientX-g.left-n.clientLeft,u[C].clientY-g.top-n.clientTop));return b}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}pe.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,pe.selectProp=pe.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),pe.transformProp=pe.testProp(["transform","WebkitTransform"]);class Ge{constructor(n){this._transformRequestFn=n}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}normalizeSpriteURL(n,u,g){const b=function(C){const A=C.match(rt);if(!A)throw new Error(`Unable to parse URL "${C}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(n);return b.path+=`${u}${g}`,function(C){const A=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${A}`}(b)}setTransformRequest(n){this._transformRequestFn=n}}const rt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class Te{constructor(n,u,g,b){this.context=n,this.format=g,this.texture=n.gl.createTexture(),this.update(u,b)}update(n,u,g){const{width:b,height:C}=n,A=!(this.size&&this.size[0]===b&&this.size[1]===C||g),{context:B}=this,{gl:V}=B;if(this.useMipmap=Boolean(u&&u.useMipmap),V.bindTexture(V.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===V.RGBA&&(!u||!1!==u.premultiply)),A)this.size=[b,C],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||m.isImageBitmap(n)?V.texImage2D(V.TEXTURE_2D,0,this.format,this.format,V.UNSIGNED_BYTE,n):V.texImage2D(V.TEXTURE_2D,0,this.format,b,C,0,this.format,V.UNSIGNED_BYTE,n.data);else{const{x:Q,y:ae}=g||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||m.isImageBitmap(n)?V.texSubImage2D(V.TEXTURE_2D,0,Q,ae,V.RGBA,V.UNSIGNED_BYTE,n):V.texSubImage2D(V.TEXTURE_2D,0,Q,ae,b,C,V.RGBA,V.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&V.generateMipmap(V.TEXTURE_2D)}bind(n,u,g){const{context:b}=this,{gl:C}=b;C.bindTexture(C.TEXTURE_2D,this.texture),g!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=C.LINEAR),n!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,n),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,g||n),this.filter=n),u!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ut(y){const{userImage:n}=y;return!!(n&&n.render&&n.render())&&(y.data.replace(new Uint8Array(n.data.buffer)),!0)}class lt extends m.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new m.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,callback:g}of this.requestors)this._notify(u,g);this.requestors=[]}}getImage(n){return this.images[n]}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let g=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new m.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new m.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new m.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),g=!1),g}_validateStretch(n,u){if(!n)return!0;let g=0;for(const b of n){if(b[0]<g||b[1]<b[0]||u<b[1])return!1;g=b[1]}return!0}_validateContent(n,u){return!(n&&(4!==n.length||n[0]<0||u.data.width<n[0]||n[1]<0||u.data.height<n[1]||n[2]<0||u.data.width<n[2]||n[3]<0||u.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,u){const g=this.images[n];if(g.data.width!==u.data.width||g.data.height!==u.data.height)throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,u){let g=!0;if(!this.isLoaded())for(const b of n)this.images[b]||(g=!1);this.isLoaded()||g?this._notify(n,u):this.requestors.push({ids:n,callback:u})}_notify(n,u){const g={};for(const b of n){this.images[b]||this.fire(new m.Event("styleimagemissing",{id:b}));const C=this.images[b];C?g[b]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:Boolean(C.userImage&&C.userImage.render)}:m.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,g)}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],g=this.getImage(n);if(!g)return null;if(u&&u.position.version===g.version)return u.position;if(u)u.position.version=g.version;else{const b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},C=new m.ImagePosition(b,g);this.patterns[n]={bin:b,position:C}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Te(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const C in this.patterns)n.push(this.patterns[C].bin);const{w:u,h:g}=m.potpack(n),b=this.atlasImage;b.resize({width:u||1,height:g||1});for(const C in this.patterns){const{bin:A}=this.patterns[C],B=A.x+1,V=A.y+1,Q=this.images[C].data,ae=Q.width,ce=Q.height;m.RGBAImage.copy(Q,b,{x:0,y:0},{x:B,y:V},{width:ae,height:ce}),m.RGBAImage.copy(Q,b,{x:0,y:ce-1},{x:B,y:V-1},{width:ae,height:1}),m.RGBAImage.copy(Q,b,{x:0,y:0},{x:B,y:V+ce},{width:ae,height:1}),m.RGBAImage.copy(Q,b,{x:ae-1,y:0},{x:B-1,y:V},{width:1,height:ce}),m.RGBAImage.copy(Q,b,{x:0,y:0},{x:B+ae,y:V},{width:1,height:ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const g=this.images[u];g||m.warnOnce(`Image with ID: "${u}" was not found`),ut(g)&&this.updateImage(u,g)}}}const We=1e20;function Dt(y,n,u,g,b,C,A,B,V){for(let Q=n;Q<n+g;Q++)wt(y,u*C+Q,C,b,A,B,V);for(let Q=u;Q<u+b;Q++)wt(y,Q*C+n,1,g,A,B,V)}function wt(y,n,u,g,b,C,A){C[0]=0,A[0]=-We,A[1]=We,b[0]=y[n];for(let B=1,V=0,Q=0;B<g;B++){b[B]=y[n+B*u];const ae=B*B;do{const ce=C[V];Q=(b[B]-b[ce]+ae-ce*ce)/(B-ce)/2}while(Q<=A[V]&&--V>-1);V++,C[V]=B,A[V]=Q,A[V+1]=We}for(let B=0,V=0;B<g;B++){for(;A[V+1]<B;)V++;const Q=C[V],ae=B-Q;y[n+B*u]=b[Q]+ae*ae}}class Et{constructor(n,u){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={}}setURL(n){this.url=n}getGlyphs(n,u){const g=[];for(const b in n)for(const C of n[b])g.push({stack:b,id:C});m.asyncAll(g,({stack:b,id:C},A)=>{let B=this.entries[b];B||(B=this.entries[b]={glyphs:{},requests:{},ranges:{}});let V=B.glyphs[C];if(void 0!==V)return void A(null,{stack:b,id:C,glyph:V});if(V=this._tinySDF(B,b,C),V)return B.glyphs[C]=V,void A(null,{stack:b,id:C,glyph:V});const Q=Math.floor(C/256);if(256*Q>65535)return void A(new Error("glyphs > 65535 not supported"));if(B.ranges[Q])return void A(null,{stack:b,id:C,glyph:V});let ae=B.requests[Q];ae||(ae=B.requests[Q]=[],Et.loadGlyphRange(b,Q,this.url,this.requestManager,(ce,ye)=>{if(ye){for(const Be in ye)this._doesCharSupportLocalGlyph(+Be)||(B.glyphs[+Be]=ye[+Be]);B.ranges[Q]=!0}for(const Be of ae)Be(ce,ye);delete B.requests[Q]})),ae.push((ce,ye)=>{ce?A(ce):ye&&A(null,{stack:b,id:C,glyph:ye[C]||null})})},(b,C)=>{if(b)u(b);else if(C){const A={};for(const{stack:B,id:V,glyph:Q}of C)(A[B]||(A[B]={}))[V]=Q&&{id:Q.id,bitmap:Q.bitmap.clone(),metrics:Q.metrics};u(null,A)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(m.unicodeBlockLookup["CJK Unified Ideographs"](n)||m.unicodeBlockLookup["Hangul Syllables"](n)||m.unicodeBlockLookup.Hiragana(n)||m.unicodeBlockLookup.Katakana(n))}_tinySDF(n,u,g){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(g))return;let C=n.tinySDF;if(!C){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),C=n.tinySDF=new Et.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:b,fontWeight:B})}const A=C.draw(String.fromCharCode(g));return{id:g,bitmap:new m.AlphaImage({width:A.width||30,height:A.height||30},A.data),metrics:{width:A.glyphWidth||24,height:A.glyphHeight||24,left:A.glyphLeft||0,top:A.glyphTop-27||-8,advance:A.glyphAdvance||24}}}}Et.loadGlyphRange=function(y,n,u,g,b){const C=256*n,A=C+255,B=g.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${C}-${A}`),m.ResourceType.Glyphs);m.getArrayBuffer(B,(V,Q)=>{if(V)b(V);else if(Q){const ae={};for(const ce of m.parseGlyphPbf(Q))ae[ce.id]=ce;b(null,ae)}})},Et.TinySDF=class{constructor({fontSize:y=24,buffer:n=3,radius:u=8,cutoff:g=.25,fontFamily:b="sans-serif",fontWeight:C="normal",fontStyle:A="normal"}={}){this.buffer=n,this.cutoff=g,this.radius=u;const B=this.size=y+4*n,V=this._createCanvas(B),Q=this.ctx=V.getContext("2d",{willReadFrequently:!0});Q.font=`${A} ${C} ${y}px ${b}`,Q.textBaseline="alphabetic",Q.textAlign="left",Q.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(y){const n=document.createElement("canvas");return n.width=n.height=y,n}draw(y){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:g,actualBoundingBoxLeft:b,actualBoundingBoxRight:C}=this.ctx.measureText(y),A=Math.ceil(u),B=Math.min(this.size-this.buffer,Math.ceil(C-b)),V=Math.min(this.size-this.buffer,A+Math.ceil(g)),Q=B+2*this.buffer,ae=V+2*this.buffer,ce=Math.max(Q*ae,0),ye=new Uint8ClampedArray(ce),Be={data:ye,width:Q,height:ae,glyphWidth:B,glyphHeight:V,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(0===B||0===V)return Be;const{ctx:Ue,buffer:Oe,gridInner:ht,gridOuter:mt}=this;Ue.clearRect(Oe,Oe,B,V),Ue.fillText(y,Oe,Oe+A);const xt=Ue.getImageData(Oe,Oe,B,V);mt.fill(We,0,ce),ht.fill(0,0,ce);for(let it=0;it<V;it++)for(let kt=0;kt<B;kt++){const Ht=xt.data[4*(it*B+kt)+3]/255;if(0===Ht)continue;const Ft=(it+Oe)*Q+kt+Oe;if(1===Ht)mt[Ft]=0,ht[Ft]=We;else{const Zt=.5-Ht;mt[Ft]=Zt>0?Zt*Zt:0,ht[Ft]=Zt<0?Zt*Zt:0}}Dt(mt,0,0,Q,ae,Q,this.f,this.v,this.z),Dt(ht,Oe,Oe,B,V,Q,this.f,this.v,this.z);for(let it=0;it<ce;it++){const kt=Math.sqrt(mt[it])-Math.sqrt(ht[it]);ye[it]=Math.round(255-255*(kt/this.radius+this.cutoff))}return Be}};const _n=new m.Properties({anchor:new m.DataConstantProperty(m.spec.light.anchor),position:new class{constructor(){this.specification=m.spec.light.position}possiblyEvaluate(y,n){return m.sphericalToCartesian(y.expression.evaluate(n))}interpolate(y,n,u){return{x:m.number(y.x,n.x,u),y:m.number(y.y,n.y,u),z:m.number(y.z,n.z,u)}}},color:new m.DataConstantProperty(m.spec.light.color),intensity:new m.DataConstantProperty(m.spec.light.intensity)}),hn="-transition";class At extends m.Evented{constructor(n){super(),this._transitionable=new m.Transitionable(_n),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(m.validateLight,n,u))for(const g in n){const b=n[g];g.endsWith(hn)?this._transitionable.setTransition(g.slice(0,-hn.length),b):this._transitionable.setValue(g,b)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,g){return(!g||!1!==g.validate)&&m.emitValidationErrors(this,n.call(m.validateStyle,m.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:m.spec})))}}class Pe{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const g=n.join(",")+String(u);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(n,u)),this.dashEntry[g]}getDashRanges(n,u,g){const b=[];let C=n.length%2==1?-n[n.length-1]*g:0,A=n[0]*g,B=!0;b.push({left:C,right:A,isDash:B,zeroLength:0===n[0]});let V=n[0];for(let Q=1;Q<n.length;Q++){B=!B;const ae=n[Q];C=V*g,V+=ae,A=V*g,b.push({left:C,right:A,isDash:B,zeroLength:0===ae})}return b}addRoundDash(n,u,g){const b=u/2;for(let C=-g;C<=g;C++){const A=this.width*(this.nextRow+g+C);let B=0,V=n[B];for(let Q=0;Q<this.width;Q++){Q/V.right>1&&(V=n[++B]);const ae=Math.abs(Q-V.left),ce=Math.abs(Q-V.right),ye=Math.min(ae,ce);let Be;const Ue=C/g*(b+1);if(V.isDash){const Oe=b-Math.abs(Ue);Be=Math.sqrt(ye*ye+Oe*Oe)}else Be=b-Math.sqrt(ye*ye+Ue*Ue);this.data[A+Q]=Math.max(0,Math.min(255,Be+128))}}}addRegularDash(n){for(let B=n.length-1;B>=0;--B){const V=n[B],Q=n[B+1];V.zeroLength?n.splice(B,1):Q&&Q.isDash===V.isDash&&(Q.left=V.left,n.splice(B,1))}const u=n[0],g=n[n.length-1];u.isDash===g.isDash&&(u.left=g.left-this.width,g.right=u.right+this.width);const b=this.width*this.nextRow;let C=0,A=n[C];for(let B=0;B<this.width;B++){B/A.right>1&&(A=n[++C]);const V=Math.abs(B-A.left),Q=Math.abs(B-A.right),ae=Math.min(V,Q);this.data[b+B]=Math.max(0,Math.min(255,(A.isDash?ae:-ae)+128))}}addDash(n,u){const g=u?7:0,b=2*g+1;if(this.nextRow+b>this.height)return m.warnOnce("LineAtlas out of space"),null;let C=0;for(let B=0;B<n.length;B++)C+=n[B];if(0!==C){const B=this.width/C,V=this.getDashRanges(n,this.width,B);u?this.addRoundDash(V,B,g):this.addRegularDash(V)}const A={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:C};return this.nextRow+=b,this.dirty=!0,A}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Ze{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=m.uniqueId();const g=this.workerPool.acquire(this.id);for(let b=0;b<g.length;b++){const C=new Ze.Actor(g[b],u,this.id);C.name=`Worker ${b}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u,g){m.asyncAll(this.actors,(b,C)=>{b.send(n,u,C)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Yt(y,n,u){const g=function(b,C){if(b)return u(b);if(C){const A=m.pick(m.extend(C,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(A.vectorLayers=C.vector_layers,A.vectorLayerIds=A.vectorLayers.map(B=>B.id)),u(null,A)}};return y.url?m.getJSON(n.transformRequest(y.url,m.ResourceType.Source),g):m.exported.frame(()=>g(null,y))}Ze.Actor=m.Actor;class Ot{constructor(n,u,g){this.bounds=m.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(n){return Array.isArray(n)&&4===n.length?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),g=Math.floor(m.mercatorXfromLng(this.bounds.getWest())*u),b=Math.floor(m.mercatorYfromLat(this.bounds.getNorth())*u),C=Math.ceil(m.mercatorXfromLng(this.bounds.getEast())*u),A=Math.ceil(m.mercatorYfromLat(this.bounds.getSouth())*u);return n.x>=g&&n.x<C&&n.y>=b&&n.y<A}}class Ut extends m.Evented{constructor(n,u,g,b){if(super(),this.id=n,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,m.extend(this,m.pick(u,["url","scheme","tileSize","promoteId"])),this._options=m.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Yt(this._options,this.map._requestManager,(n,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new m.ErrorEvent(n)):u&&(m.extend(this,u),u.bounds&&(this.tileBounds=new Ot(u.bounds,this.minzoom,this.maxzoom)),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return m.extend({},this._options)}loadTile(n,u){const g=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(g,m.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function C(A,B){return delete n.request,n.aborted?u(null):A&&404!==A.status?u(A):(B&&B.resourceTiming&&(n.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&n.setExpiryData(B),n.loadVectorData(B,this.map.painter),m.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=u:n.request=n.actor.send("reloadTile",b,C.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",b,C.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class tn extends m.Evented{constructor(n,u,g,b){super(),this.id=n,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=m.extend({type:"raster"},u),m.extend(this,m.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Yt(this._options,this.map._requestManager,(n,u)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new m.ErrorEvent(n)):u&&(m.extend(this,u),u.bounds&&(this.tileBounds=new Ot(u.bounds,this.minzoom,this.maxzoom)),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return m.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,u){const g=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=m.getImage(this.map._requestManager.transformRequest(g,m.ResourceType.Tile),(b,C,A)=>{if(delete n.request,n.aborted)n.state="unloaded",u(null);else if(b)n.state="errored",u(b);else if(C){this.map._refreshExpiredTiles&&n.setExpiryData(A);const B=this.map.painter.context,V=B.gl;n.texture=this.map.painter.getTileTexture(C.width),n.texture?n.texture.update(C,{useMipmap:!0}):(n.texture=new Te(B,C,V.RGBA,{useMipmap:!0}),n.texture.bind(V.LINEAR,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&V.texParameterf(V.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),n.state="loaded",m.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(n,u){n.request&&(n.request.cancel(),delete n.request),u()}unloadTile(n,u){n.texture&&this.map.painter.saveTileTexture(n.texture),u()}hasTransition(){return!1}}let pt;class Xe extends tn{constructor(n,u,g,b){super(n,u,g,b),this.type="raster-dem",this.maxzoom=22,this._options=m.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,u){const g=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function b(C,A){C&&(n.state="errored",u(C)),A&&(n.dem=A,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",u(null))}n.request=m.getImage(this.map._requestManager.transformRequest(g,m.ResourceType.Tile),function(C,A){if(delete n.request,n.aborted)n.state="unloaded",u(null);else if(C)n.state="errored",u(C);else if(A){this.map._refreshExpiredTiles&&n.setExpiryData(A),delete A.cacheControl,delete A.expires;const B=m.isImageBitmap(A)&&(null==pt&&(pt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),pt)?A:m.exported.getImageData(A,1),V={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:B,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",V,b.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const u=n.canonical,g=Math.pow(2,u.z),b=(u.x-1+g)%g,C=0===u.x?n.wrap-1:n.wrap,A=(u.x+1+g)%g,B=u.x+1===g?n.wrap+1:n.wrap,V={};return V[new m.OverscaledTileID(n.overscaledZ,C,u.z,b,u.y).key]={backfilled:!1},V[new m.OverscaledTileID(n.overscaledZ,B,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(V[new m.OverscaledTileID(n.overscaledZ,C,u.z,b,u.y-1).key]={backfilled:!1},V[new m.OverscaledTileID(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},V[new m.OverscaledTileID(n.overscaledZ,B,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<g&&(V[new m.OverscaledTileID(n.overscaledZ,C,u.z,b,u.y+1).key]={backfilled:!1},V[new m.OverscaledTileID(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},V[new m.OverscaledTileID(n.overscaledZ,B,u.z,A,u.y+1).key]={backfilled:!1}),V}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class It extends m.Evented{constructor(n,u,g,b){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(b),this._data=u.data,this._options=m.extend({},u),this._collectResourceTiming=u.collectResourceTiming,void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const C=m.EXTENT/this.tileSize;this.workerOptions=m.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(void 0!==u.buffer?u.buffer:128)*C,tolerance:(void 0!==u.tolerance?u.tolerance:.375)*C,extent:m.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:void 0!==u.clusterMaxZoom?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:m.EXTENT,radius:(u.clusterRadius||50)*C,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getClusterExpansionZoom(n,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},u),this}getClusterChildren(n,u){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},u),this}getClusterLeaves(n,u,g,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:u,offset:g},b),this}_updateWorkerData(n){const u=m.extend({},this.workerOptions);n?u.dataDiff=n:"string"==typeof this._data?(u.request=this.map._requestManager.transformRequest(m.exported.resolveURL(this._data),m.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new m.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(g,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new m.Event("dataabort",{dataType:"source"}));let C=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(C=b.resourceTiming[this.id].slice(0)),g)return void this.fire(new m.ErrorEvent(g));const A={dataType:"source"};this._collectResourceTiming&&C&&C.length>0&&m.extend(A,{resourceTiming:C}),this.fire(new m.Event("data",{...A,sourceDataType:"metadata"})),this.fire(new m.Event("data",{...A,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(n,u){const g=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const b={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(g,b,(C,A)=>(delete n.request,n.unloadVectorData(),n.aborted?u(null):C?u(C):(n.loadVectorData(A,this.map.painter,"reloadTile"===g),u(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return m.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var St=m.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pn extends m.Evented{constructor(n,u,g,b){super(),this.id=n,this.dispatcher=g,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=u}load(n,u){this._loaded=!1,this.fire(new m.Event("dataloading",{dataType:"source"})),this.url=this.options.url,m.getImage(this.map._requestManager.transformRequest(this.url,m.ResourceType.Image),(g,b)=>{this._loaded=!0,g?this.fire(new m.ErrorEvent(g)):b&&(this.image=b,n&&(this.coordinates=n),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}setCoordinates(n){this.coordinates=n;const u=n.map(m.MercatorCoordinate.fromLngLat);this.tileID=function(b){let C=1/0,A=1/0,B=-1/0,V=-1/0;for(const ye of b)C=Math.min(C,ye.x),A=Math.min(A,ye.y),B=Math.max(B,ye.x),V=Math.max(V,ye.y);const Q=Math.max(B-C,V-A),ae=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),ce=Math.pow(2,ae);return new m.CanonicalTileID(ae,Math.floor((C+B)/2*ce),Math.floor((A+V)/2*ce))}(u),this.minzoom=this.maxzoom=this.tileID.z;const g=u.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new m.RasterBoundsArray,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,m.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,m.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,m.EXTENT,m.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new m.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const n=this.map.painter.context,u=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Te(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const g in this.tiles){const b=this.tiles[g];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}}loadTile(n,u){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},u(null)):(n.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class un extends pn{constructor(n,u,g,b){super(n,u,g,b),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,m.ResourceType.Source).url);m.getVideo(this.urls,(u,g)=>{this._loaded=!0,u?this.fire(new m.ErrorEvent(u)):g&&(this.video=g,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new m.ErrorEvent(new m.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new Te(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const g in this.tiles){const b=this.tiles[g];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Gn extends pn{constructor(n,u,g,b){super(n,u,g,b),u.coordinates?Array.isArray(u.coordinates)&&4===u.coordinates.length&&!u.coordinates.some(C=>!Array.isArray(C)||2!==C.length||C.some(A=>"number"!=typeof A))||this.fire(new m.ErrorEvent(new m.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new m.ErrorEvent(new m.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&"boolean"!=typeof u.animate&&this.fire(new m.ErrorEvent(new m.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?"string"==typeof u.canvas||u.canvas instanceof HTMLCanvasElement||this.fire(new m.ErrorEvent(new m.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new m.ErrorEvent(new m.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=void 0===u.animate||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new m.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const u=this.map.painter.context,g=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=m.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Te(u,this.canvas,g.RGBA,{premultiply:!0});for(const b in this.tiles){const C=this.tiles[b];"loaded"!==C.state&&(C.state="loaded",C.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const di={vector:Ut,raster:tn,"raster-dem":Xe,geojson:It,video:un,image:pn,canvas:Gn};function yi(y,n){const u=m.create();return m.translate(u,u,[1,1,0]),m.scale(u,u,[.5*y.width,.5*y.height,1]),m.multiply(u,u,y.calculatePosMatrix(n.toUnwrapped()))}function yn(y,n,u,g,b,C){const A=function(ce,ye,Be){if(ce)for(const Ue of ce){const Oe=ye[Ue];if(Oe&&Oe.source===Be&&"fill-extrusion"===Oe.type)return!0}else for(const Ue in ye){const Oe=ye[Ue];if(Oe.source===Be&&"fill-extrusion"===Oe.type)return!0}return!1}(b&&b.layers,n,y.id),B=C.maxPitchScaleFactor(),V=y.tilesIn(g,B,A);V.sort(gi);const Q=[];for(const ce of V)Q.push({wrappedTileID:ce.tileID.wrapped().key,queryResults:ce.tile.queryRenderedFeatures(n,u,y._state,ce.queryGeometry,ce.cameraQueryGeometry,ce.scale,b,C,B,yi(y.transform,ce.tileID))});const ae=function(ce){const ye={},Be={};for(const Ue of ce){const Oe=Ue.queryResults,ht=Ue.wrappedTileID,mt=Be[ht]=Be[ht]||{};for(const xt in Oe){const it=Oe[xt],kt=mt[xt]=mt[xt]||{},Ht=ye[xt]=ye[xt]||[];for(const Ft of it)kt[Ft.featureIndex]||(kt[Ft.featureIndex]=!0,Ht.push(Ft))}}return ye}(Q);for(const ce in ae)ae[ce].forEach(ye=>{const Be=ye.feature,Ue=y.getFeatureState(Be.layer["source-layer"],Be.id);Be.source=Be.layer.source,Be.layer["source-layer"]&&(Be.sourceLayer=Be.layer["source-layer"]),Be.state=Ue});return ae}function gi(y,n){const u=y.tileID,g=n.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}class Ei{constructor(n,u){this.tileID=n,this.uid=m.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const u=n+this.timeAdded;u<m.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(b,C){const A={};if(!C)return A;for(const B of b){const V=B.layerIds.map(Q=>C.getLayer(Q)).filter(Boolean);if(0!==V.length){B.layers=V,B.stateDependentLayerIds&&(B.stateDependentLayers=B.stateDependentLayerIds.map(Q=>V.filter(ae=>ae.id===Q)[0]));for(const Q of V)A[Q.id]=B}}return A}(n.buckets,u.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const C=this.buckets[b];if(C instanceof m.SymbolBucket){if(this.hasSymbolBuckets=!0,!g)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const C=this.buckets[b];if(C instanceof m.SymbolBucket&&C.hasRTLText){this.hasRTLText=!0,m.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const b in this.buckets){const C=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(b).queryRadius(C))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new m.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const g in this.buckets){const b=this.buckets[g];b.uploadPending()&&b.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Te(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Te(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,g,b,C,A,B,V,Q,ae){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:C,scale:A,tileSize:this.tileSize,pixelPosMatrix:ae,transform:V,params:B,queryPadding:this.queryPadding*Q},n,u,g):{}}querySourceFeatures(n,u){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const b=g.loadVTLayers(),C=u&&u.sourceLayer?u.sourceLayer:"",A=b._geojsonTileLayer||b[C];if(!A)return;const B=m.createFilter(u&&u.filter),{z:V,x:Q,y:ae}=this.tileID.canonical,ce={z:V,x:Q,y:ae};for(let ye=0;ye<A.length;ye++){const Be=A.feature(ye);if(B.needGeometry){const ht=m.toEvaluationFeature(Be,!0);if(!B.filter(new m.EvaluationParameters(this.tileID.overscaledZ),ht,this.tileID.canonical))continue}else if(!B.filter(new m.EvaluationParameters(this.tileID.overscaledZ),Be))continue;const Ue=g.getId(Be,C),Oe=new m.GeoJSONFeature(Be,V,Q,ae,Ue);Oe.tile=ce,n.push(Oe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const g=m.parseCacheControl(n.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const g=Date.now();let b=!1;if(this.expirationTime>g)b=!1;else if(u)if(this.expirationTime<u)b=!0;else{const C=this.expirationTime-u;C?this.expirationTime=g+Math.max(C,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(n).length)return;const g=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!u.style.hasLayer(b))continue;const C=this.buckets[b],A=C.layers[0].sourceLayer||"_geojsonTileLayer",B=g[A],V=n[A];if(!B||!V||0===Object.keys(V).length)continue;C.update(V,B,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Q=u&&u.style&&u.style.getLayer(b);Q&&(this.queryPadding=Math.max(this.queryPadding,Q.queryRadius(C)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<m.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=m.exported.now()+n}setDependencies(n,u){const g={};for(const b of u)g[b]=!0;this.dependencies[n]=g}hasDependency(n,u){for(const g of n){const b=this.dependencies[g];if(b)for(const C of u)if(b[C])return!0}return!1}}class hi{constructor(n,u){this.max=n,this.onRemove=u,this.reset()}reset(){for(const n in this.data)for(const u of this.data[n])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(n,u,g){const b=n.wrapped().key;void 0===this.data[b]&&(this.data[b]=[]);const C={value:u,timeout:void 0};if(void 0!==g&&(C.timeout=setTimeout(()=>{this.remove(n,C)},g)),this.data[b].push(C),this.order.push(b),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const u=this.data[n].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[n].length&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),u.value}getByKey(n){const u=this.data[n];return u?u[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,u){if(!this.has(n))return this;const g=n.wrapped().key,b=void 0===u?0:this.data[g].indexOf(u),C=this.data[g][b];return this.data[g].splice(b,1),C.timeout&&clearTimeout(C.timeout),0===this.data[g].length&&delete this.data[g],this.onRemove(C.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(n){const u=[];for(const g in this.data)for(const b of this.data[g])n(b.value)||u.push(b);for(const g of u)this.remove(g.value.tileID,g)}}class bn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,g){const b=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][b]=this.stateChanges[n][b]||{},m.extend(this.stateChanges[n][b],g),null===this.deletedStates[n]){this.deletedStates[n]={};for(const C in this.state[n])C!==b&&(this.deletedStates[n][C]=null)}else if(this.deletedStates[n]&&null===this.deletedStates[n][b]){this.deletedStates[n][b]={};for(const C in this.state[n][b])g[C]||(this.deletedStates[n][b][C]=null)}else for(const C in g)this.deletedStates[n]&&this.deletedStates[n][b]&&null===this.deletedStates[n][b][C]&&delete this.deletedStates[n][b][C]}removeFeatureState(n,u,g){if(null===this.deletedStates[n])return;const b=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},g&&void 0!==u)null!==this.deletedStates[n][b]&&(this.deletedStates[n][b]=this.deletedStates[n][b]||{},this.deletedStates[n][b][g]=null);else if(void 0!==u)if(this.stateChanges[n]&&this.stateChanges[n][b])for(g in this.deletedStates[n][b]={},this.stateChanges[n][b])this.deletedStates[n][b][g]=null;else this.deletedStates[n][b]=null;else this.deletedStates[n]=null}getState(n,u){const g=String(u),b=m.extend({},(this.state[n]||{})[g],(this.stateChanges[n]||{})[g]);if(null===this.deletedStates[n])return{};if(this.deletedStates[n]){const C=this.deletedStates[n][u];if(null===C)return{};for(const A in C)delete b[A]}return b}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const g={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const C={};for(const A in this.stateChanges[b])this.state[b][A]||(this.state[b][A]={}),m.extend(this.state[b][A],this.stateChanges[b][A]),C[A]=this.state[b][A];g[b]=C}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const C={};if(null===this.deletedStates[b])for(const A in this.state[b])C[A]={},this.state[b][A]={};else for(const A in this.deletedStates[b]){if(null===this.deletedStates[b][A])this.state[b][A]={};else for(const B of Object.keys(this.deletedStates[b][A]))delete this.state[b][A][B];C[A]=this.state[b][A]}g[b]=g[b]||{},m.extend(g[b],C)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(g).length)for(const b in n)n[b].setFeatureState(g,u)}}class wn extends m.Evented{constructor(n,u,g){super(),this.id=n,this.dispatcher=g,this.on("data",b=>{"source"===b.dataType&&"metadata"===b.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===b.dataType&&"content"===b.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(b,C,A,B){const V=new di[C.type](b,C,A,B);if(V.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${V.id}`);return m.bindAll(["load","abort","unload","serialize","prepare"],V),V}(n,u,g,this),this._tiles={},this._cache=new hi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new bn}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const u=this._tiles[n];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u){return this._source.loadTile(n,u)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new m.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const g=this._tiles[u];g.upload(n),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(_t).map(n=>n.key)}getRenderableIds(n){const u=[];for(const g in this._tiles)this._isIdRenderable(g,n)&&u.push(this._tiles[g]);return n?u.sort((g,b)=>{const C=g.tileID,A=b.tileID,B=new m.pointGeometry(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),V=new m.pointGeometry(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-A.overscaledZ||V.y-B.y||V.x-B.x}).map(g=>g.tileID.key):u.map(g=>g.tileID).sort(_t).map(g=>g.key)}hasRenderableParent(n){const u=this.findLoadedParent(n,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(n,u){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(u||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(n,"reloading")}}_reloadTile(n,u){const g=this._tiles[n];g&&("loading"!==g.state&&(g.state=u),this._loadTile(g,this._tileLoaded.bind(this,g,n,u)))}_tileLoaded(n,u,g,b){if(b)return n.state="errored",void(404!==b.status?this._source.fire(new m.ErrorEvent(b,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=m.exported.now(),"expired"===g&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),"raster-dem"===this.getSource().type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new m.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const u=this.getRenderableIds();for(let b=0;b<u.length;b++){const C=u[b];if(n.neighboringTiles&&n.neighboringTiles[C]){const A=this.getTileByID(C);g(n,A),g(A,n)}}function g(b,C){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let A=C.tileID.canonical.x-b.tileID.canonical.x;const B=C.tileID.canonical.y-b.tileID.canonical.y,V=Math.pow(2,b.tileID.canonical.z),Q=C.tileID.key;0===A&&0===B||Math.abs(B)>1||(Math.abs(A)>1&&(1===Math.abs(A+V)?A+=V:1===Math.abs(A-V)&&(A-=V)),C.dem&&b.dem&&(b.dem.backfillBorder(C.dem,A,B),b.neighboringTiles&&b.neighboringTiles[Q]&&(b.neighboringTiles[Q].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,u,g,b){for(const C in this._tiles){let A=this._tiles[C];if(b[C]||!A.hasData()||A.tileID.overscaledZ<=u||A.tileID.overscaledZ>g)continue;let B=A.tileID;for(;A&&A.tileID.overscaledZ>u+1;){const Q=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[Q.key],A&&A.hasData()&&(B=Q)}let V=B;for(;V.overscaledZ>u;)if(V=V.scaledTo(V.overscaledZ-1),n[V.key]){b[B.key]=B;break}}}findLoadedParent(n,u){if(n.key in this._loadedParentTiles){const g=this._loadedParentTiles[n.key];return g&&g.tileID.overscaledZ>=u?g:null}for(let g=n.overscaledZ-1;g>=u;g--){const b=n.scaledTo(g),C=this._getLoadedTile(b);if(C)return C}}_getLoadedTile(n){const u=this._tiles[n.key];return u&&u.hasData()?u:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,g=Math.ceil(n.height/this._source.tileSize)+1,b=Math.floor(u*g*5),C="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(C)}handleWrapJump(n){const u=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,u){const g={};for(const b in this._tiles){const C=this._tiles[b];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+u),g[C.tileID.key]=C}this._tiles=g;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(n,u){if(this.transform=n,this.terrain=u,!this._sourceLoaded||this._paused)return;let g;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new m.OverscaledTileID(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(g=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(g=g.filter(Q=>this._source.hasTile(Q)))):g=[];const b=n.coveringZoomLevel(this._source),C=Math.max(b-wn.maxOverzooming,this._source.minzoom),A=Math.max(b+wn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const ae of g)if(ae.canonical.z>this._source.minzoom){const ce=ae.scaledTo(ae.canonical.z-1);Q[ce.key]=ce;const ye=ae.scaledTo(Math.max(this._source.minzoom,Math.min(ae.canonical.z,5)));Q[ye.key]=ye}g=g.concat(Object.values(Q))}const B=this._updateRetainedTiles(g,b);if(Nt(this._source.type)){const Q={},ae={},ce=Object.keys(B);for(const ye of ce){const Be=B[ye],Ue=this._tiles[ye];if(!Ue||Ue.fadeEndTime&&Ue.fadeEndTime<=m.exported.now())continue;const Oe=this.findLoadedParent(Be,C);Oe&&(this._addTile(Oe.tileID),Q[Oe.tileID.key]=Oe.tileID),ae[ye]=Be}this._retainLoadedChildren(ae,b,A,B);for(const ye in Q)B[ye]||(this._coveredTiles[ye]=!0,B[ye]=Q[ye]);if(u){const ye={},Be={};for(const Ue of g)this._tiles[Ue.key].hasData()?ye[Ue.key]=Ue:Be[Ue.key]=Ue;for(const Ue in Be){const Oe=Be[Ue].children(this._source.maxzoom);this._tiles[Oe[0].key]&&this._tiles[Oe[1].key]&&this._tiles[Oe[2].key]&&this._tiles[Oe[3].key]&&(ye[Oe[0].key]=B[Oe[0].key]=Oe[0],ye[Oe[1].key]=B[Oe[1].key]=Oe[1],ye[Oe[2].key]=B[Oe[2].key]=Oe[2],ye[Oe[3].key]=B[Oe[3].key]=Oe[3],delete Be[Ue])}for(const Ue in Be){const Oe=this.findLoadedParent(Be[Ue],this._source.minzoom);if(Oe){ye[Oe.tileID.key]=B[Oe.tileID.key]=Oe.tileID;for(const ht in ye)ye[ht].isChildOf(Oe.tileID)&&delete ye[ht]}}for(const Ue in this._tiles)ye[Ue]||(this._coveredTiles[Ue]=!0)}}for(const Q in B)this._tiles[Q].clearFadeHold();const V=m.keysDifference(this._tiles,B);for(const Q of V){const ae=this._tiles[Q];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){const g={},b={},C=Math.max(u-wn.maxOverzooming,this._source.minzoom),A=Math.max(u+wn.maxUnderzooming,this._source.minzoom),B={};for(const V of n){const Q=this._addTile(V);g[V.key]=V,Q.hasData()||u<this._source.maxzoom&&(B[V.key]=V)}this._retainLoadedChildren(B,u,A,g);for(const V of n){let Q=this._tiles[V.key];if(Q.hasData())continue;if(u+1>this._source.maxzoom){const ce=V.children(this._source.maxzoom)[0],ye=this.getTile(ce);if(ye&&ye.hasData()){g[ce.key]=ce;continue}}else{const ce=V.children(this._source.maxzoom);if(g[ce[0].key]&&g[ce[1].key]&&g[ce[2].key]&&g[ce[3].key])continue}let ae=Q.wasRequested();for(let ce=V.overscaledZ-1;ce>=C;--ce){const ye=V.scaledTo(ce);if(b[ye.key]||(b[ye.key]=!0,Q=this.getTile(ye),!Q&&ae&&(Q=this._addTile(ye)),Q&&(g[ye.key]=ye,ae=Q.wasRequested(),Q.hasData())))break}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const u=[];let g,b=this._tiles[n].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}u.push(b.key);const C=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(C),g)break;b=C}for(const C of u)this._loadedParentTiles[C]=g}}_addTile(n){let u=this._tiles[n.key];if(u)return u;u=this._cache.getAndRemove(n),u&&(this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,u)));const g=u;return u||(u=new Ei(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,n.key,u.state))),u.uses++,this._tiles[n.key]=u,g||this._source.fire(new m.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const g=u.getExpiryTimeout();g&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},g))}_removeTile(n){const u=this._tiles[n];u&&(u.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,u,g){const b=[],C=this.transform;if(!C)return b;const A=g?C.getCameraQueryGeometry(n):n,B=n.map(Ue=>C.pointCoordinate(Ue,this.terrain)),V=A.map(Ue=>C.pointCoordinate(Ue,this.terrain)),Q=this.getIds();let ae=1/0,ce=1/0,ye=-1/0,Be=-1/0;for(const Ue of V)ae=Math.min(ae,Ue.x),ce=Math.min(ce,Ue.y),ye=Math.max(ye,Ue.x),Be=Math.max(Be,Ue.y);for(let Ue=0;Ue<Q.length;Ue++){const Oe=this._tiles[Q[Ue]];if(Oe.holdingForFade())continue;const ht=Oe.tileID,mt=Math.pow(2,C.zoom-Oe.tileID.overscaledZ),xt=u*Oe.queryPadding*m.EXTENT/Oe.tileSize/mt,it=[ht.getTilePoint(new m.MercatorCoordinate(ae,ce)),ht.getTilePoint(new m.MercatorCoordinate(ye,Be))];if(it[0].x-xt<m.EXTENT&&it[0].y-xt<m.EXTENT&&it[1].x+xt>=0&&it[1].y+xt>=0){const kt=B.map(Ft=>ht.getTilePoint(Ft)),Ht=V.map(Ft=>ht.getTilePoint(Ft));b.push({tile:Oe,tileID:ht,queryGeometry:kt,cameraQueryGeometry:Ht,scale:mt})}}return b}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map(g=>this._tiles[g].tileID);for(const g of u)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Nt(this._source.type))for(const n in this._tiles){const u=this._tiles[n];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=m.exported.now())return!0}return!1}setFeatureState(n,u,g){this._state.updateState(n=n||"_geojsonTileLayer",u,g)}removeFeatureState(n,u,g){this._state.removeFeatureState(n=n||"_geojsonTileLayer",u,g)}getFeatureState(n,u){return this._state.getState(n=n||"_geojsonTileLayer",u)}setDependencies(n,u,g){const b=this._tiles[n];b&&b.setDependencies(u,g)}reloadTilesForDependencies(n,u){for(const g in this._tiles)this._tiles[g].hasDependency(n,u)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(n,u))}}function _t(y,n){const u=Math.abs(2*y.wrap)-+(y.wrap<0),g=Math.abs(2*n.wrap)-+(n.wrap<0);return y.overscaledZ-n.overscaledZ||g-u||n.canonical.y-y.canonical.y||n.canonical.x-y.canonical.x}function Nt(y){return"raster"===y||"image"===y||"video"===y}wn.maxOverzooming=10,wn.maxUnderzooming=3;const fn="mapboxgl_preloaded_worker_pool";class mn{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<mn.workerCount;)this.workers.push(new Worker(ha.workerUrl));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[fn]}numActive(){return Object.keys(this.active).length}}const On=Math.floor(m.exported.hardwareConcurrency/2);let Jn;function oi(){return Jn||(Jn=new mn),Jn}function fi(y,n){const u={};for(const g in y)"ref"!==g&&(u[g]=y[g]);return m.refProperties.forEach(g=>{g in n&&(u[g]=n[g])}),u}function $i(y){y=y.slice();const n=Object.create(null);for(let u=0;u<y.length;u++)n[y[u].id]=y[u];for(let u=0;u<y.length;u++)"ref"in y[u]&&(y[u]=fi(y[u],n[y[u].ref]));return y}mn.workerCount=Math.max(Math.min(On,6),1);const Qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Di(y,n,u){u.push({command:Qn.addSource,args:[y,n[y]]})}function xn(y,n,u){n.push({command:Qn.removeSource,args:[y]}),u[y]=!0}function Wn(y,n,u,g){xn(y,u,g),Di(y,n,u)}function ct(y,n,u){let g;for(g in y[u])if(Object.prototype.hasOwnProperty.call(y[u],g)&&"data"!==g&&!Re(y[u][g],n[u][g]))return!1;for(g in n[u])if(Object.prototype.hasOwnProperty.call(n[u],g)&&"data"!==g&&!Re(y[u][g],n[u][g]))return!1;return!0}function Y(y,n,u,g,b,C){let A;for(A in n=n||{},y=y||{})Object.prototype.hasOwnProperty.call(y,A)&&(Re(y[A],n[A])||u.push({command:C,args:[g,A,n[A],b]}));for(A in n)Object.prototype.hasOwnProperty.call(n,A)&&!Object.prototype.hasOwnProperty.call(y,A)&&(Re(y[A],n[A])||u.push({command:C,args:[g,A,n[A],b]}))}function te(y){return y.id}function Me(y,n){return y[n.id]=n,y}class he{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(1===this.points.length)return this.points[0];n=m.clamp(n,0,1);let u=1,g=this._distances[u];const b=n*this.paddedLength+this.padding;for(;g<b&&u<this._distances.length;)g=this._distances[++u];const C=u-1,A=this._distances[C],B=g-A,V=B>0?(b-A)/B:0;return this.points[C].mult(1-V).add(this.points[u].mult(V))}}function k(y,n){let u=!0;return"always"===y||"never"!==y&&"never"!==n||(u=!1),u}class R{constructor(n,u,g){const b=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(n/g),this.yCellCount=Math.ceil(u/g);for(let A=0;A<this.xCellCount*this.yCellCount;A++)b.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,g,b,C){this._forEachCell(u,g,b,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(C)}insertCircle(n,u,g,b){this._forEachCell(u-b,g-b,u+b,g+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(g),this.circles.push(b)}_insertBoxCell(n,u,g,b,C,A){this.boxCells[C].push(A)}_insertCircleCell(n,u,g,b,C,A){this.circleCells[C].push(A)}_query(n,u,g,b,C,A,B){if(g<0||n>this.width||b<0||u>this.height)return[];const V=[];if(n<=0&&u<=0&&this.width<=g&&this.height<=b){if(C)return[{key:null,x1:n,y1:u,x2:g,y2:b}];for(let Q=0;Q<this.boxKeys.length;Q++)V.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const ae=this.circles[3*Q],ce=this.circles[3*Q+1],ye=this.circles[3*Q+2];V.push({key:this.circleKeys[Q],x1:ae-ye,y1:ce-ye,x2:ae+ye,y2:ce+ye})}}else this._forEachCell(n,u,g,b,this._queryCell,V,{hitTest:C,overlapMode:A,seenUids:{box:{},circle:{}}},B);return V}query(n,u,g,b){return this._query(n,u,g,b,!1,null)}hitTest(n,u,g,b,C,A){return this._query(n,u,g,b,!0,C,A).length>0}hitTestCircle(n,u,g,b,C){const A=n-g,B=n+g,V=u-g,Q=u+g;if(B<0||A>this.width||Q<0||V>this.height)return!1;const ae=[];return this._forEachCell(A,V,B,Q,this._queryCellCircle,ae,{hitTest:!0,overlapMode:b,circle:{x:n,y:u,radius:g},seenUids:{box:{},circle:{}}},C),ae.length>0}_queryCell(n,u,g,b,C,A,B,V){const{seenUids:Q,hitTest:ae,overlapMode:ce}=B,ye=this.boxCells[C];if(null!==ye){const Ue=this.bboxes;for(const Oe of ye)if(!Q.box[Oe]){Q.box[Oe]=!0;const ht=4*Oe,mt=this.boxKeys[Oe];if(n<=Ue[ht+2]&&u<=Ue[ht+3]&&g>=Ue[ht+0]&&b>=Ue[ht+1]&&(!V||V(mt))&&(!ae||!k(ce,mt.overlapMode))&&(A.push({key:mt,x1:Ue[ht],y1:Ue[ht+1],x2:Ue[ht+2],y2:Ue[ht+3]}),ae))return!0}}const Be=this.circleCells[C];if(null!==Be){const Ue=this.circles;for(const Oe of Be)if(!Q.circle[Oe]){Q.circle[Oe]=!0;const ht=3*Oe,mt=this.circleKeys[Oe];if(this._circleAndRectCollide(Ue[ht],Ue[ht+1],Ue[ht+2],n,u,g,b)&&(!V||V(mt))&&(!ae||!k(ce,mt.overlapMode))){const xt=Ue[ht],it=Ue[ht+1],kt=Ue[ht+2];if(A.push({key:mt,x1:xt-kt,y1:it-kt,x2:xt+kt,y2:it+kt}),ae)return!0}}}return!1}_queryCellCircle(n,u,g,b,C,A,B,V){const{circle:Q,seenUids:ae,overlapMode:ce}=B,ye=this.boxCells[C];if(null!==ye){const Ue=this.bboxes;for(const Oe of ye)if(!ae.box[Oe]){ae.box[Oe]=!0;const ht=4*Oe,mt=this.boxKeys[Oe];if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,Ue[ht+0],Ue[ht+1],Ue[ht+2],Ue[ht+3])&&(!V||V(mt))&&!k(ce,mt.overlapMode))return A.push(!0),!0}}const Be=this.circleCells[C];if(null!==Be){const Ue=this.circles;for(const Oe of Be)if(!ae.circle[Oe]){ae.circle[Oe]=!0;const ht=3*Oe,mt=this.circleKeys[Oe];if(this._circlesCollide(Ue[ht],Ue[ht+1],Ue[ht+2],Q.x,Q.y,Q.radius)&&(!V||V(mt))&&!k(ce,mt.overlapMode))return A.push(!0),!0}}}_forEachCell(n,u,g,b,C,A,B,V){const Q=this._convertToXCellCoord(n),ae=this._convertToYCellCoord(u),ce=this._convertToXCellCoord(g),ye=this._convertToYCellCoord(b);for(let Be=Q;Be<=ce;Be++)for(let Ue=ae;Ue<=ye;Ue++)if(C.call(this,n,u,g,b,this.xCellCount*Ue+Be,A,B,V))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,g,b,C,A){const B=b-n,V=C-u,Q=g+A;return Q*Q>B*B+V*V}_circleAndRectCollide(n,u,g,b,C,A,B){const V=(A-b)/2,Q=Math.abs(n-(b+V));if(Q>V+g)return!1;const ae=(B-C)/2,ce=Math.abs(u-(C+ae));if(ce>ae+g)return!1;if(Q<=V||ce<=ae)return!0;const ye=Q-V,Be=ce-ae;return ye*ye+Be*Be<=g*g}}function H(y,n,u,g,b){const C=m.create();return n?(m.scale(C,C,[1/b,1/b,1]),u||m.rotateZ(C,C,g.angle)):m.multiply(C,g.labelPlaneMatrix,y),C}function J(y,n,u,g,b){if(n){const C=m.clone(y);return m.scale(C,C,[b,b,1]),u||m.rotateZ(C,C,-g.angle),C}return g.glCoordMatrix}function le(y,n,u){let g;u?(g=[y.x,y.y,u(y.x,y.y),1],m.transformMat4(g,g,n)):(g=[y.x,y.y,0,1],Fe(g,g,n));const b=g[3];return{point:new m.pointGeometry(g[0]/b,g[1]/b),signedDistanceFromCamera:b}}function Ae(y,n){return.5+y/n*.5}function Le(y,n){const u=y[0]/y[3],g=y[1]/y[3];return u>=-n[0]&&u<=n[0]&&g>=-n[1]&&g<=n[1]}function Qe(y,n,u,g,b,C,A,B,V,Q){const ae=g?y.textSizeData:y.iconSizeData,ce=m.evaluateSizeForZoom(ae,u.transform.zoom),ye=[256/u.width*2+1,256/u.height*2+1],Be=g?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Be.clear();const Ue=y.lineVertexArray,Oe=g?y.text.placedSymbolArray:y.icon.placedSymbolArray,ht=u.transform.width/u.transform.height;let mt=!1;for(let xt=0;xt<Oe.length;xt++){const it=Oe.get(xt);if(it.hidden||it.writingMode===m.WritingMode.vertical&&!mt){De(it.numGlyphs,Be);continue}let kt;if(mt=!1,Q?(kt=[it.anchorX,it.anchorY,Q(it.anchorX,it.anchorY),1],m.transformMat4(kt,kt,n)):(kt=[it.anchorX,it.anchorY,0,1],Fe(kt,kt,n)),!Le(kt,ye)){De(it.numGlyphs,Be);continue}const Ht=Ae(u.transform.cameraToCenterDistance,kt[3]),Ft=m.evaluateSizeForFeature(ae,ce,it),Zt=A?Ft/Ht:Ft*Ht,Qt=new m.pointGeometry(it.anchorX,it.anchorY),sn=le(Qt,b,Q).point,an={},I=dt(it,Zt,!1,B,n,b,C,y.glyphOffsetArray,Ue,Be,sn,Qt,an,ht,V,Q);mt=I.useVertical,(I.notEnoughRoom||mt||I.needsFlipping&&dt(it,Zt,!0,B,n,b,C,y.glyphOffsetArray,Ue,Be,sn,Qt,an,ht,V,Q).notEnoughRoom)&&De(it.numGlyphs,Be)}g?y.text.dynamicLayoutVertexBuffer.updateData(Be):y.icon.dynamicLayoutVertexBuffer.updateData(Be)}function ot(y,n,u,g,b,C,A,B,V,Q,ae,ce,ye){const Be=B.glyphStartIndex+B.numGlyphs,Ue=B.lineStartIndex,Oe=B.lineStartIndex+B.lineLength,ht=n.getoffsetX(B.glyphStartIndex),mt=n.getoffsetX(Be-1),xt=en(y*ht,u,g,b,C,A,B.segment,Ue,Oe,V,Q,ae,ce,ye);if(!xt)return null;const it=en(y*mt,u,g,b,C,A,B.segment,Ue,Oe,V,Q,ae,ce,ye);return it?{first:xt,last:it}:null}function He(y,n,u,g){return y===m.WritingMode.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*g?{useVertical:!0}:(y===m.WritingMode.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function dt(y,n,u,g,b,C,A,B,V,Q,ae,ce,ye,Be,Ue,Oe){const ht=n/24,mt=y.lineOffsetX*ht,xt=y.lineOffsetY*ht;let it;if(y.numGlyphs>1){const kt=y.glyphStartIndex+y.numGlyphs,Ht=y.lineStartIndex,Ft=y.lineStartIndex+y.lineLength,Zt=ot(ht,B,mt,xt,u,ae,ce,y,V,C,ye,Ue,Oe);if(!Zt)return{notEnoughRoom:!0};const Qt=le(Zt.first.point,A,Oe).point,sn=le(Zt.last.point,A,Oe).point;if(g&&!u){const an=He(y.writingMode,Qt,sn,Be);if(an)return an}it=[Zt.first];for(let an=y.glyphStartIndex+1;an<kt-1;an++)it.push(en(ht*B.getoffsetX(an),mt,xt,u,ae,ce,y.segment,Ht,Ft,V,C,ye,Ue,Oe));it.push(Zt.last)}else{if(g&&!u){const Ht=le(ce,b,Oe).point,Ft=y.lineStartIndex+y.segment+1,Zt=new m.pointGeometry(V.getx(Ft),V.gety(Ft)),Qt=le(Zt,b,Oe),sn=Qt.signedDistanceFromCamera>0?Qt.point:$t(ce,Zt,Ht,1,b,Oe),an=He(y.writingMode,Ht,sn,Be);if(an)return an}const kt=en(ht*B.getoffsetX(y.glyphStartIndex),mt,xt,u,ae,ce,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,V,C,ye,Ue,Oe);if(!kt)return{notEnoughRoom:!0};it=[kt]}for(const kt of it)m.addDynamicAttributes(Q,kt.point,kt.angle);return{}}function $t(y,n,u,g,b,C){const A=le(y.add(y.sub(n)._unit()),b,C).point,B=u.sub(A);return u.add(B._mult(g/B.mag()))}function en(y,n,u,g,b,C,A,B,V,Q,ae,ce,ye,Be){const Ue=g?y-n:y+n;let Oe=Ue>0?1:-1,ht=0;g&&(Oe*=-1,ht=Math.PI),Oe<0&&(ht+=Math.PI);let mt=Oe>0?B+A:B+A+1,xt=b,it=b,kt=0,Ht=0;const Ft=Math.abs(Ue),Zt=[];for(;kt+Ht<=Ft;){if(mt+=Oe,mt<B||mt>=V)return null;if(it=xt,Zt.push(xt),xt=ce[mt],void 0===xt){const P=new m.pointGeometry(Q.getx(mt),Q.gety(mt)),S=le(P,ae,Be);if(S.signedDistanceFromCamera>0)xt=ce[mt]=S.point;else{const z=mt-Oe;xt=$t(0===kt?C:new m.pointGeometry(Q.getx(z),Q.gety(z)),P,it,Ft-kt+1,ae,Be)}}kt+=Ht,Ht=it.dist(xt)}const Qt=(Ft-kt)/Ht,sn=xt.sub(it),an=sn.mult(Qt)._add(it);an._add(sn._unit()._perp()._mult(u*Oe));const I=ht+Math.atan2(xt.y-it.y,xt.x-it.x);return Zt.push(an),{point:an,angle:ye?I:0,path:Zt}}const st=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function De(y,n){for(let u=0;u<y;u++){const g=n.length;n.resize(g+4),n.float32.set(st,3*g)}}function Fe(y,n,u){const g=n[0],b=n[1];return y[0]=u[0]*g+u[4]*b+u[12],y[1]=u[1]*g+u[5]*b+u[13],y[3]=u[3]*g+u[7]*b+u[15],y}const Se=100;class Ne{constructor(n,u=new R(n.width+200,n.height+200,25),g=new R(n.width+200,n.height+200,25)){this.transform=n,this.grid=u,this.ignoredGrid=g,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Se,this.screenBottomBoundary=n.height+Se,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,g,b,C,A){const B=this.projectAndGetPerspectiveRatio(b,n.anchorPointX,n.anchorPointY,A),V=g*B.perspectiveRatio,Q=n.x1*V+B.point.x,ae=n.y1*V+B.point.y,ce=n.x2*V+B.point.x,ye=n.y2*V+B.point.y;return!this.isInsideGrid(Q,ae,ce,ye)||"always"!==u&&this.grid.hitTest(Q,ae,ce,ye,u,C)||B.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Q,ae,ce,ye],offscreen:this.isOffscreen(Q,ae,ce,ye)}}placeCollisionCircles(n,u,g,b,C,A,B,V,Q,ae,ce,ye,Be,Ue){const Oe=[],ht=new m.pointGeometry(u.anchorX,u.anchorY),mt=le(ht,A,Ue),xt=Ae(this.transform.cameraToCenterDistance,mt.signedDistanceFromCamera),it=(ae?C/xt:C*xt)/m.ONE_EM,kt=le(ht,B,Ue).point,Ht=ot(it,b,u.lineOffsetX*it,u.lineOffsetY*it,!1,kt,ht,u,g,B,{},!1,Ue);let Ft=!1,Zt=!1,Qt=!0;if(Ht){const sn=.5*ye*xt+Be,an=new m.pointGeometry(-100,-100),I=new m.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),P=new he,S=Ht.first,z=Ht.last;let q=[];for(let je=S.path.length-1;je>=1;je--)q.push(S.path[je]);for(let je=1;je<z.path.length;je++)q.push(z.path[je]);const de=2.5*sn;if(V){const je=q.map(Ct=>le(Ct,V,Ue));q=je.some(Ct=>Ct.signedDistanceFromCamera<=0)?[]:je.map(Ct=>Ct.point)}let Ie=[];if(q.length>0){const je=q[0].clone(),Ct=q[0].clone();for(let ln=1;ln<q.length;ln++)je.x=Math.min(je.x,q[ln].x),je.y=Math.min(je.y,q[ln].y),Ct.x=Math.max(Ct.x,q[ln].x),Ct.y=Math.max(Ct.y,q[ln].y);Ie=je.x>=an.x&&Ct.x<=I.x&&je.y>=an.y&&Ct.y<=I.y?[q]:Ct.x<an.x||je.x>I.x||Ct.y<an.y||je.y>I.y?[]:m.clipLine([q],an.x,an.y,I.x,I.y)}for(const je of Ie){P.reset(je,.25*sn);let Ct=0;Ct=P.length<=.5*sn?1:Math.ceil(P.paddedLength/de)+1;for(let ln=0;ln<Ct;ln++){const ci=ln/Math.max(Ct-1,1),Bn=P.lerp(ci),ji=Bn.x+Se,vr=Bn.y+Se;Oe.push(ji,vr,sn,0);const Gr=ji-sn,Zr=vr-sn,Jr=ji+sn,pa=vr+sn;if(Qt=Qt&&this.isOffscreen(Gr,Zr,Jr,pa),Zt=Zt||this.isInsideGrid(Gr,Zr,Jr,pa),"always"!==n&&this.grid.hitTestCircle(ji,vr,sn,n,ce)&&(Ft=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:Ft}}}}return{circles:!Q&&Ft||!Zt||xt<this.perspectiveRatioCutoff?[]:Oe,offscreen:Qt,collisionDetected:Ft}}queryRenderedSymbols(n){if(0===n.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[];let g=1/0,b=1/0,C=-1/0,A=-1/0;for(const ae of n){const ce=new m.pointGeometry(ae.x+Se,ae.y+Se);g=Math.min(g,ce.x),b=Math.min(b,ce.y),C=Math.max(C,ce.x),A=Math.max(A,ce.y),u.push(ce)}const B=this.grid.query(g,b,C,A).concat(this.ignoredGrid.query(g,b,C,A)),V={},Q={};for(const ae of B){const ce=ae.key;if(void 0===V[ce.bucketInstanceId]&&(V[ce.bucketInstanceId]={}),V[ce.bucketInstanceId][ce.featureIndex])continue;const ye=[new m.pointGeometry(ae.x1,ae.y1),new m.pointGeometry(ae.x2,ae.y1),new m.pointGeometry(ae.x2,ae.y2),new m.pointGeometry(ae.x1,ae.y2)];m.polygonIntersectsPolygon(u,ye)&&(V[ce.bucketInstanceId][ce.featureIndex]=!0,void 0===Q[ce.bucketInstanceId]&&(Q[ce.bucketInstanceId]=[]),Q[ce.bucketInstanceId].push(ce.featureIndex))}return Q}insertCollisionBox(n,u,g,b,C,A){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:C,collisionGroupID:A,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,g,b,C,A){const B=g?this.ignoredGrid:this.grid,V={bucketInstanceId:b,featureIndex:C,collisionGroupID:A,overlapMode:u};for(let Q=0;Q<n.length;Q+=4)B.insertCircle(V,n[Q],n[Q+1],n[Q+2])}projectAndGetPerspectiveRatio(n,u,g,b){let C;return b?(C=[u,g,b(u,g),1],m.transformMat4(C,C,n)):(C=[u,g,0,1],Fe(C,C,n)),{point:new m.pointGeometry((C[0]/C[3]+1)/2*this.transform.width+Se,(-C[1]/C[3]+1)/2*this.transform.height+Se),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(n,u,g,b){return g<Se||n>=this.screenRightBoundary||b<Se||u>this.screenBottomBoundary}isInsideGrid(n,u,g,b){return g>=0&&n<this.gridRightBoundary&&b>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=m.identity([]);return m.translate(n,n,[-100,-100,0]),n}}function we(y,n,u){return n*(m.EXTENT/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class $e{constructor(n,u,g,b){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):b&&g?1:0,this.placed=g}isHidden(){return 0===this.opacity&&!this.placed}}class at{constructor(n,u,g,b,C){this.text=new $e(n?n.text:null,u,g,C),this.icon=new $e(n?n.icon:null,u,b,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class on{constructor(n,u,g){this.text=n,this.icon=u,this.skipFade=g}}class An{constructor(){this.invProjMatrix=m.create(),this.viewportMatrix=m.create(),this.circles=[]}}class jn{constructor(n,u,g,b,C){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=b,this.tileID=C}}class Gi{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[n]}}function ni(y,n,u,g,b){const{horizontalAlign:C,verticalAlign:A}=m.getAnchorAlignment(y),B=-(C-.5)*n,V=-(A-.5)*u,Q=m.evaluateVariableOffset(y,g);return new m.pointGeometry(B+Q[0]*b,V+Q[1]*b)}function yt(y,n,u,g,b,C){const{x1:A,x2:B,y1:V,y2:Q,anchorPointX:ae,anchorPointY:ce}=y,ye=new m.pointGeometry(n,u);return g&&ye._rotate(b?C:-C),{x1:A+ye.x,y1:V+ye.y,x2:B+ye.x,y2:Q+ye.y,anchorPointX:ae,anchorPointY:ce}}class Tt{constructor(n,u,g,b,C){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new Ne(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Gi(b),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,u,g,b){const C=g.getBucket(u),A=g.latestFeatureIndex;if(!C||!A||u.id!==C.layerIds[0])return;const B=g.collisionBoxArray,V=C.layers[0].layout,Q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),ae=g.tileSize/m.EXTENT,ce=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),ye="map"===V.get("text-pitch-alignment"),Be="map"===V.get("text-rotation-alignment"),Ue=we(g,1,this.transform.zoom),Oe=H(ce,ye,Be,this.transform,Ue);let ht=null;if(ye){const xt=J(ce,ye,Be,this.transform,Ue);ht=m.multiply([],this.transform.labelPlaneMatrix,xt)}this.retainedQueryData[C.bucketInstanceId]=new jn(C.bucketInstanceId,A,C.sourceLayerIndex,C.index,g.tileID);const mt={bucket:C,layout:V,posMatrix:ce,textLabelPlaneMatrix:Oe,labelToScreenMatrix:ht,scale:Q,textPixelRatio:ae,holdingForFade:g.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:m.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(b)for(const xt of C.sortKeyRanges){const{sortKey:it,symbolInstanceStart:kt,symbolInstanceEnd:Ht}=xt;n.push({sortKey:it,symbolInstanceStart:kt,symbolInstanceEnd:Ht,parameters:mt})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:mt})}attemptAnchorPlacement(n,u,g,b,C,A,B,V,Q,ae,ce,ye,Be,Ue,Oe,ht){const mt=[ye.textOffset0,ye.textOffset1],xt=ni(n,g,b,mt,C),it=this.collisionIndex.placeCollisionBox(yt(u,xt.x,xt.y,A,B,this.transform.angle),ce,V,Q,ae.predicate,ht);if((!Oe||0!==this.collisionIndex.placeCollisionBox(yt(Oe,xt.x,xt.y,A,B,this.transform.angle),ce,V,Q,ae.predicate,ht).box.length)&&it.box.length>0){let kt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID].text&&(kt=this.prevPlacement.variableOffsets[ye.crossTileID].anchor),0===ye.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ye.crossTileID]={textOffset:mt,width:g,height:b,anchor:n,textBoxScale:C,prevAnchor:kt},this.markUsedJustification(Be,n,ye,Ue),Be.allowVerticalPlacement&&(this.markUsedOrientation(Be,Ue,ye),this.placedOrientations[ye.crossTileID]=Ue),{shift:xt,placedGlyphBoxes:it}}}placeLayerBucketPart(n,u,g){const{bucket:b,layout:C,posMatrix:A,textLabelPlaneMatrix:B,labelToScreenMatrix:V,textPixelRatio:Q,holdingForFade:ae,collisionBoxArray:ce,partiallyEvaluatedTextSize:ye,collisionGroup:Be}=n.parameters,Ue=C.get("text-optional"),Oe=C.get("icon-optional"),ht=m.getOverlapMode(C,"text-overlap","text-allow-overlap"),mt="always"===ht,xt=m.getOverlapMode(C,"icon-overlap","icon-allow-overlap"),it="always"===xt,kt="map"===C.get("text-rotation-alignment"),Ht="map"===C.get("text-pitch-alignment"),Ft="none"!==C.get("icon-text-fit"),Zt="viewport-y"===C.get("symbol-z-order"),Qt=mt&&(it||!b.hasIconData()||Oe),sn=it&&(mt||!b.hasTextData()||Ue);!b.collisionArrays&&ce&&b.deserializeCollisionBoxes(ce);const an=(I,P)=>{if(u[I.crossTileID])return;if(ae)return void(this.placements[I.crossTileID]=new on(!1,!1,!1));let S=!1,z=!1,q=!0,de=null,Ie={box:null,offscreen:null},je={box:null,offscreen:null},Ct=null,ln=null,ci=null,Bn=0,ji=0,vr=0;P.textFeatureIndex?Bn=P.textFeatureIndex:I.useRuntimeCollisionCircles&&(Bn=I.featureIndex),P.verticalTextFeatureIndex&&(ji=P.verticalTextFeatureIndex);const Gr=this.retainedQueryData[b.bucketInstanceId].tileID,Zr=this.terrain?(Qr,rr)=>this.terrain.getElevation(Gr,Qr,rr):null;for(const Qr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const rr=P[Qr];rr&&(rr.elevation=Zr?Zr(rr.anchorPointX,rr.anchorPointY):0)}const Jr=P.textBox;if(Jr){const Qr=Wi=>{let _o=m.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Wi&&this.prevPlacement){const eo=this.prevPlacement.placedOrientations[I.crossTileID];eo&&(this.placedOrientations[I.crossTileID]=eo,_o=eo,this.markUsedOrientation(b,_o,I))}return _o},rr=(Wi,_o)=>{if(b.allowVerticalPlacement&&I.numVerticalGlyphVertices>0&&P.verticalTextBox){for(const eo of b.writingModes)if(eo===m.WritingMode.vertical?(Ie=_o(),je=Ie):Ie=Wi(),Ie&&Ie.box&&Ie.box.length)break}else Ie=Wi()};if(C.get("text-variable-anchor")){let Wi=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[I.crossTileID]){const Pr=this.prevPlacement.variableOffsets[I.crossTileID];Wi.indexOf(Pr.anchor)>0&&(Wi=Wi.filter(fa=>fa!==Pr.anchor),Wi.unshift(Pr.anchor))}const _o=(Pr,fa,ma)=>{const rl=Pr.x2-Pr.x1,Na=Pr.y2-Pr.y1,Bc=I.textBoxScale,Dr=Ft&&"never"===xt?fa:null;let Ba={box:[],offscreen:!1};const pu="never"!==ht?2*Wi.length:Wi.length;for(let zo=0;zo<pu;++zo){const Ll=this.attemptAnchorPlacement(Wi[zo%Wi.length],Pr,rl,Na,Bc,kt,Ht,Q,A,Be,zo>=Wi.length?ht:"never",I,b,ma,Dr,Zr);if(Ll&&(Ba=Ll.placedGlyphBoxes,Ba&&Ba.box&&Ba.box.length)){S=!0,de=Ll.shift;break}}return Ba};rr(()=>_o(Jr,P.iconBox,m.WritingMode.horizontal),()=>{const Pr=P.verticalTextBox;return b.allowVerticalPlacement&&!(Ie&&Ie.box&&Ie.box.length)&&I.numVerticalGlyphVertices>0&&Pr?_o(Pr,P.verticalIconBox,m.WritingMode.vertical):{box:null,offscreen:null}}),Ie&&(S=Ie.box,q=Ie.offscreen);const eo=Qr(Ie&&Ie.box);if(!S&&this.prevPlacement){const Pr=this.prevPlacement.variableOffsets[I.crossTileID];Pr&&(this.variableOffsets[I.crossTileID]=Pr,this.markUsedJustification(b,Pr.anchor,I,eo))}}else{const Wi=(_o,eo)=>{const Pr=this.collisionIndex.placeCollisionBox(_o,ht,Q,A,Be.predicate,Zr);return Pr&&Pr.box&&Pr.box.length&&(this.markUsedOrientation(b,eo,I),this.placedOrientations[I.crossTileID]=eo),Pr};rr(()=>Wi(Jr,m.WritingMode.horizontal),()=>{const _o=P.verticalTextBox;return b.allowVerticalPlacement&&I.numVerticalGlyphVertices>0&&_o?Wi(_o,m.WritingMode.vertical):{box:null,offscreen:null}}),Qr(Ie&&Ie.box&&Ie.box.length)}}if(Ct=Ie,S=Ct&&Ct.box&&Ct.box.length>0,q=Ct&&Ct.offscreen,I.useRuntimeCollisionCircles){const Qr=b.text.placedSymbolArray.get(I.centerJustifiedTextSymbolIndex),rr=m.evaluateSizeForFeature(b.textSizeData,ye,Qr),Wi=C.get("text-padding");ln=this.collisionIndex.placeCollisionCircles(ht,Qr,b.lineVertexArray,b.glyphOffsetArray,rr,A,B,V,g,Ht,Be.predicate,I.collisionCircleDiameter,Wi,Zr),ln.circles.length&&ln.collisionDetected&&!g&&m.warnOnce("Collisions detected, but collision boxes are not shown"),S=mt||ln.circles.length>0&&!ln.collisionDetected,q=q&&ln.offscreen}if(P.iconFeatureIndex&&(vr=P.iconFeatureIndex),P.iconBox){const Qr=rr=>{const Wi=Ft&&de?yt(rr,de.x,de.y,kt,Ht,this.transform.angle):rr;return this.collisionIndex.placeCollisionBox(Wi,xt,Q,A,Be.predicate,Zr)};je&&je.box&&je.box.length&&P.verticalIconBox?(ci=Qr(P.verticalIconBox),z=ci.box.length>0):(ci=Qr(P.iconBox),z=ci.box.length>0),q=q&&ci.offscreen}const pa=Ue||0===I.numHorizontalGlyphVertices&&0===I.numVerticalGlyphVertices,pr=Oe||0===I.numIconVertices;if(pa||pr?pr?pa||(z=z&&S):S=z&&S:z=S=z&&S,S&&Ct&&Ct.box&&this.collisionIndex.insertCollisionBox(Ct.box,ht,C.get("text-ignore-placement"),b.bucketInstanceId,je&&je.box&&ji?ji:Bn,Be.ID),z&&ci&&this.collisionIndex.insertCollisionBox(ci.box,xt,C.get("icon-ignore-placement"),b.bucketInstanceId,vr,Be.ID),ln&&(S&&this.collisionIndex.insertCollisionCircles(ln.circles,ht,C.get("text-ignore-placement"),b.bucketInstanceId,Bn,Be.ID),g)){const Qr=b.bucketInstanceId;let rr=this.collisionCircleArrays[Qr];void 0===rr&&(rr=this.collisionCircleArrays[Qr]=new An);for(let Wi=0;Wi<ln.circles.length;Wi+=4)rr.circles.push(ln.circles[Wi+0]),rr.circles.push(ln.circles[Wi+1]),rr.circles.push(ln.circles[Wi+2]),rr.circles.push(ln.collisionDetected?1:0)}if(0===I.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===b.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[I.crossTileID]=new on(S||Qt,z||sn,q||b.justReloaded),u[I.crossTileID]=!0};if(Zt){if(0!==n.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const I=b.getSortedSymbolIndexes(this.transform.angle);for(let P=I.length-1;P>=0;--P){const S=I[P];an(b.symbolInstances.get(S),b.collisionArrays[S])}}else for(let I=n.symbolInstanceStart;I<n.symbolInstanceEnd;I++)an(b.symbolInstances.get(I),b.collisionArrays[I]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const I=this.collisionCircleArrays[b.bucketInstanceId];m.invert(I.invProjMatrix,A),I.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(n,u,g,b){let C;C=b===m.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[m.getAnchorJustification(u)];const A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const B of A)B>=0&&(n.text.placedSymbolArray.get(B).crossTileID=C>=0&&B!==C?0:g.crossTileID)}markUsedOrientation(n,u,g){const b=u===m.WritingMode.horizontal||u===m.WritingMode.horizontalOnly?u:0,C=u===m.WritingMode.vertical?u:0,A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const B of A)n.text.placedSymbolArray.get(B).placedOrientation=b;g.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const b=u?u.symbolFadeChange(n):1,C=u?u.opacities:{},A=u?u.variableOffsets:{},B=u?u.placedOrientations:{};for(const V in this.placements){const Q=this.placements[V],ae=C[V];ae?(this.opacities[V]=new at(ae,b,Q.text,Q.icon),g=g||Q.text!==ae.text.placed||Q.icon!==ae.icon.placed):(this.opacities[V]=new at(null,b,Q.text,Q.icon,Q.skipFade),g=g||Q.text||Q.icon)}for(const V in C){const Q=C[V];if(!this.opacities[V]){const ae=new at(Q,b,!1,!1);ae.isHidden()||(this.opacities[V]=ae,g=g||Q.text.placed||Q.icon.placed)}}for(const V in A)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=A[V]);for(const V in B)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=B[V]);if(u&&void 0===u.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=n:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const g={};for(const b of u){const C=b.getBucket(n);C&&b.latestFeatureIndex&&n.id===C.layerIds[0]&&this.updateBucketOpacities(C,g,b.collisionBoxArray)}}updateBucketOpacities(n,u,g){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const b=n.layers[0].layout,C=new at(null,0,!1,!1,!0),A=b.get("text-allow-overlap"),B=b.get("icon-allow-overlap"),V=b.get("text-variable-anchor"),Q="map"===b.get("text-rotation-alignment"),ae="map"===b.get("text-pitch-alignment"),ce="none"!==b.get("icon-text-fit"),ye=new at(null,0,A&&(B||!n.hasIconData()||b.get("icon-optional")),B&&(A||!n.hasTextData()||b.get("text-optional")),!0);!n.collisionArrays&&g&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(g);const Be=(Ue,Oe,ht)=>{for(let mt=0;mt<Oe/4;mt++)Ue.opacityVertexArray.emplaceBack(ht)};for(let Ue=0;Ue<n.symbolInstances.length;Ue++){const Oe=n.symbolInstances.get(Ue),{numHorizontalGlyphVertices:ht,numVerticalGlyphVertices:mt,crossTileID:xt}=Oe;let it=this.opacities[xt];u[xt]?it=C:it||(it=ye,this.opacities[xt]=it),u[xt]=!0;const kt=Oe.numIconVertices>0,Ht=this.placedOrientations[Oe.crossTileID],Ft=Ht===m.WritingMode.vertical,Zt=Ht===m.WritingMode.horizontal||Ht===m.WritingMode.horizontalOnly;if(ht>0||mt>0){const Qt=Gt(it.text);Be(n.text,ht,Ft?Sn:Qt),Be(n.text,mt,Zt?Sn:Qt);const sn=it.text.isHidden();[Oe.rightJustifiedTextSymbolIndex,Oe.centerJustifiedTextSymbolIndex,Oe.leftJustifiedTextSymbolIndex].forEach(P=>{P>=0&&(n.text.placedSymbolArray.get(P).hidden=sn||Ft?1:0)}),Oe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Oe.verticalPlacedTextSymbolIndex).hidden=sn||Zt?1:0);const an=this.variableOffsets[Oe.crossTileID];an&&this.markUsedJustification(n,an.anchor,Oe,Ht);const I=this.placedOrientations[Oe.crossTileID];I&&(this.markUsedJustification(n,"left",Oe,I),this.markUsedOrientation(n,I,Oe))}if(kt){const Qt=Gt(it.icon),sn=!(ce&&Oe.verticalPlacedIconSymbolIndex&&Ft);Oe.placedIconSymbolIndex>=0&&(Be(n.icon,Oe.numIconVertices,sn?Qt:Sn),n.icon.placedSymbolArray.get(Oe.placedIconSymbolIndex).hidden=it.icon.isHidden()),Oe.verticalPlacedIconSymbolIndex>=0&&(Be(n.icon,Oe.numVerticalIconVertices,sn?Sn:Qt),n.icon.placedSymbolArray.get(Oe.verticalPlacedIconSymbolIndex).hidden=it.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Qt=n.collisionArrays[Ue];if(Qt){let sn=new m.pointGeometry(0,0);if(Qt.textBox||Qt.verticalTextBox){let I=!0;if(V){const P=this.variableOffsets[xt];P?(sn=ni(P.anchor,P.width,P.height,P.textOffset,P.textBoxScale),Q&&sn._rotate(ae?this.transform.angle:-this.transform.angle)):I=!1}Qt.textBox&&zt(n.textCollisionBox.collisionVertexArray,it.text.placed,!I||Ft,sn.x,sn.y),Qt.verticalTextBox&&zt(n.textCollisionBox.collisionVertexArray,it.text.placed,!I||Zt,sn.x,sn.y)}const an=Boolean(!Zt&&Qt.verticalIconBox);Qt.iconBox&&zt(n.iconCollisionBox.collisionVertexArray,it.icon.placed,an,ce?sn.x:0,ce?sn.y:0),Qt.verticalIconBox&&zt(n.iconCollisionBox.collisionVertexArray,it.icon.placed,!an,ce?sn.x:0,ce?sn.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const Ue=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=Ue.invProjMatrix,n.placementViewportMatrix=Ue.viewportMatrix,n.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return 0===this.fadeDuration?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>n}setStale(){this.stale=!0}}function zt(y,n,u,g,b){y.emplaceBack(n?1:0,u?1:0,g||0,b||0),y.emplaceBack(n?1:0,u?1:0,g||0,b||0),y.emplaceBack(n?1:0,u?1:0,g||0,b||0),y.emplaceBack(n?1:0,u?1:0,g||0,b||0)}const Vt=Math.pow(2,25),jt=Math.pow(2,24),me=Math.pow(2,17),Ee=Math.pow(2,16),ue=Math.pow(2,9),Ve=Math.pow(2,8),tt=Math.pow(2,1);function Gt(y){if(0===y.opacity&&!y.placed)return 0;if(1===y.opacity&&y.placed)return 4294967295;const n=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Vt+n*jt+u*me+n*Ee+u*ue+n*Ve+u*tt+n}const Sn=0;class nn{constructor(n){this._sortAcrossTiles="viewport-y"!==n.layout.get("symbol-z-order")&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,g,b,C){const A=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(A,b,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((B,V)=>B.sortKey-V.sortKey));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,C())return!0;return!1}}class Un{constructor(n,u,g,b,C,A,B,V){this.placement=new Tt(n,u,A,B,V),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(n,u,g){const b=m.exported.now(),C=()=>{const A=m.exported.now()-b;return!this._forceFullPlacement&&A>2};for(;this._currentPlacementIndex>=0;){const A=u[n[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if("symbol"===A.type&&(!A.minzoom||A.minzoom<=B)&&(!A.maxzoom||A.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new nn(A)),this._inProgressLayer.continuePlacement(g[A.source],this.placement,this._showCollisionBoxes,A,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Ni=512/m.EXTENT/2;class kn{constructor(n,u,g){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(let b=0;b<u.length;b++){const C=u.get(b),A=C.key;this.indexedSymbolInstances[A]||(this.indexedSymbolInstances[A]=[]),this.indexedSymbolInstances[A].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,n)})}}getScaledCoordinates(n,u){const g=Ni/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*m.EXTENT+n.anchorX)*g),y:Math.floor((u.canonical.y*m.EXTENT+n.anchorY)*g)}}findMatches(n,u,g){const b=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let C=0;C<n.length;C++){const A=n.get(C);if(A.crossTileID)continue;const B=this.indexedSymbolInstances[A.key];if(!B)continue;const V=this.getScaledCoordinates(A,u);for(const Q of B)if(Math.abs(Q.coord.x-V.x)<=b&&Math.abs(Q.coord.y-V.y)<=b&&!g[Q.crossTileID]){g[Q.crossTileID]=!0,A.crossTileID=Q.crossTileID;break}}}}class ei{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Yi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(0!==u)for(const g in this.indexes){const b=this.indexes[g],C={};for(const A in b){const B=b[A];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+u),C[B.tileID.key]=B}this.indexes[g]=C}this.lng=n}addBucket(n,u,g){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let C=0;C<u.symbolInstances.length;C++)u.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const b=this.usedCrossTileIDs[n.overscaledZ];for(const C in this.indexes){const A=this.indexes[C];if(Number(C)>n.overscaledZ)for(const B in A){const V=A[B];V.tileID.isChildOf(n)&&V.findMatches(u.symbolInstances,n,b)}else{const B=A[n.scaledTo(Number(C)).key];B&&B.findMatches(u.symbolInstances,n,b)}}for(let C=0;C<u.symbolInstances.length;C++){const A=u.symbolInstances.get(C);A.crossTileID||(A.crossTileID=g.generate(),b[A.crossTileID]=!0)}return void 0===this.indexes[n.overscaledZ]&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new kn(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const g in u.indexedSymbolInstances)for(const b of u.indexedSymbolInstances[g])delete this.usedCrossTileIDs[n][b.crossTileID]}removeStaleBuckets(n){let u=!1;for(const g in this.indexes){const b=this.indexes[g];for(const C in b)n[b[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,b[C]),delete b[C],u=!0)}return u}}class Xi{constructor(){this.layerIndexes={},this.crossTileIDs=new ei,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,g){let b=this.layerIndexes[n.id];void 0===b&&(b=this.layerIndexes[n.id]=new Yi);let C=!1;const A={};b.handleWrapJump(g);for(const B of u){const V=B.getBucket(n);V&&n.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(B.tileID,V,this.crossTileIDs)&&(C=!0),A[V.bucketInstanceId]=!0)}return b.removeStaleBuckets(A)&&(C=!0),C}pruneUnusedLayers(n){const u={};n.forEach(g=>{u[g]=!0});for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}const nr=(y,n)=>m.emitValidationErrors(y,n&&n.filter(u=>"source.canvas"!==u.identifier)),Vi=m.pick(Qn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ji=m.pick(Qn,["setCenter","setZoom","setBearing","setPitch"]),ho=function(){const y={},n=m.spec.$version;for(const u in m.spec.$root){const g=m.spec.$root[u];if(g.required){let b=null;b="version"===u?n:"array"===g.type?[]:{},null!=b&&(y[u]=b)}}return y}();class Ui extends m.Evented{constructor(n,u={}){super(),this.map=n,this.dispatcher=new Ze(oi(),this),this.imageManager=new lt,this.imageManager.setEventedParent(this),this.glyphManager=new Et(n._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Pe(256,512),this.crossTileSymbolIndex=new Xi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new m.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",m.getReferrer());const g=this;this._rtlTextPluginCallback=Ui.registerForPluginStateChange(b=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(C,A)=>{if(m.triggerPluginCompletionEvent(C),A&&A.every(B=>B))for(const B in g.sourceCaches)g.sourceCaches[B].reload()})}),this.on("data",b=>{if("source"!==b.dataType||"metadata"!==b.sourceDataType)return;const C=this.sourceCaches[b.sourceId];if(!C)return;const A=C.getSource();if(A&&A.vectorLayerIds)for(const B in this._layers){const V=this._layers[B];V.source===A.id&&this._validateLayer(V)}})}loadURL(n,u={},g){this.fire(new m.Event("dataloading",{dataType:"style"})),u.validate="boolean"!=typeof u.validate||u.validate;const b=this.map._requestManager.transformRequest(n,m.ResourceType.Style);this._request=m.getJSON(b,(C,A)=>{this._request=null,C?this.fire(new m.ErrorEvent(C)):A&&this._load(A,u,g)})}loadJSON(n,u={},g){this.fire(new m.Event("dataloading",{dataType:"style"})),this._request=m.exported.frame(()=>{this._request=null,u.validate=!1!==u.validate,this._load(n,u,g)})}loadEmpty(){this.fire(new m.Event("dataloading",{dataType:"style"})),this._load(ho,{validate:!1})}_load(n,u,g){const b=u.transformStyle&&g?u.transformStyle(g,n):n;if(u.validate&&nr(this,m.validateStyle(b)))return;this._loaded=!0,this.stylesheet=b;for(const A in b.sources)this.addSource(A,b.sources[A],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs);const C=$i(this.stylesheet.layers);this._order=C.map(A=>A.id),this._layers={},this._serializedLayers={};for(let A of C)A=m.createStyleLayer(A),A.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=A,this._serializedLayers[A.id]=A.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new At(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new m.Event("data",{dataType:"style"})),this.fire(new m.Event("style.load"))}_loadSprite(n){this._spriteRequest=function(u,g,b,C){let A,B,V;const Q=b>1?"@2x":"";let ae=m.getJSON(g.transformRequest(g.normalizeSpriteURL(u,Q,".json"),m.ResourceType.SpriteJSON),(Be,Ue)=>{ae=null,V||(V=Be,A=Ue,ye())}),ce=m.getImage(g.transformRequest(g.normalizeSpriteURL(u,Q,".png"),m.ResourceType.SpriteImage),(Be,Ue)=>{ce=null,V||(V=Be,B=Ue,ye())});function ye(){if(V)C(V);else if(A&&B){const Be=m.exported.getImageData(B),Ue={};for(const Oe in A){const{width:ht,height:mt,x:xt,y:it,sdf:kt,pixelRatio:Ht,stretchX:Ft,stretchY:Zt,content:Qt}=A[Oe],sn=new m.RGBAImage({width:ht,height:mt});m.RGBAImage.copy(Be,sn,{x:xt,y:it},{x:0,y:0},{width:ht,height:mt}),Ue[Oe]={data:sn,pixelRatio:Ht,sdf:kt,stretchX:Ft,stretchY:Zt,content:Qt}}C(null,Ue)}}return{cancel(){ae&&(ae.cancel(),ae=null),ce&&(ce.cancel(),ce=null)}}}(n,this.map._requestManager,this.map.getPixelRatio(),(u,g)=>{if(this._spriteRequest=null,u)this.fire(new m.ErrorEvent(u));else if(g)for(const b in g)this.imageManager.addImage(b,g[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new m.Event("data",{dataType:"style"}))})}_validateLayer(n){const u=this.sourceCaches[n.source];if(!u)return;const g=n.sourceLayer;if(!g)return;const b=u.getSource();("geojson"===b.type||b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(g))&&this.fire(new m.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${b.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const u=[];for(const g of n){const b=this._layers[g];"custom"!==b.type&&u.push(b.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(b.length||C.length)&&this._updateWorkerLayers(b,C);for(const A in this._updatedSources){const B=this._updatedSources[A];if("reload"===B)this._reloadSource(A);else{if("clear"!==B)throw new Error(`Invalid action ${B}`);this._clearSource(A)}}this._updateTilesForChangedImages();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const g={};for(const b in this.sourceCaches){const C=this.sourceCaches[b];g[b]=C.used,C.used=!1}for(const b of this._order){const C=this._layers[b];C.recalculate(n,this._availableImages),!C.isHidden(n.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const b in g){const C=this.sourceCaches[b];g[b]!==C.used&&C.fire(new m.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(n),this.z=n.zoom,u&&this.fire(new m.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n,u={}){if(this._checkLoaded(),n=u.transformStyle?u.transformStyle(this.serialize(),n):n,nr(this,m.validateStyle(n)))return!1;(n=m.clone$1(n)).layers=$i(n.layers);const g=function(C,A){if(!C)return[{command:Qn.setStyle,args:[A]}];let B=[];try{if(!Re(C.version,A.version))return[{command:Qn.setStyle,args:[A]}];Re(C.center,A.center)||B.push({command:Qn.setCenter,args:[A.center]}),Re(C.zoom,A.zoom)||B.push({command:Qn.setZoom,args:[A.zoom]}),Re(C.bearing,A.bearing)||B.push({command:Qn.setBearing,args:[A.bearing]}),Re(C.pitch,A.pitch)||B.push({command:Qn.setPitch,args:[A.pitch]}),Re(C.sprite,A.sprite)||B.push({command:Qn.setSprite,args:[A.sprite]}),Re(C.glyphs,A.glyphs)||B.push({command:Qn.setGlyphs,args:[A.glyphs]}),Re(C.transition,A.transition)||B.push({command:Qn.setTransition,args:[A.transition]}),Re(C.light,A.light)||B.push({command:Qn.setLight,args:[A.light]});const V={},Q=[];!function(ce,ye,Be,Ue){let Oe;for(Oe in ye=ye||{},ce=ce||{})Object.prototype.hasOwnProperty.call(ce,Oe)&&(Object.prototype.hasOwnProperty.call(ye,Oe)||xn(Oe,Be,Ue));for(Oe in ye)Object.prototype.hasOwnProperty.call(ye,Oe)&&(Object.prototype.hasOwnProperty.call(ce,Oe)?Re(ce[Oe],ye[Oe])||("geojson"===ce[Oe].type&&"geojson"===ye[Oe].type&&ct(ce,ye,Oe)?Be.push({command:Qn.setGeoJSONSourceData,args:[Oe,ye[Oe].data]}):Wn(Oe,ye,Be,Ue)):Di(Oe,ye,Be))}(C.sources,A.sources,Q,V);const ae=[];C.layers&&C.layers.forEach(ce=>{V[ce.source]?B.push({command:Qn.removeLayer,args:[ce.id]}):ae.push(ce)}),B=B.concat(Q),function(ce,ye,Be){ye=ye||[];const Ue=(ce=ce||[]).map(te),Oe=ye.map(te),ht=ce.reduce(Me,{}),mt=ye.reduce(Me,{}),xt=Ue.slice(),it=Object.create(null);let kt,Ht,Ft,Zt,Qt,sn,an;for(kt=0,Ht=0;kt<Ue.length;kt++)Ft=Ue[kt],Object.prototype.hasOwnProperty.call(mt,Ft)?Ht++:(Be.push({command:Qn.removeLayer,args:[Ft]}),xt.splice(xt.indexOf(Ft,Ht),1));for(kt=0,Ht=0;kt<Oe.length;kt++)Ft=Oe[Oe.length-1-kt],xt[xt.length-1-kt]!==Ft&&(Object.prototype.hasOwnProperty.call(ht,Ft)?(Be.push({command:Qn.removeLayer,args:[Ft]}),xt.splice(xt.lastIndexOf(Ft,xt.length-Ht),1)):Ht++,sn=xt[xt.length-kt],Be.push({command:Qn.addLayer,args:[mt[Ft],sn]}),xt.splice(xt.length-kt,0,Ft),it[Ft]=!0);for(kt=0;kt<Oe.length;kt++)if(Ft=Oe[kt],Zt=ht[Ft],Qt=mt[Ft],!it[Ft]&&!Re(Zt,Qt))if(Re(Zt.source,Qt.source)&&Re(Zt["source-layer"],Qt["source-layer"])&&Re(Zt.type,Qt.type)){for(an in Y(Zt.layout,Qt.layout,Be,Ft,null,Qn.setLayoutProperty),Y(Zt.paint,Qt.paint,Be,Ft,null,Qn.setPaintProperty),Re(Zt.filter,Qt.filter)||Be.push({command:Qn.setFilter,args:[Ft,Qt.filter]}),Re(Zt.minzoom,Qt.minzoom)&&Re(Zt.maxzoom,Qt.maxzoom)||Be.push({command:Qn.setLayerZoomRange,args:[Ft,Qt.minzoom,Qt.maxzoom]}),Zt)Object.prototype.hasOwnProperty.call(Zt,an)&&"layout"!==an&&"paint"!==an&&"filter"!==an&&"metadata"!==an&&"minzoom"!==an&&"maxzoom"!==an&&(0===an.indexOf("paint.")?Y(Zt[an],Qt[an],Be,Ft,an.slice(6),Qn.setPaintProperty):Re(Zt[an],Qt[an])||Be.push({command:Qn.setLayerProperty,args:[Ft,an,Qt[an]]}));for(an in Qt)Object.prototype.hasOwnProperty.call(Qt,an)&&!Object.prototype.hasOwnProperty.call(Zt,an)&&"layout"!==an&&"paint"!==an&&"filter"!==an&&"metadata"!==an&&"minzoom"!==an&&"maxzoom"!==an&&(0===an.indexOf("paint.")?Y(Zt[an],Qt[an],Be,Ft,an.slice(6),Qn.setPaintProperty):Re(Zt[an],Qt[an])||Be.push({command:Qn.setLayerProperty,args:[Ft,an,Qt[an]]}))}else Be.push({command:Qn.removeLayer,args:[Ft]}),sn=xt[xt.lastIndexOf(Ft)+1],Be.push({command:Qn.addLayer,args:[Qt,sn]})}(ae,A.layers,B)}catch(V){console.warn("Unable to compute style diff:",V),B=[{command:Qn.setStyle,args:[A]}]}return B}(this.serialize(),n).filter(C=>!(C.command in Ji));if(0===g.length)return!1;const b=g.filter(C=>!(C.command in Vi));if(b.length>0)throw new Error(`Unimplemented: ${b.map(C=>C.command).join(", ")}.`);return g.forEach(C=>{"setTransition"!==C.command&&this[C.command].apply(this,C.args)}),this.stylesheet=n,!0}addImage(n,u){if(this.getImage(n))return this.fire(new m.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new m.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new m.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,g={}){if(this._checkLoaded(),void 0!==this.sourceCaches[n])throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(m.validateStyle.source,`sources.${n}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const b=this.sourceCaches[n]=new wn(n,u,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:b.serialize(),sourceId:n})),b.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===n)return this.fire(new m.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${g}" is using it.`)));const u=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],u.fire(new m.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw new Error(`There is no source with this ID=${n}`);const g=this.sourceCaches[n].getSource();if("geojson"!==g.type)throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(u),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,u,g={}){this._checkLoaded();const b=n.id;if(this.getLayer(b))return void this.fire(new m.ErrorEvent(new Error(`Layer "${b}" already exists on this map.`)));let C;if("custom"===n.type){if(nr(this,m.validateCustomStyleLayer(n)))return;C=m.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(b,n.source),n=m.clone$1(n),n=m.extend(n,{source:b})),this._validate(m.validateStyle.layer,`layers.${b}`,n,{arrayIndex:-1},g))return;C=m.createStyleLayer(n),this._validateLayer(C),C.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[C.id]=C.serialize()}const A=u?this._order.indexOf(u):this._order.length;if(u&&-1===A)this.fire(new m.ErrorEvent(new Error(`Cannot add layer "${b}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,b),this._layerOrderChanged=!0,this._layers[b]=C,this._removedLayers[b]&&C.source&&"custom"!==C.type){const B=this._removedLayers[b];delete this._removedLayers[b],B.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new m.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const g=this._order.indexOf(n);this._order.splice(g,1);const b=u?this._order.indexOf(u):this._order.length;u&&-1===b?this.fire(new m.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(b,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new m.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const g=this._order.indexOf(n);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,g){this._checkLoaded();const b=this.getLayer(n);b?b.minzoom===u&&b.maxzoom===g||(null!=u&&(b.minzoom=u),null!=g&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new m.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,g={}){this._checkLoaded();const b=this.getLayer(n);if(b){if(!Re(b.filter,u))return null==u?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(m.validateStyle.filter,`layers.${b.id}.filter`,u,null,g)||(b.filter=m.clone$1(u),this._updateLayer(b)))}else this.fire(new m.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return m.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,u,g,b={}){this._checkLoaded();const C=this.getLayer(n);C?Re(C.getLayoutProperty(u),g)||(C.setLayoutProperty(u,g,b),this._updateLayer(C)):this.fire(new m.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const g=this.getLayer(n);if(g)return g.getLayoutProperty(u);this.fire(new m.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,g,b={}){this._checkLoaded();const C=this.getLayer(n);C?Re(C.getPaintProperty(u),g)||(C.setPaintProperty(u,g,b)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new m.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const g=n.source,b=n.sourceLayer,C=this.sourceCaches[g];if(void 0===C)return void this.fire(new m.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const A=C.getSource().type;"geojson"===A&&b?this.fire(new m.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==A||b?(void 0===n.id&&this.fire(new m.ErrorEvent(new Error("The feature id parameter must be provided."))),C.setFeatureState(b,n.id,u)):this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const g=n.source,b=this.sourceCaches[g];if(void 0===b)return void this.fire(new m.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const C=b.getSource().type,A="vector"===C?n.sourceLayer:void 0;"vector"!==C||A?u&&"string"!=typeof n.id&&"number"!=typeof n.id?this.fire(new m.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(A,n.id,u):this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,g=n.sourceLayer,b=this.sourceCaches[u];if(void 0!==b)return"vector"!==b.getSource().type||g?(void 0===n.id&&this.fire(new m.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(g,n.id)):void this.fire(new m.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new m.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return m.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return m.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:m.mapObject(this.sourceCaches,n=>n.serialize()),layers:this._serializeLayers(this._order)},n=>void 0!==n)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&"raster"!==this.sourceCaches[n.source].getSource().type&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=A=>"fill-extrusion"===this._layers[A].type,g={},b=[];for(let A=this._order.length-1;A>=0;A--){const B=this._order[A];if(u(B)){g[B]=A;for(const V of n){const Q=V[B];if(Q)for(const ae of Q)b.push(ae)}}}b.sort((A,B)=>B.intersectionZ-A.intersectionZ);const C=[];for(let A=this._order.length-1;A>=0;A--){const B=this._order[A];if(u(B))for(let V=b.length-1;V>=0;V--){const Q=b[V].feature;if(g[Q.layer.id]<A)break;C.push(Q),b.pop()}else for(const V of n){const Q=V[B];if(Q)for(const ae of Q)C.push(ae.feature)}}return C}queryRenderedFeatures(n,u,g){u&&u.filter&&this._validate(m.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const b={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new m.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const A of u.layers){const B=this._layers[A];if(!B)return this.fire(new m.ErrorEvent(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];b[B.source]=!0}}const C=[];u.availableImages=this._availableImages;for(const A in this.sourceCaches)u.layers&&!b[A]||C.push(yn(this.sourceCaches[A],this._layers,this._serializedLayers,n,u,g));return this.placement&&C.push(function(A,B,V,Q,ae,ce,ye){const Be={},Ue=ce.queryRenderedSymbols(Q),Oe=[];for(const ht of Object.keys(Ue).map(Number))Oe.push(ye[ht]);Oe.sort(gi);for(const ht of Oe){const mt=ht.featureIndex.lookupSymbolFeatures(Ue[ht.bucketInstanceId],B,ht.bucketIndex,ht.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,A);for(const xt in mt){const it=Be[xt]=Be[xt]||[],kt=mt[xt];kt.sort((Ht,Ft)=>{const Zt=ht.featureSortOrder;if(Zt){const Qt=Zt.indexOf(Ht.featureIndex);return Zt.indexOf(Ft.featureIndex)-Qt}return Ft.featureIndex-Ht.featureIndex});for(const Ht of kt)it.push(Ht)}}for(const ht in Be)Be[ht].forEach(mt=>{const xt=mt.feature,it=V[A[ht].source].getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=it});return Be}(this._layers,this._serializedLayers,this.sourceCaches,n,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(n,u){u&&u.filter&&this._validate(m.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const g=this.sourceCaches[n];return g?function(b,C){const A=b.getRenderableIds().map(Q=>b.getTileByID(Q)),B=[],V={};for(let Q=0;Q<A.length;Q++){const ae=A[Q],ce=ae.tileID.canonical.key;V[ce]||(V[ce]=!0,ae.querySourceFeatures(B,C))}return B}(g,u):[]}addSourceType(n,u,g){return Ui.getSourceType(n)?g(new Error(`A source type called "${n}" already exists.`)):(Ui.setSourceType(n,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:u.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const g=this.light.getLight();let b=!1;for(const A in n)if(!Re(n[A],g[A])){b=!0;break}if(!b)return;const C={now:m.exported.now(),transition:m.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(C)}_validate(n,u,g,b,C={}){return(!C||!1!==C.validate)&&nr(this,n.call(m.validateStyle,m.extend({key:u,style:this.serialize(),value:g,styleSpec:m.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),m.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const u=this.sourceCaches[n];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const u in this.sourceCaches)this.sourceCaches[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,u,g,b,C=!1){let A=!1,B=!1;const V={};for(const Q of this._order){const ae=this._layers[Q];if("symbol"!==ae.type)continue;if(!V[ae.source]){const ye=this.sourceCaches[ae.source];V[ae.source]=ye.getRenderableIds(!0).map(Be=>ye.getTileByID(Be)).sort((Be,Ue)=>Ue.tileID.overscaledZ-Be.tileID.overscaledZ||(Be.tileID.isLessThan(Ue.tileID)?-1:1))}const ce=this.crossTileSymbolIndex.addLayer(ae,V[ae.source],n.center.lng);A=A||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||0===g)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(m.exported.now(),n.zoom))&&(this.pauseablePlacement=new Un(n,this.map.terrain,this._order,C,u,g,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(m.exported.now()),B=!0),A&&this.pauseablePlacement.placement.setStale()),B||A)for(const Q of this._order){const ae=this._layers[Q];"symbol"===ae.type&&this.placement.updateLayerOpacities(ae,V[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(m.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,u,g){this.imageManager.getImages(u.icons,g),this._updateTilesForChangedImages();const b=this.sourceCaches[u.source];b&&b.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(n,u,g){this.glyphManager.getGlyphs(u.stacks,g)}getResource(n,u,g){return m.makeRequest(u,g)}}Ui.getSourceType=function(y){return di[y]},Ui.setSourceType=function(y,n){di[y]=n},Ui.registerForPluginStateChange=m.registerForPluginStateChange;var Fr=m.createLayout([{name:"a_pos",type:"Int16",components:2}]),Yr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Hi={prelude:Bi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:Bi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Bi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Bi("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Bi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Bi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:Bi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Bi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Bi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Bi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Bi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:Bi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:Bi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:Bi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Bi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Bi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Bi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Bi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Bi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:Bi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:Bi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Bi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:Bi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Bi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:Bi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Bi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:Bi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Yr),terrainDepth:Bi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Yr),terrainCoords:Bi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Yr)};function Bi(y,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=n.match(/attribute ([\w]+) ([\w]+)/g),b=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=C?C.concat(b):b,B={};return{fragmentSource:y=y.replace(u,(V,Q,ae,ce,ye)=>(B[ye]=!0,"define"===Q?`\n#ifndef HAS_UNIFORM_u_${ye}\nvarying ${ae} ${ce} ${ye};\n#else\nuniform ${ae} ${ce} u_${ye};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${ye}\n    ${ae} ${ce} ${ye} = u_${ye};\n#endif\n`)),vertexSource:n=n.replace(u,(V,Q,ae,ce,ye)=>{const Be="float"===ce?"vec2":"vec4",Ue=ye.match(/color/)?"color":Be;return B[ye]?"define"===Q?`\n#ifndef HAS_UNIFORM_u_${ye}\nuniform lowp float u_${ye}_t;\nattribute ${ae} ${Be} a_${ye};\nvarying ${ae} ${ce} ${ye};\n#else\nuniform ${ae} ${ce} u_${ye};\n#endif\n`:"vec4"===Ue?`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ye} = a_${ye};\n#else\n    ${ae} ${ce} ${ye} = u_${ye};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ye} = unpack_mix_${Ue}(a_${ye}, u_${ye}_t);\n#else\n    ${ae} ${ce} ${ye} = u_${ye};\n#endif\n`:"define"===Q?`\n#ifndef HAS_UNIFORM_u_${ye}\nuniform lowp float u_${ye}_t;\nattribute ${ae} ${Be} a_${ye};\n#else\nuniform ${ae} ${ce} u_${ye};\n#endif\n`:"vec4"===Ue?`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ae} ${ce} ${ye} = a_${ye};\n#else\n    ${ae} ${ce} ${ye} = u_${ye};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ae} ${ce} ${ye} = unpack_mix_${Ue}(a_${ye}, u_${ye}_t);\n#else\n    ${ae} ${ce} ${ye} = u_${ye};\n#endif\n`}),staticAttributes:g,staticUniforms:A}}class Ts{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,g,b,C,A,B,V,Q){this.context=n;let ae=this.boundPaintVertexBuffers.length!==b.length;for(let ce=0;!ae&&ce<b.length;ce++)this.boundPaintVertexBuffers[ce]!==b[ce]&&(ae=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===g&&!ae&&this.boundIndexBuffer===C&&this.boundVertexOffset===A&&this.boundDynamicVertexBuffer===B&&this.boundDynamicVertexBuffer2===V&&this.boundDynamicVertexBuffer3===Q?(n.bindVertexArrayOES.set(this.vao),B&&B.bind(),C&&C.dynamicDraw&&C.bind(),V&&V.bind(),Q&&Q.bind()):this.freshBind(u,g,b,C,A,B,V,Q)}freshBind(n,u,g,b,C,A,B,V){let Q;const ae=n.numAttributes,ce=this.context,ye=ce.gl;if(ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ce.extVertexArrayObject.createVertexArrayOES(),ce.bindVertexArrayOES.set(this.vao),Q=0,this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=b,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=B,this.boundDynamicVertexBuffer3=V;else{Q=ce.currentNumAttributes||0;for(let Be=ae;Be<Q;Be++)ye.disableVertexAttribArray(Be)}u.enableAttributes(ye,n);for(const Be of g)Be.enableAttributes(ye,n);A&&A.enableAttributes(ye,n),B&&B.enableAttributes(ye,n),V&&V.enableAttributes(ye,n),u.bind(),u.setVertexAttribPointers(ye,n,C);for(const Be of g)Be.bind(),Be.setVertexAttribPointers(ye,n,C);A&&(A.bind(),A.setVertexAttribPointers(ye,n,C)),b&&b.bind(),B&&(B.bind(),B.setVertexAttribPointers(ye,n,C)),V&&(V.bind(),V.setVertexAttribPointers(ye,n,C)),ce.currentNumAttributes=ae}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ur(y){const n=[];for(let u=0;u<y.length;u++){if(null===y[u])continue;const g=y[u].split(" ");n.push(g.pop())}return n}class Go{constructor(n,u,g,b,C,A,B){const V=n.gl;this.program=V.createProgram();const Q=Ur(g.staticAttributes),ae=b?b.getBinderAttributes():[],ce=Q.concat(ae),ye=Hi.prelude.staticUniforms?Ur(Hi.prelude.staticUniforms):[],Be=g.staticUniforms?Ur(g.staticUniforms):[],Ue=b?b.getBinderUniforms():[],Oe=ye.concat(Be).concat(Ue),ht=[];for(const Zt of Oe)ht.indexOf(Zt)<0&&ht.push(Zt);const mt=b?b.defines():[];A&&mt.push("#define OVERDRAW_INSPECTOR;"),B&&mt.push("#define TERRAIN3D;");const xt=mt.concat(Hi.prelude.fragmentSource,g.fragmentSource).join("\n"),it=mt.concat(Hi.prelude.vertexSource,g.vertexSource).join("\n"),kt=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);V.shaderSource(kt,xt),V.compileShader(kt),V.attachShader(this.program,kt);const Ht=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);V.shaderSource(Ht,it),V.compileShader(Ht),V.attachShader(this.program,Ht),this.attributes={};const Ft={};this.numAttributes=ce.length;for(let Zt=0;Zt<this.numAttributes;Zt++)ce[Zt]&&(V.bindAttribLocation(this.program,Zt,ce[Zt]),this.attributes[ce[Zt]]=Zt);V.linkProgram(this.program),V.deleteShader(Ht),V.deleteShader(kt);for(let Zt=0;Zt<ht.length;Zt++){const Qt=ht[Zt];if(Qt&&!Ft[Qt]){const sn=V.getUniformLocation(this.program,Qt);sn&&(Ft[Qt]=sn)}}var Zt,Qt;this.fixedUniforms=C(n,Ft),this.terrainUniforms={u_depth:new m.Uniform1i(Zt=n,(Qt=Ft).u_depth),u_terrain:new m.Uniform1i(Zt,Qt.u_terrain),u_terrain_dim:new m.Uniform1f(Zt,Qt.u_terrain_dim),u_terrain_matrix:new m.UniformMatrix4f(Zt,Qt.u_terrain_matrix),u_terrain_unpack:new m.Uniform4f(Zt,Qt.u_terrain_unpack),u_terrain_exaggeration:new m.Uniform1f(Zt,Qt.u_terrain_exaggeration)},this.binderUniforms=b?b.getUniforms(n,Ft):[]}draw(n,u,g,b,C,A,B,V,Q,ae,ce,ye,Be,Ue,Oe,ht,mt,xt){const it=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(g),n.setStencilMode(b),n.setColorMode(C),n.setCullFace(A),V){n.activeTexture.set(it.TEXTURE2),it.bindTexture(it.TEXTURE_2D,V.depthTexture),n.activeTexture.set(it.TEXTURE3),it.bindTexture(it.TEXTURE_2D,V.texture);for(const Ht in this.terrainUniforms)this.terrainUniforms[Ht].set(V[Ht])}for(const Ht in this.fixedUniforms)this.fixedUniforms[Ht].set(B[Ht]);Oe&&Oe.setUniforms(n,this.binderUniforms,Be,{zoom:Ue});let kt=0;switch(u){case it.LINES:kt=2;break;case it.TRIANGLES:kt=3;break;case it.LINE_STRIP:kt=1}for(const Ht of ye.get()){const Ft=Ht.vaos||(Ht.vaos={});(Ft[Q]||(Ft[Q]=new Ts)).bind(n,this,ae,Oe?Oe.getPaintVertexBuffers():[],ce,Ht.vertexOffset,ht,mt,xt),it.drawElements(u,Ht.primitiveLength*kt,it.UNSIGNED_SHORT,Ht.primitiveOffset*kt*2)}}}function Ao(y,n,u){const g=1/we(u,1,n.transform.tileZoom),b=Math.pow(2,u.tileID.overscaledZ),C=u.tileSize*Math.pow(2,n.transform.tileZoom)/b,A=C*(u.tileID.canonical.x+u.tileID.wrap*b),B=C*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[g,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[A>>16,B>>16],u_pixel_coord_lower:[65535&A,65535&B]}}const xo=(y,n,u,g)=>{const b=n.style.light,C=b.properties.get("position"),A=[C.x,C.y,C.z],B=m.create$1();"viewport"===b.properties.get("anchor")&&m.fromRotation(B,-n.transform.angle),m.transformMat3(A,A,B);const V=b.properties.get("color");return{u_matrix:y,u_lightpos:A,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[V.r,V.g,V.b],u_vertical_gradient:+u,u_opacity:g}},jr=(y,n,u,g,b,C,A)=>m.extend(xo(y,n,u,g),Ao(C,n,A),{u_height_factor:-Math.pow(2,b.overscaledZ)/A.tileSize/8}),er=y=>({u_matrix:y}),po=(y,n,u,g)=>m.extend(er(y),Ao(u,n,g)),gr=(y,n)=>({u_matrix:y,u_world:n}),ro=(y,n,u,g,b)=>m.extend(po(y,n,u,g),{u_world:b}),Vs=(y,n,u,g)=>{const b=y.transform;let C,A;if("map"===g.paint.get("circle-pitch-alignment")){const B=we(u,1,b.zoom);C=!0,A=[B,B]}else C=!1,A=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+("map"===g.paint.get("circle-pitch-scale")),u_matrix:y.translatePosMatrix(n.posMatrix,u,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:A}},ia=(y,n,u)=>{const g=we(u,1,n.zoom),b=Math.pow(2,n.zoom-u.tileID.overscaledZ),C=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[n.pixelsToGLUnits[0]/(g*b),n.pixelsToGLUnits[1]/(g*b)],u_overscale_factor:C}},Is=(y,n,u=1)=>({u_matrix:y,u_color:n,u_overlay:0,u_overlay_scale:u}),kr=y=>({u_matrix:y}),Po=(y,n,u,g)=>({u_matrix:y,u_extrude_scale:we(n,1,u),u_intensity:g});function As(y,n){const u=Math.pow(2,n.canonical.z),g=n.canonical.y;return[new m.MercatorCoordinate(0,g/u).toLngLat().lat,new m.MercatorCoordinate(0,(g+1)/u).toLngLat().lat]}const Oo=(y,n,u,g)=>{const b=y.transform;return{u_matrix:ra(y,n,u,g),u_ratio:1/we(n,1,b.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},fs=(y,n,u,g,b)=>m.extend(Oo(y,n,u,b),{u_image:0,u_image_height:g}),ul=(y,n,u,g,b)=>{const C=y.transform,A=Ea(n,C);return{u_matrix:ra(y,n,u,b),u_texsize:n.imageAtlasTexture.size,u_ratio:1/we(n,1,C.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[A,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},fo=(y,n,u,g,b,C)=>{const A=y.lineAtlas,B=Ea(n,y.transform),V="round"===u.layout.get("line-cap"),Q=A.getDash(g.from,V),ae=A.getDash(g.to,V),ce=Q.width*b.fromScale,ye=ae.width*b.toScale;return m.extend(Oo(y,n,u,C),{u_patternscale_a:[B/ce,-Q.height/2],u_patternscale_b:[B/ye,-ae.height/2],u_sdfgamma:A.width/(256*Math.min(ce,ye)*y.pixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:ae.y,u_mix:b.t})};function Ea(y,n){return 1/we(y,1,n.tileZoom)}function ra(y,n,u,g){return y.translatePosMatrix(g?g.posMatrix:n.tileID.posMatrix,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ar=(y,n,u,g,b)=>{return{u_matrix:y,u_tl_parent:n,u_scale_parent:u,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(A=b.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(C=b.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Us(b.paint.get("raster-hue-rotate"))};var C,A};function Us(y){y*=Math.PI/180;const n=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const js=(y,n,u,g,b,C,A,B,V,Q)=>{const ae=b.transform;return{u_is_size_zoom_constant:+("constant"===y||"source"===y),u_is_size_feature_constant:+("constant"===y||"camera"===y),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ae.cameraToCenterDistance,u_pitch:ae.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ae.width/ae.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:A,u_coord_matrix:B,u_is_text:+V,u_pitch_with_map:+g,u_texsize:Q,u_texture:0}},Ps=(y,n,u,g,b,C,A,B,V,Q,ae)=>{const ce=b.transform;return m.extend(js(y,n,u,g,b,C,A,B,V,Q),{u_gamma_scale:g?Math.cos(ce._pitch)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+ae})},wo=(y,n,u,g,b,C,A,B,V,Q)=>m.extend(Ps(y,n,u,g,b,C,A,B,!0,V,!0),{u_texsize_icon:Q,u_texture_icon:1}),ko=(y,n,u)=>({u_matrix:y,u_opacity:n,u_color:u}),dl=(y,n,u,g,b,C)=>m.extend(function(A,B,V,Q){const ae=V.imageManager.getPattern(A.from.toString()),ce=V.imageManager.getPattern(A.to.toString()),{width:ye,height:Be}=V.imageManager.getPixelSize(),Ue=Math.pow(2,Q.tileID.overscaledZ),Oe=Q.tileSize*Math.pow(2,V.transform.tileZoom)/Ue,ht=Oe*(Q.tileID.canonical.x+Q.tileID.wrap*Ue),mt=Oe*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:ce.tl,u_pattern_br_b:ce.br,u_texsize:[ye,Be],u_mix:B.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:ce.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/we(Q,1,V.transform.tileZoom),u_pixel_coord_upper:[ht>>16,mt>>16],u_pixel_coord_lower:[65535&ht,65535&mt]}}(g,C,u,b),{u_matrix:y,u_opacity:n}),Wa={fillExtrusion:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_lightpos:new m.Uniform3f(y,n.u_lightpos),u_lightintensity:new m.Uniform1f(y,n.u_lightintensity),u_lightcolor:new m.Uniform3f(y,n.u_lightcolor),u_vertical_gradient:new m.Uniform1f(y,n.u_vertical_gradient),u_opacity:new m.Uniform1f(y,n.u_opacity)}),fillExtrusionPattern:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_lightpos:new m.Uniform3f(y,n.u_lightpos),u_lightintensity:new m.Uniform1f(y,n.u_lightintensity),u_lightcolor:new m.Uniform3f(y,n.u_lightcolor),u_vertical_gradient:new m.Uniform1f(y,n.u_vertical_gradient),u_height_factor:new m.Uniform1f(y,n.u_height_factor),u_image:new m.Uniform1i(y,n.u_image),u_texsize:new m.Uniform2f(y,n.u_texsize),u_pixel_coord_upper:new m.Uniform2f(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(y,n.u_pixel_coord_lower),u_scale:new m.Uniform3f(y,n.u_scale),u_fade:new m.Uniform1f(y,n.u_fade),u_opacity:new m.Uniform1f(y,n.u_opacity)}),fill:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix)}),fillPattern:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_image:new m.Uniform1i(y,n.u_image),u_texsize:new m.Uniform2f(y,n.u_texsize),u_pixel_coord_upper:new m.Uniform2f(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(y,n.u_pixel_coord_lower),u_scale:new m.Uniform3f(y,n.u_scale),u_fade:new m.Uniform1f(y,n.u_fade)}),fillOutline:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_world:new m.Uniform2f(y,n.u_world)}),fillOutlinePattern:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_world:new m.Uniform2f(y,n.u_world),u_image:new m.Uniform1i(y,n.u_image),u_texsize:new m.Uniform2f(y,n.u_texsize),u_pixel_coord_upper:new m.Uniform2f(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(y,n.u_pixel_coord_lower),u_scale:new m.Uniform3f(y,n.u_scale),u_fade:new m.Uniform1f(y,n.u_fade)}),circle:(y,n)=>({u_camera_to_center_distance:new m.Uniform1f(y,n.u_camera_to_center_distance),u_scale_with_map:new m.Uniform1i(y,n.u_scale_with_map),u_pitch_with_map:new m.Uniform1i(y,n.u_pitch_with_map),u_extrude_scale:new m.Uniform2f(y,n.u_extrude_scale),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_matrix:new m.UniformMatrix4f(y,n.u_matrix)}),collisionBox:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_camera_to_center_distance:new m.Uniform1f(y,n.u_camera_to_center_distance),u_pixels_to_tile_units:new m.Uniform1f(y,n.u_pixels_to_tile_units),u_extrude_scale:new m.Uniform2f(y,n.u_extrude_scale),u_overscale_factor:new m.Uniform1f(y,n.u_overscale_factor)}),collisionCircle:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_inv_matrix:new m.UniformMatrix4f(y,n.u_inv_matrix),u_camera_to_center_distance:new m.Uniform1f(y,n.u_camera_to_center_distance),u_viewport_size:new m.Uniform2f(y,n.u_viewport_size)}),debug:(y,n)=>({u_color:new m.UniformColor(y,n.u_color),u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_overlay:new m.Uniform1i(y,n.u_overlay),u_overlay_scale:new m.Uniform1f(y,n.u_overlay_scale)}),clippingMask:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix)}),heatmap:(y,n)=>({u_extrude_scale:new m.Uniform1f(y,n.u_extrude_scale),u_intensity:new m.Uniform1f(y,n.u_intensity),u_matrix:new m.UniformMatrix4f(y,n.u_matrix)}),heatmapTexture:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_world:new m.Uniform2f(y,n.u_world),u_image:new m.Uniform1i(y,n.u_image),u_color_ramp:new m.Uniform1i(y,n.u_color_ramp),u_opacity:new m.Uniform1f(y,n.u_opacity)}),hillshade:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_image:new m.Uniform1i(y,n.u_image),u_latrange:new m.Uniform2f(y,n.u_latrange),u_light:new m.Uniform2f(y,n.u_light),u_shadow:new m.UniformColor(y,n.u_shadow),u_highlight:new m.UniformColor(y,n.u_highlight),u_accent:new m.UniformColor(y,n.u_accent)}),hillshadePrepare:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_image:new m.Uniform1i(y,n.u_image),u_dimension:new m.Uniform2f(y,n.u_dimension),u_zoom:new m.Uniform1f(y,n.u_zoom),u_unpack:new m.Uniform4f(y,n.u_unpack)}),line:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_ratio:new m.Uniform1f(y,n.u_ratio),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(y,n.u_units_to_pixels)}),lineGradient:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_ratio:new m.Uniform1f(y,n.u_ratio),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(y,n.u_units_to_pixels),u_image:new m.Uniform1i(y,n.u_image),u_image_height:new m.Uniform1f(y,n.u_image_height)}),linePattern:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_texsize:new m.Uniform2f(y,n.u_texsize),u_ratio:new m.Uniform1f(y,n.u_ratio),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_image:new m.Uniform1i(y,n.u_image),u_units_to_pixels:new m.Uniform2f(y,n.u_units_to_pixels),u_scale:new m.Uniform3f(y,n.u_scale),u_fade:new m.Uniform1f(y,n.u_fade)}),lineSDF:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_ratio:new m.Uniform1f(y,n.u_ratio),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_units_to_pixels:new m.Uniform2f(y,n.u_units_to_pixels),u_patternscale_a:new m.Uniform2f(y,n.u_patternscale_a),u_patternscale_b:new m.Uniform2f(y,n.u_patternscale_b),u_sdfgamma:new m.Uniform1f(y,n.u_sdfgamma),u_image:new m.Uniform1i(y,n.u_image),u_tex_y_a:new m.Uniform1f(y,n.u_tex_y_a),u_tex_y_b:new m.Uniform1f(y,n.u_tex_y_b),u_mix:new m.Uniform1f(y,n.u_mix)}),raster:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_tl_parent:new m.Uniform2f(y,n.u_tl_parent),u_scale_parent:new m.Uniform1f(y,n.u_scale_parent),u_buffer_scale:new m.Uniform1f(y,n.u_buffer_scale),u_fade_t:new m.Uniform1f(y,n.u_fade_t),u_opacity:new m.Uniform1f(y,n.u_opacity),u_image0:new m.Uniform1i(y,n.u_image0),u_image1:new m.Uniform1i(y,n.u_image1),u_brightness_low:new m.Uniform1f(y,n.u_brightness_low),u_brightness_high:new m.Uniform1f(y,n.u_brightness_high),u_saturation_factor:new m.Uniform1f(y,n.u_saturation_factor),u_contrast_factor:new m.Uniform1f(y,n.u_contrast_factor),u_spin_weights:new m.Uniform3f(y,n.u_spin_weights)}),symbolIcon:(y,n)=>({u_is_size_zoom_constant:new m.Uniform1i(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(y,n.u_is_size_feature_constant),u_size_t:new m.Uniform1f(y,n.u_size_t),u_size:new m.Uniform1f(y,n.u_size),u_camera_to_center_distance:new m.Uniform1f(y,n.u_camera_to_center_distance),u_pitch:new m.Uniform1f(y,n.u_pitch),u_rotate_symbol:new m.Uniform1i(y,n.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(y,n.u_aspect_ratio),u_fade_change:new m.Uniform1f(y,n.u_fade_change),u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(y,n.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(y,n.u_coord_matrix),u_is_text:new m.Uniform1i(y,n.u_is_text),u_pitch_with_map:new m.Uniform1i(y,n.u_pitch_with_map),u_texsize:new m.Uniform2f(y,n.u_texsize),u_texture:new m.Uniform1i(y,n.u_texture)}),symbolSDF:(y,n)=>({u_is_size_zoom_constant:new m.Uniform1i(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(y,n.u_is_size_feature_constant),u_size_t:new m.Uniform1f(y,n.u_size_t),u_size:new m.Uniform1f(y,n.u_size),u_camera_to_center_distance:new m.Uniform1f(y,n.u_camera_to_center_distance),u_pitch:new m.Uniform1f(y,n.u_pitch),u_rotate_symbol:new m.Uniform1i(y,n.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(y,n.u_aspect_ratio),u_fade_change:new m.Uniform1f(y,n.u_fade_change),u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(y,n.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(y,n.u_coord_matrix),u_is_text:new m.Uniform1i(y,n.u_is_text),u_pitch_with_map:new m.Uniform1i(y,n.u_pitch_with_map),u_texsize:new m.Uniform2f(y,n.u_texsize),u_texture:new m.Uniform1i(y,n.u_texture),u_gamma_scale:new m.Uniform1f(y,n.u_gamma_scale),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_is_halo:new m.Uniform1i(y,n.u_is_halo)}),symbolTextAndIcon:(y,n)=>({u_is_size_zoom_constant:new m.Uniform1i(y,n.u_is_size_zoom_constant),u_is_size_feature_constant:new m.Uniform1i(y,n.u_is_size_feature_constant),u_size_t:new m.Uniform1f(y,n.u_size_t),u_size:new m.Uniform1f(y,n.u_size),u_camera_to_center_distance:new m.Uniform1f(y,n.u_camera_to_center_distance),u_pitch:new m.Uniform1f(y,n.u_pitch),u_rotate_symbol:new m.Uniform1i(y,n.u_rotate_symbol),u_aspect_ratio:new m.Uniform1f(y,n.u_aspect_ratio),u_fade_change:new m.Uniform1f(y,n.u_fade_change),u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_label_plane_matrix:new m.UniformMatrix4f(y,n.u_label_plane_matrix),u_coord_matrix:new m.UniformMatrix4f(y,n.u_coord_matrix),u_is_text:new m.Uniform1i(y,n.u_is_text),u_pitch_with_map:new m.Uniform1i(y,n.u_pitch_with_map),u_texsize:new m.Uniform2f(y,n.u_texsize),u_texsize_icon:new m.Uniform2f(y,n.u_texsize_icon),u_texture:new m.Uniform1i(y,n.u_texture),u_texture_icon:new m.Uniform1i(y,n.u_texture_icon),u_gamma_scale:new m.Uniform1f(y,n.u_gamma_scale),u_device_pixel_ratio:new m.Uniform1f(y,n.u_device_pixel_ratio),u_is_halo:new m.Uniform1i(y,n.u_is_halo)}),background:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_opacity:new m.Uniform1f(y,n.u_opacity),u_color:new m.UniformColor(y,n.u_color)}),backgroundPattern:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_opacity:new m.Uniform1f(y,n.u_opacity),u_image:new m.Uniform1i(y,n.u_image),u_pattern_tl_a:new m.Uniform2f(y,n.u_pattern_tl_a),u_pattern_br_a:new m.Uniform2f(y,n.u_pattern_br_a),u_pattern_tl_b:new m.Uniform2f(y,n.u_pattern_tl_b),u_pattern_br_b:new m.Uniform2f(y,n.u_pattern_br_b),u_texsize:new m.Uniform2f(y,n.u_texsize),u_mix:new m.Uniform1f(y,n.u_mix),u_pattern_size_a:new m.Uniform2f(y,n.u_pattern_size_a),u_pattern_size_b:new m.Uniform2f(y,n.u_pattern_size_b),u_scale_a:new m.Uniform1f(y,n.u_scale_a),u_scale_b:new m.Uniform1f(y,n.u_scale_b),u_pixel_coord_upper:new m.Uniform2f(y,n.u_pixel_coord_upper),u_pixel_coord_lower:new m.Uniform2f(y,n.u_pixel_coord_lower),u_tile_units_to_pixels:new m.Uniform1f(y,n.u_tile_units_to_pixels)}),terrain:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_texture:new m.Uniform1i(y,n.u_texture),u_ele_delta:new m.Uniform1f(y,n.u_ele_delta)}),terrainDepth:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_ele_delta:new m.Uniform1f(y,n.u_ele_delta)}),terrainCoords:(y,n)=>({u_matrix:new m.UniformMatrix4f(y,n.u_matrix),u_texture:new m.Uniform1i(y,n.u_texture),u_terrain_coords_id:new m.Uniform1f(y,n.u_terrain_coords_id),u_ele_delta:new m.Uniform1f(y,n.u_ele_delta)})};class Kl{constructor(n,u,g){this.context=n;const b=n.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ro={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Os{constructor(n,u,g,b){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=b,this.context=n;const C=n.gl;this.buffer=C.createBuffer(),n.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let g=0;g<this.attributes.length;g++){const b=u.attributes[this.attributes[g].name];void 0!==b&&n.enableVertexAttribArray(b)}}setVertexAttribPointers(n,u,g){for(let b=0;b<this.attributes.length;b++){const C=this.attributes[b],A=u.attributes[C.name];void 0!==A&&n.vertexAttribPointer(A,C.components,n[Ro[C.type]],!1,this.itemSize,C.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zi{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class oa extends zi{getDefault(){return m.Color.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Da extends zi{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class sa extends zi{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Lo extends zi{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class es extends zi{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class ms extends zi{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Ma extends zi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Ir extends zi{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class ks extends zi{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class aa extends zi{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Hs extends zi{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class la extends zi{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class gs extends zi{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class Sa extends zi{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Nr extends zi{getDefault(){return m.Color.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class $s extends zi{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class ts extends zi{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class ns extends zi{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class is extends zi{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Ta extends zi{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class xr extends zi{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class qa extends zi{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ka extends zi{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ia extends zi{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class mr extends zi{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Ya extends zi{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Zo extends zi{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Co extends zi{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class qi extends zi{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class hl extends zi{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class oo extends zi{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Aa extends zi{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class _r extends Aa{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class _s extends Aa{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class so{constructor(n,u,g,b){this.context=n,this.width=u,this.height=g;const C=n.gl,A=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new _r(n,A),b&&(this.depthAttachment=new _s(n,A)),C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const g=this.depthAttachment.get();g&&n.deleteRenderbuffer(g)}n.deleteFramebuffer(this.framebuffer)}}class Kn{constructor(n,u,g){this.blendFunction=n,this.blendColor=u,this.mask=g}}Kn.Replace=[1,0],Kn.disabled=new Kn(Kn.Replace,m.Color.transparent,[!1,!1,!1,!1]),Kn.unblended=new Kn(Kn.Replace,m.Color.transparent,[!0,!0,!0,!0]),Kn.alphaBlended=new Kn([1,771],m.Color.transparent,[!0,!0,!0,!0]);class Gs{constructor(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new oa(this),this.clearDepth=new Da(this),this.clearStencil=new sa(this),this.colorMask=new Lo(this),this.depthMask=new es(this),this.stencilMask=new ms(this),this.stencilFunc=new Ma(this),this.stencilOp=new Ir(this),this.stencilTest=new ks(this),this.depthRange=new aa(this),this.depthTest=new Hs(this),this.depthFunc=new la(this),this.blend=new gs(this),this.blendFunc=new Sa(this),this.blendColor=new Nr(this),this.blendEquation=new $s(this),this.cullFace=new ts(this),this.cullFaceSide=new ns(this),this.frontFace=new is(this),this.program=new Ta(this),this.activeTexture=new xr(this),this.viewport=new qa(this),this.bindFramebuffer=new Ka(this),this.bindRenderbuffer=new Ia(this),this.bindTexture=new mr(this),this.bindVertexBuffer=new Ya(this),this.bindElementBuffer=new Zo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Co(this),this.pixelStoreUnpack=new qi(this),this.pixelStoreUnpackPremultiplyAlpha=new hl(this),this.pixelStoreUnpackFlipY=new oo(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new Kl(this,n,u)}createVertexBuffer(n,u,g){return new Os(this,n,u,g)}createRenderbuffer(n,u,g){const b=this.gl,C=b.createRenderbuffer();return this.bindRenderbuffer.set(C),b.renderbufferStorage(b.RENDERBUFFER,n,u,g),this.bindRenderbuffer.set(null),C}createFramebuffer(n,u,g){return new so(this,n,u,g)}clear({color:n,depth:u}){const g=this.gl;let b=0;n&&(b|=g.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(b|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),g.clear(b)}setCullFace(n){!1===n.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){Re(n.blendFunction,Kn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ii{constructor(n,u,g){this.func=n,this.mask=u,this.range=g}}Ii.ReadOnly=!1,Ii.ReadWrite=!0,Ii.disabled=new Ii(519,Ii.ReadOnly,[0,1]);class Ki{constructor(n,u,g,b,C,A){this.test=n,this.ref=u,this.mask=g,this.fail=b,this.depthFail=C,this.pass=A}}Ki.disabled=new Ki({func:519,mask:0},0,0,7680,7680,7680);class ai{constructor(n,u,g){this.enable=n,this.mode=u,this.frontFace=g}}let Hr;function Zs(y,n,u,g,b,C,A){const B=y.context,V=B.gl,Q=y.useProgram("collisionBox"),ae=[];let ce=0,ye=0;for(let it=0;it<g.length;it++){const kt=g[it],Ht=n.getTile(kt),Ft=Ht.getBucket(u);if(!Ft)continue;let Zt=kt.posMatrix;0===b[0]&&0===b[1]||(Zt=y.translatePosMatrix(kt.posMatrix,Ht,b,C));const Qt=A?Ft.textCollisionBox:Ft.iconCollisionBox,sn=Ft.collisionCircleArray;if(sn.length>0){const an=m.create(),I=Zt;m.mul(an,Ft.placementInvProjMatrix,y.transform.glCoordMatrix),m.mul(an,an,Ft.placementViewportMatrix),ae.push({circleArray:sn,circleOffset:ye,transform:I,invTransform:an,coord:kt}),ce+=sn.length/4,ye=ce}Qt&&Q.draw(B,V.LINES,Ii.disabled,Ki.disabled,y.colorModeForRenderPass(),ai.disabled,ia(Zt,y.transform,Ht),y.style.map.terrain&&y.style.map.terrain.getTerrainData(kt),u.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,null,y.transform.zoom,null,null,Qt.collisionVertexBuffer)}if(!A||!ae.length)return;const Be=y.useProgram("collisionCircle"),Ue=new m.CollisionCircleLayoutArray;Ue.resize(4*ce),Ue._trim();let Oe=0;for(const it of ae)for(let kt=0;kt<it.circleArray.length/4;kt++){const Ht=4*kt,Ft=it.circleArray[Ht+0],Zt=it.circleArray[Ht+1],Qt=it.circleArray[Ht+2],sn=it.circleArray[Ht+3];Ue.emplace(Oe++,Ft,Zt,Qt,sn,0),Ue.emplace(Oe++,Ft,Zt,Qt,sn,1),Ue.emplace(Oe++,Ft,Zt,Qt,sn,2),Ue.emplace(Oe++,Ft,Zt,Qt,sn,3)}(!Hr||Hr.length<2*ce)&&(Hr=function(it){const kt=2*it,Ht=new m.QuadTriangleArray;Ht.resize(kt),Ht._trim();for(let Ft=0;Ft<kt;Ft++){const Zt=6*Ft;Ht.uint16[Zt+0]=4*Ft+0,Ht.uint16[Zt+1]=4*Ft+1,Ht.uint16[Zt+2]=4*Ft+2,Ht.uint16[Zt+3]=4*Ft+2,Ht.uint16[Zt+4]=4*Ft+3,Ht.uint16[Zt+5]=4*Ft+0}return Ht}(ce));const ht=B.createIndexBuffer(Hr,!0),mt=B.createVertexBuffer(Ue,m.collisionCircleLayout.members,!0);for(const it of ae){const kt={u_matrix:it.transform,u_inv_matrix:it.invTransform,u_camera_to_center_distance:(xt=y.transform).cameraToCenterDistance,u_viewport_size:[xt.width,xt.height]};Be.draw(B,V.TRIANGLES,Ii.disabled,Ki.disabled,y.colorModeForRenderPass(),ai.disabled,kt,y.style.map.terrain&&y.style.map.terrain.getTerrainData(it.coord),u.id,mt,ht,m.SegmentVector.simpleSegment(0,2*it.circleOffset,it.circleArray.length,it.circleArray.length/2),null,y.transform.zoom,null,null,null)}var xt;mt.destroy(),ht.destroy()}ai.disabled=new ai(!1,1029,2305),ai.backCCW=new ai(!0,1029,2305);const Sl=m.identity(new Float32Array(16));function dn(y,n,u,g,b,C){const{horizontalAlign:A,verticalAlign:B}=m.getAnchorAlignment(y),V=-(A-.5)*n,Q=-(B-.5)*u,ae=m.evaluateVariableOffset(y,g);return new m.pointGeometry((V/b+ae[0])*C,(Q/b+ae[1])*C)}function Oi(y,n,u,g,b,C,A,B,V,Q,ae){const ce=y.text.placedSymbolArray,ye=y.text.dynamicLayoutVertexArray,Be=y.icon.dynamicLayoutVertexArray,Ue={};ye.clear();for(let Oe=0;Oe<ce.length;Oe++){const ht=ce.get(Oe),mt=y.allowVerticalPlacement&&!ht.placedOrientation,xt=ht.hidden||!ht.crossTileID||mt?null:g[ht.crossTileID];if(xt){const it=new m.pointGeometry(ht.anchorX,ht.anchorY),kt=le(it,u?A:C,ae),Ht=Ae(b.cameraToCenterDistance,kt.signedDistanceFromCamera);let Ft=m.evaluateSizeForFeature(y.textSizeData,V,ht)*Ht/m.ONE_EM;u&&(Ft*=y.tilePixelRatio/B);const{width:Zt,height:Qt,anchor:sn,textOffset:an,textBoxScale:I}=xt,P=dn(sn,Zt,Qt,an,I,Ft),S=u?le(it.add(P),C,ae).point:kt.point.add(n?P.rotate(-b.angle):P),z=y.allowVerticalPlacement&&ht.placedOrientation===m.WritingMode.vertical?Math.PI/2:0;for(let q=0;q<ht.numGlyphs;q++)m.addDynamicAttributes(ye,S,z);Q&&ht.associatedIconIndex>=0&&(Ue[ht.associatedIconIndex]={shiftedAnchor:S,angle:z})}else De(ht.numGlyphs,ye)}if(Q){Be.clear();const Oe=y.icon.placedSymbolArray;for(let ht=0;ht<Oe.length;ht++){const mt=Oe.get(ht);if(mt.hidden)De(mt.numGlyphs,Be);else{const xt=Ue[ht];if(xt)for(let it=0;it<mt.numGlyphs;it++)m.addDynamicAttributes(Be,xt.shiftedAnchor,xt.angle);else De(mt.numGlyphs,Be)}}y.icon.dynamicLayoutVertexBuffer.updateData(Be)}y.text.dynamicLayoutVertexBuffer.updateData(ye)}function Pa(y,n,u){return u.iconsInText&&n?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Xa(y,n,u,g,b,C,A,B,V,Q,ae,ce){const ye=y.context,Be=ye.gl,Ue=y.transform,Oe="map"===B,ht="map"===V,mt="viewport"!==B&&"point"!==u.layout.get("symbol-placement"),xt=Oe&&!ht&&!mt,it=!u.layout.get("symbol-sort-key").isConstant();let kt=!1;const Ht=y.depthModeForSublayer(0,Ii.ReadOnly),Ft=u.layout.get("text-variable-anchor"),Zt=[];for(const Qt of g){const sn=n.getTile(Qt),an=sn.getBucket(u);if(!an)continue;const I=b?an.text:an.icon;if(!I||!I.segments.get().length)continue;const P=I.programConfigurations.get(u.id),S=b||an.sdfIcons,z=b?an.textSizeData:an.iconSizeData,q=ht||0!==Ue.pitch,de=y.useProgram(Pa(S,b,an),P),Ie=m.evaluateSizeForZoom(z,Ue.zoom),je=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Qt);let Ct,ln,ci,Bn,ji=[0,0],vr=null;if(b){if(ln=sn.glyphAtlasTexture,ci=Be.LINEAR,Ct=sn.glyphAtlasTexture.size,an.iconsInText){ji=sn.imageAtlasTexture.size,vr=sn.imageAtlasTexture;const fa="composite"===z.kind||"camera"===z.kind;Bn=q||y.options.rotating||y.options.zooming||fa?Be.LINEAR:Be.NEAREST}}else{const fa=1!==u.layout.get("icon-size").constantOr(0)||an.iconsNeedLinear;ln=sn.imageAtlasTexture,ci=S||y.options.rotating||y.options.zooming||fa||q?Be.LINEAR:Be.NEAREST,Ct=sn.imageAtlasTexture.size}const Gr=we(sn,1,y.transform.zoom),Zr=H(Qt.posMatrix,ht,Oe,y.transform,Gr),Jr=J(Qt.posMatrix,ht,Oe,y.transform,Gr),pa=Ft&&an.hasTextData(),pr="none"!==u.layout.get("icon-text-fit")&&pa&&an.hasIconData();if(mt){const fa=y.style.map.terrain?(rl,Na)=>y.style.map.terrain.getElevation(Qt,rl,Na):null,ma="map"===u.layout.get("text-rotation-alignment");Qe(an,Qt.posMatrix,y,b,Zr,Jr,ht,Q,ma,fa)}const Qr=y.translatePosMatrix(Qt.posMatrix,sn,C,A),rr=mt||b&&Ft||pr?Sl:Zr,Wi=y.translatePosMatrix(Jr,sn,C,A,!0),_o=S&&0!==u.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1);let eo;eo=S?an.iconsInText?wo(z.kind,Ie,xt,ht,y,Qr,rr,Wi,Ct,ji):Ps(z.kind,Ie,xt,ht,y,Qr,rr,Wi,b,Ct,!0):js(z.kind,Ie,xt,ht,y,Qr,rr,Wi,b,Ct);const Pr={program:de,buffers:I,uniformValues:eo,atlasTexture:ln,atlasTextureIcon:vr,atlasInterpolation:ci,atlasInterpolationIcon:Bn,isSDF:S,hasHalo:_o};if(it&&an.canOverlap){kt=!0;const fa=I.segments.get();for(const ma of fa)Zt.push({segments:new m.SegmentVector([ma]),sortKey:ma.sortKey,state:Pr,terrainData:je})}else Zt.push({segments:I.segments,sortKey:0,state:Pr,terrainData:je})}kt&&Zt.sort((Qt,sn)=>Qt.sortKey-sn.sortKey);for(const Qt of Zt){const sn=Qt.state;if(ye.activeTexture.set(Be.TEXTURE0),sn.atlasTexture.bind(sn.atlasInterpolation,Be.CLAMP_TO_EDGE),sn.atlasTextureIcon&&(ye.activeTexture.set(Be.TEXTURE1),sn.atlasTextureIcon&&sn.atlasTextureIcon.bind(sn.atlasInterpolationIcon,Be.CLAMP_TO_EDGE)),sn.isSDF){const an=sn.uniformValues;sn.hasHalo&&(an.u_is_halo=1,wr(sn.buffers,Qt.segments,u,y,sn.program,Ht,ae,ce,an,Qt.terrainData)),an.u_is_halo=0}wr(sn.buffers,Qt.segments,u,y,sn.program,Ht,ae,ce,sn.uniformValues,Qt.terrainData)}}function wr(y,n,u,g,b,C,A,B,V,Q){const ae=g.context;b.draw(ae,ae.gl.TRIANGLES,C,A,B,ai.disabled,V,Q,u.id,y.layoutVertexBuffer,y.indexBuffer,n,u.paint,g.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function ee(y,n,u,g,b,C,A){const B=y.context.gl,V=u.paint.get("fill-pattern"),Q=V&&V.constantOr(1),ae=u.getCrossfadeParameters();let ce,ye,Be,Ue,Oe;A?(ye=Q&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=B.LINES):(ye=Q?"fillPattern":"fill",ce=B.TRIANGLES);for(const ht of g){const mt=n.getTile(ht);if(Q&&!mt.patternsLoaded())continue;const xt=mt.getBucket(u);if(!xt)continue;const it=xt.programConfigurations.get(u.id),kt=y.useProgram(ye,it),Ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ht);Q&&(y.context.activeTexture.set(B.TEXTURE0),mt.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),it.updatePaintBuffers(ae));const Ft=V.constantOr(null);if(Ft&&mt.imageAtlas){const sn=mt.imageAtlas,an=sn.patternPositions[Ft.to.toString()],I=sn.patternPositions[Ft.from.toString()];an&&I&&it.setConstantPatternPositions(an,I)}const Zt=Ht?ht:null,Qt=y.translatePosMatrix(Zt?Zt.posMatrix:ht.posMatrix,mt,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(A){Ue=xt.indexBuffer2,Oe=xt.segments2;const sn=[B.drawingBufferWidth,B.drawingBufferHeight];Be="fillOutlinePattern"===ye&&Q?ro(Qt,y,ae,mt,sn):gr(Qt,sn)}else Ue=xt.indexBuffer,Oe=xt.segments,Be=Q?po(Qt,y,ae,mt):er(Qt);kt.draw(y.context,ce,b,y.stencilModeForClipping(ht),C,ai.disabled,Be,Ht,u.id,xt.layoutVertexBuffer,Ue,Oe,u.paint,y.transform.zoom,it)}}function X(y,n,u,g,b,C,A){const B=y.context,V=B.gl,Q=u.paint.get("fill-extrusion-pattern"),ae=Q.constantOr(1),ce=u.getCrossfadeParameters(),ye=u.paint.get("fill-extrusion-opacity");for(const Be of g){const Ue=n.getTile(Be),Oe=Ue.getBucket(u);if(!Oe)continue;const ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Be),mt=Oe.programConfigurations.get(u.id),xt=y.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",mt);ae&&(y.context.activeTexture.set(V.TEXTURE0),Ue.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),mt.updatePaintBuffers(ce));const it=Q.constantOr(null);if(it&&Ue.imageAtlas){const Zt=Ue.imageAtlas,Qt=Zt.patternPositions[it.to.toString()],sn=Zt.patternPositions[it.from.toString()];Qt&&sn&&mt.setConstantPatternPositions(Qt,sn)}const kt=y.translatePosMatrix(Be.posMatrix,Ue,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ht=u.paint.get("fill-extrusion-vertical-gradient"),Ft=ae?jr(kt,y,Ht,ye,Be,ce,Ue):xo(kt,y,Ht,ye);xt.draw(B,B.gl.TRIANGLES,b,C,A,ai.backCCW,Ft,ht,u.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,u.paint,y.transform.zoom,mt,y.style.map.terrain&&Oe.centroidVertexBuffer)}}function W(y,n,u,g,b,C,A){const B=y.context,V=B.gl,Q=u.fbo;if(!Q)return;const ae=y.useProgram("hillshade"),ce=y.style.map.terrain&&y.style.map.terrain.getTerrainData(n);B.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,Q.colorAttachment.get()),ae.draw(B,V.TRIANGLES,b,C,A,ai.disabled,((ye,Be,Ue,Oe)=>{const ht=Ue.paint.get("hillshade-shadow-color"),mt=Ue.paint.get("hillshade-highlight-color"),xt=Ue.paint.get("hillshade-accent-color");let it=Ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ue.paint.get("hillshade-illumination-anchor")&&(it-=ye.transform.angle);const kt=!ye.options.moving;return{u_matrix:Oe?Oe.posMatrix:ye.transform.calculatePosMatrix(Be.tileID.toUnwrapped(),kt),u_image:0,u_latrange:As(0,Be.tileID),u_light:[Ue.paint.get("hillshade-exaggeration"),it],u_shadow:ht,u_highlight:mt,u_accent:xt}})(y,u,g,ce?n:null),ce,g.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function fe(y,n,u,g,b,C){const A=y.context,B=A.gl,V=n.dem;if(V&&V.data){const Q=V.dim,ae=V.stride,ce=V.getPixels();if(A.activeTexture.set(B.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||y.getTileTexture(ae),n.demTexture){const Be=n.demTexture;Be.update(ce,{premultiply:!1}),Be.bind(B.NEAREST,B.CLAMP_TO_EDGE)}else n.demTexture=new Te(A,ce,B.RGBA,{premultiply:!1}),n.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);A.activeTexture.set(B.TEXTURE0);let ye=n.fbo;if(!ye){const Be=new Te(A,{width:Q,height:Q,data:null},B.RGBA);Be.bind(B.LINEAR,B.CLAMP_TO_EDGE),ye=n.fbo=A.createFramebuffer(Q,Q,!0),ye.colorAttachment.set(Be.texture)}A.bindFramebuffer.set(ye.framebuffer),A.viewport.set([0,0,Q,Q]),y.useProgram("hillshadePrepare").draw(A,B.TRIANGLES,g,b,C,ai.disabled,((Be,Ue)=>{const Oe=Ue.stride,ht=m.create();return m.ortho(ht,0,m.EXTENT,-m.EXTENT,0,0,1),m.translate(ht,ht,[0,-m.EXTENT,0]),{u_matrix:ht,u_image:1,u_dimension:[Oe,Oe],u_zoom:Be.overscaledZ,u_unpack:Ue.getUnpackVector()}})(n.tileID,V),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Wt(y,n,u,g,b,C){const A=g.paint.get("raster-fade-duration");if(!C&&A>0){const B=m.exported.now(),V=(B-y.timeAdded)/A,Q=n?(B-n.timeAdded)/A:-1,ae=u.getSource(),ce=b.coveringZoomLevel({tileSize:ae.tileSize,roundZoom:ae.roundZoom}),ye=!n||Math.abs(n.tileID.overscaledZ-ce)>Math.abs(y.tileID.overscaledZ-ce),Be=ye&&y.refreshedUponExpiration?1:m.clamp(ye?V:1-Q,0,1);return y.refreshedUponExpiration&&V>=1&&(y.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Be}:{opacity:Be,mix:0}}return{opacity:1,mix:0}}const li=new m.Color(1,0,0,1),yr=new m.Color(0,1,0,1),mo=new m.Color(0,0,1,1),or=new m.Color(1,0,1,1),ur=new m.Color(0,1,1,1);function Fo(y,n,u,g){No(y,0,n+u/2,y.transform.width,u,g)}function Oa(y,n,u,g){No(y,n-u/2,0,u,y.transform.height,g)}function No(y,n,u,g,b,C){const A=y.context,B=A.gl;B.enable(B.SCISSOR_TEST),B.scissor(n*y.pixelRatio,u*y.pixelRatio,g*y.pixelRatio,b*y.pixelRatio),A.clear({color:C}),B.disable(B.SCISSOR_TEST)}function rs(y,n,u){const g=y.context,b=g.gl,C=u.posMatrix,A=y.useProgram("debug"),B=Ii.disabled,V=Ki.disabled,Q=y.colorModeForRenderPass(),ce=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);g.activeTexture.set(b.TEXTURE0),y.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE);const ye=n.getTileByID(u.key).latestRawTileData,Be=Math.floor((ye&&ye.byteLength||0)/1024),Ue=n.getTile(u).tileSize,Oe=512/Math.min(Ue,512)*(u.overscaledZ/y.transform.zoom)*.5;let ht=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ht+=` => ${u.overscaledZ}`),function(mt,xt){mt.initDebugOverlayCanvas();const it=mt.debugOverlayCanvas,kt=mt.context.gl,Ht=mt.debugOverlayCanvas.getContext("2d");Ht.clearRect(0,0,it.width,it.height),Ht.shadowColor="white",Ht.shadowBlur=2,Ht.lineWidth=1.5,Ht.strokeStyle="white",Ht.textBaseline="top",Ht.font="bold 36px Open Sans, sans-serif",Ht.fillText(xt,5,5),Ht.strokeText(xt,5,5),mt.debugOverlayTexture.update(it),mt.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(y,`${ht} ${Be}kB`),A.draw(g,b.TRIANGLES,B,V,Kn.alphaBlended,ai.disabled,Is(C,m.Color.transparent,Oe),null,"$debug",y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),A.draw(g,b.LINE_STRIP,B,V,Q,ai.disabled,Is(C,m.Color.red),ce,"$debug",y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Tl(y,n,u){const g=y.context,b=g.gl,C=y.colorModeForRenderPass(),A=new Ii(b.LEQUAL,Ii.ReadWrite,y.depthRangeFor3D),B=y.useProgram("terrain"),V=n.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,y.width,y.height]);for(const Q of u){const ae=y.renderToTexture.getTexture(Q),ce=n.getTerrainData(Q.tileID);g.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,ae.texture);const ye={u_matrix:y.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(y.transform.zoom)};B.draw(g,b.TRIANGLES,A,Ki.disabled,C,ai.backCCW,ye,ce,"terrain",V.vertexBuffer,V.indexBuffer,V.segments)}}const Yl={symbol:function(y,n,u,g,b){if("translucent"!==y.renderPass)return;const C=Ki.disabled,A=y.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(B,V,Q,ae,ce,ye,Be){const Ue=V.transform,Oe="map"===ce,ht="map"===ye;for(const mt of B){const xt=ae.getTile(mt),it=xt.getBucket(Q);if(!it||!it.text||!it.text.segments.get().length)continue;const kt=m.evaluateSizeForZoom(it.textSizeData,Ue.zoom),Ht=we(xt,1,V.transform.zoom),Ft=H(mt.posMatrix,ht,Oe,V.transform,Ht),Zt="none"!==Q.layout.get("icon-text-fit")&&it.hasIconData();if(kt){const Qt=Math.pow(2,Ue.zoom-xt.tileID.overscaledZ);Oi(it,Oe,ht,Be,Ue,Ft,mt.posMatrix,Qt,kt,Zt,V.style.map.terrain?(sn,an)=>V.style.map.terrain.getElevation(mt,sn,an):null)}}}(g,y,u,n,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),b),0!==u.paint.get("icon-opacity").constantOr(1)&&Xa(y,n,u,g,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),C,A),0!==u.paint.get("text-opacity").constantOr(1)&&Xa(y,n,u,g,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),C,A),n.map.showCollisionBoxes&&(Zs(y,n,u,g,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Zs(y,n,u,g,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(y,n,u,g){if("translucent"!==y.renderPass)return;const b=u.paint.get("circle-opacity"),C=u.paint.get("circle-stroke-width"),A=u.paint.get("circle-stroke-opacity"),B=!u.layout.get("circle-sort-key").isConstant();if(0===b.constantOr(1)&&(0===C.constantOr(1)||0===A.constantOr(1)))return;const V=y.context,Q=V.gl,ae=y.depthModeForSublayer(0,Ii.ReadOnly),ce=Ki.disabled,ye=y.colorModeForRenderPass(),Be=[];for(let Ue=0;Ue<g.length;Ue++){const Oe=g[Ue],ht=n.getTile(Oe),mt=ht.getBucket(u);if(!mt)continue;const xt=mt.programConfigurations.get(u.id),it=y.useProgram("circle",xt),kt=mt.layoutVertexBuffer,Ht=mt.indexBuffer,Ft=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Oe),Zt={programConfiguration:xt,program:it,layoutVertexBuffer:kt,indexBuffer:Ht,uniformValues:Vs(y,Oe,ht,u),terrainData:Ft};if(B){const Qt=mt.segments.get();for(const sn of Qt)Be.push({segments:new m.SegmentVector([sn]),sortKey:sn.sortKey,state:Zt})}else Be.push({segments:mt.segments,sortKey:0,state:Zt})}B&&Be.sort((Ue,Oe)=>Ue.sortKey-Oe.sortKey);for(const Ue of Be){const{programConfiguration:Oe,program:ht,layoutVertexBuffer:mt,indexBuffer:xt,uniformValues:it,terrainData:kt}=Ue.state;ht.draw(V,Q.TRIANGLES,ae,ce,ye,ai.disabled,it,kt,u.id,mt,xt,Ue.segments,u.paint,y.transform.zoom,Oe)}},heatmap:function(y,n,u,g){if(0!==u.paint.get("heatmap-opacity"))if("offscreen"===y.renderPass){const b=y.context,C=b.gl,A=Ki.disabled,B=new Kn([C.ONE,C.ONE],m.Color.transparent,[!0,!0,!0,!0]);(function(V,Q,ae){const ce=V.gl;V.activeTexture.set(ce.TEXTURE1),V.viewport.set([0,0,Q.width/4,Q.height/4]);let ye=ae.heatmapFbo;if(ye)ce.bindTexture(ce.TEXTURE_2D,ye.colorAttachment.get()),V.bindFramebuffer.set(ye.framebuffer);else{const Be=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Be),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),ye=ae.heatmapFbo=V.createFramebuffer(Q.width/4,Q.height/4,!1),function(Ue,Oe,ht,mt){const xt=Ue.gl;xt.texImage2D(xt.TEXTURE_2D,0,xt.RGBA,Oe.width/4,Oe.height/4,0,xt.RGBA,Ue.extRenderToTextureHalfFloat?Ue.extTextureHalfFloat.HALF_FLOAT_OES:xt.UNSIGNED_BYTE,null),mt.colorAttachment.set(ht)}(V,Q,Be,ye)}})(b,y,u),b.clear({color:m.Color.transparent});for(let V=0;V<g.length;V++){const Q=g[V];if(n.hasRenderableParent(Q))continue;const ae=n.getTile(Q),ce=ae.getBucket(u);if(!ce)continue;const ye=ce.programConfigurations.get(u.id),Be=y.useProgram("heatmap",ye),{zoom:Ue}=y.transform;Be.draw(b,C.TRIANGLES,Ii.disabled,A,B,ai.disabled,Po(Q.posMatrix,ae,Ue,u.paint.get("heatmap-intensity")),null,u.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,u.paint,y.transform.zoom,ye)}b.viewport.set([0,0,y.width,y.height])}else"translucent"===y.renderPass&&(y.context.setColorMode(y.colorModeForRenderPass()),function(b,C){const A=b.context,B=A.gl,V=C.heatmapFbo;if(!V)return;A.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,V.colorAttachment.get()),A.activeTexture.set(B.TEXTURE1);let Q=C.colorRampTexture;Q||(Q=C.colorRampTexture=new Te(A,C.colorRamp,B.RGBA)),Q.bind(B.LINEAR,B.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(A,B.TRIANGLES,Ii.disabled,Ki.disabled,b.colorModeForRenderPass(),ai.disabled,((ae,ce,ye,Be)=>{const Ue=m.create();m.ortho(Ue,0,ae.width,ae.height,0,0,1);const Oe=ae.context.gl;return{u_matrix:Ue,u_world:[Oe.drawingBufferWidth,Oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ce.paint.get("heatmap-opacity")}})(b,C),null,C.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,C.paint,b.transform.zoom)}(y,u))},line:function(y,n,u,g){if("translucent"!==y.renderPass)return;const b=u.paint.get("line-opacity"),C=u.paint.get("line-width");if(0===b.constantOr(1)||0===C.constantOr(1))return;const A=y.depthModeForSublayer(0,Ii.ReadOnly),B=y.colorModeForRenderPass(),V=u.paint.get("line-dasharray"),Q=u.paint.get("line-pattern"),ae=Q.constantOr(1),ce=u.paint.get("line-gradient"),ye=u.getCrossfadeParameters(),Be=ae?"linePattern":V?"lineSDF":ce?"lineGradient":"line",Ue=y.context,Oe=Ue.gl;let ht=!0;for(const mt of g){const xt=n.getTile(mt);if(ae&&!xt.patternsLoaded())continue;const it=xt.getBucket(u);if(!it)continue;const kt=it.programConfigurations.get(u.id),Ht=y.context.program.get(),Ft=y.useProgram(Be,kt),Zt=ht||Ft.program!==Ht,Qt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(mt),sn=Q.constantOr(null);if(sn&&xt.imageAtlas){const P=xt.imageAtlas,S=P.patternPositions[sn.to.toString()],z=P.patternPositions[sn.from.toString()];S&&z&&kt.setConstantPatternPositions(S,z)}const an=Qt?mt:null,I=ae?ul(y,xt,u,ye,an):V?fo(y,xt,u,V,ye,an):ce?fs(y,xt,u,it.lineClipsArray.length,an):Oo(y,xt,u,an);if(ae)Ue.activeTexture.set(Oe.TEXTURE0),xt.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),kt.updatePaintBuffers(ye);else if(V&&(Zt||y.lineAtlas.dirty))Ue.activeTexture.set(Oe.TEXTURE0),y.lineAtlas.bind(Ue);else if(ce){const P=it.gradients[u.id];let S=P.texture;if(u.gradientVersion!==P.version){let z=256;if(u.stepInterpolant){const q=n.getSource().maxzoom,de=mt.canonical.z===q?Math.ceil(1<<y.transform.maxZoom-mt.canonical.z):1;z=m.clamp(m.nextPowerOfTwo(it.maxLineLength/m.EXTENT*1024*de),256,Ue.maxTextureSize)}P.gradient=m.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:P.gradient||void 0,clips:it.lineClipsArray}),P.texture?P.texture.update(P.gradient):P.texture=new Te(Ue,P.gradient,Oe.RGBA),P.version=u.gradientVersion,S=P.texture}Ue.activeTexture.set(Oe.TEXTURE0),S.bind(u.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}Ft.draw(Ue,Oe.TRIANGLES,A,y.stencilModeForClipping(mt),B,ai.disabled,I,Qt,u.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,u.paint,y.transform.zoom,kt,it.layoutVertexBuffer2),ht=!1}},fill:function(y,n,u,g){const b=u.paint.get("fill-color"),C=u.paint.get("fill-opacity");if(0===C.constantOr(1))return;const A=y.colorModeForRenderPass(),B=u.paint.get("fill-pattern"),V=y.opaquePassEnabledForLayer()&&!B.constantOr(1)&&1===b.constantOr(m.Color.transparent).a&&1===C.constantOr(0)?"opaque":"translucent";if(y.renderPass===V){const Q=y.depthModeForSublayer(1,"opaque"===y.renderPass?Ii.ReadWrite:Ii.ReadOnly);ee(y,n,u,g,Q,A,!1)}if("translucent"===y.renderPass&&u.paint.get("fill-antialias")){const Q=y.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Ii.ReadOnly);ee(y,n,u,g,Q,A,!0)}},"fill-extrusion":function(y,n,u,g){const b=u.paint.get("fill-extrusion-opacity");if(0!==b&&"translucent"===y.renderPass){const C=new Ii(y.context.gl.LEQUAL,Ii.ReadWrite,y.depthRangeFor3D);if(1!==b||u.paint.get("fill-extrusion-pattern").constantOr(1))X(y,n,u,g,C,Ki.disabled,Kn.disabled),X(y,n,u,g,C,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const A=y.colorModeForRenderPass();X(y,n,u,g,C,Ki.disabled,A)}}},hillshade:function(y,n,u,g){if("offscreen"!==y.renderPass&&"translucent"!==y.renderPass)return;const b=y.context,C=y.depthModeForSublayer(0,Ii.ReadOnly),A=y.colorModeForRenderPass(),[B,V]="translucent"===y.renderPass?y.stencilConfigForOverlap(g):[{},g];for(const Q of V){const ae=n.getTile(Q);void 0!==ae.needsHillshadePrepare&&ae.needsHillshadePrepare&&"offscreen"===y.renderPass?fe(y,ae,u,C,Ki.disabled,A):"translucent"===y.renderPass&&W(y,Q,ae,u,C,B[Q.overscaledZ],A)}b.viewport.set([0,0,y.width,y.height])},raster:function(y,n,u,g){if("translucent"!==y.renderPass||0===u.paint.get("raster-opacity")||!g.length)return;const b=y.context,C=b.gl,A=n.getSource(),B=y.useProgram("raster"),V=y.colorModeForRenderPass(),[Q,ae]=A instanceof pn?[{},g]:y.stencilConfigForOverlap(g),ce=ae[ae.length-1].overscaledZ,ye=!y.options.moving;for(const Be of ae){const Ue=y.depthModeForSublayer(Be.overscaledZ-ce,1===u.paint.get("raster-opacity")?Ii.ReadWrite:Ii.ReadOnly,C.LESS),Oe=n.getTile(Be);Oe.registerFadeDuration(u.paint.get("raster-fade-duration"));const ht=n.findLoadedParent(Be,0),mt=Wt(Oe,ht,n,u,y.transform,y.style.map.terrain);let xt,it;const kt="nearest"===u.paint.get("raster-resampling")?C.NEAREST:C.LINEAR;b.activeTexture.set(C.TEXTURE0),Oe.texture.bind(kt,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(C.TEXTURE1),ht?(ht.texture.bind(kt,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),xt=Math.pow(2,ht.tileID.overscaledZ-Oe.tileID.overscaledZ),it=[Oe.tileID.canonical.x*xt%1,Oe.tileID.canonical.y*xt%1]):Oe.texture.bind(kt,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST);const Ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Be),Ft=Ht?Be:null,Zt=Ft?Ft.posMatrix:y.transform.calculatePosMatrix(Be.toUnwrapped(),ye),Qt=ar(Zt,it||[0,0],xt||1,mt,u);A instanceof pn?B.draw(b,C.TRIANGLES,Ue,Ki.disabled,V,ai.disabled,Qt,Ht,u.id,A.boundsBuffer,y.quadTriangleIndexBuffer,A.boundsSegments):B.draw(b,C.TRIANGLES,Ue,Q[Be.overscaledZ],V,ai.disabled,Qt,Ht,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}},background:function(y,n,u,g){const b=u.paint.get("background-color"),C=u.paint.get("background-opacity");if(0===C)return;const A=y.context,B=A.gl,V=y.transform,Q=V.tileSize,ae=u.paint.get("background-pattern");if(y.isPatternMissing(ae))return;const ce=!ae&&1===b.a&&1===C&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ce)return;const ye=Ki.disabled,Be=y.depthModeForSublayer(0,"opaque"===ce?Ii.ReadWrite:Ii.ReadOnly),Ue=y.colorModeForRenderPass(),Oe=y.useProgram(ae?"backgroundPattern":"background"),ht=g||V.coveringTiles({tileSize:Q,terrain:y.style.map.terrain});ae&&(A.activeTexture.set(B.TEXTURE0),y.imageManager.bind(y.context));const mt=u.getCrossfadeParameters();for(const xt of ht){const it=g?xt.posMatrix:y.transform.calculatePosMatrix(xt.toUnwrapped()),kt=ae?dl(it,C,y,ae,{tileID:xt,tileSize:Q},mt):ko(it,C,b),Ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(xt);Oe.draw(A,B.TRIANGLES,Be,ye,Ue,ai.disabled,kt,Ht,u.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}},debug:function(y,n,u){for(let g=0;g<u.length;g++)rs(y,n,u[g])},custom:function(y,n,u){const g=y.context,b=u.implementation;if("offscreen"===y.renderPass){const C=b.prerender;C&&(y.setCustomLayerDefaults(),g.setColorMode(y.colorModeForRenderPass()),C.call(b,g.gl,y.transform.customLayerMatrix()),g.setDirty(),y.setBaseState())}else if("translucent"===y.renderPass){y.setCustomLayerDefaults(),g.setColorMode(y.colorModeForRenderPass()),g.setStencilMode(Ki.disabled);const C="3d"===b.renderingMode?new Ii(y.context.gl.LEQUAL,Ii.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Ii.ReadOnly);g.setDepthMode(C),b.render(g.gl,y.transform.customLayerMatrix()),g.setDirty(),y.setBaseState(),g.bindFramebuffer.set(null)}}};class Xl{constructor(n,u){this.context=new Gs(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:m.create(),renderTime:0},this.setup(),this.numSublayers=wn.maxUnderzooming+wn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xi,this.gpuTimers={}}resize(n,u,g){if(this.width=n*g,this.height=u*g,this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const n=this.context,u=new m.PosArray;u.emplaceBack(0,0),u.emplaceBack(m.EXTENT,0),u.emplaceBack(0,m.EXTENT),u.emplaceBack(m.EXTENT,m.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(u,Fr.members),this.tileExtentSegments=m.SegmentVector.simpleSegment(0,0,4,2);const g=new m.PosArray;g.emplaceBack(0,0),g.emplaceBack(m.EXTENT,0),g.emplaceBack(0,m.EXTENT),g.emplaceBack(m.EXTENT,m.EXTENT),this.debugBuffer=n.createVertexBuffer(g,Fr.members),this.debugSegments=m.SegmentVector.simpleSegment(0,0,4,5);const b=new m.RasterBoundsArray;b.emplaceBack(0,0,0,0),b.emplaceBack(m.EXTENT,0,m.EXTENT,0),b.emplaceBack(0,m.EXTENT,0,m.EXTENT),b.emplaceBack(m.EXTENT,m.EXTENT,m.EXTENT,m.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(b,St.members),this.rasterBoundsSegments=m.SegmentVector.simpleSegment(0,0,4,2);const C=new m.PosArray;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(C,Fr.members),this.viewportSegments=m.SegmentVector.simpleSegment(0,0,4,2);const A=new m.LineStripIndexArray;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(A);const B=new m.TriangleIndexArray;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(B),this.emptyTexture=new Te(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);const V=this.context.gl;this.stencilClearMode=new Ki({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=m.create();m.ortho(g,0,this.width,this.height,0,0,1),m.scale(g,g,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,u.TRIANGLES,Ii.disabled,this.stencilClearMode,Kn.disabled,ai.disabled,kr(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source;const g=this.context,b=g.gl;this.nextStencilID+u.length>256&&this.clearStencil(),g.setColorMode(Kn.disabled),g.setDepthMode(Ii.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of u){const B=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,V=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);C.draw(g,b.TRIANGLES,Ii.disabled,new Ki({func:b.ALWAYS,mask:0},B,255,b.KEEP,b.KEEP,b.REPLACE),Kn.disabled,ai.disabled,kr(A.posMatrix),V,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new Ki({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new Ki({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(n){const u=this.context.gl,g=n.sort((A,B)=>B.overscaledZ-A.overscaledZ),b=g[g.length-1].overscaledZ,C=g[0].overscaledZ-b+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const A={};for(let B=0;B<C;B++)A[B+b]=new Ki({func:u.GEQUAL,mask:255},B+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=C,[A,g]}return[{[b]:Ki.disabled},g]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Kn([n.CONSTANT_COLOR,n.ONE],new m.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Kn.unblended:Kn.alphaBlended}depthModeForSublayer(n,u,g){if(!this.opaquePassEnabledForLayer())return Ii.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Ii(g||this.context.gl.LEQUAL,u,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(m.exported.now()),this.imageManager.beginFrame();const g=this.style._order,b=this.style.sourceCaches;for(const V in b){const Q=b[V];Q.used&&Q.prepare(this.context)}const C={},A={},B={};for(const V in b){const Q=b[V];C[V]=Q.getVisibleCoordinates(),A[V]=C[V].slice().reverse(),B[V]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<g.length;V++)if(this.style._layers[g[V]].is3D()){this.opaquePassCutoff=V;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const V=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!m.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||V.length)&&(m.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Q,ae){const ce=Q.context,ye=ce.gl,Be=Kn.unblended,Ue=new Ii(ye.LEQUAL,Ii.ReadWrite,[0,1]),Oe=ae.getTerrainMesh(),ht=ae.sourceCache.getRenderableTiles(),mt=Q.useProgram("terrainDepth");ce.bindFramebuffer.set(ae.getFramebuffer("depth").framebuffer),ce.viewport.set([0,0,Q.width/devicePixelRatio,Q.height/devicePixelRatio]),ce.clear({color:m.Color.transparent,depth:1});for(const xt of ht){const it=ae.getTerrainData(xt.tileID),kt={u_matrix:Q.transform.calculatePosMatrix(xt.tileID.toUnwrapped()),u_ele_delta:ae.getMeshFrameDelta(Q.transform.zoom)};mt.draw(ce,ye.TRIANGLES,Ue,Ki.disabled,Be,ai.backCCW,kt,it,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}ce.bindFramebuffer.set(null),ce.viewport.set([0,0,Q.width,Q.height])}(this,this.style.map.terrain),function(Q,ae){const ce=Q.context,ye=ce.gl,Be=Kn.unblended,Ue=new Ii(ye.LEQUAL,Ii.ReadWrite,[0,1]),Oe=ae.getTerrainMesh(),ht=ae.getCoordsTexture(),mt=ae.sourceCache.getRenderableTiles(),xt=Q.useProgram("terrainCoords");ce.bindFramebuffer.set(ae.getFramebuffer("coords").framebuffer),ce.viewport.set([0,0,Q.width/devicePixelRatio,Q.height/devicePixelRatio]),ce.clear({color:m.Color.transparent,depth:1}),ae.coordsIndex=[];for(const it of mt){const kt=ae.getTerrainData(it.tileID);ce.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,ht.texture);const Ht={u_matrix:Q.transform.calculatePosMatrix(it.tileID.toUnwrapped()),u_terrain_coords_id:(255-ae.coordsIndex.length)/255,u_texture:0,u_ele_delta:ae.getMeshFrameDelta(Q.transform.zoom)};xt.draw(ce,ye.TRIANGLES,Ue,Ki.disabled,Be,ai.backCCW,Ht,kt,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments),ae.coordsIndex.push(it.tileID.key)}ce.bindFramebuffer.set(null),ce.viewport.set([0,0,Q.width,Q.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const V of g){const Q=this.style._layers[V];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;const ae=A[Q.source];("custom"===Q.type||ae.length)&&this.renderLayer(this,b[Q.source],Q,ae)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?m.Color.black:m.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[g[this.currentLayer]],Q=b[V.source],ae=C[V.source];this._renderTileClippingMasks(V,ae),this.renderLayer(this,Q,V,ae)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const V=this.style._layers[g[this.currentLayer]],Q=b[V.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(V))continue;const ae=("symbol"===V.type?B:A)[V.source];this._renderTileClippingMasks(V,C[V.source]),this.renderLayer(this,Q,V,ae)}if(this.options.showTileBoundaries){const V=function(Q,ae){let ce=null;const ye=Object.values(Q._layers).flatMap(ht=>ht.source&&!ht.isHidden(ae)?[Q.sourceCaches[ht.source]]:[]),Be=ye.filter(ht=>"vector"===ht.getSource().type),Ue=ye.filter(ht=>"vector"!==ht.getSource().type),Oe=ht=>{(!ce||ce.getSource().maxzoom<ht.getSource().maxzoom)&&(ce=ht)};return Be.forEach(ht=>Oe(ht)),ce||Ue.forEach(ht=>Oe(ht)),ce}(this.style,this.transform.zoom);V&&Yl.debug(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const Q=V.transform.padding;Fo(V,V.transform.height-(Q.top||0),3,li),Fo(V,Q.bottom||0,3,yr),Oa(V,Q.left||0,3,mo),Oa(V,V.transform.width-(Q.right||0),3,or);const ae=V.transform.centerPoint;var ce,ye,Be,Ue;No(ce=V,(ye=ae.x)-1,(Be=V.transform.height-ae.y)-10,2,20,Ue=ur),No(ce,ye-10,Be-1,20,2,Ue)}(this),this.context.setDefault()}renderLayer(n,u,g,b){g.isHidden(this.transform.zoom)||("background"===g.type||"custom"===g.type||(b||[]).length)&&(this.id=g.id,this.gpuTimingStart(g),Yl[g.type](n,u,g,b,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let g=this.gpuTimers[n.id];g||(g=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),g.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,g.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}queryGpuTimers(n){const u={};for(const g in n){const b=n[g],C=this.context.extTimerQuery,A=C.getQueryObjectEXT(b.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(b.query),u[g]=A}return u}translatePosMatrix(n,u,g,b,C){if(!g[0]&&!g[1])return n;const A=C?"map"===b?this.transform.angle:0:"viewport"===b?-this.transform.angle:0;if(A){const Q=Math.sin(A),ae=Math.cos(A);g=[g[0]*ae-g[1]*Q,g[0]*Q+g[1]*ae]}const B=[C?g[0]:we(u,g[0],this.transform.zoom),C?g[1]:we(u,g[1],this.transform.zoom),0],V=new Float32Array(16);return m.translate(V,n,B),V}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),g=this.imageManager.getPattern(n.to.toString());return!u||!g}useProgram(n,u){this.cache=this.cache||{};const g=n+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Go(this.context,n,Hi[n],u,Wa[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Te(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Jl{constructor(n,u){this.points=n,this.planes=u}static fromInvProjectionMatrix(n,u,g){const b=Math.pow(2,g),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const V=1/(B=m.transformMat4([],B,n))[3]/u*b;return m.mul$1(B,B,[V,V,1/B[3],V])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const V=m.sub([],C[B[0]],C[B[1]]),Q=m.sub([],C[B[2]],C[B[1]]),ae=m.normalize([],m.cross([],V,Q)),ce=-m.dot(ae,C[B[1]]);return ae.concat(ce)});return new Jl(C,A)}}class Ws{constructor(n,u){this.min=n,this.max=u,this.center=m.scale$1([],m.add([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],g=m.clone$2(this.min),b=m.clone$2(this.max);for(let C=0;C<u.length;C++)g[C]=u[C]?this.min[C]:this.center[C],b[C]=u[C]?this.center[C]:this.max[C];return b[2]=this.max[2],new Ws(g,b)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let b=0;b<n.planes.length;b++){const C=n.planes[b];let A=0;for(let B=0;B<u.length;B++)m.dot$1(C,u[B])>=0&&A++;if(0===A)return 0;A!==u.length&&(g=!1)}if(g)return 2;for(let b=0;b<3;b++){let C=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let B=0;B<n.points.length;B++){const V=n.points[B][b]-this.min[b];C=Math.min(C,V),A=Math.max(A,V)}if(A<0||C>this.max[b]-this.min[b])return 0}return 1}}class ys{constructor(n=0,u=0,g=0,b=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=g,this.right=b}interpolate(n,u,g){return null!=u.top&&null!=n.top&&(this.top=m.number(n.top,u.top,g)),null!=u.bottom&&null!=n.bottom&&(this.bottom=m.number(n.bottom,u.bottom,g)),null!=u.left&&null!=n.left&&(this.left=m.number(n.left,u.left,g)),null!=u.right&&null!=n.right&&(this.right=m.number(n.right,u.right,g)),this}getCenter(n,u){const g=m.clamp((this.left+n-this.right)/2,0,n),b=m.clamp((this.top+u-this.bottom)/2,0,u);return new m.pointGeometry(g,b)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new ys(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class qs{constructor(n,u,g,b,C){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===C||!!C,this._minZoom=n||0,this._maxZoom=u||22,this._minPitch=g??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new m.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ys,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new qs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n._elevation=this._elevation,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){void 0===n?n=!0:null===n&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new m.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const u=-m.wrap(n,-180,180)*Math.PI/180;var g,b,C,A,B,V,Q,ae,ce,ye;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(g=new m.ARRAY_TYPE(4),m.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),b=this.rotationMatrix,A=this.angle,B=(C=this.rotationMatrix)[0],V=C[1],Q=C[2],ae=C[3],ce=Math.sin(A),ye=Math.cos(A),b[0]=B*ye+Q*ce,b[1]=V*ye+ae*ce,b[2]=B*-ce+Q*ye,b[3]=V*-ce+ae*ye)}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const u=m.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const u=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,g){this._unmodified=!1,this._edgeInsets.interpolate(n,u,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const u=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(n){const u=[new m.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const g=this.pointCoordinate(new m.pointGeometry(0,0)),b=this.pointCoordinate(new m.pointGeometry(this.width,0)),C=this.pointCoordinate(new m.pointGeometry(this.width,this.height)),A=this.pointCoordinate(new m.pointGeometry(0,this.height)),B=Math.floor(Math.min(g.x,b.x,C.x,A.x)),V=Math.floor(Math.max(g.x,b.x,C.x,A.x)),Q=1;for(let ae=B-Q;ae<=V+Q;ae++)0!==ae&&u.push(new m.UnwrappedTileID(ae,n))}return u}coveringTiles(n){var u,g;let b=this.coveringZoomLevel(n);const C=b;if(void 0!==n.minzoom&&b<n.minzoom)return[];void 0!==n.maxzoom&&b>n.maxzoom&&(b=n.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),B=m.MercatorCoordinate.fromLngLat(this.center),V=Math.pow(2,b),Q=[V*A.x,V*A.y,0],ae=[V*B.x,V*B.y,0],ce=Jl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let ye=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ye=b);const Be=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Ue=it=>({aabb:new Ws([it*V,0,0],[(it+1)*V,V,0]),zoom:0,x:0,y:0,wrap:it,fullyVisible:!1}),Oe=[],ht=[],mt=b,xt=n.reparseOverscaled?C:b;if(this._renderWorldCopies)for(let it=1;it<=3;it++)Oe.push(Ue(-it)),Oe.push(Ue(it));for(Oe.push(Ue(0));Oe.length>0;){const it=Oe.pop(),kt=it.x,Ht=it.y;let Ft=it.fullyVisible;if(!Ft){const P=it.aabb.intersects(ce);if(0===P)continue;Ft=2===P}const Zt=n.terrain?Q:ae,Qt=it.aabb.distanceX(Zt),sn=it.aabb.distanceY(Zt),an=Math.max(Math.abs(Qt),Math.abs(sn)),I=Be+(1<<mt-it.zoom)-2;if(it.zoom===mt||an>I&&it.zoom>=ye){const P=mt-it.zoom,S=Q[0]-.5-(kt<<P),z=Q[1]-.5-(Ht<<P);ht.push({tileID:new m.OverscaledTileID(it.zoom===mt?xt:it.zoom,it.wrap,it.zoom,kt,Ht),distanceSq:m.sqrLen([ae[0]-.5-kt,ae[1]-.5-Ht]),tileDistanceToCamera:Math.sqrt(S*S+z*z)})}else for(let P=0;P<4;P++){const S=(kt<<1)+P%2,z=(Ht<<1)+(P>>1),q=it.zoom+1;let de=it.aabb.quadrant(P);if(n.terrain){const Ie=new m.OverscaledTileID(q,it.wrap,q,S,z),je=n.terrain.getMinMaxElevation(Ie),Ct=null!==(u=je.minElevation)&&void 0!==u?u:this.elevation,ln=null!==(g=je.maxElevation)&&void 0!==g?g:this.elevation;de=new Ws([de.min[0],de.min[1],Ct],[de.max[0],de.max[1],ln])}Oe.push({aabb:de,zoom:q,x:S,y:z,wrap:it.wrap,fullyVisible:Ft})}}return ht.sort((it,kt)=>it.distanceSq-kt.distanceSq).map(it=>it.tileID)}resize(n,u){this.width=n,this.height=u,this.pixelsToGLUnits=[2/n,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const u=m.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new m.pointGeometry(m.mercatorXfromLng(n.lng)*this.worldSize,m.mercatorYfromLat(u)*this.worldSize)}unproject(n){return new m.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(n){this.freezeElevation||(this.elevation=n?this.getElevation(this._center,n):0)}getElevation(n,u){const g=m.MercatorCoordinate.fromLngLat(n),b=(1<<this.tileZoom)*m.EXTENT,C=g.x*b,A=g.y*b,B=Math.floor(C/m.EXTENT),V=Math.floor(A/m.EXTENT),Q=new m.OverscaledTileID(this.tileZoom,0,this.tileZoom,B,V);return u.getElevation(Q,C%m.EXTENT,A%m.EXTENT,m.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const u=this.pointLocation(this.centerPoint,n),g=this.getElevation(u,n);if(!(this.elevation-g))return;const b=this.getCameraPosition(),C=m.MercatorCoordinate.fromLngLat(b.lngLat,b.altitude),A=m.MercatorCoordinate.fromLngLat(u,g),B=C.x-A.x,V=C.y-A.y,Q=C.z-A.z,ae=Math.sqrt(B*B+V*V+Q*Q),ce=this.scaleZoom(this.cameraToCenterDistance/ae/this.tileSize);this._elevation=g,this._center=u,this.zoom=ce}setLocationAtPoint(n,u){const g=this.pointCoordinate(u),b=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(n),A=new m.MercatorCoordinate(C.x-(g.x-b.x),C.y-(g.y-b.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,u){return u?this.coordinatePoint(this.locationCoordinate(n),this.getElevation(n,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,u){return this.coordinateLocation(this.pointCoordinate(n,u))}locationCoordinate(n){return m.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,u){if(u){const ye=u.pointCoordinate(n);if(null!=ye)return ye}const g=[n.x,n.y,0,1],b=[n.x,n.y,1,1];m.transformMat4(g,g,this.pixelMatrixInverse),m.transformMat4(b,b,this.pixelMatrixInverse);const C=g[3],A=b[3],B=g[1]/C,V=b[1]/A,Q=g[2]/C,ae=b[2]/A,ce=Q===ae?0:(0-Q)/(ae-Q);return new m.MercatorCoordinate(m.number(g[0]/C,b[0]/A,ce)/this.worldSize,m.number(B,V,ce)/this.worldSize)}coordinatePoint(n,u=0,g=this.pixelMatrix){const b=[n.x*this.worldSize,n.y*this.worldSize,u,1];return m.transformMat4(b,b,g),new m.pointGeometry(b[0]/b[3],b[1]/b[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return(new m.LngLatBounds).extend(this.pointLocation(new m.pointGeometry(0,n))).extend(this.pointLocation(new m.pointGeometry(this.width,n))).extend(this.pointLocation(new m.pointGeometry(this.width,this.height))).extend(this.pointLocation(new m.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new m.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,u=!1){const g=n.key,b=u?this._alignedPosMatrixCache:this._posMatrixCache;if(b[g])return b[g];const C=n.canonical,A=this.worldSize/this.zoomScale(C.z),B=C.x+Math.pow(2,C.z)*n.wrap,V=m.identity(new Float64Array(16));return m.translate(V,V,[B*A,C.y*A,0]),m.scale(V,V,[A/m.EXTENT,A/m.EXTENT,1]),m.multiply(V,u?this.alignedProjMatrix:this.projMatrix,V),b[g]=new Float32Array(V),b[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,u,g,b,C=-90,A=90,B=-180,V=180;const Q=this.size,ae=this._unmodified;if(this.latRange){const Be=this.latRange;C=m.mercatorYfromLat(Be[1])*this.worldSize,A=m.mercatorYfromLat(Be[0])*this.worldSize,n=A-C<Q.y?Q.y/(A-C):0}if(this.lngRange){const Be=this.lngRange;B=m.wrap(m.mercatorXfromLng(Be[0])*this.worldSize,0,this.worldSize),V=m.wrap(m.mercatorXfromLng(Be[1])*this.worldSize,0,this.worldSize),V<B&&(V+=this.worldSize),u=V-B<Q.x?Q.x/(V-B):0}const ce=this.point,ye=Math.max(u||0,n||0);if(ye)return this.center=this.unproject(new m.pointGeometry(u?(V+B)/2:ce.x,n?(A+C)/2:ce.y)),this.zoom+=this.scaleZoom(ye),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){const Be=ce.y,Ue=Q.y/2;Be-Ue<C&&(b=C+Ue),Be+Ue>A&&(b=A-Ue)}if(this.lngRange){const Be=(B+V)/2,Ue=m.wrap(ce.x,Be-this.worldSize/2,Be+this.worldSize/2),Oe=Q.x/2;Ue-Oe<B&&(g=B+Oe),Ue+Oe>V&&(g=V-Oe)}void 0===g&&void 0===b||(this.center=this.unproject(new m.pointGeometry(void 0!==g?g:ce.x,void 0!==b?b:ce.y)).wrap()),this._unmodified=ae,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,u=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=m.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let b=m.identity(new Float64Array(16));m.scale(b,b,[this.width/2,-this.height/2,1]),m.translate(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=m.identity(new Float64Array(16)),m.scale(b,b,[1,-1,1]),m.translate(b,b,[-1,-1,0]),m.scale(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const C=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,A=Math.PI/2+this._pitch,B=this._fov*(.5+n.y/this.height),V=Math.sin(B)*C/Math.sin(m.clamp(Math.PI-A-B,.01,Math.PI-.01)),Q=this.getHorizon(),ae=2*Math.atan(Q/this.cameraToCenterDistance)*(.5+n.y/(2*Q)),ce=Math.sin(ae)*C/Math.sin(m.clamp(Math.PI-A-ae,.01,Math.PI-.01)),ye=Math.min(V,ce),Be=1.01*(Math.cos(Math.PI/2-this._pitch)*ye+C),Ue=this.height/50;b=new Float64Array(16),m.perspective(b,this._fov,this.width/this.height,Ue,Be),b[8]=2*-n.x/this.width,b[9]=2*n.y/this.height,m.scale(b,b,[1,-1,1]),m.translate(b,b,[0,0,-this.cameraToCenterDistance]),m.rotateX(b,b,this._pitch),m.rotateZ(b,b,this.angle),m.translate(b,b,[-u,-g,0]),this.mercatorMatrix=m.scale([],b,[this.worldSize,this.worldSize,this.worldSize]),m.scale(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=m.multiply(new Float64Array(16),this.labelPlaneMatrix,b),m.translate(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=m.invert([],b),this.pixelMatrix3D=m.multiply(new Float64Array(16),this.labelPlaneMatrix,b);const Oe=this.width%2/2,ht=this.height%2/2,mt=Math.cos(this.angle),xt=Math.sin(this.angle),it=u-Math.round(u)+mt*Oe+xt*ht,kt=g-Math.round(g)+mt*ht+xt*Oe,Ht=new Float64Array(b);if(m.translate(Ht,Ht,[it>.5?it-1:it,kt>.5?kt-1:kt,0]),this.alignedProjMatrix=Ht,b=m.invert(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new m.pointGeometry(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return m.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new m.pointGeometry(0,n))}getCameraQueryGeometry(n){const u=this.getCameraPoint();if(1===n.length)return[n[0],u];{let g=u.x,b=u.y,C=u.x,A=u.y;for(const B of n)g=Math.min(g,B.x),b=Math.min(b,B.y),C=Math.max(C,B.x),A=Math.max(A,B.y);return[new m.pointGeometry(g,b),new m.pointGeometry(C,b),new m.pointGeometry(C,A),new m.pointGeometry(g,A),new m.pointGeometry(g,b)]}}}class Ja{constructor(n){this._hashName=n&&encodeURIComponent(n),m.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,g){let b=!1,C=null;const A=()=>{C=null,b&&(u(),C=setTimeout(A,300),b=!1)};return()=>(b=!0,C||A(),C)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const u=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,b=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,b),A=Math.round(u.lng*C)/C,B=Math.round(u.lat*C)/C,V=this._map.getBearing(),Q=this._map.getPitch();let ae="";if(ae+=n?`/${A}/${B}/${g}`:`${g}/${B}/${A}`,(V||Q)&&(ae+="/"+Math.round(10*V)/10),Q&&(ae+=`/${Math.round(Q)}`),this._hashName){const ce=this._hashName;let ye=!1;const Be=window.location.hash.slice(1).split("&").map(Ue=>{const Oe=Ue.split("=")[0];return Oe===ce?(ye=!0,`${Oe}=${ae}`):Ue}).filter(Ue=>Ue);return ye||Be.push(`${ce}=${ae}`),`#${Be.join("&")}`}return`#${ae}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let u;return n.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:u,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const ka={linearity:.3,easing:m.bezier(0,0,.3,1)},Ra=m.extend({deceleration:2500,maxSpeed:1400},ka),Il=m.extend({deceleration:20,maxSpeed:1400},ka),pl=m.extend({deceleration:1e3,maxSpeed:360},ka),Al=m.extend({deceleration:1e3,maxSpeed:90},ka);class $r{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:m.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=m.exported.now();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new m.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)u.zoom+=C.zoomDelta||0,u.bearing+=C.bearingDelta||0,u.pitch+=C.pitchDelta||0,C.panDelta&&u.pan._add(C.panDelta),C.around&&(u.around=C.around),C.pinchAround&&(u.pinchAround=C.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(u.pan.mag()){const C=re(u.pan.mag(),g,m.extend({},Ra,n||{}));b.offset=u.pan.mult(C.amount/u.pan.mag()),b.center=this._map.transform.center,j(b,C)}if(u.zoom){const C=re(u.zoom,g,Il);b.zoom=this._map.transform.zoom+C.amount,j(b,C)}if(u.bearing){const C=re(u.bearing,g,pl);b.bearing=this._map.transform.bearing+m.clamp(C.amount,-179,179),j(b,C)}if(u.pitch){const C=re(u.pitch,g,Al);b.pitch=this._map.transform.pitch+C.amount,j(b,C)}if(b.zoom||b.bearing){const C=void 0===u.pinchAround?u.around:u.pinchAround;b.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),m.extend(b,{noMoveStart:!0})}}function j(y,n){(!y.duration||y.duration<n.duration)&&(y.duration=n.duration,y.easing=n.easing)}function re(y,n,u){const{maxSpeed:g,linearity:b,deceleration:C}=u,A=m.clamp(y*b/(n/1e3),-g,g),B=Math.abs(A)/(C*b);return{easing:u.easing,duration:1e3*B,amount:A*(B/2)}}class Z extends m.Event{constructor(n,u,g,b={}){const C=pe.mousePos(u.getCanvasContainer(),g),A=u.unproject(C);super(n,m.extend({point:C,lngLat:A,originalEvent:g},b)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ge extends m.Event{constructor(n,u,g){const b="touchend"===n?g.changedTouches:g.touches,C=pe.touchPos(u.getCanvasContainer(),b),A=C.map(V=>u.unproject(V)),B=C.reduce((V,Q,ae,ce)=>V.add(Q.div(ce.length)),new m.pointGeometry(0,0));super(n,{points:C,point:B,lngLats:A,lngLat:u.unproject(B),originalEvent:g}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class nt extends m.Event{constructor(n,u,g){super(n,{originalEvent:g}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Pt{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new nt(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new Z(n.type,this._map,n))}mouseup(n){this._map.fire(new Z(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Z(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Z(n.type,this._map,n))}mouseover(n){this._map.fire(new Z(n.type,this._map,n))}mouseout(n){this._map.fire(new Z(n.type,this._map,n))}touchstart(n){return this._firePreventable(new ge(n.type,this._map,n))}touchmove(n){this._map.fire(new ge(n.type,this._map,n))}touchend(n){this._map.fire(new ge(n.type,this._map,n))}touchcancel(n){this._map.fire(new ge(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qt{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Z(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Z("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Z(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zn{constructor(n,u){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&0===n.button&&(pe.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const g=u;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=g,this._box||(this._box=pe.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const C=Math.min(b.x,g.x),A=Math.max(b.x,g.x),B=Math.min(b.y,g.y),V=Math.max(b.y,g.y);pe.setTransform(this._box,`translate(${C}px,${B}px)`),this._box.style.width=A-C+"px",this._box.style.height=V-B+"px"}mouseupWindow(n,u){if(!this._active||0!==n.button)return;const g=this._startPos,b=u;if(this.reset(),pe.suppressClick(),g.x!==b.x||g.y!==b.y)return this._map.fire(new m.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:C=>C.fitScreenCoordinates(g,b,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&27===n.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(pe.remove(this._box),this._box=null),pe.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new m.Event(n,{originalEvent:u}))}}function Mi(y,n){if(y.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${n.length}`);const u={};for(let g=0;g<y.length;g++)u[y[g].identifier]=n[g];return u}class xi{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=n.timeStamp),g.length===this.numTouches&&(this.centroid=function(b){const C=new m.pointGeometry(0,0);for(const A of b)C._add(A);return C.div(b.length)}(u),this.touches=Mi(g,u)))}touchmove(n,u,g){if(this.aborted||!this.centroid)return;const b=Mi(g,u);for(const C in this.touches){const A=this.touches[C],B=b[C];(!B||B.dist(A)>30)&&(this.aborted=!0)}}touchend(n,u,g){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),0===g.length){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class vi{constructor(n){this.singleTap=new xi(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,g){this.singleTap.touchstart(n,u,g)}touchmove(n,u,g){this.singleTap.touchmove(n,u,g)}touchend(n,u,g){const b=this.singleTap.touchend(n,u,g);if(b){const C=n.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(b)<30;if(C&&A||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class _i{constructor(){this._zoomIn=new vi({numTouches:1,numTaps:2}),this._zoomOut=new vi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,g){this._zoomIn.touchstart(n,u,g),this._zoomOut.touchstart(n,u,g)}touchmove(n,u,g){this._zoomIn.touchmove(n,u,g),this._zoomOut.touchmove(n,u,g)}touchend(n,u,g){const b=this._zoomIn.touchend(n,u,g),C=this._zoomOut.touchend(n,u,g);return b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()+1,around:A.unproject(b)},{originalEvent:n})}):C?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()-1,around:A.unproject(C)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const sr={0:1,2:2};class wi{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(n,u){return!1}_move(n,u){return{}}mousedown(n,u){if(this._lastPoint)return;const g=pe.mouseButton(n);this._correctButton(n,g)&&(this._lastPoint=u,this._eventButton=g)}mousemoveWindow(n,u){const g=this._lastPoint;if(g)if(n.preventDefault(),function(b,C){const A=sr[C];return void 0===b.buttons||(b.buttons&A)!==A}(n,this._eventButton))this.reset();else if(this._moved||!(u.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(g,u)}mouseupWindow(n){this._lastPoint&&pe.mouseButton(n)===this._eventButton&&(this._moved&&pe.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai extends wi{mousedown(n,u){super.mousedown(n,u),this._lastPoint&&(this._active=!0)}_correctButton(n,u){return 0===u&&!n.ctrlKey}_move(n,u){return{around:u,panDelta:u.sub(n)}}}class Eo extends wi{_correctButton(n,u){return 0===u&&n.ctrlKey||2===u}_move(n,u){const g=.8*(u.x-n.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(n){n.preventDefault()}}class Do extends wi{_correctButton(n,u){return 0===u&&n.ctrlKey||2===u}_move(n,u){const g=-.5*(u.y-n.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(n){n.preventDefault()}}class Br{constructor(n,u){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new m.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,u,g){return this._calculateTransform(n,u,g)}touchmove(n,u,g){if(this._map._cooperativeGestures&&(2===this._minTouches&&g.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,g.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(g.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,u,g)}touchend(n,u,g){this._calculateTransform(n,u,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,g){g.length>0&&(this._active=!0);const b=Mi(g,u),C=new m.pointGeometry(0,0),A=new m.pointGeometry(0,0);let B=0;for(const Q in b){const ae=b[Q],ce=this._touches[Q];ce&&(C._add(ae),A._add(ae.sub(ce)),B++,b[Q]=ae)}if(this._touches=b,B<this._minTouches||!A.mag())return;const V=A.div(B);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(B),panDelta:V}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,u,g){return{}}touchstart(n,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,g){if(!this._firstTwoTouches)return;n.preventDefault();const[b,C]=this._firstTwoTouches,A=Ar(g,u,b),B=Ar(g,u,C);if(!A||!B)return;const V=this._aroundCenter?null:A.add(B).div(2);return this._move([A,B],V,n)}touchend(n,u,g){if(!this._firstTwoTouches)return;const[b,C]=this._firstTwoTouches,A=Ar(g,u,b),B=Ar(g,u,C);A&&B||(this._active&&pe.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&"center"===n.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ar(y,n,u){for(let g=0;g<y.length;g++)if(y[g].identifier===u)return n[g]}function Mn(y,n){return Math.log(y/n)/Math.LN2}class Rs extends Xr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const g=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Mn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mn(this._distance,g),pinchAround:u}}}function Cr(y,n){return 180*y.angleWith(n)/Math.PI}class vs extends Xr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u){const g=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Cr(this._vector,g),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,g=Cr(n,this._startVector);return Math.abs(g)<u}}function Qa(y){return Math.abs(y.y)>Math.abs(y.x)}class Ln extends Xr{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,g){super.touchstart(n,u,g),this._currentTouchCount=g.length}_start(n){this._lastPoints=n,Qa(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,g){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=n[0].sub(this._lastPoints[0]),C=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,C,g.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(b.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,g){if(void 0!==this._valid)return this._valid;const b=n.mag()>=2,C=u.mag()>=2;if(!b&&!C)return;if(!b||!C)return void 0===this._firstMove&&(this._firstMove=g),g-this._firstMove<100&&void 0;const A=n.y>0==u.y>0;return Qa(n)&&Qa(u)&&A}}const yc={panStep:100,bearingStep:15,pitchStep:10};class hu{constructor(){const n=yc;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,g=0,b=0,C=0,A=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?g=-1:(n.preventDefault(),C=-1);break;case 39:n.shiftKey?g=1:(n.preventDefault(),C=1);break;case 38:n.shiftKey?b=1:(n.preventDefault(),A=-1);break;case 40:n.shiftKey?b=-1:(n.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(g=0,b=0),{cameraAnimation:B=>{const V=B.getZoom();B.easeTo({duration:300,easeId:"keyboardHandler",easing:sh,zoom:u?Math.round(V)+u*(n.shiftKey?2:1):V,bearing:B.getBearing()+g*this._bearingStep,pitch:B.getPitch()+b*this._pitchStep,offset:[-C*this._panStep,-A*this._panStep],center:B.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function sh(y){return y*(2-y)}const fl=4.000244140625;class vc{constructor(n,u){this._map=n,this._el=n.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,m.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&"center"===n.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;n.preventDefault()}let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const g=m.exported.now(),b=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,0!==u&&u%fl==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(b*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=pe.mousePos(this._el,n);this._around=m.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;if(0!==this._delta){const B="wheel"===this._type&&Math.abs(this._delta)>fl?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==V&&(V=1/V);const Q="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(Q*V))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u="number"==typeof this._targetZoom?this._targetZoom:n.zoom,g=this._startZoom,b=this._easing;let C,A=!1;if("wheel"===this._type&&g&&b){const B=Math.min((m.exported.now()-this._lastWheelEventTime)/200,1),V=b(B);C=m.number(g,u,V),B<1?this._frameId||(this._frameId=!0):A=!0}else C=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:C-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=m.ease;if(this._prevEase){const g=this._prevEase,b=(m.exported.now()-g.start)/g.duration,C=g.easing(b+.01)-g.easing(b),A=.27/Math.sqrt(C*C+1e-4)*.01,B=Math.sqrt(.0729-A*A);u=m.bezier(A,B,.25,1)}return this._prevEase={start:m.exported.now(),duration:n,easing:u},u}reset(){this._active=!1}}class bc{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ca{constructor(){this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(n.shiftKey?-1:1),around:g.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc{constructor(){this._tap=new vi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,u,g){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=u[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(n,u,g))}touchmove(n,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const b=u[0],C=b.y-this._swipePoint.y;return this._swipePoint=b,n.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(n,u,g)}touchend(n,u,g){this._tapTime?this._swipePoint&&0===g.length&&this.reset():this._tap.touchend(n,u,g)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pl{constructor(n,u,g){this._el=n,this._mousePan=u,this._touchPan=g}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Wo{constructor(n,u,g){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=u,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ml{constructor(n,u,g,b){this._el=n,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qo=y=>y.zoom||y.drag||y.pitch||y.rotate;class go extends m.Event{}function Bo(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class xc{constructor(n,u){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $r(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),m.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,C,A]of this._listeners)pe.addEventListener(b,C,b===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[n,u,g]of this._listeners)pe.removeEventListener(n,u,n===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(n){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new Pt(u,n));const b=u.boxZoom=new Zn(u,n);this._add("boxZoom",b);const C=new _i,A=new ca;u.doubleClickZoom=new bc(A,C),this._add("tapZoom",C),this._add("clickZoom",A);const B=new Nc;this._add("tapDragZoom",B);const V=u.touchPitch=new Ln(u);this._add("touchPitch",V);const Q=new Eo(n),ae=new Do(n);u.dragRotate=new Wo(n,Q,ae),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);const ce=new Ai(n),ye=new Br(n,u);u.dragPan=new Pl(g,ce,ye),this._add("mousePan",ce),this._add("touchPan",ye,["touchZoom","touchRotate"]);const Be=new vs,Ue=new Rs;u.touchZoomRotate=new ml(g,Ue,Be,B),this._add("touchRotate",Be,["touchPan","touchZoom"]),this._add("touchZoom",Ue,["touchPan","touchRotate"]);const Oe=u.scrollZoom=new vc(u,this);this._add("scrollZoom",Oe,["mousePan"]);const ht=u.keyboard=new hu;this._add("keyboard",ht),this._add("blockableMapEvent",new qt(u));for(const mt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[mt]&&u[mt].enable(n[mt])}_add(n,u,g){this._handlers.push({handlerName:n,handler:u,allowed:g}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(qo(this._eventsInProgress))||this.isZooming()}_blockedByActive(n,u,g){for(const b in n)if(b!==g&&(!u||u.indexOf(b)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const u=[];for(const g of n)this._el.contains(g.target)&&u.push(g);return u}handleEvent(n,u){if("blur"===n.type)return void this.stop(!0);this._updatingCamera=!0;const g="renderFrame"===n.type?void 0:n,b={needsRenderFrame:!1},C={},A={},B=n.touches,V=B?this._getMapTouches(B):void 0,Q=V?pe.touchPos(this._el,V):pe.mousePos(this._el,n);for(const{handlerName:ye,handler:Be,allowed:Ue}of this._handlers){if(!Be.isEnabled())continue;let Oe;this._blockedByActive(A,Ue,ye)?Be.reset():Be[u||n.type]&&(Oe=Be[u||n.type](n,Q,V),this.mergeHandlerResult(b,C,Oe,ye,g),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||Be.isActive())&&(A[ye]=Be)}const ae={};for(const ye in this._previousActiveHandlers)A[ye]||(ae[ye]=g);this._previousActiveHandlers=A,(Object.keys(ae).length||Bo(b))&&(this._changes.push([b,C,ae]),this._triggerRenderFrame()),(Object.keys(A).length||Bo(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=b;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))}mergeHandlerResult(n,u,g,b,C){if(!g)return;m.extend(n,g);const A={handlerName:b,originalEvent:g.originalEvent||C};void 0!==g.zoomDelta&&(u.zoom=A),void 0!==g.panDelta&&(u.drag=A),void 0!==g.pitchDelta&&(u.pitch=A),void 0!==g.bearingDelta&&(u.rotate=A)}_applyChanges(){const n={},u={},g={};for(const[b,C,A]of this._changes)b.panDelta&&(n.panDelta=(n.panDelta||new m.pointGeometry(0,0))._add(b.panDelta)),b.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+b.pitchDelta),void 0!==b.around&&(n.around=b.around),void 0!==b.pinchAround&&(n.pinchAround=b.pinchAround),b.noInertia&&(n.noInertia=b.noInertia),m.extend(u,C),m.extend(g,A);this._updateMapTransform(n,u,g),this._changes=[]}_updateMapTransform(n,u,g){const b=this._map,C=b.transform,A=b.terrain;if(!(Bo(n)||A&&this._drag))return this._fireEvents(u,g,!0);let{panDelta:B,zoomDelta:V,bearingDelta:Q,pitchDelta:ae,around:ce,pinchAround:ye}=n;void 0!==ye&&(ce=ye),b._stop(!0),ce=ce||b.transform.centerPoint;const Be=C.pointLocation(B?ce.sub(B):ce);Q&&(C.bearing+=Q),ae&&(C.pitch+=ae),V&&(C.zoom+=V),A?u.drag&&!this._drag?(this._drag={center:C.centerPoint,lngLat:C.pointLocation(ce),point:ce,handlerName:u.drag.handlerName},C.freezeElevation=!0):this._drag&&g[this._drag.handlerName]?(C.freezeElevation=!1,C.recalculateZoom(b.terrain),this._drag=null):u.drag&&this._drag&&(C.center=C.pointLocation(C.centerPoint.sub(B))):C.setLocationAtPoint(Be,ce),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,g,!0)}_fireEvents(n,u,g){const b=qo(this._eventsInProgress),C=qo(n),A={};for(const ae in n){const{originalEvent:ce}=n[ae];this._eventsInProgress[ae]||(A[`${ae}start`]=ce),this._eventsInProgress[ae]=n[ae]}!b&&C&&this._fireEvent("movestart",C.originalEvent);for(const ae in A)this._fireEvent(ae,A[ae]);C&&this._fireEvent("move",C.originalEvent);for(const ae in n){const{originalEvent:ce}=n[ae];this._fireEvent(ae,ce)}const B={};let V;for(const ae in this._eventsInProgress){const{handlerName:ce,originalEvent:ye}=this._eventsInProgress[ae];this._handlersById[ce].isActive()||(delete this._eventsInProgress[ae],V=u[ce]||ye,B[`${ae}end`]=V)}for(const ae in B)this._fireEvent(ae,B[ae]);const Q=qo(this._eventsInProgress);if(g&&(b||C)&&!Q){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ce=ye=>0!==ye&&-this._bearingSnap<ye&&ye<this._bearingSnap;ae?(ce(ae.bearing||this._map.getBearing())&&(ae.bearing=0),ae.freezeElevation=!0,this._map.easeTo(ae,{originalEvent:V})):(this._map.fire(new m.Event("moveend",{originalEvent:V})),ce(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new m.Event(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new go("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ol={extend:(y,...n)=>m.extend(y,...n),run(y){y()},logToElement(y,n=!1,u="log"){const g=window.document.getElementById(u);g&&(n&&(g.innerHTML=""),g.innerHTML+=`<br>${y}`)}};class Ql extends m.Evented{constructor(n,u){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=u.bearingSnap,m.bindAll(["_renderFrameCallback"],this)}getCenter(){return new m.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}panBy(n,u,g){return n=m.pointGeometry.convert(n).mult(-1),this.panTo(this.transform.center,m.extend({offset:n},u),g)}panTo(n,u,g){return this.easeTo(m.extend({center:n},u),g)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,g){return this.easeTo(m.extend({zoom:n},u),g)}zoomIn(n,u){return this.zoomTo(this.getZoom()+1,n,u),this}zoomOut(n,u){return this.zoomTo(this.getZoom()-1,n,u),this}getBearing(){return this.transform.bearing}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,g){return this.easeTo(m.extend({bearing:n},u),g)}resetNorth(n,u){return this.rotateTo(0,m.extend({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(m.extend({bearing:0,pitch:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}cameraForBounds(n,u){n=m.LngLatBounds.convert(n);const g=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),g,u)}_cameraForBoxAndBearing(n,u,g,b){const C={top:0,bottom:0,right:0,left:0};if("number"==typeof(b=m.extend({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding){const Ht=b.padding;b.padding={top:Ht,bottom:Ht,right:Ht,left:Ht}}b.padding=m.extend(C,b.padding);const A=this.transform,B=A.padding,V=A.project(m.LngLat.convert(n)),Q=A.project(m.LngLat.convert(u)),ae=V.rotate(-g*Math.PI/180),ce=Q.rotate(-g*Math.PI/180),ye=new m.pointGeometry(Math.max(ae.x,ce.x),Math.max(ae.y,ce.y)),Be=new m.pointGeometry(Math.min(ae.x,ce.x),Math.min(ae.y,ce.y)),Ue=ye.sub(Be),Oe=(A.width-(B.left+B.right+b.padding.left+b.padding.right))/Ue.x,ht=(A.height-(B.top+B.bottom+b.padding.top+b.padding.bottom))/Ue.y;if(ht<0||Oe<0)return void m.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(A.scaleZoom(A.scale*Math.min(Oe,ht)),b.maxZoom),xt=m.pointGeometry.convert(b.offset),it=new m.pointGeometry((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(g*Math.PI/180),kt=xt.add(it).mult(A.scale/A.zoomScale(mt));return{center:A.unproject(V.add(Q).div(2).sub(kt)),zoom:mt,bearing:g}}fitBounds(n,u,g){return this._fitInternal(this.cameraForBounds(n,u),u,g)}fitScreenCoordinates(n,u,g,b,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(m.pointGeometry.convert(n)),this.transform.pointLocation(m.pointGeometry.convert(u)),g,b),b,C)}_fitInternal(n,u,g){return n?(delete(u=m.extend(n,u)).padding,u.linear?this.easeTo(u,g):this.flyTo(u,g)):this}jumpTo(n,u){this.stop();const g=this.transform;let b=!1,C=!1,A=!1;return"zoom"in n&&g.zoom!==+n.zoom&&(b=!0,g.zoom=+n.zoom),void 0!==n.center&&(g.center=m.LngLat.convert(n.center)),"bearing"in n&&g.bearing!==+n.bearing&&(C=!0,g.bearing=+n.bearing),"pitch"in n&&g.pitch!==+n.pitch&&(A=!0,g.pitch=+n.pitch),null==n.padding||g.isPaddingEqual(n.padding)||(g.padding=n.padding),this.fire(new m.Event("movestart",u)).fire(new m.Event("move",u)),b&&this.fire(new m.Event("zoomstart",u)).fire(new m.Event("zoom",u)).fire(new m.Event("zoomend",u)),C&&this.fire(new m.Event("rotatestart",u)).fire(new m.Event("rotate",u)).fire(new m.Event("rotateend",u)),A&&this.fire(new m.Event("pitchstart",u)).fire(new m.Event("pitch",u)).fire(new m.Event("pitchend",u)),this.fire(new m.Event("moveend",u))}calculateCameraOptionsFromTo(n,u,g,b=0){const C=m.MercatorCoordinate.fromLngLat(n,u),A=m.MercatorCoordinate.fromLngLat(g,b),B=A.x-C.x,V=A.y-C.y,Q=A.z-C.z,ae=Math.hypot(B,V,Q);if(0===ae)throw new Error("Can't calculate camera options with same From and To");const ce=Math.hypot(B,V),ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ae/this.transform.tileSize),Be=180*Math.atan2(B,-V)/Math.PI;let Ue=180*Math.acos(ce/ae)/Math.PI;return Ue=Q<0?90-Ue:90+Ue,{center:A.toLngLat(),zoom:ye,pitch:Ue,bearing:Be}}easeTo(n,u){this._stop(!1,n.easeId),(!1===(n=m.extend({offset:[0,0],duration:500,easing:m.ease},n)).animate||!n.essential&&m.exported.prefersReducedMotion)&&(n.duration=0);const g=this.transform,b=this.getZoom(),C=this.getBearing(),A=this.getPitch(),B=this.getPadding(),V="zoom"in n?+n.zoom:b,Q="bearing"in n?this._normalizeBearing(n.bearing,C):C,ae="pitch"in n?+n.pitch:A,ce="padding"in n?n.padding:g.padding,ye=m.pointGeometry.convert(n.offset);let Be=g.centerPoint.add(ye);const Ue=g.pointLocation(Be),Oe=m.LngLat.convert(n.center||Ue);this._normalizeCenter(Oe);const ht=g.project(Ue),mt=g.project(Oe).sub(ht),xt=g.zoomScale(V-b);let it,kt;n.around&&(it=m.LngLat.convert(n.around),kt=g.locationPoint(it));const Ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||V!==b,this._rotating=this._rotating||C!==Q,this._pitching=this._pitching||ae!==A,this._padding=!g.isPaddingEqual(ce),this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,Ht),this.terrain&&this._prepareElevation(Oe),this._ease(Ft=>{if(this._zooming&&(g.zoom=m.number(b,V,Ft)),this._rotating&&(g.bearing=m.number(C,Q,Ft)),this._pitching&&(g.pitch=m.number(A,ae,Ft)),this._padding&&(g.interpolatePadding(B,ce,Ft),Be=g.centerPoint.add(ye)),this.terrain&&!n.freezeElevation&&this._updateElevation(Ft),it)g.setLocationAtPoint(it,kt);else{const Zt=g.zoomScale(g.zoom-b),Qt=V>b?Math.min(2,xt):Math.max(.5,xt),sn=Math.pow(Qt,1-Ft),an=g.unproject(ht.add(mt.mult(Ft*sn)).mult(Zt));g.setLocationAtPoint(g.renderWorldCopies?an.wrap():an,Be)}this._fireMoveEvents(u)},Ft=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ft)},n),this}_prepareEase(n,u,g={}){this._moving=!0,u||g.moving||this.fire(new m.Event("movestart",n)),this._zooming&&!g.zooming&&this.fire(new m.Event("zoomstart",n)),this._rotating&&!g.rotating&&this.fire(new m.Event("rotatestart",n)),this._pitching&&!g.pitching&&this.fire(new m.Event("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(n,this.terrain),this.transform.freezeElevation=!0}_updateElevation(n){const u=this.transform.getElevation(this._elevationCenter,this.terrain);if(n<1&&u!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(g-(u-(g*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.elevation=m.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_fireMoveEvents(n){this.fire(new m.Event("move",n)),this._zooming&&this.fire(new m.Event("zoom",n)),this._rotating&&this.fire(new m.Event("rotate",n)),this._pitching&&this.fire(new m.Event("pitch",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const g=this._zooming,b=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new m.Event("zoomend",n)),b&&this.fire(new m.Event("rotateend",n)),C&&this.fire(new m.Event("pitchend",n)),this.fire(new m.Event("moveend",n))}flyTo(n,u){if(!n.essential&&m.exported.prefersReducedMotion){const q=m.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(q,u)}this.stop(),n=m.extend({offset:[0,0],speed:1.2,curve:1.42,easing:m.ease},n);const g=this.transform,b=this.getZoom(),C=this.getBearing(),A=this.getPitch(),B=this.getPadding(),V="zoom"in n?m.clamp(+n.zoom,g.minZoom,g.maxZoom):b,Q="bearing"in n?this._normalizeBearing(n.bearing,C):C,ae="pitch"in n?+n.pitch:A,ce="padding"in n?n.padding:g.padding,ye=g.zoomScale(V-b),Be=m.pointGeometry.convert(n.offset);let Ue=g.centerPoint.add(Be);const Oe=g.pointLocation(Ue),ht=m.LngLat.convert(n.center||Oe);this._normalizeCenter(ht);const mt=g.project(Oe),xt=g.project(ht).sub(mt);let it=n.curve;const kt=Math.max(g.width,g.height),Ht=kt/ye,Ft=xt.mag();if("minZoom"in n){const q=m.clamp(Math.min(n.minZoom,b,V),g.minZoom,g.maxZoom),de=kt/g.zoomScale(q-b);it=Math.sqrt(de/Ft*2)}const Zt=it*it;function Qt(q){const de=(Ht*Ht-kt*kt+(q?-1:1)*Zt*Zt*Ft*Ft)/(2*(q?Ht:kt)*Zt*Ft);return Math.log(Math.sqrt(de*de+1)-de)}function sn(q){return(Math.exp(q)-Math.exp(-q))/2}function an(q){return(Math.exp(q)+Math.exp(-q))/2}const I=Qt(0);let P=function(q){return an(I)/an(I+it*q)},S=function(q){return kt*((an(I)*(sn(de=I+it*q)/an(de))-sn(I))/Zt)/Ft;var de},z=(Qt(1)-I)/it;if(Math.abs(Ft)<1e-6||!isFinite(z)){if(Math.abs(kt-Ht)<1e-6)return this.easeTo(n,u);const q=Ht<kt?-1:1;z=Math.abs(Math.log(Ht/kt))/it,S=function(){return 0},P=function(de){return Math.exp(q*it*de)}}return n.duration="duration"in n?+n.duration:1e3*z/("screenSpeed"in n?+n.screenSpeed/it:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=C!==Q,this._pitching=ae!==A,this._padding=!g.isPaddingEqual(ce),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ht),this._ease(q=>{const de=q*z,Ie=1/P(de);g.zoom=1===q?V:b+g.scaleZoom(Ie),this._rotating&&(g.bearing=m.number(C,Q,q)),this._pitching&&(g.pitch=m.number(A,ae,q)),this._padding&&(g.interpolatePadding(B,ce,q),Ue=g.centerPoint.add(Be)),this.terrain&&!n.freezeElevation&&this._updateElevation(q);const je=1===q?ht:g.unproject(mt.add(xt.mult(S(de))).mult(Ie));g.setLocationAtPoint(g.renderWorldCopies?je.wrap():je,Ue),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,u)}if(!n){const g=this.handlers;g&&g.stop(!1)}return this}_ease(n,u,g){!1===g.animate||0===g.duration?(n(1),u()):(this._easeStart=m.exported.now(),this._easeOptions=g,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((m.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,u){n=m.wrap(n,-180,180);const g=Math.abs(n-u);return Math.abs(n-360-u)<g&&(n-=360),Math.abs(n+360-u)<g&&(n+=360),n}_normalizeCenter(n){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const g=n.lng-u.center.lng;n.lng+=g>180?-360:g<-180?360:0}}class La{constructor(n={}){this.options=n,m.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=pe.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=pe.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=pe.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){pe.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const g=this._map._getUIString(`AttributionControl.${u}`);n.title=g,n.setAttribute("aria-label",g)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||"metadata"!==n.sourceDataType&&"visibility"!==n.sourceDataType&&"style"!==n.dataType&&"terrain"!==n.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(b=>"string"!=typeof b?"":b)):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const u=this._map.style.sourceCaches;for(const b in u){const C=u[b];if(C.used||C.usedForTerrain){const A=C.getSource();A.attribution&&n.indexOf(A.attribution)<0&&n.push(A.attribution)}}n=n.filter(b=>String(b).trim()),n.sort((b,C)=>b.length-C.length),n=n.filter((b,C)=>{for(let A=C+1;A<n.length;A++)if(n[A].indexOf(b)>=0)return!1;return!0});const g=n.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,n.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class os{constructor(n={}){this.options=n,m.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=pe.create("div","maplibregl-ctrl");const u=pe.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){pe.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const u=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}}}class Ko{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const b of g)if(b.id===n)return void(b.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ir={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var gl=m.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class kl extends m.Evented{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,u){this.sourceCache.update(n,u),this._renderableTilesKeys=[];const g={};for(const b of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))g[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),m.ortho(b.posMatrix,0,m.EXTENT,0,m.EXTENT,0,1),this._tiles[b.key]=new Ei(b,this.tileSize));for(const b in this._tiles)g[b]||delete this._tiles[b]}freeRtt(n){for(const u in this._tiles){const g=this._tiles[u];(!n||g.tileID.equals(n)||g.tileID.isChildOf(n)||n.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const u={};for(const g of this._renderableTilesKeys){const b=this._tiles[g].tileID;if(b.canonical.equals(n.canonical)){const C=n.clone();C.posMatrix=new Float64Array(16),m.ortho(C.posMatrix,0,m.EXTENT,0,m.EXTENT,0,1),u[g]=C}else if(b.canonical.isChildOf(n.canonical)){const C=n.clone();C.posMatrix=new Float64Array(16);const A=b.canonical.z-n.canonical.z,B=b.canonical.x-(b.canonical.x>>A<<A),V=b.canonical.y-(b.canonical.y>>A<<A),Q=m.EXTENT>>A;m.ortho(C.posMatrix,0,Q,0,Q,0,1),m.translate(C.posMatrix,C.posMatrix,[-B*Q,-V*Q,0]),u[g]=C}else if(n.canonical.isChildOf(b.canonical)){const C=n.clone();C.posMatrix=new Float64Array(16);const A=n.canonical.z-b.canonical.z,B=n.canonical.x-(n.canonical.x>>A<<A),V=n.canonical.y-(n.canonical.y>>A<<A),Q=m.EXTENT>>A;m.ortho(C.posMatrix,0,m.EXTENT,0,m.EXTENT,0,1),m.translate(C.posMatrix,C.posMatrix,[B*Q,V*Q,0]),m.scale(C.posMatrix,C.posMatrix,[1/2**A,1/2**A,0]),u[g]=C}}return u}getSourceTile(n,u){const g=this.sourceCache._source;let b=n.overscaledZ-this.deltaZoom;if(b>g.maxzoom&&(b=g.maxzoom),b<g.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(b).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!C||!C.dem)&&u)for(;b>=g.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(n.scaledTo(b--).key);return C}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=n)}}class ua{constructor(n,u,g){this.painter=n,this.sourceCache=new kl(u),this.options=g,this.exaggeration="number"==typeof g.exaggeration?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,g,b=m.EXTENT){if(!(u>=0&&u<b&&g>=0&&g<b))return 0;let C=0;const A=this.getTerrainData(n);if(A.tile&&A.tile.dem){const B=m.transformMat4$1([],[u/b*m.EXTENT,g/b*m.EXTENT],A.u_terrain_matrix),V=[B[0]*A.tile.dem.dim,B[1]*A.tile.dem.dim],Q=[Math.floor(V[0]),Math.floor(V[1])],ae=A.tile.dem.get(Q[0],Q[1]),ce=A.tile.dem.get(Q[0],Q[1]+1),ye=A.tile.dem.get(Q[0]+1,Q[1]),Be=A.tile.dem.get(Q[0]+1,Q[1]+1);C=m.number(m.number(ae,ce,V[0]-Q[0]),m.number(ye,Be,V[0]-Q[0]),V[1]-Q[1])}return C}getElevation(n,u,g,b=m.EXTENT){return this.getDEMElevation(n,u,g,b)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const b=this.painter.context,C=new m.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Te(b,C,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Te(b,new m.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=m.identity([])}const u=this.sourceCache.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const b=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Te(b,u.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),u.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const g=u&&u+u.tileID.key+n.key;if(g&&!this._demMatrixCache[g]){const b=this.sourceCache.sourceCache._source.maxzoom;let C=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=b?C=n.canonical.z-b:m.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=n.canonical.x-(n.canonical.x>>C<<C),B=n.canonical.y-(n.canonical.y>>C<<C),V=m.fromScaling(new Float64Array(16),[1/(m.EXTENT<<C),1/(m.EXTENT<<C),0]);m.translate(V,V,[A*m.EXTENT,B*m.EXTENT,0]),this._demMatrixCache[n.key]={matrix:V,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,g=u.width/devicePixelRatio,b=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Te(u.context,{width:g,height:b,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Te(u.context,{width:g,height:b,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(g,b,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,g,b))),this._fbo.colorAttachment.set("coords"===n?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,A=0;C<this._coordsTextureSize;C++)for(let B=0;B<this._coordsTextureSize;B++,A+=4)u[A+0]=255&B,u[A+1]=255&C,u[A+2]=B>>8<<4|C>>8,u[A+3]=0;const g=new m.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),b=new Te(n,g,n.gl.RGBA,{premultiply:!1});return b.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(n){const u=new Uint8Array(4),g=this.painter.context,b=g.gl;g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,u),g.bindFramebuffer.set(null);const C=u[0]+(u[2]>>4<<8),A=u[1]+((15&u[2])<<8),B=this.coordsIndex[255-u[3]],V=B&&this.sourceCache.getTileByID(B);if(!V)return null;const Q=this._coordsTextureSize,ae=(1<<V.tileID.canonical.z)*Q;return new m.MercatorCoordinate((V.tileID.canonical.x*Q+C)/ae,(V.tileID.canonical.y*Q+A)/ae,this.getElevation(V.tileID,C,A,Q))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,u=new m.Pos3dArray,g=new m.TriangleIndexArray,b=this.meshSize,C=m.EXTENT/b,A=b*b;for(let ce=0;ce<=b;ce++)for(let ye=0;ye<=b;ye++)u.emplaceBack(ye*C,ce*C,0);for(let ce=0;ce<A;ce+=b+1)for(let ye=0;ye<b;ye++)g.emplaceBack(ye+ce,b+ye+ce+1,b+ye+ce+2),g.emplaceBack(ye+ce,b+ye+ce+2,ye+ce+1);const B=u.length,V=B+2*(b+1);for(const ce of[0,1])for(let ye=0;ye<=b;ye++)for(const Be of[0,1])u.emplaceBack(ye*C,ce*m.EXTENT,Be);for(let ce=0;ce<2*b;ce+=2)g.emplaceBack(V+ce,V+ce+1,V+ce+3),g.emplaceBack(V+ce,V+ce+3,V+ce+2),g.emplaceBack(B+ce,B+ce+3,B+ce+1),g.emplaceBack(B+ce,B+ce+2,B+ce+3);const Q=u.length,ae=Q+2*(b+1);for(const ce of[0,1])for(let ye=0;ye<=b;ye++)for(const Be of[0,1])u.emplaceBack(ce*m.EXTENT,ye*C,Be);for(let ce=0;ce<2*b;ce+=2)g.emplaceBack(Q+ce,Q+ce+1,Q+ce+3),g.emplaceBack(Q+ce,Q+ce+3,Q+ce+2),g.emplaceBack(ae+ce,ae+ce+3,ae+ce+1),g.emplaceBack(ae+ce,ae+ce+2,ae+ce+3);return this._mesh={indexBuffer:n.createIndexBuffer(g),vertexBuffer:n.createVertexBuffer(u,gl.members),segments:m.SegmentVector.simpleSegment(0,0,u.length,g.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*m.earthRadius/Math.pow(2,n)/5}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,g={minElevation:null,maxElevation:null};return u&&u.dem&&(g.minElevation=u.dem.min*this.exaggeration,g.maxElevation=u.dem.max*this.exaggeration),g}}class el{constructor(n,u,g){this._context=n,this._size=u,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0),g=new Te(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_COMPONENT16,this._tileSize,this._tileSize)),u.colorAttachment.set(g.texture),{id:n,fbo:u,texture:g,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>n.id!==u),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(n=>!n.inUse)}}const tl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class wc{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new el(n.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(g=>!n._layers[g].isHidden(u)),this._coordsDescendingInv={};for(const g in n.sourceCaches){this._coordsDescendingInv[g]={};const b=n.sourceCaches[g].getVisibleCoordinates();for(const C of b){const A=this.terrain.sourceCache.getTerrainCoords(C);for(const B in A)this._coordsDescendingInv[g][B]||(this._coordsDescendingInv[g][B]=[]),this._coordsDescendingInv[g][B].push(A[B])}}this._coordsDescendingInvStr={};for(const g of n._order){const b=n._layers[g],C=b.source;if(tl[b.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const A in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][A]=this._coordsDescendingInv[C][A].map(B=>B.key).sort().join()}}for(const g of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[b][g.tileID.key];C&&C!==g.rttCoords[b]&&(g.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const u=n.type,g=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(tl[u]&&(this._prevType&&tl[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(n.id),!b))return!0;if(tl[this._prevType]||tl[u]&&b){this._prevType=u;const C=this._stacks.length-1,A=this._stacks[C]||[];for(const B of this._renderableTiles){if(this.pool.isFull()&&(Tl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[C]){const Q=this.pool.getObjectForId(B.rtt[C].id);if(Q.stamp===B.rtt[C].stamp){this.pool.useObject(Q);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),B.rtt[C]={id:V.id,stamp:V.stamp},g.context.bindFramebuffer.set(V.fbo.framebuffer),g.context.clear({color:m.Color.transparent});for(let Q=0;Q<A.length;Q++){const ae=g.style._layers[A[Q]],ce=ae.source?this._coordsDescendingInv[ae.source][B.tileID.key]:[B.tileID];g.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),g._renderTileClippingMasks(ae,ce),g.renderLayer(g,g.style.sourceCaches[ae.source],ae,ce),ae.source&&(B.rttCoords[ae.source]=this._coordsDescendingInvStr[ae.source][B.tileID.key])}}return Tl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),tl[u]}return!1}}const Ls={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Pi={showCompass:!0,showZoom:!0,visualizePitch:!1};class Yn{constructor(n,u,g=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Eo({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,g&&(this.mousePitch=new Do({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),m.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),pe.addEventListener(u,"mousedown",this.mousedown),pe.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),pe.addEventListener(u,"touchmove",this.touchmove),pe.addEventListener(u,"touchend",this.touchend),pe.addEventListener(u,"touchcancel",this.reset)}down(n,u){this.mouseRotate.mousedown(n,u),this.mousePitch&&this.mousePitch.mousedown(n,u),pe.disableDrag()}move(n,u){const g=this.map,b=this.mouseRotate.mousemoveWindow(n,u);if(b&&b.bearingDelta&&g.setBearing(g.getBearing()+b.bearingDelta),this.mousePitch){const C=this.mousePitch.mousemoveWindow(n,u);C&&C.pitchDelta&&g.setPitch(g.getPitch()+C.pitchDelta)}}off(){const n=this.element;pe.removeEventListener(n,"mousedown",this.mousedown),pe.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),pe.removeEventListener(n,"touchmove",this.touchmove),pe.removeEventListener(n,"touchend",this.touchend),pe.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){pe.enableDrag(),pe.removeEventListener(window,"mousemove",this.mousemove),pe.removeEventListener(window,"mouseup",this.mouseup)}mousedown(n){this.down(m.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),pe.mousePos(this.element,n)),pe.addEventListener(window,"mousemove",this.mousemove),pe.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.move(n,pe.mousePos(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){1!==n.targetTouches.length?this.reset():(this._startPos=this._lastPos=pe.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){1!==n.targetTouches.length?this.reset():(this._lastPos=pe.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){0===n.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function zn(y,n,u){if(y=new m.LngLat(y.lng,y.lat),n){const g=new m.LngLat(y.lng-360,y.lat),b=new m.LngLat(y.lng+360,y.lat),C=u.locationPoint(y).distSqr(n);u.locationPoint(g).distSqr(n)<C?y=g:u.locationPoint(b).distSqr(n)<C&&(y=b)}for(;Math.abs(y.lng-u.center.lng)>180;){const g=u.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const Ks={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function da(y,n,u){const g=y.classList;for(const b in Ks)g.remove(`maplibregl-${u}-anchor-${b}`);g.add(`maplibregl-${u}-anchor-${n}`)}class nl extends m.Evented{constructor(n,u){if(super(),(n instanceof HTMLElement||u)&&(n=m.extend({element:n},u)),m.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=m.pointGeometry.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=pe.create("div"),this._element.setAttribute("aria-label","Map marker");const g=pe.createNS("http://www.w3.org/2000/svg","svg"),b=41,C=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${b}px`),g.setAttributeNS(null,"width",`${C}px`),g.setAttributeNS(null,"viewBox",`0 0 ${C} ${b}`);const A=pe.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const B=pe.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill-rule","nonzero");const V=pe.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(3.0, 29.0)"),V.setAttributeNS(null,"fill","#000000");const Q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xt of Q){const it=pe.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",xt.rx),it.setAttributeNS(null,"ry",xt.ry),V.appendChild(it)}const ae=pe.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const ce=pe.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(ce);const ye=pe.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");const Be=pe.createNS("http://www.w3.org/2000/svg","path");Be.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(Be);const Ue=pe.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ue.setAttributeNS(null,"fill","#FFFFFF");const Oe=pe.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ht=pe.createNS("http://www.w3.org/2000/svg","circle");ht.setAttributeNS(null,"fill","#000000"),ht.setAttributeNS(null,"opacity","0.25"),ht.setAttributeNS(null,"cx","5.5"),ht.setAttributeNS(null,"cy","5.5"),ht.setAttributeNS(null,"r","5.4999962");const mt=pe.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#FFFFFF"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962"),Oe.appendChild(ht),Oe.appendChild(mt),B.appendChild(V),B.appendChild(ae),B.appendChild(ye),B.appendChild(Ue),B.appendChild(Oe),g.appendChild(B),g.setAttributeNS(null,"height",b*this._scale+"px"),g.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(g),this._offset=m.pointGeometry.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()}),da(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),pe.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=m.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const u=n.code,g=n.charCode||n.keyCode;"Space"!==u&&"Enter"!==u&&32!==g&&13!==g||this.togglePopup()}_onMapClick(n){const u=n.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=zn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?u=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?g="rotateX(0deg)":"map"===this._pitchAlignment&&(g=`rotateX(${this._map.getPitch()}deg)`),n&&"moveend"!==n.type||(this._pos=this._pos.round()),pe.setTransform(this._element,`${Ks[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${u}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const b=this._map.unproject(this._pos),C=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=b.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(n){return this._offset=m.pointGeometry.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new m.Event("dragstart"))),this.fire(new m.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new m.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&"auto"!==n?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const dr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Fs,hr=0,il=!1;const ec={maxWidth:100,unit:"metric"};function Er(y,n,u){const g=u&&u.maxWidth||100,b=y._container.clientHeight/2,C=y.unproject([0,b]),A=y.unproject([g,b]),B=C.distanceTo(A);if(u&&"imperial"===u.unit){const V=3.2808*B;V>5280?lr(n,g,V/5280,y._getUIString("ScaleControl.Miles")):lr(n,g,V,y._getUIString("ScaleControl.Feet"))}else u&&"nautical"===u.unit?lr(n,g,B/1852,y._getUIString("ScaleControl.NauticalMiles")):B>=1e3?lr(n,g,B/1e3,y._getUIString("ScaleControl.Kilometers")):lr(n,g,B,y._getUIString("ScaleControl.Meters"))}function lr(y,n,u,g){const b=function(C){const A=Math.pow(10,`${Math.floor(C)}`.length-1);let B=C/A;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(V){const Q=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*Q)/Q}(B),A*B}(u);y.style.width=n*(b/u)+"px",y.innerHTML=`${b}&nbsp;${g}`}const Rl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Fa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ss(y){if(y){if("number"==typeof y){const n=Math.round(Math.sqrt(.5*Math.pow(y,2)));return{center:new m.pointGeometry(0,0),top:new m.pointGeometry(0,y),"top-left":new m.pointGeometry(n,n),"top-right":new m.pointGeometry(-n,n),bottom:new m.pointGeometry(0,-y),"bottom-left":new m.pointGeometry(n,-n),"bottom-right":new m.pointGeometry(-n,-n),left:new m.pointGeometry(y,0),right:new m.pointGeometry(-y,0)}}if(y instanceof m.pointGeometry||Array.isArray(y)){const n=m.pointGeometry.convert(y);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:m.pointGeometry.convert(y.center||[0,0]),top:m.pointGeometry.convert(y.top||[0,0]),"top-left":m.pointGeometry.convert(y["top-left"]||[0,0]),"top-right":m.pointGeometry.convert(y["top-right"]||[0,0]),bottom:m.pointGeometry.convert(y.bottom||[0,0]),"bottom-left":m.pointGeometry.convert(y["bottom-left"]||[0,0]),"bottom-right":m.pointGeometry.convert(y["bottom-right"]||[0,0]),left:m.pointGeometry.convert(y.left||[0,0]),right:m.pointGeometry.convert(y.right||[0,0])}}return ss(new m.pointGeometry(0,0))}const ha={supported:qe,setRTLTextPlugin:m.setRTLTextPlugin,getRTLTextPluginStatus:m.getRTLTextPluginStatus,Map:class extends Ql{constructor(y){var n;if(m.PerformanceUtils.mark(m.PerformanceMarkers.create),null!=(y=m.extend({},Ls,y)).minZoom&&null!=y.maxZoom&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=y.minPitch&&null!=y.maxPitch&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=y.minPitch&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=y.maxPitch&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new qs(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Ko,this._controls=[],this._mapId=m.uniqueId(),this._locale=m.extend({},ir,y.locale),this._clickTolerance=y.clickTolerance,this._pixelRatio=null!==(n=y.pixelRatio)&&void 0!==n?n:devicePixelRatio,this._requestManager=new Ge(y.transformRequest),"string"==typeof y.container){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),m.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new xc(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Ja("string"==typeof y.hash&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,m.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new La({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new os,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update("style"===u.dataType),this.fire(new m.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new m.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new m.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(y,n){if(void 0===n&&(n=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new m.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const g=this._controlPositions[n];return-1!==n.indexOf("bottom")?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new m.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(y);return n>-1&&this._controls.splice(n,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,n,u,g){return null==g&&this.terrain&&(g=this.transform.getElevation(u,this.terrain)),super.calculateCameraOptionsFromTo(y,n,u,g)}resize(y){const n=this._containerDimensions(),u=n[0],g=n[1];this._resizeCanvas(u,g,this.getPixelRatio()),this.transform.resize(u,g),this.painter.resize(u,g,this.getPixelRatio());const b=!this._moving;return b&&(this.stop(),this.fire(new m.Event("movestart",y)).fire(new m.Event("move",y))),this.fire(new m.Event("resize",y)),b&&this.fire(new m.Event("moveend",y)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(y){const[n,u]=this._containerDimensions();this._pixelRatio=y,this._resizeCanvas(n,u,y),this.painter.resize(n,u,y)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(m.LngLatBounds.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(m.LngLat.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(m.pointGeometry.convert(y),this.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(y,n,u){if("mouseenter"===y||"mouseover"===y){let g=!1;return{layer:n,listener:u,delegates:{mousemove:C=>{const A=this.getLayer(n)?this.queryRenderedFeatures(C.point,{layers:[n]}):[];A.length?g||(g=!0,u.call(this,new Z(y,this,C.originalEvent,{features:A}))):g=!1},mouseout:()=>{g=!1}}}}if("mouseleave"===y||"mouseout"===y){let g=!1;return{layer:n,listener:u,delegates:{mousemove:A=>{(this.getLayer(n)?this.queryRenderedFeatures(A.point,{layers:[n]}):[]).length?g=!0:g&&(g=!1,u.call(this,new Z(y,this,A.originalEvent)))},mouseout:A=>{g&&(g=!1,u.call(this,new Z(y,this,A.originalEvent)))}}}}{const g=b=>{const C=this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[];C.length&&(b.features=C,u.call(this,b),delete b.features)};return{layer:n,listener:u,delegates:{[y]:g}}}}on(y,n,u){if(void 0===u)return super.on(y,n);const g=this._createDelegatedListener(y,n,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(g);for(const b in g.delegates)this.on(b,g.delegates[b]);return this}once(y,n,u){if(void 0===u)return super.once(y,n);const g=this._createDelegatedListener(y,n,u);for(const b in g.delegates)this.once(b,g.delegates[b]);return this}off(y,n,u){return void 0===u?super.off(y,n):(this._delegatedListeners&&this._delegatedListeners[y]&&(g=>{const b=this._delegatedListeners[y];for(let C=0;C<b.length;C++){const A=b[C];if(A.layer===n&&A.listener===u){for(const B in A.delegates)this.off(B,A.delegates[B]);return b.splice(C,1),this}}})(),this)}queryRenderedFeatures(y,n){if(!this.style)return[];let u;if(void 0!==n||void 0===y||y instanceof m.pointGeometry||Array.isArray(y)||(n=y,y=void 0),n=n||{},(y=y||[[0,0],[this.transform.width,this.transform.height]])instanceof m.pointGeometry||"number"==typeof y[0])u=[m.pointGeometry.convert(y)];else{const g=m.pointGeometry.convert(y[0]),b=m.pointGeometry.convert(y[1]);u=[g,new m.pointGeometry(b.x,g.y),b,new m.pointGeometry(g.x,b.y),g]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(y,n){return this.style.querySourceFeatures(y,n)}setStyle(y,n){return!1!==(n=m.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(y,n))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const n=this._locale[y];if(null==n)throw new Error(`Missing UI string '${y}'`);return n}_updateStyle(y,n){if(n.transformStyle&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,n));const u=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove()),y?(this.style=new Ui(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof y?this.style.loadURL(y,n,u):this.style.loadJSON(y,n,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ui(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,n){if("string"==typeof y){const u=this._requestManager.transformRequest(y,m.ResourceType.Style);m.getJSON(u,(g,b)=>{g?this.fire(new m.ErrorEvent(g)):b&&this._updateDiff(b,n)})}else"object"==typeof y&&this._updateDiff(y,n)}_updateDiff(y,n){try{this.style.setState(y,n)&&this._update(!0)}catch(u){m.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():m.warnOnce("There is no style added to the map.")}addSource(y,n){return this._lazyInitEmptyStyle(),this.style.addSource(y,n),this._update(!0)}isSourceLoaded(y){const n=this.style&&this.style.sourceCaches[y];if(void 0!==n)return n.loaded();this.fire(new m.ErrorEvent(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const n=this.style.sourceCaches[y.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain=new ua(this.painter,n,y),this.painter.renderToTexture=new wc(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=u=>{"style"===u.dataType?this.terrain.sourceCache.freeRtt():"source"===u.dataType&&u.tile&&(u.sourceId===y.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new m.Event("terrain",{terrain:y})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const n in y){const u=y[n]._tiles;for(const g in u){const b=u[g];if("loaded"!==b.state&&"errored"!==b.state)return!1}}return!0}addSourceType(y,n,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,n,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,n,{pixelRatio:u=1,sdf:g=!1,stretchX:b,stretchY:C,content:A}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||m.isImageBitmap(n)){const{width:B,height:V,data:Q}=m.exported.getImageData(n);this.style.addImage(y,{data:new m.RGBAImage({width:B,height:V},Q),pixelRatio:u,stretchX:b,stretchY:C,content:A,sdf:g,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new m.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:V,data:Q}=n,ae=n;this.style.addImage(y,{data:new m.RGBAImage({width:B,height:V},new Uint8Array(Q)),pixelRatio:u,stretchX:b,stretchY:C,content:A,sdf:g,version:0,userImage:ae}),ae.onAdd&&ae.onAdd(this,y)}}}updateImage(y,n){const u=this.style.getImage(y);if(!u)return this.fire(new m.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=n instanceof HTMLImageElement||m.isImageBitmap(n)?m.exported.getImageData(n):n,{width:b,height:C,data:A}=g;if(void 0===b||void 0===C)return this.fire(new m.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==u.data.width||C!==u.data.height)return this.fire(new m.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const B=!(n instanceof HTMLImageElement||m.isImageBitmap(n));u.data.replace(A,B),this.style.updateImage(y,u)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new m.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,n){m.getImage(this._requestManager.transformRequest(y,m.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(y,n){return this._lazyInitEmptyStyle(),this.style.addLayer(y,n),this._update(!0)}moveLayer(y,n){return this.style.moveLayer(y,n),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,n,u){return this.style.setLayerZoomRange(y,n,u),this._update(!0)}setFilter(y,n,u={}){return this.style.setFilter(y,n,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,n,u,g={}){return this.style.setPaintProperty(y,n,u,g),this._update(!0)}getPaintProperty(y,n){return this.style.getPaintProperty(y,n)}setLayoutProperty(y,n,u,g={}){return this.style.setLayoutProperty(y,n,u,g),this._update(!0)}getLayoutProperty(y,n){return this.style.getLayoutProperty(y,n)}setLight(y,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,n){return this.style.setFeatureState(y,n),this._update()}removeFeatureState(y,n){return this.style.removeFeatureState(y,n),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,n=0;return this._container&&(y=this._container.clientWidth||400,n=this._container.clientHeight||300),[y,n]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const n=this._canvasContainer=pe.create("div","maplibregl-canvas-container",y);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=pe.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const g=this._controlContainer=pe.create("div","maplibregl-control-container",y),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{b[C]=pe.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const y=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=pe.create("div","maplibregl-cooperative-gesture-screen",y);let n="Control",u="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(u="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",n="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${u}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",g=>{g.key===n&&(this._metaPress=!0)}),document.addEventListener("keyup",g=>{g.key===n&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",g=>{this._onCooperativeGesture(g,this._metaPress,1)},!1),this._canvasContainer.classList.remove("maplibregl-touch-drag-pan")}_resizeCanvas(y,n,u){this._canvas.width=u*y,this._canvas.height=u*n,this._canvas.style.width=`${y}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const y=m.extend({},qe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",y)||this._canvas.getContext("experimental-webgl",y);n?(this.painter=new Xl(n,this.transform),m.exported$1.testSupport(n)):this.fire(new m.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new m.Event("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.resize(),this._update(),this.fire(new m.Event("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(y,n,u){return!n&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){let n,u=0;const g=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,n),u=m.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let b=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,B=m.exported.now();this.style.zoomHistory.update(A,B);const V=new m.EvaluationParameters(A,{now:B,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=V.crossFadingFactor();1===Q&&Q===this._crossFadingFactor||(b=!0,this._crossFadingFactor=Q),this.style.update(V)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new m.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,m.PerformanceUtils.mark(m.PerformanceMarkers.load),this.fire(new m.Event("load"))),this.style&&(this.style.hasTransitions()||b)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const A=m.exported.now()-u;g.endQueryEXT(g.TIME_ELAPSED_EXT,n),setTimeout(()=>{const B=g.getQueryObjectEXT(n,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(n),this.fire(new m.Event("gpu-timing-frame",{cpuTime:A,gpuTime:B}))},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const B=this.painter.queryGpuTimers(A);this.fire(new m.Event("gpu-timing-layer",{layerTimes:B}))},50)}const C=this._sourcesDirty||this._styleDirty||this._placementDirty;return C||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new m.Event("idle")),!this._loaded||this._fullyLoaded||C||(this._fullyLoaded=!0,m.PerformanceUtils.mark(m.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),pe.remove(this._canvasContainer),pe.remove(this._controlContainer),this._cooperativeGestures&&pe.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map"),m.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new m.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=m.exported.frame(y=>{m.PerformanceUtils.frame(y),this._frame=null,this._render(y)}))}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}_setCacheLimits(y,n){m.setCacheLimits(y,n)}get version(){return"3.0.0-pre.1"}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(y){this.options=m.extend({},Pi,y),this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(m.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),pe.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),pe.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(m.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=pe.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map.getZoom(),n=y===this._map.getMaxZoom(),u=y===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const y=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=y}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){pe.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,n){const u=pe.create("button",y,this._container);return u.type="button",u.addEventListener("click",n),u}_setButtonTitle(y,n){const u=this._map._getUIString(`NavigationControl.${n}`);y.title=u,y.setAttribute("aria-label",u)}},GeolocateControl:class extends m.Evented{constructor(y){super(),this.options=m.extend({},dr,y),m.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(y){var n;return this._map=y,this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),n=this._setupUI,void 0!==Fs?n(Fs):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Fs="denied"!==u.state,n(Fs)}):(Fs=!!window.navigator.geolocation,n(Fs)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),pe.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,hr=0,il=!1}_isOutOfMapMaxBounds(y){const n=this._map.getMaxBounds(),u=y.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new m.Event("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(y),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new m.Event("geolocate",y)),this._finish()}}_updateCamera(y){const n=new m.LngLat(y.coords.longitude,y.coords.latitude),u=y.coords.accuracy,g=this._map.getBearing(),b=m.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(u),b,{geolocateSource:!0})}_updateMarker(y){if(y){const n=new m.LngLat(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map._container.clientHeight/2,n=this._map.unproject([0,y]),u=this._map.unproject([1,y]),g=n.distanceTo(u),b=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(y){if(this._map){if(this.options.trackUserLocation)if(1===y.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===y.code&&il)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new m.Event("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=pe.create("button","maplibregl-ctrl-geolocate",this._container),pe.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===y){m.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=pe.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new nl(this._dotElement),this._circleElement=pe.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n.originalEvent&&"resize"===n.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new m.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return m.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new m.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hr--,il=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new m.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new m.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hr++,hr>1?(y={maximumAge:6e5,timeout:0},il=!0):(y=this.options.positionOptions,il=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:La,LogoControl:os,ScaleControl:class{constructor(y){this.options=m.extend({},ec,y),m.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Er(this._map,this._container,this.options)}onAdd(y){return this._map=y,this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){pe.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(y){this.options.unit=y,Er(this._map,this._container,this.options)}},FullscreenControl:class{constructor(y={}){this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:m.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){pe.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=pe.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);pe.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle()}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(y){this.options=y,m.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(y){return this._map=y,this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=pe.create("button","maplibregl-ctrl-terrain",this._container),pe.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){pe.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends m.Evented{constructor(y){super(),this.options=m.extend(Object.create(Rl),y),m.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new m.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&pe.remove(this._content),this._container&&(pe.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new m.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=m.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const n=document.createDocumentFragment(),u=document.createElement("body");let g;for(u.innerHTML=y;g=u.firstChild,g;)n.appendChild(g);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=pe.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=pe.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(y){this._update(y.point)}_onMouseMove(y){this._update(y.point)}_onDrag(y){this._update(y.point)}_update(y){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=pe.create("div","maplibregl-popup",this._map.getContainer()),this._tip=pe.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(C=>this._container.classList.add(C)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zn(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!y))return;const n=this._pos=this._trackPointer&&y?y:this._map.project(this._lngLat);let u=this.options.anchor;const g=ss(this.options.offset);if(!u){const C=this._container.offsetWidth,A=this._container.offsetHeight;let B;B=n.y+g.bottom.y<A?["top"]:n.y>this._map.transform.height-A?["bottom"]:[],n.x<C/2?B.push("left"):n.x>this._map.transform.width-C/2&&B.push("right"),u=0===B.length?"bottom":B.join("-")}const b=n.add(g[u]).round();pe.setTransform(this._container,`${Ks[u]} translate(${b.x}px,${b.y}px)`),da(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Fa);y&&y.focus()}_onClose(){this.remove()}},Marker:nl,Style:Ui,LngLat:m.LngLat,LngLatBounds:m.LngLatBounds,Point:m.pointGeometry,MercatorCoordinate:m.MercatorCoordinate,Evented:m.Evented,AJAXError:m.AJAXError,config:m.config,CanvasSource:Gn,GeoJSONSource:It,ImageSource:pn,RasterDEMTileSource:Xe,RasterTileSource:tn,VectorTileSource:Ut,VideoSource:un,prewarm:function(){oi().acquire(fn)},clearPrewarmedResources:function(){const y=Jn;y&&(y.isPreloaded()&&1===y.numActive()?(y.release(fn),Jn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"3.0.0-pre.1"},get workerCount(){return mn.workerCount},set workerCount(y){mn.workerCount=y},get maxParallelImageRequests(){return m.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){m.config.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){m.clearTileCache(y)},workerUrl:"",addProtocol(y,n){m.config.REGISTERED_PROTOCOLS[y]=n},removeProtocol(y){delete m.config.REGISTERED_PROTOCOLS[y]}};return Ol.extend(ha,{isSafari:m.isSafari,getPerformanceMetrics:m.PerformanceUtils.getPerformanceMetrics}),ha}),D}()},7340:(Cn,gt,U)=>{"use strict";U.d(gt,{F4:()=>Ge,IO:()=>We,LC:()=>l,SB:()=>pe,X$:()=>m,ZE:()=>_n,ZN:()=>Et,_j:()=>D,eR:()=>rt,jt:()=>qe,k1:()=>hn,l3:()=>G,oB:()=>Re,pV:()=>ut,vP:()=>Ye});class D{}class l{}const G="*";function m(At,Pe){return{type:7,name:At,definitions:Pe,options:{}}}function qe(At,Pe=null){return{type:4,styles:Pe,timings:At}}function Ye(At,Pe=null){return{type:2,steps:At,options:Pe}}function Re(At){return{type:6,styles:At,offset:null}}function pe(At,Pe,Ze){return{type:0,name:At,styles:Pe,options:Ze}}function Ge(At){return{type:5,steps:At}}function rt(At,Pe,Ze=null){return{type:1,expr:At,animation:Pe,options:Ze}}function ut(At=null){return{type:9,options:At}}function We(At,Pe,Ze=null){return{type:11,selector:At,animation:Pe,options:Ze}}function wt(At){Promise.resolve().then(At)}class Et{constructor(Pe=0,Ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Pe+Ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Pe=>Pe()),this._onDoneFns=[])}onStart(Pe){this._originalOnStartFns.push(Pe),this._onStartFns.push(Pe)}onDone(Pe){this._originalOnDoneFns.push(Pe),this._onDoneFns.push(Pe)}onDestroy(Pe){this._onDestroyFns.push(Pe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Pe=>Pe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Pe=>Pe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Pe){this._position=this.totalTime?Pe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Pe){const Ze="start"==Pe?this._onStartFns:this._onDoneFns;Ze.forEach(Yt=>Yt()),Ze.length=0}}class _n{constructor(Pe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Pe;let Ze=0,Yt=0,Ot=0;const Ut=this.players.length;0==Ut?wt(()=>this._onFinish()):this.players.forEach(tn=>{tn.onDone(()=>{++Ze==Ut&&this._onFinish()}),tn.onDestroy(()=>{++Yt==Ut&&this._onDestroy()}),tn.onStart(()=>{++Ot==Ut&&this._onStart()})}),this.totalTime=this.players.reduce((tn,pt)=>Math.max(tn,pt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Pe=>Pe()),this._onDoneFns=[])}init(){this.players.forEach(Pe=>Pe.init())}onStart(Pe){this._onStartFns.push(Pe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Pe=>Pe()),this._onStartFns=[])}onDone(Pe){this._onDoneFns.push(Pe)}onDestroy(Pe){this._onDestroyFns.push(Pe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Pe=>Pe.play())}pause(){this.players.forEach(Pe=>Pe.pause())}restart(){this.players.forEach(Pe=>Pe.restart())}finish(){this._onFinish(),this.players.forEach(Pe=>Pe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Pe=>Pe.destroy()),this._onDestroyFns.forEach(Pe=>Pe()),this._onDestroyFns=[])}reset(){this.players.forEach(Pe=>Pe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Pe){const Ze=Pe*this.totalTime;this.players.forEach(Yt=>{const Ot=Yt.totalTime?Math.min(1,Ze/Yt.totalTime):1;Yt.setPosition(Ot)})}getPosition(){const Pe=this.players.reduce((Ze,Yt)=>null===Ze||Yt.totalTime>Ze.totalTime?Yt:Ze,null);return null!=Pe?Pe.getPosition():0}beforeDestroy(){this.players.forEach(Pe=>{Pe.beforeDestroy&&Pe.beforeDestroy()})}triggerCallback(Pe){const Ze="start"==Pe?this._onStartFns:this._onDoneFns;Ze.forEach(Yt=>Yt()),Ze.length=0}}const hn="!"},2687:(Cn,gt,U)=>{"use strict";U.d(gt,{$s:()=>pt,Em:()=>un,Kd:()=>Ae,X6:()=>ct,ic:()=>di,qV:()=>oi,qm:()=>De,rt:()=>Fe,s1:()=>pn,tE:()=>He,yG:()=>Y});var D=U(6895),l=U(4650),G=U(3353),m=U(7579),qe=U(727),ke=U(1135),Ye=U(9646),Re=U(9521),pe=U(8505),Ge=U(8372),rt=U(9300),Te=U(4004),ut=U(5698),lt=U(5684),We=U(1884),Dt=U(2722),wt=U(1281),Et=U(9643),_n=U(2289);function Ze(Se,Ne){return(Se.getAttribute(Ne)||"").match(/\S+/g)||[]}const Ot="cdk-describedby-message",Ut="cdk-describedby-host";let tn=0,pt=(()=>{class Se{constructor(we,$e){this._platform=$e,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+tn++,this._document=we,this._id=(0,l.f3M)(l.AFp)+"-"+tn++}describe(we,$e,at){if(!this._canBeDescribed(we,$e))return;const on=Xe($e,at);"string"!=typeof $e?(It($e,this._id),this._messageRegistry.set(on,{messageElement:$e,referenceCount:0})):this._messageRegistry.has(on)||this._createMessageElement($e,at),this._isElementDescribedByMessage(we,on)||this._addMessageReference(we,on)}removeDescription(we,$e,at){if(!$e||!this._isElementNode(we))return;const on=Xe($e,at);if(this._isElementDescribedByMessage(we,on)&&this._removeMessageReference(we,on),"string"==typeof $e){const An=this._messageRegistry.get(on);An&&0===An.referenceCount&&this._deleteMessageElement(on)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const we=this._document.querySelectorAll(`[${Ut}="${this._id}"]`);for(let $e=0;$e<we.length;$e++)this._removeCdkDescribedByReferenceIds(we[$e]),we[$e].removeAttribute(Ut);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(we,$e){const at=this._document.createElement("div");It(at,this._id),at.textContent=we,$e&&at.setAttribute("role",$e),this._createMessagesContainer(),this._messagesContainer.appendChild(at),this._messageRegistry.set(Xe(we,$e),{messageElement:at,referenceCount:0})}_deleteMessageElement(we){this._messageRegistry.get(we)?.messageElement?.remove(),this._messageRegistry.delete(we)}_createMessagesContainer(){if(this._messagesContainer)return;const we="cdk-describedby-message-container",$e=this._document.querySelectorAll(`.${we}[platform="server"]`);for(let on=0;on<$e.length;on++)$e[on].remove();const at=this._document.createElement("div");at.style.visibility="hidden",at.classList.add(we),at.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&at.setAttribute("platform","server"),this._document.body.appendChild(at),this._messagesContainer=at}_removeCdkDescribedByReferenceIds(we){const $e=Ze(we,"aria-describedby").filter(at=>0!=at.indexOf(Ot));we.setAttribute("aria-describedby",$e.join(" "))}_addMessageReference(we,$e){const at=this._messageRegistry.get($e);(function At(Se,Ne,we){const $e=Ze(Se,Ne);$e.some(at=>at.trim()==we.trim())||($e.push(we.trim()),Se.setAttribute(Ne,$e.join(" ")))})(we,"aria-describedby",at.messageElement.id),we.setAttribute(Ut,this._id),at.referenceCount++}_removeMessageReference(we,$e){const at=this._messageRegistry.get($e);at.referenceCount--,function Pe(Se,Ne,we){const at=Ze(Se,Ne).filter(on=>on!=we.trim());at.length?Se.setAttribute(Ne,at.join(" ")):Se.removeAttribute(Ne)}(we,"aria-describedby",at.messageElement.id),we.removeAttribute(Ut)}_isElementDescribedByMessage(we,$e){const at=Ze(we,"aria-describedby"),on=this._messageRegistry.get($e),An=on&&on.messageElement.id;return!!An&&-1!=at.indexOf(An)}_canBeDescribed(we,$e){if(!this._isElementNode(we))return!1;if($e&&"object"==typeof $e)return!0;const at=null==$e?"":`${$e}`.trim(),on=we.getAttribute("aria-label");return!(!at||on&&on.trim()===at)}_isElementNode(we){return we.nodeType===this._document.ELEMENT_NODE}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(D.K0),l.LFG(G.t4))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function Xe(Se,Ne){return"string"==typeof Se?`${Ne||""}/${Se}`:Se}function It(Se,Ne){Se.id||(Se.id=`${Ot}-${Ne}-${tn++}`)}class St{constructor(Ne){this._items=Ne,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new m.x,this._typeaheadSubscription=qe.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=we=>we.disabled,this._pressedLetters=[],this.tabOut=new m.x,this.change=new m.x,Ne instanceof l.n_E&&Ne.changes.subscribe(we=>{if(this._activeItem){const at=we.toArray().indexOf(this._activeItem);at>-1&&at!==this._activeItemIndex&&(this._activeItemIndex=at)}})}skipPredicate(Ne){return this._skipPredicateFn=Ne,this}withWrap(Ne=!0){return this._wrap=Ne,this}withVerticalOrientation(Ne=!0){return this._vertical=Ne,this}withHorizontalOrientation(Ne){return this._horizontal=Ne,this}withAllowedModifierKeys(Ne){return this._allowedModifierKeys=Ne,this}withTypeAhead(Ne=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,pe.b)(we=>this._pressedLetters.push(we)),(0,Ge.b)(Ne),(0,rt.h)(()=>this._pressedLetters.length>0),(0,Te.U)(()=>this._pressedLetters.join(""))).subscribe(we=>{const $e=this._getItemsArray();for(let at=1;at<$e.length+1;at++){const on=(this._activeItemIndex+at)%$e.length,An=$e[on];if(!this._skipPredicateFn(An)&&0===An.getLabel().toUpperCase().trim().indexOf(we)){this.setActiveItem(on);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Ne=!0){return this._homeAndEnd=Ne,this}setActiveItem(Ne){const we=this._activeItem;this.updateActiveItem(Ne),this._activeItem!==we&&this.change.next(this._activeItemIndex)}onKeydown(Ne){const we=Ne.keyCode,at=["altKey","ctrlKey","metaKey","shiftKey"].every(on=>!Ne[on]||this._allowedModifierKeys.indexOf(on)>-1);switch(we){case Re.Mf:return void this.tabOut.next();case Re.JH:if(this._vertical&&at){this.setNextItemActive();break}return;case Re.LH:if(this._vertical&&at){this.setPreviousItemActive();break}return;case Re.SV:if(this._horizontal&&at){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Re.oh:if(this._horizontal&&at){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Re.Sd:if(this._homeAndEnd&&at){this.setFirstItemActive();break}return;case Re.uR:if(this._homeAndEnd&&at){this.setLastItemActive();break}return;default:return void((at||(0,Re.Vb)(Ne,"shiftKey"))&&(Ne.key&&1===Ne.key.length?this._letterKeyStream.next(Ne.key.toLocaleUpperCase()):(we>=Re.A&&we<=Re.Z||we>=Re.xE&&we<=Re.aO)&&this._letterKeyStream.next(String.fromCharCode(we))))}this._pressedLetters=[],Ne.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Ne){const we=this._getItemsArray(),$e="number"==typeof Ne?Ne:we.indexOf(Ne);this._activeItem=we[$e]??null,this._activeItemIndex=$e}_setActiveItemByDelta(Ne){this._wrap?this._setActiveInWrapMode(Ne):this._setActiveInDefaultMode(Ne)}_setActiveInWrapMode(Ne){const we=this._getItemsArray();for(let $e=1;$e<=we.length;$e++){const at=(this._activeItemIndex+Ne*$e+we.length)%we.length;if(!this._skipPredicateFn(we[at]))return void this.setActiveItem(at)}}_setActiveInDefaultMode(Ne){this._setActiveItemByIndex(this._activeItemIndex+Ne,Ne)}_setActiveItemByIndex(Ne,we){const $e=this._getItemsArray();if($e[Ne]){for(;this._skipPredicateFn($e[Ne]);)if(!$e[Ne+=we])return;this.setActiveItem(Ne)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class pn extends St{setActiveItem(Ne){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Ne),this.activeItem&&this.activeItem.setActiveStyles()}}class un extends St{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Ne){return this._origin=Ne,this}setActiveItem(Ne){super.setActiveItem(Ne),this.activeItem&&this.activeItem.focus(this._origin)}}let di=(()=>{class Se{constructor(we){this._platform=we}isDisabled(we){return we.hasAttribute("disabled")}isVisible(we){return function yn(Se){return!!(Se.offsetWidth||Se.offsetHeight||"function"==typeof Se.getClientRects&&Se.getClientRects().length)}(we)&&"visible"===getComputedStyle(we).visibility}isTabbable(we){if(!this._platform.isBrowser)return!1;const $e=function yi(Se){try{return Se.frameElement}catch{return null}}(function On(Se){return Se.ownerDocument&&Se.ownerDocument.defaultView||window}(we));if($e&&(-1===Nt($e)||!this.isVisible($e)))return!1;let at=we.nodeName.toLowerCase(),on=Nt(we);return we.hasAttribute("contenteditable")?-1!==on:!("iframe"===at||"object"===at||this._platform.WEBKIT&&this._platform.IOS&&!function fn(Se){let Ne=Se.nodeName.toLowerCase(),we="input"===Ne&&Se.type;return"text"===we||"password"===we||"select"===Ne||"textarea"===Ne}(we))&&("audio"===at?!!we.hasAttribute("controls")&&-1!==on:"video"===at?-1!==on&&(null!==on||this._platform.FIREFOX||we.hasAttribute("controls")):we.tabIndex>=0)}isFocusable(we,$e){return function mn(Se){return!function Ei(Se){return function bn(Se){return"input"==Se.nodeName.toLowerCase()}(Se)&&"hidden"==Se.type}(Se)&&(function gi(Se){let Ne=Se.nodeName.toLowerCase();return"input"===Ne||"select"===Ne||"button"===Ne||"textarea"===Ne}(Se)||function hi(Se){return function wn(Se){return"a"==Se.nodeName.toLowerCase()}(Se)&&Se.hasAttribute("href")}(Se)||Se.hasAttribute("contenteditable")||_t(Se))}(we)&&!this.isDisabled(we)&&($e?.ignoreVisibility||this.isVisible(we))}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(G.t4))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function _t(Se){if(!Se.hasAttribute("tabindex")||void 0===Se.tabIndex)return!1;let Ne=Se.getAttribute("tabindex");return!(!Ne||isNaN(parseInt(Ne,10)))}function Nt(Se){if(!_t(Se))return null;const Ne=parseInt(Se.getAttribute("tabindex")||"",10);return isNaN(Ne)?-1:Ne}class Jn{constructor(Ne,we,$e,at,on=!1){this._element=Ne,this._checker=we,this._ngZone=$e,this._document=at,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,on||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Ne){this._enabled=Ne,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ne,this._startAnchor),this._toggleAnchorTabIndex(Ne,this._endAnchor))}destroy(){const Ne=this._startAnchor,we=this._endAnchor;Ne&&(Ne.removeEventListener("focus",this.startAnchorListener),Ne.remove()),we&&(we.removeEventListener("focus",this.endAnchorListener),we.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Ne){return new Promise(we=>{this._executeOnStable(()=>we(this.focusInitialElement(Ne)))})}focusFirstTabbableElementWhenReady(Ne){return new Promise(we=>{this._executeOnStable(()=>we(this.focusFirstTabbableElement(Ne)))})}focusLastTabbableElementWhenReady(Ne){return new Promise(we=>{this._executeOnStable(()=>we(this.focusLastTabbableElement(Ne)))})}_getRegionBoundary(Ne){const we=this._element.querySelectorAll(`[cdk-focus-region-${Ne}], [cdkFocusRegion${Ne}], [cdk-focus-${Ne}]`);return"start"==Ne?we.length?we[0]:this._getFirstTabbableElement(this._element):we.length?we[we.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Ne){const we=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(we){if(!this._checker.isFocusable(we)){const $e=this._getFirstTabbableElement(we);return $e?.focus(Ne),!!$e}return we.focus(Ne),!0}return this.focusFirstTabbableElement(Ne)}focusFirstTabbableElement(Ne){const we=this._getRegionBoundary("start");return we&&we.focus(Ne),!!we}focusLastTabbableElement(Ne){const we=this._getRegionBoundary("end");return we&&we.focus(Ne),!!we}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Ne){if(this._checker.isFocusable(Ne)&&this._checker.isTabbable(Ne))return Ne;const we=Ne.children;for(let $e=0;$e<we.length;$e++){const at=we[$e].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(we[$e]):null;if(at)return at}return null}_getLastTabbableElement(Ne){if(this._checker.isFocusable(Ne)&&this._checker.isTabbable(Ne))return Ne;const we=Ne.children;for(let $e=we.length-1;$e>=0;$e--){const at=we[$e].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(we[$e]):null;if(at)return at}return null}_createAnchor(){const Ne=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Ne),Ne.classList.add("cdk-visually-hidden"),Ne.classList.add("cdk-focus-trap-anchor"),Ne.setAttribute("aria-hidden","true"),Ne}_toggleAnchorTabIndex(Ne,we){Ne?we.setAttribute("tabindex","0"):we.removeAttribute("tabindex")}toggleAnchors(Ne){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ne,this._startAnchor),this._toggleAnchorTabIndex(Ne,this._endAnchor))}_executeOnStable(Ne){this._ngZone.isStable?Ne():this._ngZone.onStable.pipe((0,ut.q)(1)).subscribe(Ne)}}let oi=(()=>{class Se{constructor(we,$e,at){this._checker=we,this._ngZone=$e,this._document=at}create(we,$e=!1){return new Jn(we,this._checker,this._ngZone,this._document,$e)}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(di),l.LFG(l.R0b),l.LFG(D.K0))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function ct(Se){return 0===Se.buttons||0===Se.offsetX&&0===Se.offsetY}function Y(Se){const Ne=Se.touches&&Se.touches[0]||Se.changedTouches&&Se.changedTouches[0];return!(!Ne||-1!==Ne.identifier||null!=Ne.radiusX&&1!==Ne.radiusX||null!=Ne.radiusY&&1!==Ne.radiusY)}const te=new l.OlP("cdk-input-modality-detector-options"),Me={ignoreKeys:[Re.zL,Re.jx,Re.b2,Re.MW,Re.JU]},k=(0,G.i$)({passive:!0,capture:!0});let R=(()=>{class Se{constructor(we,$e,at,on){this._platform=we,this._mostRecentTarget=null,this._modality=new ke.X(null),this._lastTouchMs=0,this._onKeydown=An=>{this._options?.ignoreKeys?.some(jn=>jn===An.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,G.sA)(An))},this._onMousedown=An=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ct(An)?"keyboard":"mouse"),this._mostRecentTarget=(0,G.sA)(An))},this._onTouchstart=An=>{Y(An)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,G.sA)(An))},this._options={...Me,...on},this.modalityDetected=this._modality.pipe((0,lt.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,We.x)()),we.isBrowser&&$e.runOutsideAngular(()=>{at.addEventListener("keydown",this._onKeydown,k),at.addEventListener("mousedown",this._onMousedown,k),at.addEventListener("touchstart",this._onTouchstart,k)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,k),document.removeEventListener("mousedown",this._onMousedown,k),document.removeEventListener("touchstart",this._onTouchstart,k))}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(G.t4),l.LFG(l.R0b),l.LFG(D.K0),l.LFG(te,8))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();const H=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function J(){return null}}),le=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Ae=(()=>{class Se{constructor(we,$e,at,on){this._ngZone=$e,this._defaultOptions=on,this._document=at,this._liveElement=we||this._createLiveElement()}announce(we,...$e){const at=this._defaultOptions;let on,An;return 1===$e.length&&"number"==typeof $e[0]?An=$e[0]:[on,An]=$e,this.clear(),clearTimeout(this._previousTimeout),on||(on=at&&at.politeness?at.politeness:"polite"),null==An&&at&&(An=at.duration),this._liveElement.setAttribute("aria-live",on),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(jn=>this._currentResolve=jn)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=we,"number"==typeof An&&(this._previousTimeout=setTimeout(()=>this.clear(),An)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const we="cdk-live-announcer-element",$e=this._document.getElementsByClassName(we),at=this._document.createElement("div");for(let on=0;on<$e.length;on++)$e[on].remove();return at.classList.add(we),at.classList.add("cdk-visually-hidden"),at.setAttribute("aria-atomic","true"),at.setAttribute("aria-live","polite"),this._document.body.appendChild(at),at}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(H,8),l.LFG(l.R0b),l.LFG(D.K0),l.LFG(le,8))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();const Qe=new l.OlP("cdk-focus-monitor-default-options"),ot=(0,G.i$)({passive:!0,capture:!0});let He=(()=>{class Se{constructor(we,$e,at,on,An){this._ngZone=we,this._platform=$e,this._inputModalityDetector=at,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new m.x,this._rootNodeFocusAndBlurListener=jn=>{for(let ni=(0,G.sA)(jn);ni;ni=ni.parentElement)"focus"===jn.type?this._onFocus(jn,ni):this._onBlur(jn,ni)},this._document=on,this._detectionMode=An?.detectionMode||0}monitor(we,$e=!1){const at=(0,wt.fI)(we);if(!this._platform.isBrowser||1!==at.nodeType)return(0,Ye.of)(null);const on=(0,G.kV)(at)||this._getDocument(),An=this._elementInfo.get(at);if(An)return $e&&(An.checkChildren=!0),An.subject;const jn={checkChildren:$e,subject:new m.x,rootNode:on};return this._elementInfo.set(at,jn),this._registerGlobalListeners(jn),jn.subject}stopMonitoring(we){const $e=(0,wt.fI)(we),at=this._elementInfo.get($e);at&&(at.subject.complete(),this._setClasses($e),this._elementInfo.delete($e),this._removeGlobalListeners(at))}focusVia(we,$e,at){const on=(0,wt.fI)(we);on===this._getDocument().activeElement?this._getClosestElementsInfo(on).forEach(([jn,Gi])=>this._originChanged(jn,$e,Gi)):(this._setOrigin($e),"function"==typeof on.focus&&on.focus(at))}ngOnDestroy(){this._elementInfo.forEach((we,$e)=>this.stopMonitoring($e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(we){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(we)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:we&&this._isLastInteractionFromInputLabel(we)?"mouse":"program"}_shouldBeAttributedToTouch(we){return 1===this._detectionMode||!!we?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(we,$e){we.classList.toggle("cdk-focused",!!$e),we.classList.toggle("cdk-touch-focused","touch"===$e),we.classList.toggle("cdk-keyboard-focused","keyboard"===$e),we.classList.toggle("cdk-mouse-focused","mouse"===$e),we.classList.toggle("cdk-program-focused","program"===$e)}_setOrigin(we,$e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=we,this._originFromTouchInteraction="touch"===we&&$e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(we,$e){const at=this._elementInfo.get($e),on=(0,G.sA)(we);!at||!at.checkChildren&&$e!==on||this._originChanged($e,this._getFocusOrigin(on),at)}_onBlur(we,$e){const at=this._elementInfo.get($e);!at||at.checkChildren&&we.relatedTarget instanceof Node&&$e.contains(we.relatedTarget)||(this._setClasses($e),this._emitOrigin(at,null))}_emitOrigin(we,$e){we.subject.observers.length&&this._ngZone.run(()=>we.subject.next($e))}_registerGlobalListeners(we){if(!this._platform.isBrowser)return;const $e=we.rootNode,at=this._rootNodeFocusListenerCount.get($e)||0;at||this._ngZone.runOutsideAngular(()=>{$e.addEventListener("focus",this._rootNodeFocusAndBlurListener,ot),$e.addEventListener("blur",this._rootNodeFocusAndBlurListener,ot)}),this._rootNodeFocusListenerCount.set($e,at+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Dt.R)(this._stopInputModalityDetector)).subscribe(on=>{this._setOrigin(on,!0)}))}_removeGlobalListeners(we){const $e=we.rootNode;if(this._rootNodeFocusListenerCount.has($e)){const at=this._rootNodeFocusListenerCount.get($e);at>1?this._rootNodeFocusListenerCount.set($e,at-1):($e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ot),$e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ot),this._rootNodeFocusListenerCount.delete($e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(we,$e,at){this._setClasses(we,$e),this._emitOrigin(at,$e),this._lastFocusOrigin=$e}_getClosestElementsInfo(we){const $e=[];return this._elementInfo.forEach((at,on)=>{(on===we||at.checkChildren&&on.contains(we))&&$e.push([on,at])}),$e}_isLastInteractionFromInputLabel(we){const{_mostRecentTarget:$e,mostRecentModality:at}=this._inputModalityDetector;if("mouse"!==at||!$e||$e===we||"INPUT"!==we.nodeName&&"TEXTAREA"!==we.nodeName||we.disabled)return!1;const on=we.labels;if(on)for(let An=0;An<on.length;An++)if(on[An].contains($e))return!0;return!1}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(l.R0b),l.LFG(G.t4),l.LFG(R),l.LFG(D.K0,8),l.LFG(Qe,8))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();const $t="cdk-high-contrast-black-on-white",en="cdk-high-contrast-white-on-black",st="cdk-high-contrast-active";let De=(()=>{class Se{constructor(we,$e){this._platform=we,this._document=$e,this._breakpointSubscription=(0,l.f3M)(_n.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const we=this._document.createElement("div");we.style.backgroundColor="rgb(1,2,3)",we.style.position="absolute",this._document.body.appendChild(we);const $e=this._document.defaultView||window,at=$e&&$e.getComputedStyle?$e.getComputedStyle(we):null,on=(at&&at.backgroundColor||"").replace(/ /g,"");switch(we.remove(),on){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const we=this._document.body.classList;we.remove(st,$t,en),this._hasCheckedHighContrastMode=!0;const $e=this.getHighContrastMode();1===$e?we.add(st,$t):2===$e&&we.add(st,en)}}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(G.t4),l.LFG(D.K0))},Se.\u0275prov=l.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})(),Fe=(()=>{class Se{constructor(we){we._applyBodyHighContrastModeCssClasses()}}return Se.\u0275fac=function(we){return new(we||Se)(l.LFG(De))},Se.\u0275mod=l.oAB({type:Se}),Se.\u0275inj=l.cJS({imports:[Et.Q8]}),Se})()},445:(Cn,gt,U)=>{"use strict";U.d(gt,{Is:()=>Ye,vT:()=>pe});var D=U(4650),l=U(6895);const G=new D.OlP("cdk-dir-doc",{providedIn:"root",factory:function m(){return(0,D.f3M)(l.K0)}}),qe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ye=(()=>{class Ge{constructor(Te){if(this.value="ltr",this.change=new D.vpe,Te){const lt=Te.documentElement?Te.documentElement.dir:null;this.value=function ke(Ge){const rt=Ge?.toLowerCase()||"";return"auto"===rt&&typeof navigator<"u"&&navigator?.language?qe.test(navigator.language)?"rtl":"ltr":"rtl"===rt?"rtl":"ltr"}((Te.body?Te.body.dir:null)||lt||"ltr")}}ngOnDestroy(){this.change.complete()}}return Ge.\u0275fac=function(Te){return new(Te||Ge)(D.LFG(G,8))},Ge.\u0275prov=D.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})(),pe=(()=>{class Ge{}return Ge.\u0275fac=function(Te){return new(Te||Ge)},Ge.\u0275mod=D.oAB({type:Ge}),Ge.\u0275inj=D.cJS({}),Ge})()},1281:(Cn,gt,U)=>{"use strict";U.d(gt,{Eq:()=>qe,HM:()=>ke,Ig:()=>l,fI:()=>Ye,su:()=>G});var D=U(4650);function l(pe){return null!=pe&&"false"!=`${pe}`}function G(pe,Ge=0){return function m(pe){return!isNaN(parseFloat(pe))&&!isNaN(Number(pe))}(pe)?Number(pe):Ge}function qe(pe){return Array.isArray(pe)?pe:[pe]}function ke(pe){return null==pe?"":"string"==typeof pe?pe:`${pe}px`}function Ye(pe){return pe instanceof D.SBq?pe.nativeElement:pe}},5017:(Cn,gt,U)=>{"use strict";U.d(gt,{A8:()=>Ge,Ov:()=>Re});var D=U(7579),l=U(4650);class Re{constructor(ut=!1,lt,We=!0,Dt){this._multiple=ut,this._emitChanges=We,this.compareWith=Dt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new D.x,lt&&lt.length&&(ut?lt.forEach(wt=>this._markSelected(wt)):this._markSelected(lt[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...ut){this._verifyValueAssignment(ut),ut.forEach(We=>this._markSelected(We));const lt=this._hasQueuedChanges();return this._emitChangeEvent(),lt}deselect(...ut){this._verifyValueAssignment(ut),ut.forEach(We=>this._unmarkSelected(We));const lt=this._hasQueuedChanges();return this._emitChangeEvent(),lt}setSelection(...ut){this._verifyValueAssignment(ut);const lt=this.selected,We=new Set(ut);ut.forEach(wt=>this._markSelected(wt)),lt.filter(wt=>!We.has(wt)).forEach(wt=>this._unmarkSelected(wt));const Dt=this._hasQueuedChanges();return this._emitChangeEvent(),Dt}toggle(ut){return this.isSelected(ut)?this.deselect(ut):this.select(ut)}clear(ut=!0){this._unmarkAll();const lt=this._hasQueuedChanges();return ut&&this._emitChangeEvent(),lt}isSelected(ut){if(this.compareWith){for(const lt of this._selection)if(this.compareWith(lt,ut))return!0;return!1}return this._selection.has(ut)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(ut){this._multiple&&this.selected&&this._selected.sort(ut)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(ut){this.isSelected(ut)||(this._multiple||this._unmarkAll(),this.isSelected(ut)||this._selection.add(ut),this._emitChanges&&this._selectedToEmit.push(ut))}_unmarkSelected(ut){this.isSelected(ut)&&(this._selection.delete(ut),this._emitChanges&&this._deselectedToEmit.push(ut))}_unmarkAll(){this.isEmpty()||this._selection.forEach(ut=>this._unmarkSelected(ut))}_verifyValueAssignment(ut){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let Ge=(()=>{class Te{constructor(){this._listeners=[]}notify(lt,We){for(let Dt of this._listeners)Dt(lt,We)}listen(lt){return this._listeners.push(lt),()=>{this._listeners=this._listeners.filter(We=>lt!==We)}}ngOnDestroy(){this._listeners=[]}}return Te.\u0275fac=function(lt){return new(lt||Te)},Te.\u0275prov=l.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},9521:(Cn,gt,U)=>{"use strict";U.d(gt,{A:()=>Ei,JH:()=>hn,JU:()=>ke,K5:()=>qe,LH:()=>Et,L_:()=>Te,MW:()=>le,Mf:()=>G,SV:()=>_n,Sd:()=>Dt,Vb:()=>jr,Z:()=>J,aO:()=>Gn,b2:()=>xo,hY:()=>rt,jx:()=>Ye,oh:()=>wt,uR:()=>We,xE:()=>Ot,zL:()=>Re});const G=9,qe=13,ke=16,Ye=17,Re=18,rt=27,Te=32,We=35,Dt=36,wt=37,Et=38,_n=39,hn=40,Ot=48,Gn=57,Ei=65,J=90,le=91,xo=224;function jr(er,...po){return po.length?po.some(gr=>er[gr]):er.altKey||er.shiftKey||er.ctrlKey||er.metaKey}},2289:(Cn,gt,U)=>{"use strict";U.d(gt,{Yg:()=>hn,u3:()=>Pe});var D=U(4650),l=U(1281),G=U(7579),m=U(9841),qe=U(7272),ke=U(9751),Ye=U(5698),Re=U(5684),pe=U(8372),Ge=U(4004),rt=U(8675),Te=U(2722),ut=U(3353);const We=new Set;let Dt,wt=(()=>{class Ze{constructor(Ot){this._platform=Ot,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_n}matchMedia(Ot){return(this._platform.WEBKIT||this._platform.BLINK)&&function Et(Ze){if(!We.has(Ze))try{Dt||(Dt=document.createElement("style"),Dt.setAttribute("type","text/css"),document.head.appendChild(Dt)),Dt.sheet&&(Dt.sheet.insertRule(`@media ${Ze} {body{ }}`,0),We.add(Ze))}catch(Yt){console.error(Yt)}}(Ot),this._matchMedia(Ot)}}return Ze.\u0275fac=function(Ot){return new(Ot||Ze)(D.LFG(ut.t4))},Ze.\u0275prov=D.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})();function _n(Ze){return{matches:"all"===Ze||""===Ze,media:Ze,addListener:()=>{},removeListener:()=>{}}}let hn=(()=>{class Ze{constructor(Ot,Ut){this._mediaMatcher=Ot,this._zone=Ut,this._queries=new Map,this._destroySubject=new G.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Ot){return At((0,l.Eq)(Ot)).some(tn=>this._registerQuery(tn).mql.matches)}observe(Ot){const tn=At((0,l.Eq)(Ot)).map(Xe=>this._registerQuery(Xe).observable);let pt=(0,m.a)(tn);return pt=(0,qe.z)(pt.pipe((0,Ye.q)(1)),pt.pipe((0,Re.T)(1),(0,pe.b)(0))),pt.pipe((0,Ge.U)(Xe=>{const It={matches:!1,breakpoints:{}};return Xe.forEach(({matches:St,query:pn})=>{It.matches=It.matches||St,It.breakpoints[pn]=St}),It}))}_registerQuery(Ot){if(this._queries.has(Ot))return this._queries.get(Ot);const Ut=this._mediaMatcher.matchMedia(Ot),pt={observable:new ke.y(Xe=>{const It=St=>this._zone.run(()=>Xe.next(St));return Ut.addListener(It),()=>{Ut.removeListener(It)}}).pipe((0,rt.O)(Ut),(0,Ge.U)(({matches:Xe})=>({query:Ot,matches:Xe})),(0,Te.R)(this._destroySubject)),mql:Ut};return this._queries.set(Ot,pt),pt}}return Ze.\u0275fac=function(Ot){return new(Ot||Ze)(D.LFG(wt),D.LFG(D.R0b))},Ze.\u0275prov=D.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})();function At(Ze){return Ze.map(Yt=>Yt.split(",")).reduce((Yt,Ot)=>Yt.concat(Ot)).map(Yt=>Yt.trim())}const Pe={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},9643:(Cn,gt,U)=>{"use strict";U.d(gt,{Q8:()=>pe,wD:()=>Re});var D=U(1281),l=U(4650),G=U(9751),m=U(7579),qe=U(8372);let ke=(()=>{class Ge{create(Te){return typeof MutationObserver>"u"?null:new MutationObserver(Te)}}return Ge.\u0275fac=function(Te){return new(Te||Ge)},Ge.\u0275prov=l.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})(),Ye=(()=>{class Ge{constructor(Te){this._mutationObserverFactory=Te,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Te,ut)=>this._cleanupObserver(ut))}observe(Te){const ut=(0,D.fI)(Te);return new G.y(lt=>{const Dt=this._observeElement(ut).subscribe(lt);return()=>{Dt.unsubscribe(),this._unobserveElement(ut)}})}_observeElement(Te){if(this._observedElements.has(Te))this._observedElements.get(Te).count++;else{const ut=new m.x,lt=this._mutationObserverFactory.create(We=>ut.next(We));lt&&lt.observe(Te,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Te,{observer:lt,stream:ut,count:1})}return this._observedElements.get(Te).stream}_unobserveElement(Te){this._observedElements.has(Te)&&(this._observedElements.get(Te).count--,this._observedElements.get(Te).count||this._cleanupObserver(Te))}_cleanupObserver(Te){if(this._observedElements.has(Te)){const{observer:ut,stream:lt}=this._observedElements.get(Te);ut&&ut.disconnect(),lt.complete(),this._observedElements.delete(Te)}}}return Ge.\u0275fac=function(Te){return new(Te||Ge)(l.LFG(ke))},Ge.\u0275prov=l.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})(),Re=(()=>{class Ge{constructor(Te,ut,lt){this._contentObserver=Te,this._elementRef=ut,this._ngZone=lt,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Te){this._disabled=(0,D.Ig)(Te),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Te){this._debounce=(0,D.su)(Te),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Te=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Te.pipe((0,qe.b)(this.debounce)):Te).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return Ge.\u0275fac=function(Te){return new(Te||Ge)(l.Y36(Ye),l.Y36(l.SBq),l.Y36(l.R0b))},Ge.\u0275dir=l.lG2({type:Ge,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Ge})(),pe=(()=>{class Ge{}return Ge.\u0275fac=function(Te){return new(Te||Ge)},Ge.\u0275mod=l.oAB({type:Ge}),Ge.\u0275inj=l.cJS({providers:[ke]}),Ge})()},8184:(Cn,gt,U)=>{"use strict";U.d(gt,{U8:()=>xn,aV:()=>On,pI:()=>$i,xu:()=>fi});var D=U(8605),l=U(6895),G=U(4650),m=U(1281),qe=U(3353),ke=U(445),Ye=U(4080),Re=U(7579),pe=U(727),Ge=U(6451),rt=U(5698),Te=U(2722),ut=U(2529),lt=U(9521);const We=(0,qe.Mq)();class Dt{constructor(Y,te){this._viewportRuler=Y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=te}attach(){}enable(){if(this._canBeEnabled()){const Y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Y.style.left||"",this._previousHTMLStyles.top=Y.style.top||"",Y.style.left=(0,m.HM)(-this._previousScrollPosition.left),Y.style.top=(0,m.HM)(-this._previousScrollPosition.top),Y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Y=this._document.documentElement,Me=Y.style,he=this._document.body.style,k=Me.scrollBehavior||"",R=he.scrollBehavior||"";this._isEnabled=!1,Me.left=this._previousHTMLStyles.left,Me.top=this._previousHTMLStyles.top,Y.classList.remove("cdk-global-scrollblock"),We&&(Me.scrollBehavior=he.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),We&&(Me.scrollBehavior=k,he.scrollBehavior=R)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const te=this._document.body,Me=this._viewportRuler.getViewportSize();return te.scrollHeight>Me.height||te.scrollWidth>Me.width}}class Et{constructor(Y,te,Me,he){this._scrollDispatcher=Y,this._ngZone=te,this._viewportRuler=Me,this._config=he,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Y){this._overlayRef=Y}enable(){if(this._scrollSubscription)return;const Y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Y.subscribe(()=>{const te=this._viewportRuler.getViewportScrollPosition().top;Math.abs(te-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _n{enable(){}disable(){}attach(){}}function hn(ct,Y){return Y.some(te=>ct.bottom<te.top||ct.top>te.bottom||ct.right<te.left||ct.left>te.right)}function At(ct,Y){return Y.some(te=>ct.top<te.top||ct.bottom>te.bottom||ct.left<te.left||ct.right>te.right)}class Pe{constructor(Y,te,Me,he){this._scrollDispatcher=Y,this._viewportRuler=te,this._ngZone=Me,this._config=he,this._scrollSubscription=null}attach(Y){this._overlayRef=Y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const te=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Me,height:he}=this._viewportRuler.getViewportSize();hn(te,[{width:Me,height:he,bottom:he,right:Me,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ze=(()=>{class ct{constructor(te,Me,he,k){this._scrollDispatcher=te,this._viewportRuler=Me,this._ngZone=he,this.noop=()=>new _n,this.close=R=>new Et(this._scrollDispatcher,this._ngZone,this._viewportRuler,R),this.block=()=>new Dt(this._viewportRuler,this._document),this.reposition=R=>new Pe(this._scrollDispatcher,this._viewportRuler,this._ngZone,R),this._document=k}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(D.mF),G.LFG(D.rL),G.LFG(G.R0b),G.LFG(l.K0))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();class Yt{constructor(Y){if(this.scrollStrategy=new _n,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Y){const te=Object.keys(Y);for(const Me of te)void 0!==Y[Me]&&(this[Me]=Y[Me])}}}class tn{constructor(Y,te){this.connectionPair=Y,this.scrollableViewProperties=te}}let It=(()=>{class ct{constructor(te){this._attachedOverlays=[],this._document=te}ngOnDestroy(){this.detach()}add(te){this.remove(te),this._attachedOverlays.push(te)}remove(te){const Me=this._attachedOverlays.indexOf(te);Me>-1&&this._attachedOverlays.splice(Me,1),0===this._attachedOverlays.length&&this.detach()}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(l.K0))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),St=(()=>{class ct extends It{constructor(te,Me){super(te),this._ngZone=Me,this._keydownListener=he=>{const k=this._attachedOverlays;for(let R=k.length-1;R>-1;R--)if(k[R]._keydownEvents.observers.length>0){const H=k[R]._keydownEvents;this._ngZone?this._ngZone.run(()=>H.next(he)):H.next(he);break}}}add(te){super.add(te),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(l.K0),G.LFG(G.R0b,8))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),pn=(()=>{class ct extends It{constructor(te,Me,he){super(te),this._platform=Me,this._ngZone=he,this._cursorStyleIsSet=!1,this._pointerDownListener=k=>{this._pointerDownEventTarget=(0,qe.sA)(k)},this._clickListener=k=>{const R=(0,qe.sA)(k),H="click"===k.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:R;this._pointerDownEventTarget=null;const J=this._attachedOverlays.slice();for(let le=J.length-1;le>-1;le--){const Ae=J[le];if(Ae._outsidePointerEvents.observers.length<1||!Ae.hasAttached())continue;if(Ae.overlayElement.contains(R)||Ae.overlayElement.contains(H))break;const Le=Ae._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Le.next(k)):Le.next(k)}}}add(te){if(super.add(te),!this._isAttached){const Me=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Me)):this._addEventListeners(Me),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Me.style.cursor,Me.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const te=this._document.body;te.removeEventListener("pointerdown",this._pointerDownListener,!0),te.removeEventListener("click",this._clickListener,!0),te.removeEventListener("auxclick",this._clickListener,!0),te.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(te.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(te){te.addEventListener("pointerdown",this._pointerDownListener,!0),te.addEventListener("click",this._clickListener,!0),te.addEventListener("auxclick",this._clickListener,!0),te.addEventListener("contextmenu",this._clickListener,!0)}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(l.K0),G.LFG(qe.t4),G.LFG(G.R0b,8))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),un=(()=>{class ct{constructor(te,Me){this._platform=Me,this._document=te}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const te="cdk-overlay-container";if(this._platform.isBrowser||(0,qe.Oy)()){const he=this._document.querySelectorAll(`.${te}[platform="server"], .${te}[platform="test"]`);for(let k=0;k<he.length;k++)he[k].remove()}const Me=this._document.createElement("div");Me.classList.add(te),(0,qe.Oy)()?Me.setAttribute("platform","test"):this._platform.isBrowser||Me.setAttribute("platform","server"),this._document.body.appendChild(Me),this._containerElement=Me}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(l.K0),G.LFG(qe.t4))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();class Gn{constructor(Y,te,Me,he,k,R,H,J,le,Ae=!1){this._portalOutlet=Y,this._host=te,this._pane=Me,this._config=he,this._ngZone=k,this._keyboardDispatcher=R,this._document=H,this._location=J,this._outsideClickDispatcher=le,this._animationsDisabled=Ae,this._backdropElement=null,this._backdropClick=new Re.x,this._attachments=new Re.x,this._detachments=new Re.x,this._locationChanges=pe.w0.EMPTY,this._backdropClickHandler=Le=>this._backdropClick.next(Le),this._backdropTransitionendHandler=Le=>{this._disposeBackdrop(Le.target)},this._keydownEvents=new Re.x,this._outsidePointerEvents=new Re.x,he.scrollStrategy&&(this._scrollStrategy=he.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=he.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Y){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const te=this._portalOutlet.attach(Y);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,rt.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof te?.onDestroy&&te.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),te}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Y}dispose(){const Y=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,Y&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Y){Y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Y,this.hasAttached()&&(Y.attach(this),this.updatePosition()))}updateSize(Y){this._config={...this._config,...Y},this._updateElementSize()}setDirection(Y){this._config={...this._config,direction:Y},this._updateElementDirection()}addPanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!0)}removePanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!1)}getDirection(){const Y=this._config.direction;return Y?"string"==typeof Y?Y:Y.value:"ltr"}updateScrollStrategy(Y){Y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Y,this.hasAttached()&&(Y.attach(this),Y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Y=this._pane.style;Y.width=(0,m.HM)(this._config.width),Y.height=(0,m.HM)(this._config.height),Y.minWidth=(0,m.HM)(this._config.minWidth),Y.minHeight=(0,m.HM)(this._config.minHeight),Y.maxWidth=(0,m.HM)(this._config.maxWidth),Y.maxHeight=(0,m.HM)(this._config.maxHeight)}_togglePointerEvents(Y){this._pane.style.pointerEvents=Y?"":"none"}_attachBackdrop(){const Y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Y)})}):this._backdropElement.classList.add(Y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Y=this._backdropElement;if(Y){if(this._animationsDisabled)return void this._disposeBackdrop(Y);Y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Y.addEventListener("transitionend",this._backdropTransitionendHandler)}),Y.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(Y)},500))}}_toggleClasses(Y,te,Me){const he=(0,m.Eq)(te||[]).filter(k=>!!k);he.length&&(Me?Y.classList.add(...he):Y.classList.remove(...he))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Y=this._ngZone.onStable.pipe((0,Te.R)((0,Ge.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Y.unsubscribe())})})}_disposeScrollStrategy(){const Y=this._scrollStrategy;Y&&(Y.disable(),Y.detach&&Y.detach())}_disposeBackdrop(Y){Y&&(Y.removeEventListener("click",this._backdropClickHandler),Y.removeEventListener("transitionend",this._backdropTransitionendHandler),Y.remove(),this._backdropElement===Y&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const di="cdk-overlay-connected-position-bounding-box",yi=/([A-Za-z%]+)$/;class yn{constructor(Y,te,Me,he,k){this._viewportRuler=te,this._document=Me,this._platform=he,this._overlayContainer=k,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Re.x,this._resizeSubscription=pe.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Y)}get positions(){return this._preferredPositions}attach(Y){this._validatePositions(),Y.hostElement.classList.add(di),this._overlayRef=Y,this._boundingBox=Y.hostElement,this._pane=Y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Y=this._originRect,te=this._overlayRect,Me=this._viewportRect,he=this._containerRect,k=[];let R;for(let H of this._preferredPositions){let J=this._getOriginPoint(Y,he,H),le=this._getOverlayPoint(J,te,H),Ae=this._getOverlayFit(le,te,Me,H);if(Ae.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(H,J);this._canFitWithFlexibleDimensions(Ae,le,Me)?k.push({position:H,origin:J,overlayRect:te,boundingBoxRect:this._calculateBoundingBoxRect(J,H)}):(!R||R.overlayFit.visibleArea<Ae.visibleArea)&&(R={overlayFit:Ae,overlayPoint:le,originPoint:J,position:H,overlayRect:te})}if(k.length){let H=null,J=-1;for(const le of k){const Ae=le.boundingBoxRect.width*le.boundingBoxRect.height*(le.position.weight||1);Ae>J&&(J=Ae,H=le)}return this._isPushed=!1,void this._applyPosition(H.position,H.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(R.position,R.originPoint);this._applyPosition(R.position,R.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(di),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const Y=this._lastPosition;if(Y){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const te=this._getOriginPoint(this._originRect,this._containerRect,Y);this._applyPosition(Y,te)}else this.apply()}withScrollableContainers(Y){return this._scrollables=Y,this}withPositions(Y){return this._preferredPositions=Y,-1===Y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Y){return this._viewportMargin=Y,this}withFlexibleDimensions(Y=!0){return this._hasFlexibleDimensions=Y,this}withGrowAfterOpen(Y=!0){return this._growAfterOpen=Y,this}withPush(Y=!0){return this._canPush=Y,this}withLockedPosition(Y=!0){return this._positionLocked=Y,this}setOrigin(Y){return this._origin=Y,this}withDefaultOffsetX(Y){return this._offsetX=Y,this}withDefaultOffsetY(Y){return this._offsetY=Y,this}withTransformOriginOn(Y){return this._transformOriginSelector=Y,this}_getOriginPoint(Y,te,Me){let he,k;if("center"==Me.originX)he=Y.left+Y.width/2;else{const R=this._isRtl()?Y.right:Y.left,H=this._isRtl()?Y.left:Y.right;he="start"==Me.originX?R:H}return te.left<0&&(he-=te.left),k="center"==Me.originY?Y.top+Y.height/2:"top"==Me.originY?Y.top:Y.bottom,te.top<0&&(k-=te.top),{x:he,y:k}}_getOverlayPoint(Y,te,Me){let he,k;return he="center"==Me.overlayX?-te.width/2:"start"===Me.overlayX?this._isRtl()?-te.width:0:this._isRtl()?0:-te.width,k="center"==Me.overlayY?-te.height/2:"top"==Me.overlayY?0:-te.height,{x:Y.x+he,y:Y.y+k}}_getOverlayFit(Y,te,Me,he){const k=hi(te);let{x:R,y:H}=Y,J=this._getOffset(he,"x"),le=this._getOffset(he,"y");J&&(R+=J),le&&(H+=le);let Qe=0-H,ot=H+k.height-Me.height,He=this._subtractOverflows(k.width,0-R,R+k.width-Me.width),dt=this._subtractOverflows(k.height,Qe,ot),$t=He*dt;return{visibleArea:$t,isCompletelyWithinViewport:k.width*k.height===$t,fitsInViewportVertically:dt===k.height,fitsInViewportHorizontally:He==k.width}}_canFitWithFlexibleDimensions(Y,te,Me){if(this._hasFlexibleDimensions){const he=Me.bottom-te.y,k=Me.right-te.x,R=Ei(this._overlayRef.getConfig().minHeight),H=Ei(this._overlayRef.getConfig().minWidth),le=Y.fitsInViewportHorizontally||null!=H&&H<=k;return(Y.fitsInViewportVertically||null!=R&&R<=he)&&le}return!1}_pushOverlayOnScreen(Y,te,Me){if(this._previousPushAmount&&this._positionLocked)return{x:Y.x+this._previousPushAmount.x,y:Y.y+this._previousPushAmount.y};const he=hi(te),k=this._viewportRect,R=Math.max(Y.x+he.width-k.width,0),H=Math.max(Y.y+he.height-k.height,0),J=Math.max(k.top-Me.top-Y.y,0),le=Math.max(k.left-Me.left-Y.x,0);let Ae=0,Le=0;return Ae=he.width<=k.width?le||-R:Y.x<this._viewportMargin?k.left-Me.left-Y.x:0,Le=he.height<=k.height?J||-H:Y.y<this._viewportMargin?k.top-Me.top-Y.y:0,this._previousPushAmount={x:Ae,y:Le},{x:Y.x+Ae,y:Y.y+Le}}_applyPosition(Y,te){if(this._setTransformOrigin(Y),this._setOverlayElementStyles(te,Y),this._setBoundingBoxStyles(te,Y),Y.panelClass&&this._addPanelClasses(Y.panelClass),this._lastPosition=Y,this._positionChanges.observers.length){const Me=this._getScrollVisibility(),he=new tn(Y,Me);this._positionChanges.next(he)}this._isInitialRender=!1}_setTransformOrigin(Y){if(!this._transformOriginSelector)return;const te=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Me,he=Y.overlayY;Me="center"===Y.overlayX?"center":this._isRtl()?"start"===Y.overlayX?"right":"left":"start"===Y.overlayX?"left":"right";for(let k=0;k<te.length;k++)te[k].style.transformOrigin=`${Me} ${he}`}_calculateBoundingBoxRect(Y,te){const Me=this._viewportRect,he=this._isRtl();let k,R,H,Ae,Le,Qe;if("top"===te.overlayY)R=Y.y,k=Me.height-R+this._viewportMargin;else if("bottom"===te.overlayY)H=Me.height-Y.y+2*this._viewportMargin,k=Me.height-H+this._viewportMargin;else{const ot=Math.min(Me.bottom-Y.y+Me.top,Y.y),He=this._lastBoundingBoxSize.height;k=2*ot,R=Y.y-ot,k>He&&!this._isInitialRender&&!this._growAfterOpen&&(R=Y.y-He/2)}if("end"===te.overlayX&&!he||"start"===te.overlayX&&he)Qe=Me.width-Y.x+this._viewportMargin,Ae=Y.x-this._viewportMargin;else if("start"===te.overlayX&&!he||"end"===te.overlayX&&he)Le=Y.x,Ae=Me.right-Y.x;else{const ot=Math.min(Me.right-Y.x+Me.left,Y.x),He=this._lastBoundingBoxSize.width;Ae=2*ot,Le=Y.x-ot,Ae>He&&!this._isInitialRender&&!this._growAfterOpen&&(Le=Y.x-He/2)}return{top:R,left:Le,bottom:H,right:Qe,width:Ae,height:k}}_setBoundingBoxStyles(Y,te){const Me=this._calculateBoundingBoxRect(Y,te);!this._isInitialRender&&!this._growAfterOpen&&(Me.height=Math.min(Me.height,this._lastBoundingBoxSize.height),Me.width=Math.min(Me.width,this._lastBoundingBoxSize.width));const he={};if(this._hasExactPosition())he.top=he.left="0",he.bottom=he.right=he.maxHeight=he.maxWidth="",he.width=he.height="100%";else{const k=this._overlayRef.getConfig().maxHeight,R=this._overlayRef.getConfig().maxWidth;he.height=(0,m.HM)(Me.height),he.top=(0,m.HM)(Me.top),he.bottom=(0,m.HM)(Me.bottom),he.width=(0,m.HM)(Me.width),he.left=(0,m.HM)(Me.left),he.right=(0,m.HM)(Me.right),he.alignItems="center"===te.overlayX?"center":"end"===te.overlayX?"flex-end":"flex-start",he.justifyContent="center"===te.overlayY?"center":"bottom"===te.overlayY?"flex-end":"flex-start",k&&(he.maxHeight=(0,m.HM)(k)),R&&(he.maxWidth=(0,m.HM)(R))}this._lastBoundingBoxSize=Me,gi(this._boundingBox.style,he)}_resetBoundingBoxStyles(){gi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Y,te){const Me={},he=this._hasExactPosition(),k=this._hasFlexibleDimensions,R=this._overlayRef.getConfig();if(he){const Ae=this._viewportRuler.getViewportScrollPosition();gi(Me,this._getExactOverlayY(te,Y,Ae)),gi(Me,this._getExactOverlayX(te,Y,Ae))}else Me.position="static";let H="",J=this._getOffset(te,"x"),le=this._getOffset(te,"y");J&&(H+=`translateX(${J}px) `),le&&(H+=`translateY(${le}px)`),Me.transform=H.trim(),R.maxHeight&&(he?Me.maxHeight=(0,m.HM)(R.maxHeight):k&&(Me.maxHeight="")),R.maxWidth&&(he?Me.maxWidth=(0,m.HM)(R.maxWidth):k&&(Me.maxWidth="")),gi(this._pane.style,Me)}_getExactOverlayY(Y,te,Me){let he={top:"",bottom:""},k=this._getOverlayPoint(te,this._overlayRect,Y);return this._isPushed&&(k=this._pushOverlayOnScreen(k,this._overlayRect,Me)),"bottom"===Y.overlayY?he.bottom=this._document.documentElement.clientHeight-(k.y+this._overlayRect.height)+"px":he.top=(0,m.HM)(k.y),he}_getExactOverlayX(Y,te,Me){let R,he={left:"",right:""},k=this._getOverlayPoint(te,this._overlayRect,Y);return this._isPushed&&(k=this._pushOverlayOnScreen(k,this._overlayRect,Me)),R=this._isRtl()?"end"===Y.overlayX?"left":"right":"end"===Y.overlayX?"right":"left","right"===R?he.right=this._document.documentElement.clientWidth-(k.x+this._overlayRect.width)+"px":he.left=(0,m.HM)(k.x),he}_getScrollVisibility(){const Y=this._getOriginRect(),te=this._pane.getBoundingClientRect(),Me=this._scrollables.map(he=>he.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:At(Y,Me),isOriginOutsideView:hn(Y,Me),isOverlayClipped:At(te,Me),isOverlayOutsideView:hn(te,Me)}}_subtractOverflows(Y,...te){return te.reduce((Me,he)=>Me-Math.max(he,0),Y)}_getNarrowedViewportRect(){const Y=this._document.documentElement.clientWidth,te=this._document.documentElement.clientHeight,Me=this._viewportRuler.getViewportScrollPosition();return{top:Me.top+this._viewportMargin,left:Me.left+this._viewportMargin,right:Me.left+Y-this._viewportMargin,bottom:Me.top+te-this._viewportMargin,width:Y-2*this._viewportMargin,height:te-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Y,te){return"x"===te?Y.offsetX??this._offsetX:Y.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(Y){this._pane&&(0,m.Eq)(Y).forEach(te=>{""!==te&&-1===this._appliedPanelClasses.indexOf(te)&&(this._appliedPanelClasses.push(te),this._pane.classList.add(te))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Y=>{this._pane.classList.remove(Y)}),this._appliedPanelClasses=[])}_getOriginRect(){const Y=this._origin;if(Y instanceof G.SBq)return Y.nativeElement.getBoundingClientRect();if(Y instanceof Element)return Y.getBoundingClientRect();const te=Y.width||0,Me=Y.height||0;return{top:Y.y,bottom:Y.y+Me,left:Y.x,right:Y.x+te,height:Me,width:te}}}function gi(ct,Y){for(let te in Y)Y.hasOwnProperty(te)&&(ct[te]=Y[te]);return ct}function Ei(ct){if("number"!=typeof ct&&null!=ct){const[Y,te]=ct.split(yi);return te&&"px"!==te?null:parseFloat(Y)}return ct||null}function hi(ct){return{top:Math.floor(ct.top),right:Math.floor(ct.right),bottom:Math.floor(ct.bottom),left:Math.floor(ct.left),width:Math.floor(ct.width),height:Math.floor(ct.height)}}const _t="cdk-global-overlay-wrapper";class Nt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(Y){const te=Y.getConfig();this._overlayRef=Y,this._width&&!te.width&&Y.updateSize({width:this._width}),this._height&&!te.height&&Y.updateSize({height:this._height}),Y.hostElement.classList.add(_t),this._isDisposed=!1}top(Y=""){return this._bottomOffset="",this._topOffset=Y,this._alignItems="flex-start",this}left(Y=""){return this._xOffset=Y,this._xPosition="left",this}bottom(Y=""){return this._topOffset="",this._bottomOffset=Y,this._alignItems="flex-end",this}right(Y=""){return this._xOffset=Y,this._xPosition="right",this}start(Y=""){return this._xOffset=Y,this._xPosition="start",this}end(Y=""){return this._xOffset=Y,this._xPosition="end",this}width(Y=""){return this._overlayRef?this._overlayRef.updateSize({width:Y}):this._width=Y,this}height(Y=""){return this._overlayRef?this._overlayRef.updateSize({height:Y}):this._height=Y,this}centerHorizontally(Y=""){return this.left(Y),this._xPosition="center",this}centerVertically(Y=""){return this.top(Y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Y=this._overlayRef.overlayElement.style,te=this._overlayRef.hostElement.style,Me=this._overlayRef.getConfig(),{width:he,height:k,maxWidth:R,maxHeight:H}=Me,J=!("100%"!==he&&"100vw"!==he||R&&"100%"!==R&&"100vw"!==R),le=!("100%"!==k&&"100vh"!==k||H&&"100%"!==H&&"100vh"!==H),Ae=this._xPosition,Le=this._xOffset,Qe="rtl"===this._overlayRef.getConfig().direction;let ot="",He="",dt="";J?dt="flex-start":"center"===Ae?(dt="center",Qe?He=Le:ot=Le):Qe?"left"===Ae||"end"===Ae?(dt="flex-end",ot=Le):("right"===Ae||"start"===Ae)&&(dt="flex-start",He=Le):"left"===Ae||"start"===Ae?(dt="flex-start",ot=Le):("right"===Ae||"end"===Ae)&&(dt="flex-end",He=Le),Y.position=this._cssPosition,Y.marginLeft=J?"0":ot,Y.marginTop=le?"0":this._topOffset,Y.marginBottom=this._bottomOffset,Y.marginRight=J?"0":He,te.justifyContent=dt,te.alignItems=le?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Y=this._overlayRef.overlayElement.style,te=this._overlayRef.hostElement,Me=te.style;te.classList.remove(_t),Me.justifyContent=Me.alignItems=Y.marginTop=Y.marginBottom=Y.marginLeft=Y.marginRight=Y.position="",this._overlayRef=null,this._isDisposed=!0}}let fn=(()=>{class ct{constructor(te,Me,he,k){this._viewportRuler=te,this._document=Me,this._platform=he,this._overlayContainer=k}global(){return new Nt}flexibleConnectedTo(te){return new yn(te,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(D.rL),G.LFG(l.K0),G.LFG(qe.t4),G.LFG(un))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),mn=0,On=(()=>{class ct{constructor(te,Me,he,k,R,H,J,le,Ae,Le,Qe,ot){this.scrollStrategies=te,this._overlayContainer=Me,this._componentFactoryResolver=he,this._positionBuilder=k,this._keyboardDispatcher=R,this._injector=H,this._ngZone=J,this._document=le,this._directionality=Ae,this._location=Le,this._outsideClickDispatcher=Qe,this._animationsModuleType=ot}create(te){const Me=this._createHostElement(),he=this._createPaneElement(Me),k=this._createPortalOutlet(he),R=new Yt(te);return R.direction=R.direction||this._directionality.value,new Gn(k,Me,he,R,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(te){const Me=this._document.createElement("div");return Me.id="cdk-overlay-"+mn++,Me.classList.add("cdk-overlay-pane"),te.appendChild(Me),Me}_createHostElement(){const te=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(te),te}_createPortalOutlet(te){return this._appRef||(this._appRef=this._injector.get(G.z2F)),new Ye.u0(te,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return ct.\u0275fac=function(te){return new(te||ct)(G.LFG(Ze),G.LFG(un),G.LFG(G._Vd),G.LFG(fn),G.LFG(St),G.LFG(G.zs3),G.LFG(G.R0b),G.LFG(l.K0),G.LFG(ke.Is),G.LFG(l.Ye),G.LFG(pn),G.LFG(G.QbO,8))},ct.\u0275prov=G.Yz7({token:ct,factory:ct.\u0275fac}),ct})();const Jn=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],oi=new G.OlP("cdk-connected-overlay-scroll-strategy");let fi=(()=>{class ct{constructor(te){this.elementRef=te}}return ct.\u0275fac=function(te){return new(te||ct)(G.Y36(G.SBq))},ct.\u0275dir=G.lG2({type:ct,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),ct})(),$i=(()=>{class ct{constructor(te,Me,he,k,R){this._overlay=te,this._dir=R,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=pe.w0.EMPTY,this._attachSubscription=pe.w0.EMPTY,this._detachSubscription=pe.w0.EMPTY,this._positionSubscription=pe.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new G.vpe,this.positionChange=new G.vpe,this.attach=new G.vpe,this.detach=new G.vpe,this.overlayKeydown=new G.vpe,this.overlayOutsideClick=new G.vpe,this._templatePortal=new Ye.UE(Me,he),this._scrollStrategyFactory=k,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(te){this._offsetX=te,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(te){this._offsetY=te,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(te){this._hasBackdrop=(0,m.Ig)(te)}get lockPosition(){return this._lockPosition}set lockPosition(te){this._lockPosition=(0,m.Ig)(te)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(te){this._flexibleDimensions=(0,m.Ig)(te)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(te){this._growAfterOpen=(0,m.Ig)(te)}get push(){return this._push}set push(te){this._push=(0,m.Ig)(te)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(te){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),te.origin&&this.open&&this._position.apply()),te.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Jn);const te=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=te.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=te.detachments().subscribe(()=>this.detach.emit()),te.keydownEvents().subscribe(Me=>{this.overlayKeydown.next(Me),Me.keyCode===lt.hY&&!this.disableClose&&!(0,lt.Vb)(Me)&&(Me.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(Me=>{this.overlayOutsideClick.next(Me)})}_buildConfig(){const te=this._position=this.positionStrategy||this._createPositionStrategy(),Me=new Yt({direction:this._dir,positionStrategy:te,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(Me.width=this.width),(this.height||0===this.height)&&(Me.height=this.height),(this.minWidth||0===this.minWidth)&&(Me.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(Me.minHeight=this.minHeight),this.backdropClass&&(Me.backdropClass=this.backdropClass),this.panelClass&&(Me.panelClass=this.panelClass),Me}_updatePositionStrategy(te){const Me=this.positions.map(he=>({originX:he.originX,originY:he.originY,overlayX:he.overlayX,overlayY:he.overlayY,offsetX:he.offsetX||this.offsetX,offsetY:he.offsetY||this.offsetY,panelClass:he.panelClass||void 0}));return te.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(Me).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const te=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(te),te}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof fi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(te=>{this.backdropClick.emit(te)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,ut.o)(()=>this.positionChange.observers.length>0)).subscribe(te=>{this.positionChange.emit(te),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return ct.\u0275fac=function(te){return new(te||ct)(G.Y36(On),G.Y36(G.Rgc),G.Y36(G.s_b),G.Y36(oi),G.Y36(ke.Is,8))},ct.\u0275dir=G.lG2({type:ct,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[G.TTD]}),ct})();const Di={provide:oi,deps:[On],useFactory:function Qn(ct){return()=>ct.scrollStrategies.reposition()}};let xn=(()=>{class ct{}return ct.\u0275fac=function(te){return new(te||ct)},ct.\u0275mod=G.oAB({type:ct}),ct.\u0275inj=G.cJS({providers:[On,Di],imports:[ke.vT,Ye.eL,D.Cl,D.Cl]}),ct})()},3353:(Cn,gt,U)=>{"use strict";U.d(gt,{Mq:()=>lt,Oy:()=>At,_i:()=>We,i$:()=>rt,kV:()=>Et,qK:()=>Re,sA:()=>hn,t4:()=>m});var D=U(4650),l=U(6895);let G;try{G=typeof Intl<"u"&&Intl.v8BreakIterator}catch{G=!1}let ke,m=(()=>{class Pe{constructor(Yt){this._platformId=Yt,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!G)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Pe.\u0275fac=function(Yt){return new(Yt||Pe)(D.LFG(D.Lbi))},Pe.\u0275prov=D.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})();const Ye=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Re(){if(ke)return ke;if("object"!=typeof document||!document)return ke=new Set(Ye),ke;let Pe=document.createElement("input");return ke=new Set(Ye.filter(Ze=>(Pe.setAttribute("type",Ze),Pe.type===Ze))),ke}let pe,Te,ut,Dt;function rt(Pe){return function Ge(){if(null==pe&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pe=!0}))}finally{pe=pe||!1}return pe}()?Pe:!!Pe.capture}function lt(){if(null==ut){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ut=!1,ut;if("scrollBehavior"in document.documentElement.style)ut=!0;else{const Pe=Element.prototype.scrollTo;ut=!!Pe&&!/\{\s*\[native code\]\s*\}/.test(Pe.toString())}}return ut}function We(){if("object"!=typeof document||!document)return 0;if(null==Te){const Pe=document.createElement("div"),Ze=Pe.style;Pe.dir="rtl",Ze.width="1px",Ze.overflow="auto",Ze.visibility="hidden",Ze.pointerEvents="none",Ze.position="absolute";const Yt=document.createElement("div"),Ot=Yt.style;Ot.width="2px",Ot.height="1px",Pe.appendChild(Yt),document.body.appendChild(Pe),Te=0,0===Pe.scrollLeft&&(Pe.scrollLeft=1,Te=0===Pe.scrollLeft?1:2),Pe.remove()}return Te}function Et(Pe){if(function wt(){if(null==Dt){const Pe=typeof document<"u"?document.head:null;Dt=!(!Pe||!Pe.createShadowRoot&&!Pe.attachShadow)}return Dt}()){const Ze=Pe.getRootNode?Pe.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Ze instanceof ShadowRoot)return Ze}return null}function hn(Pe){return Pe.composedPath?Pe.composedPath()[0]:Pe.target}function At(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},4080:(Cn,gt,U)=>{"use strict";U.d(gt,{C5:()=>pe,UE:()=>Ge,bH:()=>wt,eL:()=>hn,ig:()=>Dt,u0:()=>lt});var D=U(4650);class Re{attach(Ze){return this._attachedHost=Ze,Ze.attach(this)}detach(){let Ze=this._attachedHost;null!=Ze&&(this._attachedHost=null,Ze.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ze){this._attachedHost=Ze}}class pe extends Re{constructor(Ze,Yt,Ot,Ut){super(),this.component=Ze,this.viewContainerRef=Yt,this.injector=Ot,this.componentFactoryResolver=Ut}}class Ge extends Re{constructor(Ze,Yt,Ot,Ut){super(),this.templateRef=Ze,this.viewContainerRef=Yt,this.context=Ot,this.injector=Ut}get origin(){return this.templateRef.elementRef}attach(Ze,Yt=this.context){return this.context=Yt,super.attach(Ze)}detach(){return this.context=void 0,super.detach()}}class rt extends Re{constructor(Ze){super(),this.element=Ze instanceof D.SBq?Ze.nativeElement:Ze}}class lt extends class Te{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Ze){return Ze instanceof pe?(this._attachedPortal=Ze,this.attachComponentPortal(Ze)):Ze instanceof Ge?(this._attachedPortal=Ze,this.attachTemplatePortal(Ze)):this.attachDomPortal&&Ze instanceof rt?(this._attachedPortal=Ze,this.attachDomPortal(Ze)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Ze){this._disposeFn=Ze}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(Ze,Yt,Ot,Ut,tn){super(),this.outletElement=Ze,this._componentFactoryResolver=Yt,this._appRef=Ot,this._defaultInjector=Ut,this.attachDomPortal=pt=>{const Xe=pt.element,It=this._document.createComment("dom-portal");Xe.parentNode.insertBefore(It,Xe),this.outletElement.appendChild(Xe),this._attachedPortal=pt,super.setDisposeFn(()=>{It.parentNode&&It.parentNode.replaceChild(Xe,It)})},this._document=tn}attachComponentPortal(Ze){const Ot=(Ze.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Ze.component);let Ut;return Ze.viewContainerRef?(Ut=Ze.viewContainerRef.createComponent(Ot,Ze.viewContainerRef.length,Ze.injector||Ze.viewContainerRef.injector),this.setDisposeFn(()=>Ut.destroy())):(Ut=Ot.create(Ze.injector||this._defaultInjector||D.zs3.NULL),this._appRef.attachView(Ut.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(Ut.hostView),Ut.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Ut)),this._attachedPortal=Ze,Ut}attachTemplatePortal(Ze){let Yt=Ze.viewContainerRef,Ot=Yt.createEmbeddedView(Ze.templateRef,Ze.context,{injector:Ze.injector});return Ot.rootNodes.forEach(Ut=>this.outletElement.appendChild(Ut)),Ot.detectChanges(),this.setDisposeFn(()=>{let Ut=Yt.indexOf(Ot);-1!==Ut&&Yt.remove(Ut)}),this._attachedPortal=Ze,Ot}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(Ze){return Ze.hostView.rootNodes[0]}}let Dt=(()=>{class Pe extends Ge{constructor(Yt,Ot){super(Yt,Ot)}}return Pe.\u0275fac=function(Yt){return new(Yt||Pe)(D.Y36(D.Rgc),D.Y36(D.s_b))},Pe.\u0275dir=D.lG2({type:Pe,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[D.qOj]}),Pe})(),wt=(()=>{class Pe extends Dt{}return Pe.\u0275fac=function(){let Ze;return function(Ot){return(Ze||(Ze=D.n5z(Pe)))(Ot||Pe)}}(),Pe.\u0275dir=D.lG2({type:Pe,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[D._Bn([{provide:Dt,useExisting:Pe}]),D.qOj]}),Pe})(),hn=(()=>{class Pe{}return Pe.\u0275fac=function(Yt){return new(Yt||Pe)},Pe.\u0275mod=D.oAB({type:Pe}),Pe.\u0275inj=D.cJS({}),Pe})()},8605:(Cn,gt,U)=>{"use strict";U.d(gt,{PQ:()=>Jn,ZD:()=>he,mF:()=>On,Cl:()=>k,rL:()=>fi});var D=U(1281),l=U(4650),G=U(7579),m=U(9646),qe=U(9751),ke=U(4968),Ye=U(4408),Re=U(727);const pe={schedule(R){let H=requestAnimationFrame,J=cancelAnimationFrame;const{delegate:le}=pe;le&&(H=le.requestAnimationFrame,J=le.cancelAnimationFrame);const Ae=H(Le=>{J=void 0,R(Le)});return new Re.w0(()=>J?.(Ae))},requestAnimationFrame(...R){const{delegate:H}=pe;return(H?.requestAnimationFrame||requestAnimationFrame)(...R)},cancelAnimationFrame(...R){const{delegate:H}=pe;return(H?.cancelAnimationFrame||cancelAnimationFrame)(...R)},delegate:void 0};var rt=U(7565);new class Te extends rt.v{flush(H){this._active=!0;const J=this._scheduled;this._scheduled=void 0;const{actions:le}=this;let Ae;H=H||le.shift();do{if(Ae=H.execute(H.state,H.delay))break}while((H=le[0])&&H.id===J&&le.shift());if(this._active=!1,Ae){for(;(H=le[0])&&H.id===J&&le.shift();)H.unsubscribe();throw Ae}}}(class Ge extends Ye.o{constructor(H,J){super(H,J),this.scheduler=H,this.work=J}requestAsyncId(H,J,le=0){return null!==le&&le>0?super.requestAsyncId(H,J,le):(H.actions.push(this),H._scheduled||(H._scheduled=pe.requestAnimationFrame(()=>H.flush(void 0))))}recycleAsyncId(H,J,le=0){var Ae;if(null!=le?le>0:this.delay>0)return super.recycleAsyncId(H,J,le);const{actions:Le}=H;null!=J&&(null===(Ae=Le[Le.length-1])||void 0===Ae?void 0:Ae.id)!==J&&(pe.cancelAnimationFrame(J),H._scheduled=void 0)}});let Dt,We=1;const wt={};function Et(R){return R in wt&&(delete wt[R],!0)}const _n={setImmediate(R){const H=We++;return wt[H]=!0,Dt||(Dt=Promise.resolve()),Dt.then(()=>Et(H)&&R()),H},clearImmediate(R){Et(R)}},{setImmediate:At,clearImmediate:Pe}=_n,Ze={setImmediate(...R){const{delegate:H}=Ze;return(H?.setImmediate||At)(...R)},clearImmediate(R){const{delegate:H}=Ze;return(H?.clearImmediate||Pe)(R)},delegate:void 0};new class Ot extends rt.v{flush(H){this._active=!0;const J=this._scheduled;this._scheduled=void 0;const{actions:le}=this;let Ae;H=H||le.shift();do{if(Ae=H.execute(H.state,H.delay))break}while((H=le[0])&&H.id===J&&le.shift());if(this._active=!1,Ae){for(;(H=le[0])&&H.id===J&&le.shift();)H.unsubscribe();throw Ae}}}(class Yt extends Ye.o{constructor(H,J){super(H,J),this.scheduler=H,this.work=J}requestAsyncId(H,J,le=0){return null!==le&&le>0?super.requestAsyncId(H,J,le):(H.actions.push(this),H._scheduled||(H._scheduled=Ze.setImmediate(H.flush.bind(H,void 0))))}recycleAsyncId(H,J,le=0){var Ae;if(null!=le?le>0:this.delay>0)return super.recycleAsyncId(H,J,le);const{actions:Le}=H;null!=J&&(null===(Ae=Le[Le.length-1])||void 0===Ae?void 0:Ae.id)!==J&&(Ze.clearImmediate(J),H._scheduled=void 0)}});var pt=U(4986),Xe=U(4482),It=U(8421),St=U(5403),un=U(5963);function Gn(R,H=pt.z){return function pn(R){return(0,Xe.e)((H,J)=>{let le=!1,Ae=null,Le=null,Qe=!1;const ot=()=>{if(Le?.unsubscribe(),Le=null,le){le=!1;const dt=Ae;Ae=null,J.next(dt)}Qe&&J.complete()},He=()=>{Le=null,Qe&&J.complete()};H.subscribe((0,St.x)(J,dt=>{le=!0,Ae=dt,Le||(0,It.Xf)(R(dt)).subscribe(Le=(0,St.x)(J,ot,He))},()=>{Qe=!0,(!le||!Le||Le.closed)&&J.complete()}))})}(()=>(0,un.H)(R,H))}var di=U(9300),yi=U(2722),yn=U(3353),gi=U(6895),Ei=U(445);let On=(()=>{class R{constructor(J,le,Ae){this._ngZone=J,this._platform=le,this._scrolled=new G.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Ae}register(J){this.scrollContainers.has(J)||this.scrollContainers.set(J,J.elementScrolled().subscribe(()=>this._scrolled.next(J)))}deregister(J){const le=this.scrollContainers.get(J);le&&(le.unsubscribe(),this.scrollContainers.delete(J))}scrolled(J=20){return this._platform.isBrowser?new qe.y(le=>{this._globalSubscription||this._addGlobalListener();const Ae=J>0?this._scrolled.pipe(Gn(J)).subscribe(le):this._scrolled.subscribe(le);return this._scrolledCount++,()=>{Ae.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,m.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((J,le)=>this.deregister(le)),this._scrolled.complete()}ancestorScrolled(J,le){const Ae=this.getAncestorScrollContainers(J);return this.scrolled(le).pipe((0,di.h)(Le=>!Le||Ae.indexOf(Le)>-1))}getAncestorScrollContainers(J){const le=[];return this.scrollContainers.forEach((Ae,Le)=>{this._scrollableContainsElement(Le,J)&&le.push(Le)}),le}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(J,le){let Ae=(0,D.fI)(le),Le=J.getElementRef().nativeElement;do{if(Ae==Le)return!0}while(Ae=Ae.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const J=this._getWindow();return(0,ke.R)(J.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return R.\u0275fac=function(J){return new(J||R)(l.LFG(l.R0b),l.LFG(yn.t4),l.LFG(gi.K0,8))},R.\u0275prov=l.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Jn=(()=>{class R{constructor(J,le,Ae,Le){this.elementRef=J,this.scrollDispatcher=le,this.ngZone=Ae,this.dir=Le,this._destroyed=new G.x,this._elementScrolled=new qe.y(Qe=>this.ngZone.runOutsideAngular(()=>(0,ke.R)(this.elementRef.nativeElement,"scroll").pipe((0,yi.R)(this._destroyed)).subscribe(Qe)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(J){const le=this.elementRef.nativeElement,Ae=this.dir&&"rtl"==this.dir.value;null==J.left&&(J.left=Ae?J.end:J.start),null==J.right&&(J.right=Ae?J.start:J.end),null!=J.bottom&&(J.top=le.scrollHeight-le.clientHeight-J.bottom),Ae&&0!=(0,yn._i)()?(null!=J.left&&(J.right=le.scrollWidth-le.clientWidth-J.left),2==(0,yn._i)()?J.left=J.right:1==(0,yn._i)()&&(J.left=J.right?-J.right:J.right)):null!=J.right&&(J.left=le.scrollWidth-le.clientWidth-J.right),this._applyScrollToOptions(J)}_applyScrollToOptions(J){const le=this.elementRef.nativeElement;(0,yn.Mq)()?le.scrollTo(J):(null!=J.top&&(le.scrollTop=J.top),null!=J.left&&(le.scrollLeft=J.left))}measureScrollOffset(J){const le="left",Le=this.elementRef.nativeElement;if("top"==J)return Le.scrollTop;if("bottom"==J)return Le.scrollHeight-Le.clientHeight-Le.scrollTop;const Qe=this.dir&&"rtl"==this.dir.value;return"start"==J?J=Qe?"right":le:"end"==J&&(J=Qe?le:"right"),Qe&&2==(0,yn._i)()?J==le?Le.scrollWidth-Le.clientWidth-Le.scrollLeft:Le.scrollLeft:Qe&&1==(0,yn._i)()?J==le?Le.scrollLeft+Le.scrollWidth-Le.clientWidth:-Le.scrollLeft:J==le?Le.scrollLeft:Le.scrollWidth-Le.clientWidth-Le.scrollLeft}}return R.\u0275fac=function(J){return new(J||R)(l.Y36(l.SBq),l.Y36(On),l.Y36(l.R0b),l.Y36(Ei.Is,8))},R.\u0275dir=l.lG2({type:R,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),R})(),fi=(()=>{class R{constructor(J,le,Ae){this._platform=J,this._change=new G.x,this._changeListener=Le=>{this._change.next(Le)},this._document=Ae,le.runOutsideAngular(()=>{if(J.isBrowser){const Le=this._getWindow();Le.addEventListener("resize",this._changeListener),Le.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const J=this._getWindow();J.removeEventListener("resize",this._changeListener),J.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const J={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),J}getViewportRect(){const J=this.getViewportScrollPosition(),{width:le,height:Ae}=this.getViewportSize();return{top:J.top,left:J.left,bottom:J.top+Ae,right:J.left+le,height:Ae,width:le}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const J=this._document,le=this._getWindow(),Ae=J.documentElement,Le=Ae.getBoundingClientRect();return{top:-Le.top||J.body.scrollTop||le.scrollY||Ae.scrollTop||0,left:-Le.left||J.body.scrollLeft||le.scrollX||Ae.scrollLeft||0}}change(J=20){return J>0?this._change.pipe(Gn(J)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const J=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:J.innerWidth,height:J.innerHeight}:{width:0,height:0}}}return R.\u0275fac=function(J){return new(J||R)(l.LFG(yn.t4),l.LFG(l.R0b),l.LFG(gi.K0,8))},R.\u0275prov=l.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),he=(()=>{class R{}return R.\u0275fac=function(J){return new(J||R)},R.\u0275mod=l.oAB({type:R}),R.\u0275inj=l.cJS({}),R})(),k=(()=>{class R{}return R.\u0275fac=function(J){return new(J||R)},R.\u0275mod=l.oAB({type:R}),R.\u0275inj=l.cJS({imports:[Ei.vT,he,Ei.vT,he]}),R})()},6895:(Cn,gt,U)=>{"use strict";U.d(gt,{Do:()=>hn,ED:()=>Is,EM:()=>qa,HT:()=>qe,JF:()=>Zo,K0:()=>Ye,Mx:()=>Yr,NF:()=>ts,O5:()=>er,Ov:()=>js,PC:()=>Oo,RF:()=>Vs,S$:()=>wt,V_:()=>Ge,Ye:()=>At,b0:()=>_n,bD:()=>gs,ez:()=>la,mk:()=>Hi,n9:()=>ia,q:()=>G,sg:()=>Ao,tP:()=>fs,w_:()=>ke});var D=U(4650);let l=null;function G(){return l}function qe(j){l||(l=j)}class ke{}const Ye=new D.OlP("DocumentToken");let Re=(()=>{class j{historyGo(Z){throw new Error("Not implemented")}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=D.Yz7({token:j,factory:function(){return function pe(){return(0,D.LFG)(rt)}()},providedIn:"platform"}),j})();const Ge=new D.OlP("Location Initialized");let rt=(()=>{class j extends Re{constructor(Z){super(),this._doc=Z,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(Z){const ge=G().getGlobalEventTarget(this._doc,"window");return ge.addEventListener("popstate",Z,!1),()=>ge.removeEventListener("popstate",Z)}onHashChange(Z){const ge=G().getGlobalEventTarget(this._doc,"window");return ge.addEventListener("hashchange",Z,!1),()=>ge.removeEventListener("hashchange",Z)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(Z){this.location.pathname=Z}pushState(Z,ge,nt){Te()?this._history.pushState(Z,ge,nt):this.location.hash=nt}replaceState(Z,ge,nt){Te()?this._history.replaceState(Z,ge,nt):this.location.hash=nt}forward(){this._history.forward()}back(){this._history.back()}historyGo(Z=0){this._history.go(Z)}getState(){return this._history.state}}return j.\u0275fac=function(Z){return new(Z||j)(D.LFG(Ye))},j.\u0275prov=D.Yz7({token:j,factory:function(){return function ut(){return new rt((0,D.LFG)(Ye))}()},providedIn:"platform"}),j})();function Te(){return!!window.history.pushState}function lt(j,re){if(0==j.length)return re;if(0==re.length)return j;let Z=0;return j.endsWith("/")&&Z++,re.startsWith("/")&&Z++,2==Z?j+re.substring(1):1==Z?j+re:j+"/"+re}function We(j){const re=j.match(/#|\?|$/),Z=re&&re.index||j.length;return j.slice(0,Z-("/"===j[Z-1]?1:0))+j.slice(Z)}function Dt(j){return j&&"?"!==j[0]?"?"+j:j}let wt=(()=>{class j{historyGo(Z){throw new Error("Not implemented")}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275prov=D.Yz7({token:j,factory:function(){return(0,D.f3M)(_n)},providedIn:"root"}),j})();const Et=new D.OlP("appBaseHref");let _n=(()=>{class j extends wt{constructor(Z,ge){super(),this._platformLocation=Z,this._removeListenerFns=[],this._baseHref=ge??this._platformLocation.getBaseHrefFromDOM()??(0,D.f3M)(Ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Z){this._removeListenerFns.push(this._platformLocation.onPopState(Z),this._platformLocation.onHashChange(Z))}getBaseHref(){return this._baseHref}prepareExternalUrl(Z){return lt(this._baseHref,Z)}path(Z=!1){const ge=this._platformLocation.pathname+Dt(this._platformLocation.search),nt=this._platformLocation.hash;return nt&&Z?`${ge}${nt}`:ge}pushState(Z,ge,nt,Pt){const qt=this.prepareExternalUrl(nt+Dt(Pt));this._platformLocation.pushState(Z,ge,qt)}replaceState(Z,ge,nt,Pt){const qt=this.prepareExternalUrl(nt+Dt(Pt));this._platformLocation.replaceState(Z,ge,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Z=0){this._platformLocation.historyGo?.(Z)}}return j.\u0275fac=function(Z){return new(Z||j)(D.LFG(Re),D.LFG(Et,8))},j.\u0275prov=D.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),hn=(()=>{class j extends wt{constructor(Z,ge){super(),this._platformLocation=Z,this._baseHref="",this._removeListenerFns=[],null!=ge&&(this._baseHref=ge)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Z){this._removeListenerFns.push(this._platformLocation.onPopState(Z),this._platformLocation.onHashChange(Z))}getBaseHref(){return this._baseHref}path(Z=!1){let ge=this._platformLocation.hash;return null==ge&&(ge="#"),ge.length>0?ge.substring(1):ge}prepareExternalUrl(Z){const ge=lt(this._baseHref,Z);return ge.length>0?"#"+ge:ge}pushState(Z,ge,nt,Pt){let qt=this.prepareExternalUrl(nt+Dt(Pt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.pushState(Z,ge,qt)}replaceState(Z,ge,nt,Pt){let qt=this.prepareExternalUrl(nt+Dt(Pt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.replaceState(Z,ge,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Z=0){this._platformLocation.historyGo?.(Z)}}return j.\u0275fac=function(Z){return new(Z||j)(D.LFG(Re),D.LFG(Et,8))},j.\u0275prov=D.Yz7({token:j,factory:j.\u0275fac}),j})(),At=(()=>{class j{constructor(Z){this._subject=new D.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Z;const ge=this._locationStrategy.getBaseHref();this._baseHref=We(Yt(ge)),this._locationStrategy.onPopState(nt=>{this._subject.emit({url:this.path(!0),pop:!0,state:nt.state,type:nt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(Z=!1){return this.normalize(this._locationStrategy.path(Z))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Z,ge=""){return this.path()==this.normalize(Z+Dt(ge))}normalize(Z){return j.stripTrailingSlash(function Ze(j,re){return j&&re.startsWith(j)?re.substring(j.length):re}(this._baseHref,Yt(Z)))}prepareExternalUrl(Z){return Z&&"/"!==Z[0]&&(Z="/"+Z),this._locationStrategy.prepareExternalUrl(Z)}go(Z,ge="",nt=null){this._locationStrategy.pushState(nt,"",Z,ge),this._notifyUrlChangeListeners(this.prepareExternalUrl(Z+Dt(ge)),nt)}replaceState(Z,ge="",nt=null){this._locationStrategy.replaceState(nt,"",Z,ge),this._notifyUrlChangeListeners(this.prepareExternalUrl(Z+Dt(ge)),nt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Z=0){this._locationStrategy.historyGo?.(Z)}onUrlChange(Z){return this._urlChangeListeners.push(Z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ge=>{this._notifyUrlChangeListeners(ge.url,ge.state)})),()=>{const ge=this._urlChangeListeners.indexOf(Z);this._urlChangeListeners.splice(ge,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Z="",ge){this._urlChangeListeners.forEach(nt=>nt(Z,ge))}subscribe(Z,ge,nt){return this._subject.subscribe({next:Z,error:ge,complete:nt})}}return j.normalizeQueryParams=Dt,j.joinWithSlash=lt,j.stripTrailingSlash=We,j.\u0275fac=function(Z){return new(Z||j)(D.LFG(wt))},j.\u0275prov=D.Yz7({token:j,factory:function(){return function Pe(){return new At((0,D.LFG)(wt))}()},providedIn:"root"}),j})();function Yt(j){return j.replace(/\/index.html$/,"")}function Yr(j,re){re=encodeURIComponent(re);for(const Z of j.split(";")){const ge=Z.indexOf("="),[nt,Pt]=-1==ge?[Z,""]:[Z.slice(0,ge),Z.slice(ge+1)];if(nt.trim()===re)return decodeURIComponent(Pt)}return null}let Hi=(()=>{class j{constructor(Z,ge,nt,Pt){this._iterableDiffers=Z,this._keyValueDiffers=ge,this._ngEl=nt,this._renderer=Pt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(Z){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof Z?Z.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(Z){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof Z?Z.split(/\s+/):Z,this._rawClass&&((0,D.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const Z=this._iterableDiffer.diff(this._rawClass);Z&&this._applyIterableChanges(Z)}else if(this._keyValueDiffer){const Z=this._keyValueDiffer.diff(this._rawClass);Z&&this._applyKeyValueChanges(Z)}}_applyKeyValueChanges(Z){Z.forEachAddedItem(ge=>this._toggleClass(ge.key,ge.currentValue)),Z.forEachChangedItem(ge=>this._toggleClass(ge.key,ge.currentValue)),Z.forEachRemovedItem(ge=>{ge.previousValue&&this._toggleClass(ge.key,!1)})}_applyIterableChanges(Z){Z.forEachAddedItem(ge=>{if("string"!=typeof ge.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,D.AaK)(ge.item)}`);this._toggleClass(ge.item,!0)}),Z.forEachRemovedItem(ge=>this._toggleClass(ge.item,!1))}_applyClasses(Z){Z&&(Array.isArray(Z)||Z instanceof Set?Z.forEach(ge=>this._toggleClass(ge,!0)):Object.keys(Z).forEach(ge=>this._toggleClass(ge,!!Z[ge])))}_removeClasses(Z){Z&&(Array.isArray(Z)||Z instanceof Set?Z.forEach(ge=>this._toggleClass(ge,!1)):Object.keys(Z).forEach(ge=>this._toggleClass(ge,!1)))}_toggleClass(Z,ge){(Z=Z.trim())&&Z.split(/\s+/g).forEach(nt=>{ge?this._renderer.addClass(this._ngEl.nativeElement,nt):this._renderer.removeClass(this._ngEl.nativeElement,nt)})}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.ZZ4),D.Y36(D.aQg),D.Y36(D.SBq),D.Y36(D.Qsj))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),j})();class Go{constructor(re,Z,ge,nt){this.$implicit=re,this.ngForOf=Z,this.index=ge,this.count=nt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ao=(()=>{class j{constructor(Z,ge,nt){this._viewContainer=Z,this._template=ge,this._differs=nt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(Z){this._ngForOf=Z,this._ngForOfDirty=!0}set ngForTrackBy(Z){this._trackByFn=Z}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(Z){Z&&(this._template=Z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Z=this._ngForOf;!this._differ&&Z&&(this._differ=this._differs.find(Z).create(this.ngForTrackBy))}if(this._differ){const Z=this._differ.diff(this._ngForOf);Z&&this._applyChanges(Z)}}_applyChanges(Z){const ge=this._viewContainer;Z.forEachOperation((nt,Pt,qt)=>{if(null==nt.previousIndex)ge.createEmbeddedView(this._template,new Go(nt.item,this._ngForOf,-1,-1),null===qt?void 0:qt);else if(null==qt)ge.remove(null===Pt?void 0:Pt);else if(null!==Pt){const Zn=ge.get(Pt);ge.move(Zn,qt),xo(Zn,nt)}});for(let nt=0,Pt=ge.length;nt<Pt;nt++){const Zn=ge.get(nt).context;Zn.index=nt,Zn.count=Pt,Zn.ngForOf=this._ngForOf}Z.forEachIdentityChange(nt=>{xo(ge.get(nt.currentIndex),nt)})}static ngTemplateContextGuard(Z,ge){return!0}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),j})();function xo(j,re){j.context.$implicit=re.item}let er=(()=>{class j{constructor(Z,ge){this._viewContainer=Z,this._context=new po,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ge}set ngIf(Z){this._context.$implicit=this._context.ngIf=Z,this._updateView()}set ngIfThen(Z){gr("ngIfThen",Z),this._thenTemplateRef=Z,this._thenViewRef=null,this._updateView()}set ngIfElse(Z){gr("ngIfElse",Z),this._elseTemplateRef=Z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Z,ge){return!0}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.s_b),D.Y36(D.Rgc))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),j})();class po{constructor(){this.$implicit=null,this.ngIf=null}}function gr(j,re){if(re&&!re.createEmbeddedView)throw new Error(`${j} must be a TemplateRef, but received '${(0,D.AaK)(re)}'.`)}class ro{constructor(re,Z){this._viewContainerRef=re,this._templateRef=Z,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(re){re&&!this._created?this.create():!re&&this._created&&this.destroy()}}let Vs=(()=>{class j{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(Z){this._ngSwitch=Z,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(Z){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(Z)}_matchCase(Z){const ge=Z==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ge,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ge}_updateDefaultCases(Z){if(this._defaultViews&&Z!==this._defaultUsed){this._defaultUsed=Z;for(let ge=0;ge<this._defaultViews.length;ge++)this._defaultViews[ge].enforceState(Z)}}}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275dir=D.lG2({type:j,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),j})(),ia=(()=>{class j{constructor(Z,ge,nt){this.ngSwitch=nt,nt._addCase(),this._view=new ro(Z,ge)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(Vs,9))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),j})(),Is=(()=>{class j{constructor(Z,ge,nt){nt._addDefault(new ro(Z,ge))}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(Vs,9))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngSwitchDefault",""]],standalone:!0}),j})(),Oo=(()=>{class j{constructor(Z,ge,nt){this._ngEl=Z,this._differs=ge,this._renderer=nt,this._ngStyle=null,this._differ=null}set ngStyle(Z){this._ngStyle=Z,!this._differ&&Z&&(this._differ=this._differs.find(Z).create())}ngDoCheck(){if(this._differ){const Z=this._differ.diff(this._ngStyle);Z&&this._applyChanges(Z)}}_setStyle(Z,ge){const[nt,Pt]=Z.split("."),qt=-1===nt.indexOf("-")?void 0:D.JOm.DashCase;null!=ge?this._renderer.setStyle(this._ngEl.nativeElement,nt,Pt?`${ge}${Pt}`:ge,qt):this._renderer.removeStyle(this._ngEl.nativeElement,nt,qt)}_applyChanges(Z){Z.forEachRemovedItem(ge=>this._setStyle(ge.key,null)),Z.forEachAddedItem(ge=>this._setStyle(ge.key,ge.currentValue)),Z.forEachChangedItem(ge=>this._setStyle(ge.key,ge.currentValue))}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.SBq),D.Y36(D.aQg),D.Y36(D.Qsj))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),j})(),fs=(()=>{class j{constructor(Z){this._viewContainerRef=Z,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Z){if(Z.ngTemplateOutlet||Z.ngTemplateOutletInjector){const ge=this._viewContainerRef;if(this._viewRef&&ge.remove(ge.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:nt,ngTemplateOutletContext:Pt,ngTemplateOutletInjector:qt}=this;this._viewRef=ge.createEmbeddedView(nt,Pt,qt?{injector:qt}:void 0)}else this._viewRef=null}else this._viewRef&&Z.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.s_b))},j.\u0275dir=D.lG2({type:j,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[D.TTD]}),j})();class Ea{createSubscription(re,Z){return re.subscribe({next:Z,error:ge=>{throw ge}})}dispose(re){re.unsubscribe()}}class ra{createSubscription(re,Z){return re.then(Z,ge=>{throw ge})}dispose(re){}}const ar=new ra,Us=new Ea;let js=(()=>{class j{constructor(Z){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=Z}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(Z){return this._obj?Z!==this._obj?(this._dispose(),this.transform(Z)):this._latestValue:(Z&&this._subscribe(Z),this._latestValue)}_subscribe(Z){this._obj=Z,this._strategy=this._selectStrategy(Z),this._subscription=this._strategy.createSubscription(Z,ge=>this._updateLatestValue(Z,ge))}_selectStrategy(Z){if((0,D.QGY)(Z))return ar;if((0,D.F4k)(Z))return Us;throw function fo(j,re){return new D.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(Z,ge){Z===this._obj&&(this._latestValue=ge,this._ref.markForCheck())}}return j.\u0275fac=function(Z){return new(Z||j)(D.Y36(D.sBO,16))},j.\u0275pipe=D.Yjl({name:"async",type:j,pure:!1,standalone:!0}),j})(),la=(()=>{class j{}return j.\u0275fac=function(Z){return new(Z||j)},j.\u0275mod=D.oAB({type:j}),j.\u0275inj=D.cJS({}),j})();const gs="browser";function ts(j){return j===gs}let qa=(()=>{class j{}return j.\u0275prov=(0,D.Yz7)({token:j,providedIn:"root",factory:()=>new Ka((0,D.LFG)(Ye),window)}),j})();class Ka{constructor(re,Z){this.document=re,this.window=Z,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(re){this.supportsScrolling()&&this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){if(!this.supportsScrolling())return;const Z=function mr(j,re){const Z=j.getElementById(re)||j.getElementsByName(re)[0];if(Z)return Z;if("function"==typeof j.createTreeWalker&&j.body&&(j.body.createShadowRoot||j.body.attachShadow)){const ge=j.createTreeWalker(j.body,NodeFilter.SHOW_ELEMENT);let nt=ge.currentNode;for(;nt;){const Pt=nt.shadowRoot;if(Pt){const qt=Pt.getElementById(re)||Pt.querySelector(`[name="${re}"]`);if(qt)return qt}nt=ge.nextNode()}}return null}(this.document,re);Z&&(this.scrollToElement(Z),Z.focus())}setHistoryScrollRestoration(re){if(this.supportScrollRestoration()){const Z=this.window.history;Z&&Z.scrollRestoration&&(Z.scrollRestoration=re)}}scrollToElement(re){const Z=re.getBoundingClientRect(),ge=Z.left+this.window.pageXOffset,nt=Z.top+this.window.pageYOffset,Pt=this.offset();this.window.scrollTo(ge-Pt[0],nt-Pt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const re=Ia(this.window.history)||Ia(Object.getPrototypeOf(this.window.history));return!(!re||!re.writable&&!re.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ia(j){return Object.getOwnPropertyDescriptor(j,"scrollRestoration")}class Zo{}},529:(Cn,gt,U)=>{"use strict";U.d(gt,{JF:()=>te,eN:()=>un});var D=U(6895),l=U(4650),G=U(9646),m=U(9751),qe=U(4351),ke=U(9300),Ye=U(4004);class Re{}class pe{}class Ge{constructor(R){this.normalizedNames=new Map,this.lazyUpdate=null,R?this.lazyInit="string"==typeof R?()=>{this.headers=new Map,R.split("\n").forEach(H=>{const J=H.indexOf(":");if(J>0){const le=H.slice(0,J),Ae=le.toLowerCase(),Le=H.slice(J+1).trim();this.maybeSetNormalizedName(le,Ae),this.headers.has(Ae)?this.headers.get(Ae).push(Le):this.headers.set(Ae,[Le])}})}:()=>{this.headers=new Map,Object.keys(R).forEach(H=>{let J=R[H];const le=H.toLowerCase();"string"==typeof J&&(J=[J]),J.length>0&&(this.headers.set(le,J),this.maybeSetNormalizedName(H,le))})}:this.headers=new Map}has(R){return this.init(),this.headers.has(R.toLowerCase())}get(R){this.init();const H=this.headers.get(R.toLowerCase());return H&&H.length>0?H[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(R){return this.init(),this.headers.get(R.toLowerCase())||null}append(R,H){return this.clone({name:R,value:H,op:"a"})}set(R,H){return this.clone({name:R,value:H,op:"s"})}delete(R,H){return this.clone({name:R,value:H,op:"d"})}maybeSetNormalizedName(R,H){this.normalizedNames.has(H)||this.normalizedNames.set(H,R)}init(){this.lazyInit&&(this.lazyInit instanceof Ge?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(R=>this.applyUpdate(R)),this.lazyUpdate=null))}copyFrom(R){R.init(),Array.from(R.headers.keys()).forEach(H=>{this.headers.set(H,R.headers.get(H)),this.normalizedNames.set(H,R.normalizedNames.get(H))})}clone(R){const H=new Ge;return H.lazyInit=this.lazyInit&&this.lazyInit instanceof Ge?this.lazyInit:this,H.lazyUpdate=(this.lazyUpdate||[]).concat([R]),H}applyUpdate(R){const H=R.name.toLowerCase();switch(R.op){case"a":case"s":let J=R.value;if("string"==typeof J&&(J=[J]),0===J.length)return;this.maybeSetNormalizedName(R.name,H);const le=("a"===R.op?this.headers.get(H):void 0)||[];le.push(...J),this.headers.set(H,le);break;case"d":const Ae=R.value;if(Ae){let Le=this.headers.get(H);if(!Le)return;Le=Le.filter(Qe=>-1===Ae.indexOf(Qe)),0===Le.length?(this.headers.delete(H),this.normalizedNames.delete(H)):this.headers.set(H,Le)}else this.headers.delete(H),this.normalizedNames.delete(H)}}forEach(R){this.init(),Array.from(this.normalizedNames.keys()).forEach(H=>R(this.normalizedNames.get(H),this.headers.get(H)))}}class Te{encodeKey(R){return Dt(R)}encodeValue(R){return Dt(R)}decodeKey(R){return decodeURIComponent(R)}decodeValue(R){return decodeURIComponent(R)}}const lt=/%(\d[a-f0-9])/gi,We={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Dt(k){return encodeURIComponent(k).replace(lt,(R,H)=>We[H]??R)}function wt(k){return`${k}`}class Et{constructor(R={}){if(this.updates=null,this.cloneFrom=null,this.encoder=R.encoder||new Te,R.fromString){if(R.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ut(k,R){const H=new Map;return k.length>0&&k.replace(/^\?/,"").split("&").forEach(le=>{const Ae=le.indexOf("="),[Le,Qe]=-1==Ae?[R.decodeKey(le),""]:[R.decodeKey(le.slice(0,Ae)),R.decodeValue(le.slice(Ae+1))],ot=H.get(Le)||[];ot.push(Qe),H.set(Le,ot)}),H}(R.fromString,this.encoder)}else R.fromObject?(this.map=new Map,Object.keys(R.fromObject).forEach(H=>{const J=R.fromObject[H],le=Array.isArray(J)?J.map(wt):[wt(J)];this.map.set(H,le)})):this.map=null}has(R){return this.init(),this.map.has(R)}get(R){this.init();const H=this.map.get(R);return H?H[0]:null}getAll(R){return this.init(),this.map.get(R)||null}keys(){return this.init(),Array.from(this.map.keys())}append(R,H){return this.clone({param:R,value:H,op:"a"})}appendAll(R){const H=[];return Object.keys(R).forEach(J=>{const le=R[J];Array.isArray(le)?le.forEach(Ae=>{H.push({param:J,value:Ae,op:"a"})}):H.push({param:J,value:le,op:"a"})}),this.clone(H)}set(R,H){return this.clone({param:R,value:H,op:"s"})}delete(R,H){return this.clone({param:R,value:H,op:"d"})}toString(){return this.init(),this.keys().map(R=>{const H=this.encoder.encodeKey(R);return this.map.get(R).map(J=>H+"="+this.encoder.encodeValue(J)).join("&")}).filter(R=>""!==R).join("&")}clone(R){const H=new Et({encoder:this.encoder});return H.cloneFrom=this.cloneFrom||this,H.updates=(this.updates||[]).concat(R),H}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(R=>this.map.set(R,this.cloneFrom.map.get(R))),this.updates.forEach(R=>{switch(R.op){case"a":case"s":const H=("a"===R.op?this.map.get(R.param):void 0)||[];H.push(wt(R.value)),this.map.set(R.param,H);break;case"d":if(void 0===R.value){this.map.delete(R.param);break}{let J=this.map.get(R.param)||[];const le=J.indexOf(wt(R.value));-1!==le&&J.splice(le,1),J.length>0?this.map.set(R.param,J):this.map.delete(R.param)}}}),this.cloneFrom=this.updates=null)}}class hn{constructor(){this.map=new Map}set(R,H){return this.map.set(R,H),this}get(R){return this.map.has(R)||this.map.set(R,R.defaultValue()),this.map.get(R)}delete(R){return this.map.delete(R),this}has(R){return this.map.has(R)}keys(){return this.map.keys()}}function Pe(k){return typeof ArrayBuffer<"u"&&k instanceof ArrayBuffer}function Ze(k){return typeof Blob<"u"&&k instanceof Blob}function Yt(k){return typeof FormData<"u"&&k instanceof FormData}class Ut{constructor(R,H,J,le){let Ae;if(this.url=H,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=R.toUpperCase(),function At(k){switch(k){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||le?(this.body=void 0!==J?J:null,Ae=le):Ae=J,Ae&&(this.reportProgress=!!Ae.reportProgress,this.withCredentials=!!Ae.withCredentials,Ae.responseType&&(this.responseType=Ae.responseType),Ae.headers&&(this.headers=Ae.headers),Ae.context&&(this.context=Ae.context),Ae.params&&(this.params=Ae.params)),this.headers||(this.headers=new Ge),this.context||(this.context=new hn),this.params){const Le=this.params.toString();if(0===Le.length)this.urlWithParams=H;else{const Qe=H.indexOf("?");this.urlWithParams=H+(-1===Qe?"?":Qe<H.length-1?"&":"")+Le}}else this.params=new Et,this.urlWithParams=H}serializeBody(){return null===this.body?null:Pe(this.body)||Ze(this.body)||Yt(this.body)||function Ot(k){return typeof URLSearchParams<"u"&&k instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Et?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Yt(this.body)?null:Ze(this.body)?this.body.type||null:Pe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Et?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(R={}){const H=R.method||this.method,J=R.url||this.url,le=R.responseType||this.responseType,Ae=void 0!==R.body?R.body:this.body,Le=void 0!==R.withCredentials?R.withCredentials:this.withCredentials,Qe=void 0!==R.reportProgress?R.reportProgress:this.reportProgress;let ot=R.headers||this.headers,He=R.params||this.params;const dt=R.context??this.context;return void 0!==R.setHeaders&&(ot=Object.keys(R.setHeaders).reduce(($t,en)=>$t.set(en,R.setHeaders[en]),ot)),R.setParams&&(He=Object.keys(R.setParams).reduce(($t,en)=>$t.set(en,R.setParams[en]),He)),new Ut(H,J,Ae,{params:He,headers:ot,context:dt,reportProgress:Qe,responseType:le,withCredentials:Le})}}var tn=(()=>((tn=tn||{})[tn.Sent=0]="Sent",tn[tn.UploadProgress=1]="UploadProgress",tn[tn.ResponseHeader=2]="ResponseHeader",tn[tn.DownloadProgress=3]="DownloadProgress",tn[tn.Response=4]="Response",tn[tn.User=5]="User",tn))();class pt{constructor(R,H=200,J="OK"){this.headers=R.headers||new Ge,this.status=void 0!==R.status?R.status:H,this.statusText=R.statusText||J,this.url=R.url||null,this.ok=this.status>=200&&this.status<300}}class Xe extends pt{constructor(R={}){super(R),this.type=tn.ResponseHeader}clone(R={}){return new Xe({headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}class It extends pt{constructor(R={}){super(R),this.type=tn.Response,this.body=void 0!==R.body?R.body:null}clone(R={}){return new It({body:void 0!==R.body?R.body:this.body,headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}class St extends pt{constructor(R){super(R,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${R.url||"(unknown url)"}`:`Http failure response for ${R.url||"(unknown url)"}: ${R.status} ${R.statusText}`,this.error=R.error||null}}function pn(k,R){return{body:R,headers:k.headers,context:k.context,observe:k.observe,params:k.params,reportProgress:k.reportProgress,responseType:k.responseType,withCredentials:k.withCredentials}}let un=(()=>{class k{constructor(H){this.handler=H}request(H,J,le={}){let Ae;if(H instanceof Ut)Ae=H;else{let ot,He;ot=le.headers instanceof Ge?le.headers:new Ge(le.headers),le.params&&(He=le.params instanceof Et?le.params:new Et({fromObject:le.params})),Ae=new Ut(H,J,void 0!==le.body?le.body:null,{headers:ot,context:le.context,params:He,reportProgress:le.reportProgress,responseType:le.responseType||"json",withCredentials:le.withCredentials})}const Le=(0,G.of)(Ae).pipe((0,qe.b)(ot=>this.handler.handle(ot)));if(H instanceof Ut||"events"===le.observe)return Le;const Qe=Le.pipe((0,ke.h)(ot=>ot instanceof It));switch(le.observe||"body"){case"body":switch(Ae.responseType){case"arraybuffer":return Qe.pipe((0,Ye.U)(ot=>{if(null!==ot.body&&!(ot.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ot.body}));case"blob":return Qe.pipe((0,Ye.U)(ot=>{if(null!==ot.body&&!(ot.body instanceof Blob))throw new Error("Response is not a Blob.");return ot.body}));case"text":return Qe.pipe((0,Ye.U)(ot=>{if(null!==ot.body&&"string"!=typeof ot.body)throw new Error("Response is not a string.");return ot.body}));default:return Qe.pipe((0,Ye.U)(ot=>ot.body))}case"response":return Qe;default:throw new Error(`Unreachable: unhandled observe type ${le.observe}}`)}}delete(H,J={}){return this.request("DELETE",H,J)}get(H,J={}){return this.request("GET",H,J)}head(H,J={}){return this.request("HEAD",H,J)}jsonp(H,J){return this.request("JSONP",H,{params:(new Et).append(J,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(H,J={}){return this.request("OPTIONS",H,J)}patch(H,J,le={}){return this.request("PATCH",H,pn(le,J))}post(H,J,le={}){return this.request("POST",H,pn(le,J))}put(H,J,le={}){return this.request("PUT",H,pn(le,J))}}return k.\u0275fac=function(H){return new(H||k)(l.LFG(Re))},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac}),k})();class Gn{constructor(R,H){this.next=R,this.interceptor=H}handle(R){return this.interceptor.intercept(R,this.next)}}const di=new l.OlP("HTTP_INTERCEPTORS");let yi=(()=>{class k{intercept(H,J){return J.handle(H)}}return k.\u0275fac=function(H){return new(H||k)},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac}),k})();const mn=/^\)\]\}',?\n/;let Jn=(()=>{class k{constructor(H){this.xhrFactory=H}handle(H){if("JSONP"===H.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new m.y(J=>{const le=this.xhrFactory.build();if(le.open(H.method,H.urlWithParams),H.withCredentials&&(le.withCredentials=!0),H.headers.forEach((st,De)=>le.setRequestHeader(st,De.join(","))),H.headers.has("Accept")||le.setRequestHeader("Accept","application/json, text/plain, */*"),!H.headers.has("Content-Type")){const st=H.detectContentTypeHeader();null!==st&&le.setRequestHeader("Content-Type",st)}if(H.responseType){const st=H.responseType.toLowerCase();le.responseType="json"!==st?st:"text"}const Ae=H.serializeBody();let Le=null;const Qe=()=>{if(null!==Le)return Le;const st=le.statusText||"OK",De=new Ge(le.getAllResponseHeaders()),Fe=function On(k){return"responseURL"in k&&k.responseURL?k.responseURL:/^X-Request-URL:/m.test(k.getAllResponseHeaders())?k.getResponseHeader("X-Request-URL"):null}(le)||H.url;return Le=new Xe({headers:De,status:le.status,statusText:st,url:Fe}),Le},ot=()=>{let{headers:st,status:De,statusText:Fe,url:Se}=Qe(),Ne=null;204!==De&&(Ne=typeof le.response>"u"?le.responseText:le.response),0===De&&(De=Ne?200:0);let we=De>=200&&De<300;if("json"===H.responseType&&"string"==typeof Ne){const $e=Ne;Ne=Ne.replace(mn,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(at){Ne=$e,we&&(we=!1,Ne={error:at,text:Ne})}}we?(J.next(new It({body:Ne,headers:st,status:De,statusText:Fe,url:Se||void 0})),J.complete()):J.error(new St({error:Ne,headers:st,status:De,statusText:Fe,url:Se||void 0}))},He=st=>{const{url:De}=Qe(),Fe=new St({error:st,status:le.status||0,statusText:le.statusText||"Unknown Error",url:De||void 0});J.error(Fe)};let dt=!1;const $t=st=>{dt||(J.next(Qe()),dt=!0);let De={type:tn.DownloadProgress,loaded:st.loaded};st.lengthComputable&&(De.total=st.total),"text"===H.responseType&&!!le.responseText&&(De.partialText=le.responseText),J.next(De)},en=st=>{let De={type:tn.UploadProgress,loaded:st.loaded};st.lengthComputable&&(De.total=st.total),J.next(De)};return le.addEventListener("load",ot),le.addEventListener("error",He),le.addEventListener("timeout",He),le.addEventListener("abort",He),H.reportProgress&&(le.addEventListener("progress",$t),null!==Ae&&le.upload&&le.upload.addEventListener("progress",en)),le.send(Ae),J.next({type:tn.Sent}),()=>{le.removeEventListener("error",He),le.removeEventListener("abort",He),le.removeEventListener("load",ot),le.removeEventListener("timeout",He),H.reportProgress&&(le.removeEventListener("progress",$t),null!==Ae&&le.upload&&le.upload.removeEventListener("progress",en)),le.readyState!==le.DONE&&le.abort()}})}}return k.\u0275fac=function(H){return new(H||k)(l.LFG(D.JF))},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac}),k})();const oi=new l.OlP("XSRF_COOKIE_NAME"),fi=new l.OlP("XSRF_HEADER_NAME");class $i{}let Qn=(()=>{class k{constructor(H,J,le){this.doc=H,this.platform=J,this.cookieName=le,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const H=this.doc.cookie||"";return H!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,D.Mx)(H,this.cookieName),this.lastCookieString=H),this.lastToken}}return k.\u0275fac=function(H){return new(H||k)(l.LFG(D.K0),l.LFG(l.Lbi),l.LFG(oi))},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac}),k})(),Di=(()=>{class k{constructor(H,J){this.tokenService=H,this.headerName=J}intercept(H,J){const le=H.url.toLowerCase();if("GET"===H.method||"HEAD"===H.method||le.startsWith("http://")||le.startsWith("https://"))return J.handle(H);const Ae=this.tokenService.getToken();return null!==Ae&&!H.headers.has(this.headerName)&&(H=H.clone({headers:H.headers.set(this.headerName,Ae)})),J.handle(H)}}return k.\u0275fac=function(H){return new(H||k)(l.LFG($i),l.LFG(fi))},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac}),k})(),xn=(()=>{class k{constructor(H,J){this.backend=H,this.injector=J,this.chain=null}handle(H){if(null===this.chain){const J=this.injector.get(di,[]);this.chain=J.reduceRight((le,Ae)=>new Gn(le,Ae),this.backend)}return this.chain.handle(H)}}return k.\u0275fac=function(H){return new(H||k)(l.LFG(pe),l.LFG(l.zs3))},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac}),k})(),Y=(()=>{class k{static disable(){return{ngModule:k,providers:[{provide:Di,useClass:yi}]}}static withOptions(H={}){return{ngModule:k,providers:[H.cookieName?{provide:oi,useValue:H.cookieName}:[],H.headerName?{provide:fi,useValue:H.headerName}:[]]}}}return k.\u0275fac=function(H){return new(H||k)},k.\u0275mod=l.oAB({type:k}),k.\u0275inj=l.cJS({providers:[Di,{provide:di,useExisting:Di,multi:!0},{provide:$i,useClass:Qn},{provide:oi,useValue:"XSRF-TOKEN"},{provide:fi,useValue:"X-XSRF-TOKEN"}]}),k})(),te=(()=>{class k{}return k.\u0275fac=function(H){return new(H||k)},k.\u0275mod=l.oAB({type:k}),k.\u0275inj=l.cJS({providers:[un,{provide:Re,useClass:xn},Jn,{provide:pe,useExisting:Jn}],imports:[Y.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),k})()},4650:(Cn,gt,U)=>{"use strict";U.d(gt,{$8M:()=>Fa,$Z:()=>ff,AFp:()=>Kf,ALo:()=>vv,AaK:()=>Re,Akn:()=>ll,BQk:()=>tp,CHM:()=>Pa,CRH:()=>Av,CZH:()=>qf,CqO:()=>N_,D6c:()=>_C,DdM:()=>cv,EJc:()=>bw,EiD:()=>Ap,EpF:()=>L_,F$t:()=>H_,F4k:()=>F_,FYo:()=>vl,FiY:()=>bs,G48:()=>Ss,Gf:()=>Tv,GfV:()=>Yc,GkF:()=>Tf,Gpc:()=>rt,Gre:()=>by,Hsn:()=>$_,Ikx:()=>lg,JOm:()=>Xs,JVY:()=>nm,Jf7:()=>Sd,KtG:()=>Xa,L6k:()=>im,LAX:()=>ad,LFG:()=>Dr,LSH:()=>_h,Lbi:()=>Ng,Lck:()=>Ex,MAs:()=>Ym,MMx:()=>Lf,NdJ:()=>Qm,O4$:()=>Zn,OlP:()=>A,Oqu:()=>sg,PXZ:()=>bi,Q6J:()=>k_,QGY:()=>If,QP$:()=>zt,QbO:()=>yw,Qsj:()=>qc,R0b:()=>El,RDi:()=>Qf,Rgc:()=>up,SBq:()=>Ic,Sil:()=>xw,Suo:()=>Iv,TTD:()=>ms,TgZ:()=>Mf,Tol:()=>oy,Udp:()=>np,VKq:()=>uv,WFA:()=>eg,WLB:()=>dv,XFs:()=>xn,Xpm:()=>Se,Xts:()=>yh,Y36:()=>Oc,YKP:()=>bg,YNc:()=>O_,Yjl:()=>Gi,Yz7:()=>bn,Z0I:()=>fn,ZZ4:()=>Pw,_Bn:()=>vg,_UZ:()=>Sf,_Vd:()=>Wc,_c5:()=>mC,_uU:()=>hy,aQg:()=>Ow,c2e:()=>vw,cJS:()=>_t,cg1:()=>ug,d8E:()=>cg,dDg:()=>F,dqk:()=>le,eBb:()=>wu,eFA:()=>na,ekj:()=>rg,eoX:()=>se,f3M:()=>pu,g9A:()=>Qv,h0i:()=>du,hGG:()=>gC,hij:()=>Pf,iGM:()=>Sv,ifc:()=>J,ip1:()=>Lg,jDz:()=>Mx,kEZ:()=>Rx,kL8:()=>ky,kcU:()=>xi,lG2:()=>jn,lcZ:()=>bv,lqb:()=>Tc,lri:()=>p,mCW:()=>ld,n5z:()=>ec,n_E:()=>zf,oAB:()=>at,oJD:()=>fd,oxw:()=>U_,pB0:()=>Ep,q3G:()=>to,qLn:()=>eu,qOj:()=>Zm,qZA:()=>Qu,qzn:()=>rc,rFY:()=>pv,rWj:()=>M,sBO:()=>oh,sIi:()=>Xh,s_b:()=>Uf,soG:()=>Yf,tb:()=>Bg,tp0:()=>Vc,uIk:()=>Df,vHH:()=>We,vpe:()=>mc,wAp:()=>Si,xp6:()=>br,ynx:()=>Kd,z2F:()=>gc,z3N:()=>yo,zSh:()=>gd,zs3:()=>co});var D=U(7579),l=U(727),G=U(9751),m=U(6451),qe=U(3099);function ke(t){for(let i in t)if(t[i]===ke)return i;throw Error("Could not find renamed property on target object.")}function Ye(t,i){for(const s in i)i.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=i[s])}function Re(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Re).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function pe(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const Ge=ke({__forward_ref__:ke});function rt(t){return t.__forward_ref__=rt,t.toString=function(){return Re(this())},t}function Te(t){return ut(t)?t():t}function ut(t){return"function"==typeof t&&t.hasOwnProperty(Ge)&&t.__forward_ref__===rt}class We extends Error{constructor(i,s){super(function Dt(t,i){return`NG0${Math.abs(t)}${i?": "+i.trim():""}`}(i,s)),this.code=i}}function wt(t){return"string"==typeof t?t:null==t?"":String(t)}function Pe(t,i){throw new We(-201,!1)}function yi(t,i){null==t&&function yn(t,i,s,d){throw new Error(`ASSERTION ERROR: ${t}`+(null==d?"":` [Expected=> ${s} ${d} ${i} <=Actual]`))}(i,t,null,"!=")}function bn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _t(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nt(t){return mn(t,fi)||mn(t,Qn)}function fn(t){return null!==Nt(t)}function mn(t,i){return t.hasOwnProperty(i)?t[i]:null}function oi(t){return t&&(t.hasOwnProperty($i)||t.hasOwnProperty(Di))?t[$i]:null}const fi=ke({\u0275prov:ke}),$i=ke({\u0275inj:ke}),Qn=ke({ngInjectableDef:ke}),Di=ke({ngInjectorDef:ke});var xn=(()=>((xn=xn||{})[xn.Default=0]="Default",xn[xn.Host=1]="Host",xn[xn.Self=2]="Self",xn[xn.SkipSelf=4]="SkipSelf",xn[xn.Optional=8]="Optional",xn))();let Wn;function Y(t){const i=Wn;return Wn=t,i}function te(t,i,s){const d=Nt(t);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:s&xn.Optional?null:void 0!==i?i:void Pe(Re(t))}function he(t){return{toString:t}.toString()}var k=(()=>((k=k||{})[k.OnPush=0]="OnPush",k[k.Default=1]="Default",k))(),J=(()=>{return(t=J||(J={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",J;var t})();const le=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qe={},ot=[],He=ke({\u0275cmp:ke}),dt=ke({\u0275dir:ke}),$t=ke({\u0275pipe:ke}),en=ke({\u0275mod:ke}),st=ke({\u0275fac:ke}),De=ke({__NG_ELEMENT_ID__:ke});let Fe=0;function Se(t){return he(()=>{const s=!0===t.standalone,d={},_={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===k.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||ot,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||J.Emulated,id:"c"+Fe++,styles:t.styles||ot,_:null,setInput:null,schemas:t.schemas||null,tView:null},x=t.dependencies,T=t.features;return _.inputs=An(t.inputs,d),_.outputs=An(t.outputs),T&&T.forEach(L=>L(_)),_.directiveDefs=x?()=>("function"==typeof x?x():x).map(we).filter($e):null,_.pipeDefs=x?()=>("function"==typeof x?x():x).map(Tt).filter($e):null,_})}function we(t){return ni(t)||yt(t)}function $e(t){return null!==t}function at(t){return he(()=>({type:t.type,bootstrap:t.bootstrap||ot,declarations:t.declarations||ot,imports:t.imports||ot,exports:t.exports||ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function An(t,i){if(null==t)return Qe;const s={};for(const d in t)if(t.hasOwnProperty(d)){let _=t[d],x=_;Array.isArray(_)&&(x=_[1],_=_[0]),s[_]=d,i&&(i[_]=x)}return s}const jn=Se;function Gi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ni(t){return t[He]||null}function yt(t){return t[dt]||null}function Tt(t){return t[$t]||null}function zt(t){const i=ni(t)||yt(t)||Tt(t);return null!==i&&i.standalone}function Vt(t,i){const s=t[en]||null;if(!s&&!0===i)throw new Error(`Type ${Re(t)} does not have '\u0275mod' property.`);return s}function gr(t){return Array.isArray(t)&&"object"==typeof t[1]}function ro(t){return Array.isArray(t)&&!0===t[1]}function Vs(t){return 0!=(8&t.flags)}function ia(t){return 2==(2&t.flags)}function Is(t){return 1==(1&t.flags)}function kr(t){return null!==t.template}function Po(t){return 0!=(256&t[2])}function Lo(t,i){return t.hasOwnProperty(st)?t[st]:null}class es{constructor(i,s,d){this.previousValue=i,this.currentValue=s,this.firstChange=d}isFirstChange(){return this.firstChange}}function ms(){return Ma}function Ma(t){return t.type.prototype.ngOnChanges&&(t.setInput=ks),Ir}function Ir(){const t=Hs(this),i=t?.current;if(i){const s=t.previous;if(s===Qe)t.previous=i;else for(let d in i)s[d]=i[d];t.current=null,this.ngOnChanges(i)}}function ks(t,i,s,d){const _=Hs(t)||function la(t,i){return t[aa]=i}(t,{previous:Qe,current:null}),x=_.current||(_.current={}),T=_.previous,L=this.declaredInputs[s],$=T[L];x[L]=new es($&&$.currentValue,i,T===Qe),t[d]=i}ms.ngInherit=!0;const aa="__ngSimpleChanges__";function Hs(t){return t[aa]||null}function xr(t){for(;Array.isArray(t);)t=t[0];return t}function Ia(t,i){return xr(i[t])}function mr(t,i){return xr(i[t.index])}function Zo(t,i){return t.data[i]}function Co(t,i){return t[i]}function qi(t,i){const s=i[t];return gr(s)?s:s[0]}function oo(t){return 64==(64&t[2])}function _r(t,i){return null==i?null:t[i]}function _s(t){t[18]=0}function so(t,i){t[5]+=i;let s=t,d=t[3];for(;null!==d&&(1===i&&1===s[5]||-1===i&&0===s[5]);)d[5]+=i,s=d,d=d[3]}const Kn={lFrame:Al(null),bindingsEnabled:!0};function Hr(){return Kn.bindingsEnabled}function dn(){return Kn.lFrame.lView}function Oi(){return Kn.lFrame.tView}function Pa(t){return Kn.lFrame.contextLView=t,t[8]}function Xa(t){return Kn.lFrame.contextLView=null,t}function wr(){let t=ee();for(;null!==t&&64===t.type;)t=t.parent;return t}function ee(){return Kn.lFrame.currentTNode}function W(t,i){const s=Kn.lFrame;s.currentTNode=t,s.isParent=i}function fe(){return Kn.lFrame.isParent}function Wt(){Kn.lFrame.isParent=!1}function ur(){const t=Kn.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function No(){return Kn.lFrame.bindingIndex++}function rs(t){const i=Kn.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,s}function Xl(t,i){const s=Kn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ws(i)}function Ws(t){Kn.lFrame.currentDirectiveIndex=t}function ys(t){const i=Kn.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}function qs(){return Kn.lFrame.currentQueryIndex}function Ja(t){Kn.lFrame.currentQueryIndex=t}function ka(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[6]:null}function Ra(t,i,s){if(s&xn.SkipSelf){let _=i,x=t;for(;!(_=_.parent,null!==_||s&xn.Host||(_=ka(x),null===_||(x=x[15],10&_.type))););if(null===_)return!1;i=_,t=x}const d=Kn.lFrame=pl();return d.currentTNode=i,d.lView=t,!0}function Il(t){const i=pl(),s=t[1];Kn.lFrame=i,i.currentTNode=s.firstChild,i.lView=t,i.tView=s,i.contextLView=t,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function pl(){const t=Kn.lFrame,i=null===t?null:t.child;return null===i?Al(t):i}function Al(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function $r(){const t=Kn.lFrame;return Kn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const j=$r;function re(){const t=$r();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nt(){return Kn.lFrame.selectedIndex}function Pt(t){Kn.lFrame.selectedIndex=t}function qt(){const t=Kn.lFrame;return Zo(t.tView,t.selectedIndex)}function Zn(){Kn.lFrame.currentNamespace="svg"}function xi(){!function vi(){Kn.lFrame.currentNamespace=null}()}function wi(t,i){for(let s=i.directiveStart,d=i.directiveEnd;s<d;s++){const x=t.data[s].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:L,ngAfterViewInit:$,ngAfterViewChecked:ne,ngOnDestroy:ve}=x;T&&(t.contentHooks||(t.contentHooks=[])).push(-s,T),L&&((t.contentHooks||(t.contentHooks=[])).push(s,L),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,L)),$&&(t.viewHooks||(t.viewHooks=[])).push(-s,$),ne&&((t.viewHooks||(t.viewHooks=[])).push(s,ne),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,ne)),null!=ve&&(t.destroyHooks||(t.destroyHooks=[])).push(s,ve)}}function Ai(t,i,s){Br(t,i,3,s)}function Eo(t,i,s,d){(3&t[2])===s&&Br(t,i,s,d)}function Do(t,i){let s=t[2];(3&s)===i&&(s&=2047,s+=1,t[2]=s)}function Br(t,i,s,d){const x=d??-1,T=i.length-1;let L=0;for(let $=void 0!==d?65535&t[18]:0;$<T;$++)if("number"==typeof i[$+1]){if(L=i[$],null!=d&&L>=d)break}else i[$]<0&&(t[18]+=65536),(L<x||-1==x)&&(Xr(t,s,i,$),t[18]=(4294901760&t[18])+$+2),$++}function Xr(t,i,s,d){const _=s[d]<0,x=s[d+1],L=t[_?-s[d]:s[d]];if(_){if(t[2]>>11<t[18]>>16&&(3&t[2])===i){t[2]+=2048;try{x.call(L)}finally{}}}else try{x.call(L)}finally{}}class Mn{constructor(i,s,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=d}}function fl(t,i,s){let d=0;for(;d<s.length;){const _=s[d];if("number"==typeof _){if(0!==_)break;d++;const x=s[d++],T=s[d++],L=s[d++];t.setAttribute(i,T,L,x)}else{const x=_,T=s[++d];bc(x)?t.setProperty(i,x,T):t.setAttribute(i,x,T),d++}}return d}function vc(t){return 3===t||4===t||6===t}function bc(t){return 64===t.charCodeAt(0)}function ca(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let s=-1;for(let d=0;d<i.length;d++){const _=i[d];"number"==typeof _?s=_:0===s||Nc(t,s,_,null,-1===s||2===s?i[++d]:null)}}return t}function Nc(t,i,s,d,_){let x=0,T=t.length;if(-1===i)T=-1;else for(;x<t.length;){const L=t[x++];if("number"==typeof L){if(L===i){T=-1;break}if(L>i){T=x-1;break}}}for(;x<t.length;){const L=t[x];if("number"==typeof L)break;if(L===s){if(null===d)return void(null!==_&&(t[x+1]=_));if(d===t[x+1])return void(t[x+2]=_)}x++,null!==d&&x++,null!==_&&x++}-1!==T&&(t.splice(T,0,i),x=T+1),t.splice(x++,0,s),null!==d&&t.splice(x++,0,d),null!==_&&t.splice(x++,0,_)}function Pl(t){return-1!==t}function Wo(t){return 32767&t}function qo(t,i){let s=function ml(t){return t>>16}(t),d=i;for(;s>0;)d=d[15],s--;return d}let go=!0;function Bo(t){const i=go;return go=t,i}let La=0;const os={};function ir(t,i){const s=kl(t,i);if(-1!==s)return s;const d=i[1];d.firstCreatePass&&(t.injectorIndex=i.length,gl(d.data,t),gl(i,null),gl(d.blueprint,null));const _=ua(t,i),x=t.injectorIndex;if(Pl(_)){const T=Wo(_),L=qo(_,i),$=L[1].data;for(let ne=0;ne<8;ne++)i[x+ne]=L[T+ne]|$[T+ne]}return i[x+8]=_,x}function gl(t,i){t.push(0,0,0,0,0,0,0,0,i)}function kl(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function ua(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,d=null,_=i;for(;null!==_;){if(d=Rl(_),null===d)return-1;if(s++,_=_[15],-1!==d.injectorIndex)return d.injectorIndex|s<<16}return-1}function el(t,i,s){!function Ko(t,i,s){let d;"string"==typeof s?d=s.charCodeAt(0)||0:s.hasOwnProperty(De)&&(d=s[De]),null==d&&(d=s[De]=La++);const _=255&d;i.data[t+(_>>5)]|=1<<_}(t,i,s)}function wc(t,i,s){if(s&xn.Optional||void 0!==t)return t;Pe()}function Ls(t,i,s,d){if(s&xn.Optional&&void 0===d&&(d=null),0==(s&(xn.Self|xn.Host))){const _=t[9],x=Y(void 0);try{return _?_.get(i,d,s&xn.Optional):te(i,d,s&xn.Optional)}finally{Y(x)}}return wc(d,0,s)}function Pi(t,i,s,d=xn.Default,_){if(null!==t){if(1024&i[2]){const T=function lr(t,i,s,d,_){let x=t,T=i;for(;null!==x&&null!==T&&1024&T[2]&&!(256&T[2]);){const L=Yn(x,T,s,d|xn.Self,os);if(L!==os)return L;let $=x.parent;if(!$){const ne=T[21];if(ne){const ve=ne.get(s,os,d);if(ve!==os)return ve}$=Rl(T),T=T[15]}x=$}return _}(t,i,s,d,os);if(T!==os)return T}const x=Yn(t,i,s,d,os);if(x!==os)return x}return Ls(i,s,d,_)}function Yn(t,i,s,d,_){const x=function nl(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(De)?t[De]:void 0;return"number"==typeof i?i>=0?255&i:il:i}(s);if("function"==typeof x){if(!Ra(i,t,d))return d&xn.Host?wc(_,0,d):Ls(i,s,d,_);try{const T=x(d);if(null!=T||d&xn.Optional)return T;Pe()}finally{j()}}else if("number"==typeof x){let T=null,L=kl(t,i),$=-1,ne=d&xn.Host?i[16][6]:null;for((-1===L||d&xn.SkipSelf)&&($=-1===L?ua(t,i):i[L+8],-1!==$&&Fs(d,!1)?(T=i[1],L=Wo($),i=qo($,i)):L=-1);-1!==L;){const ve=i[1];if(dr(x,L,ve.data)){const ze=zn(L,i,s,T,d,ne);if(ze!==os)return ze}$=i[L+8],-1!==$&&Fs(d,i[1].data[L+8]===ne)&&dr(x,L,i)?(T=ve,L=Wo($),i=qo($,i)):L=-1}}return _}function zn(t,i,s,d,_,x){const T=i[1],L=T.data[t+8],ve=Ks(L,T,s,null==d?ia(L)&&go:d!=T&&0!=(3&L.type),_&xn.Host&&x===L);return null!==ve?da(i,T,ve,L):os}function Ks(t,i,s,d,_){const x=t.providerIndexes,T=i.data,L=1048575&x,$=t.directiveStart,ve=x>>20,ft=_?L+ve:t.directiveEnd;for(let Lt=d?L:L+ve;Lt<ft;Lt++){const cn=T[Lt];if(Lt<$&&s===cn||Lt>=$&&cn.type===s)return Lt}if(_){const Lt=T[$];if(Lt&&kr(Lt)&&Lt.type===s)return $}return null}function da(t,i,s,d){let _=t[s];const x=i.data;if(function Rs(t){return t instanceof Mn}(_)){const T=_;T.resolving&&function _n(t,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new We(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():wt(t)}(x[s]));const L=Bo(T.canSeeViewProviders);T.resolving=!0;const $=T.injectImpl?Y(T.injectImpl):null;Ra(t,d,xn.Default);try{_=t[s]=T.factory(void 0,x,t,d),i.firstCreatePass&&s>=d.directiveStart&&function sr(t,i,s){const{ngOnChanges:d,ngOnInit:_,ngDoCheck:x}=i.type.prototype;if(d){const T=Ma(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,T),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,T)}_&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,_),x&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,x),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,x))}(s,x[s],i)}finally{null!==$&&Y($),Bo(L),T.resolving=!1,j()}}return _}function dr(t,i,s){return!!(s[i+(t>>5)]&1<<t)}function Fs(t,i){return!(t&xn.Self||t&xn.Host&&i)}class hr{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,d){return Pi(this._tNode,this._lView,i,d,s)}}function il(){return new hr(wr(),dn())}function ec(t){return he(()=>{const i=t.prototype.constructor,s=i[st]||Er(i),d=Object.prototype;let _=Object.getPrototypeOf(t.prototype).constructor;for(;_&&_!==d;){const x=_[st]||Er(_);if(x&&x!==s)return x;_=Object.getPrototypeOf(_)}return x=>new x})}function Er(t){return ut(t)?()=>{const i=Er(Te(t));return i&&i()}:Lo(t)}function Rl(t){const i=t[1],s=i.type;return 2===s?i.declTNode:1===s?t[6]:null}function Fa(t){return function tl(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const s=t.attrs;if(s){const d=s.length;let _=0;for(;_<d;){const x=s[_];if(vc(x))break;if(0===x)_+=2;else if("number"==typeof x)for(_++;_<d&&"string"==typeof s[_];)_++;else{if(x===i)return s[_+1];_+=2}}}return null}(wr(),t)}const ha="__parameters__";function g(t,i,s){return he(()=>{const d=function u(t){return function(...s){if(t){const d=t(...s);for(const _ in d)this[_]=d[_]}}}(i);function _(...x){if(this instanceof _)return d.apply(this,x),this;const T=new _(...x);return L.annotation=T,L;function L($,ne,ve){const ze=$.hasOwnProperty(ha)?$[ha]:Object.defineProperty($,ha,{value:[]})[ha];for(;ze.length<=ve;)ze.push(null);return(ze[ve]=ze[ve]||[]).push(T),$}}return s&&(_.prototype=Object.create(s.prototype)),_.prototype.ngMetadataName=t,_.annotationCls=_,_})}class A{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=bn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ft(t,i){void 0===i&&(i=t);for(let s=0;s<t.length;s++){let d=t[s];Array.isArray(d)?(i===t&&(i=t.slice(0,s)),Ft(d,i)):i!==t&&i.push(d)}return i}function Zt(t,i){t.forEach(s=>Array.isArray(s)?Zt(s,i):i(s))}function Qt(t,i,s){i>=t.length?t.push(s):t.splice(i,0,s)}function sn(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function an(t,i){const s=[];for(let d=0;d<t;d++)s.push(i);return s}function Ie(t,i,s){let d=Ct(t,i);return d>=0?t[1|d]=s:(d=~d,function S(t,i,s,d){let _=t.length;if(_==i)t.push(s,d);else if(1===_)t.push(d,t[0]),t[0]=s;else{for(_--,t.push(t[_-1],t[_]);_>i;)t[_]=t[_-2],_--;t[i]=s,t[i+1]=d}}(t,d,i,s)),d}function je(t,i){const s=Ct(t,i);if(s>=0)return t[1|s]}function Ct(t,i){return function ci(t,i,s){let d=0,_=t.length>>s;for(;_!==d;){const x=d+(_-d>>1),T=t[x<<s];if(i===T)return x<<s;T>i?_=x:d=x+1}return~(_<<s)}(t,i,1)}const rr={},Wi="__NG_DI_FLAG__",_o="ngTempTokenPath",Pr=/\n/gm,ma="__source";let rl;function Na(t){const i=rl;return rl=t,i}function Bc(t,i=xn.Default){if(void 0===rl)throw new We(-203,!1);return null===rl?te(t,void 0,i):rl.get(t,i&xn.Optional?null:void 0,i)}function Dr(t,i=xn.Default){return(function ct(){return Wn}()||Bc)(Te(t),i)}function pu(t,i=xn.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),Dr(t,i)}function zo(t){const i=[];for(let s=0;s<t.length;s++){const d=Te(t[s]);if(Array.isArray(d)){if(0===d.length)throw new We(900,!1);let _,x=xn.Default;for(let T=0;T<d.length;T++){const L=d[T],$=ah(L);"number"==typeof $?-1===$?_=L.token:x|=$:_=L}i.push(Dr(_,x))}else i.push(Dr(d))}return i}function Ll(t,i){return t[Wi]=i,t.prototype[Wi]=i,t}function ah(t){return t[Wi]}const bs=Ll(g("Optional"),8),Vc=Ll(g("SkipSelf"),4);let ph,Vo,yu;function Qf(t){ph=t}function nc(t){return function rd(){if(void 0===Vo&&(Vo=null,le.trustedTypes))try{Vo=le.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Vo}()?.createHTML(t)||t}function vu(t){return function od(){if(void 0===yu&&(yu=null,le.trustedTypes))try{yu=le.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return yu}()?.createHTML(t)||t}class za{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class em extends za{getTypeName(){return"HTML"}}class xu extends za{getTypeName(){return"Style"}}class Cp extends za{getTypeName(){return"Script"}}class ic extends za{getTypeName(){return"URL"}}class Hc extends za{getTypeName(){return"ResourceURL"}}function yo(t){return t instanceof za?t.changingThisBreaksApplicationSecurity:t}function rc(t,i){const s=function tm(t){return t instanceof za&&t.getTypeName()||null}(t);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function nm(t){return new em(t)}function im(t){return new xu(t)}function wu(t){return new Cp(t)}function ad(t){return new ic(t)}function Ep(t){return new Hc(t)}class Cu{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(nc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch{return null}}}class Dp{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const d=this.inertDocument.createElement("body");s.appendChild(d)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=nc(i),s;const d=this.inertDocument.createElement("body");return d.innerHTML=nc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(i){const s=i.attributes;for(let _=s.length-1;0<_;_--){const T=s.item(_).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&i.removeAttribute(T)}let d=i.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const om=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ld(t){return(t=String(t)).match(om)?t:"unsafe:"+t}function Nl(t){const i={};for(const s of t.split(","))i[s]=!0;return i}function Eu(...t){const i={};for(const s of t)for(const d in s)s.hasOwnProperty(d)&&(i[d]=!0);return i}const Mp=Nl("area,br,col,hr,img,wbr"),cd=Nl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ud=Nl("rp,rt"),$c=Eu(Mp,Eu(cd,Nl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Eu(ud,Nl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Eu(ud,cd)),hd=Nl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Gc=Eu(hd,Nl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Tp=Nl("script,style,template");class Ip{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,d=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?d=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,d&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let _=this.checkClobberedElement(s,s.nextSibling);if(_){s=_;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!$c.hasOwnProperty(s))return this.sanitizedSomething=!0,!Tp.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const d=i.attributes;for(let _=0;_<d.length;_++){const x=d.item(_),T=x.name,L=T.toLowerCase();if(!Gc.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let $=x.value;hd[L]&&($=ld($)),this.buf.push(" ",T,'="',pd($),'"')}return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();$c.hasOwnProperty(s)&&!Mp.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(pd(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const Mu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mh=/([^\#-~ |!])/g;function pd(t){return t.replace(/&/g,"&amp;").replace(Mu,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(mh,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Dc;function Ap(t,i){let s=null;try{Dc=Dc||function yl(t){const i=new Dp(t);return function rm(){try{return!!(new window.DOMParser).parseFromString(nc(""),"text/html")}catch{return!1}}()?new Cu(i):i}(t);let d=i?String(i):"";s=Dc.getInertBodyElement(d);let _=5,x=d;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,d=x,x=s.innerHTML,s=Dc.getInertBodyElement(d)}while(d!==x);return nc((new Ip).sanitizeChildren(oc(s)||s))}finally{if(s){const d=oc(s)||s;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function oc(t){return"content"in t&&function sm(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var to=(()=>((to=to||{})[to.NONE=0]="NONE",to[to.HTML=1]="HTML",to[to.STYLE=2]="STYLE",to[to.SCRIPT=3]="SCRIPT",to[to.URL=4]="URL",to[to.RESOURCE_URL=5]="RESOURCE_URL",to))();function fd(t){const i=Tu();return i?vu(i.sanitize(to.HTML,t)||""):rc(t,"HTML")?vu(yo(t)):Ap(function as(){return void 0!==ph?ph:typeof document<"u"?document:void 0}(),wt(t))}function _h(t){const i=Tu();return i?i.sanitize(to.URL,t)||"":rc(t,"URL")?yo(t):ld(wt(t))}function Tu(){const t=dn();return t&&t[12]}const yh=new A("ENVIRONMENT_INITIALIZER"),Op=new A("INJECTOR",-1),vh=new A("INJECTOR_DEF_TYPES");class bh{get(i,s=rr){if(s===rr){const d=new Error(`NullInjectorError: No provider for ${Re(i)}!`);throw d.name="NullInjectorError",d}return s}}function um(...t){return{\u0275providers:kp(0,t)}}function kp(t,...i){const s=[],d=new Set;let _;return Zt(i,x=>{const T=x;Mc(T,s,[],d)&&(_||(_=[]),_.push(T))}),void 0!==_&&Rp(_,s),s}function Rp(t,i){for(let s=0;s<t.length;s++){const{providers:_}=t[s];Zt(_,x=>{i.push(x)})}}function Mc(t,i,s,d){if(!(t=Te(t)))return!1;let _=null,x=oi(t);const T=!x&&ni(t);if(x||T){if(T&&!T.standalone)return!1;_=t}else{const $=t.ngModule;if(x=oi($),!x)return!1;_=$}const L=d.has(_);if(T){if(L)return!1;if(d.add(_),T.dependencies){const $="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const ne of $)Mc(ne,i,s,d)}}else{if(!x)return!1;{if(null!=x.imports&&!L){let ne;d.add(_);try{Zt(x.imports,ve=>{Mc(ve,i,s,d)&&(ne||(ne=[]),ne.push(ve))})}finally{}void 0!==ne&&Rp(ne,i)}if(!L){const ne=Lo(_)||(()=>new _);i.push({provide:_,useFactory:ne,deps:ot},{provide:vh,useValue:_,multi:!0},{provide:yh,useValue:()=>Dr(_),multi:!0})}const $=x.providers;null==$||L||Zt($,ve=>{i.push(ve)})}}return _!==t&&void 0!==t.providers}const Bl=ke({provide:String,useValue:ke});function Iu(t){return null!==t&&"object"==typeof t&&Bl in t}function Sc(t){return"function"==typeof t}const gd=new A("Set Injector scope."),_d={},dm={};let xh;function yd(){return void 0===xh&&(xh=new bh),xh}class Tc{}class Bp extends Tc{constructor(i,s,d,_){super(),this.parent=s,this.source=d,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bd(i,T=>this.processProvider(T)),this.records.set(Op,Va(void 0,this)),_.has("environment")&&this.records.set(Tc,Va(void 0,this));const x=this.records.get(gd);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(vh.multi,ot,xn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Na(this),d=Y(void 0);try{return i()}finally{Na(s),Y(d)}}get(i,s=rr,d=xn.Default){this.assertNotDestroyed();const _=Na(this),x=Y(void 0);try{if(!(d&xn.SkipSelf)){let L=this.records.get(i);if(void 0===L){const $=function fm(t){return"function"==typeof t||"object"==typeof t&&t instanceof A}(i)&&Nt(i);L=$&&this.injectableDefInScope($)?Va(vd(i),_d):null,this.records.set(i,L)}if(null!=L)return this.hydrate(i,L)}return(d&xn.Self?yd():this.parent).get(i,s=d&xn.Optional&&s===rr?null:s)}catch(T){if("NullInjectorError"===T.name){if((T[_o]=T[_o]||[]).unshift(Re(i)),_)throw T;return function zc(t,i,s,d){const _=t[_o];throw i[ma]&&_.unshift(i[ma]),t.message=function Cc(t,i,s,d=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let _=Re(i);if(Array.isArray(i))_=i.map(Re).join(" -> ");else if("object"==typeof i){let x=[];for(let T in i)if(i.hasOwnProperty(T)){let L=i[T];x.push(T+":"+("string"==typeof L?JSON.stringify(L):Re(L)))}_=`{${x.join(", ")}}`}return`${s}${d?"("+d+")":""}[${_}]: ${t.replace(Pr,"\n  ")}`}("\n"+t.message,_,s,d),t.ngTokenPath=_,t[_o]=null,t}(T,i,"R3InjectorError",this.source)}throw T}finally{Y(x),Na(_)}}resolveInjectorInitializers(){const i=Na(this),s=Y(void 0);try{const d=this.get(yh.multi,ot,xn.Self);for(const _ of d)_()}finally{Na(i),Y(s)}}toString(){const i=[],s=this.records;for(const d of s.keys())i.push(Re(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new We(205,!1)}processProvider(i){let s=Sc(i=Te(i))?i:Te(i&&i.provide);const d=function hm(t){return Iu(t)?Va(void 0,t.useValue):Va(Ch(t),_d)}(i);if(Sc(i)||!0!==i.multi)this.records.get(s);else{let _=this.records.get(s);_||(_=Va(void 0,_d,!0),_.factory=()=>zo(_.multi),this.records.set(s,_)),s=i,_.multi.push(i)}this.records.set(s,d)}hydrate(i,s){return s.value===_d&&(s.value=dm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function pm(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Te(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function vd(t){const i=Nt(t),s=null!==i?i.factory:Lo(t);if(null!==s)return s;if(t instanceof A)throw new We(204,!1);if(t instanceof Function)return function wh(t){const i=t.length;if(i>0)throw an(i,"?"),new We(204,!1);const s=function On(t){const i=t&&(t[fi]||t[Qn]);if(i){const s=function Jn(t){if(t.hasOwnProperty("name"))return t.name;const i=(""+t).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new We(204,!1)}function Ch(t,i,s){let d;if(Sc(t)){const _=Te(t);return Lo(_)||vd(_)}if(Iu(t))d=()=>Te(t.useValue);else if(function Np(t){return!(!t||!t.useFactory)}(t))d=()=>t.useFactory(...zo(t.deps||[]));else if(function Fp(t){return!(!t||!t.useExisting)}(t))d=()=>Dr(Te(t.useExisting));else{const _=Te(t&&(t.useClass||t.provide));if(!function Eh(t){return!!t.deps}(t))return Lo(_)||vd(_);d=()=>new _(...zo(t.deps))}return d}function Va(t,i,s=!1){return{factory:t,value:i,multi:s?[]:void 0}}function mm(t){return!!t.\u0275providers}function bd(t,i){for(const s of t)Array.isArray(s)?bd(s,i):mm(s)?bd(s.\u0275providers,i):i(s)}class Pu{}class Vp{resolveComponentFactory(i){throw function Ou(t){const i=Error(`No component factory found for ${Re(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let Wc=(()=>{class t{}return t.NULL=new Vp,t})();function fr(){return ga(wr(),dn())}function ga(t,i){return new Ic(mr(t,i))}let Ic=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=fr,t})();function Ac(t){return t instanceof Ic?t.nativeElement:t}class vl{}let qc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function Up(){const t=dn(),s=qi(wr().index,t);return(gr(s)?s:t)[11]}(),t})(),Kc=(()=>{class t{}return t.\u0275prov=bn({token:t,providedIn:"root",factory:()=>null}),t})();class Yc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const _m=new Yc("14.2.5"),Dh={};function Th(t){return t.ngOriginalError}class eu{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&Th(i);for(;s&&Th(s);)s=Th(s);return s||null}}const Ed=new Map;let zl=0;const Fu="__ngContext__";function ls(t,i){gr(i)?(t[Fu]=i[20],function Vl(t){Ed.set(t[20],t)}(i)):t[Fu]=i}function Sd(t){return t.ownerDocument.defaultView}function ws(t){return t instanceof Function?t():t}var Xs=(()=>((Xs=Xs||{})[Xs.Important=1]="Important",Xs[Xs.DashCase=2]="DashCase",Xs))();function Vu(t,i){return undefined(t,i)}function cc(t){const i=t[3];return ro(i)?i[3]:i}function Uu(t){return nf(t[13])}function Nh(t){return nf(t[4])}function nf(t){for(;null!==t&&!ro(t);)t=t[4];return t}function bl(t,i,s,d,_){if(null!=d){let x,T=!1;ro(d)?x=d:gr(d)&&(T=!0,d=d[0]);const L=xr(d);0===t&&null!==s?null==_?Rd(i,s,L):uc(i,s,L,_||null,!0):1===t&&null!==s?uc(i,s,L,_||null,!0):2===t?function E(t,i,s){const d=Ld(t,i);d&&function cf(t,i,s,d){t.removeChild(i,s,d)}(t,d,i,s)}(i,L,T):3===t&&i.destroyNode(L),null!=x&&function oe(t,i,s,d,_){const x=s[7];x!==xr(s)&&bl(i,t,d,x,_);for(let L=10;L<s.length;L++){const $=s[L];N($[1],$,t,i,d,x)}}(i,t,x,s,_)}}function Ua(t,i,s){return t.createElement(i,s)}function Hu(t,i){const s=t[9],d=s.indexOf(i),_=i[3];512&i[2]&&(i[2]&=-513,so(_,-1)),s.splice(d,1)}function $u(t,i){if(t.length<=10)return;const s=10+i,d=t[s];if(d){const _=d[17];null!==_&&_!==t&&Hu(_,d),i>0&&(t[s-1][4]=d[4]);const x=sn(t,10+i);!function rf(t,i){N(t,i,i[11],2,null,null),i[0]=null,i[6]=null}(d[1],d);const T=x[19];null!==T&&T.detachView(x[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Uh(t,i){if(!(128&i[2])){const s=i[11];s.destroyNode&&N(t,i,s,3,null,null),function af(t){let i=t[13];if(!i)return Gu(t[1],t);for(;i;){let s=null;if(gr(i))s=i[13];else{const d=i[10];d&&(s=d)}if(!s){for(;i&&!i[4]&&i!==t;)gr(i)&&Gu(i[1],i),i=i[3];null===i&&(i=t),gr(i)&&Gu(i[1],i),s=i&&i[4]}i=s}}(i)}}function Gu(t,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Js(t,i){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let d=0;d<s.length;d+=2){const _=i[s[d]];if(!(_ instanceof Mn)){const x=s[d+1];if(Array.isArray(x))for(let T=0;T<x.length;T+=2){const L=_[x[T]],$=x[T+1];try{$.call(L)}finally{}}else try{x.call(_)}finally{}}}}(t,i),function lf(t,i){const s=t.cleanup,d=i[7];let _=-1;if(null!==s)for(let x=0;x<s.length-1;x+=2)if("string"==typeof s[x]){const T=s[x+1],L="function"==typeof T?T(i):xr(i[T]),$=d[_=s[x+2]],ne=s[x+3];"boolean"==typeof ne?L.removeEventListener(s[x],$,ne):ne>=0?d[_=ne]():d[_=-ne].unsubscribe(),x+=2}else{const T=d[_=s[x+1]];s[x].call(T)}if(null!==d){for(let x=_+1;x<d.length;x++)(0,d[x])();i[7]=null}}(t,i),1===i[1].type&&i[11].destroy();const s=i[17];if(null!==s&&ro(i[3])){s!==i[3]&&Hu(s,i);const d=i[19];null!==d&&d.detachView(t)}!function Zp(t){Ed.delete(t[20])}(i)}}function ou(t,i,s){return function jh(t,i,s){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return s[0];if(2&d.flags){const _=t.data[d.directiveStart].encapsulation;if(_===J.None||_===J.Emulated)return null}return mr(d,s)}(t,i.parent,s)}function uc(t,i,s,d,_){t.insertBefore(i,s,d,_)}function Rd(t,i,s){t.appendChild(i,s)}function Hh(t,i,s,d,_){null!==d?uc(t,i,s,d,_):Rd(t,i,s)}function Ld(t,i){return t.parentNode(i)}function au(t,i,s){return uf(t,i,s)}let uf=function Fd(t,i,s){return 40&t.type?mr(t,s):null};function a(t,i,s,d){const _=ou(t,d,i),x=i[11],L=au(d.parent||i[6],d,i);if(null!=_)if(Array.isArray(s))for(let $=0;$<s.length;$++)Hh(x,_,s[$],L,!1);else Hh(x,_,s,L,!1)}function f(t,i){if(null!==i){const s=i.type;if(3&s)return mr(i,t);if(4&s)return w(-1,t[i.index]);if(8&s){const d=i.child;if(null!==d)return f(t,d);{const _=t[i.index];return ro(_)?w(-1,_):xr(_)}}if(32&s)return Vu(i,t)()||xr(t[i.index]);{const d=v(t,i);return null!==d?Array.isArray(d)?d[0]:f(cc(t[16]),d):f(t,i.next)}}return null}function v(t,i){return null!==i?t[16][6].projection[i.projection]:null}function w(t,i){const s=10+t+1;if(s<i.length){const d=i[s],_=d[1].firstChild;if(null!==_)return f(d,_)}return i[7]}function O(t,i,s,d,_,x,T){for(;null!=s;){const L=d[s.index],$=s.type;if(T&&0===i&&(L&&ls(xr(L),d),s.flags|=4),64!=(64&s.flags))if(8&$)O(t,i,s.child,d,_,x,!1),bl(i,t,_,L,x);else if(32&$){const ne=Vu(s,d);let ve;for(;ve=ne();)bl(i,t,_,ve,x);bl(i,t,_,L,x)}else 16&$?ie(t,i,d,s,_,x):bl(i,t,_,L,x);s=T?s.projectionNext:s.next}}function N(t,i,s,d,_,x){O(s,d,t.firstChild,i,_,x,!1)}function ie(t,i,s,d,_,x){const T=s[16],$=T[6].projection[d.projection];if(Array.isArray($))for(let ne=0;ne<$.length;ne++)bl(i,t,_,$[ne],x);else O(t,i,$,T[3],_,x,!0)}function be(t,i,s){t.setAttribute(i,"style",s)}function Ce(t,i,s){""===s?t.removeAttribute(i,"class"):t.setAttribute(i,"class",s)}function Je(t,i,s){let d=t.length;for(;;){const _=t.indexOf(i,s);if(-1===_)return _;if(0===_||t.charCodeAt(_-1)<=32){const x=i.length;if(_+x===d||t.charCodeAt(_+x)<=32)return _}s=_+1}}const Mt="ng-template";function Bt(t,i,s){let d=0;for(;d<t.length;){let _=t[d++];if(s&&"class"===_){if(_=t[d],-1!==Je(_.toLowerCase(),i,0))return!0}else if(1===_){for(;d<t.length&&"string"==typeof(_=t[d++]);)if(_.toLowerCase()===i)return!0;return!1}}return!1}function bt(t){return 4===t.type&&t.value!==Mt}function Rt(t,i,s){return i===(4!==t.type||s?t.value:Mt)}function rn(t,i,s){let d=4;const _=t.attrs||[],x=function Tn(t){for(let i=0;i<t.length;i++)if(vc(t[i]))return i;return t.length}(_);let T=!1;for(let L=0;L<i.length;L++){const $=i[L];if("number"!=typeof $){if(!T)if(4&d){if(d=2|1&d,""!==$&&!Rt(t,$,s)||""===$&&1===i.length){if(Xt(d))return!1;T=!0}}else{const ne=8&d?$:i[++L];if(8&d&&null!==t.attrs){if(!Bt(t.attrs,ne,s)){if(Xt(d))return!1;T=!0}continue}const ze=Vn(8&d?"class":$,_,bt(t),s);if(-1===ze){if(Xt(d))return!1;T=!0;continue}if(""!==ne){let ft;ft=ze>x?"":_[ze+1].toLowerCase();const Lt=8&d?ft:null;if(Lt&&-1!==Je(Lt,ne,0)||2&d&&ne!==ft){if(Xt(d))return!1;T=!0}}}}else{if(!T&&!Xt(d)&&!Xt($))return!1;if(T&&Xt($))continue;T=!1,d=$|1&d}}return Xt(d)||T}function Xt(t){return 0==(1&t)}function Vn(t,i,s,d){if(null===i)return-1;let _=0;if(d||!s){let x=!1;for(;_<i.length;){const T=i[_];if(T===t)return _;if(3===T||6===T)x=!0;else{if(1===T||2===T){let L=i[++_];for(;"string"==typeof L;)L=i[++_];continue}if(4===T)break;if(0===T){_+=4;continue}}_+=x?1:2}return-1}return function En(t,i){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const d=t[s];if("number"==typeof d)return-1;if(d===i)return s;s++}return-1}(i,t)}function Hn(t,i,s=!1){for(let d=0;d<i.length;d++)if(rn(t,i[d],s))return!0;return!1}function Nn(t,i){e:for(let s=0;s<i.length;s++){const d=i[s];if(t.length===d.length){for(let _=0;_<t.length;_++)if(t[_]!==d[_])continue e;return!0}}return!1}function Rn(t,i){return t?":not("+i.trim()+")":i}function gn(t){let i=t[0],s=1,d=2,_="",x=!1;for(;s<t.length;){let T=t[s];if("string"==typeof T)if(2&d){const L=t[++s];_+="["+T+(L.length>0?'="'+L+'"':"")+"]"}else 8&d?_+="."+T:4&d&&(_+=" "+T);else""!==_&&!Xt(T)&&(i+=Rn(x,_),_=""),d=T,x=x||!Xt(d);s++}return""!==_&&(i+=Rn(x,_)),i}const Pn={};function br(t){Mr(Oi(),dn(),nt()+t,!1)}function Mr(t,i,s,d){if(!d)if(3==(3&i[2])){const x=t.preOrderCheckHooks;null!==x&&Ai(i,x,s)}else{const x=t.preOrderHooks;null!==x&&Eo(i,x,0,s)}Pt(s)}function jo(t,i=null,s=null,d){const _=Xo(t,i,s,d);return _.resolveInjectorInitializers(),_}function Xo(t,i=null,s=null,d,_=new Set){const x=[s||ot,um(t)];return d=d||("object"==typeof t?void 0:Re(t)),new Bp(x,i||yd(),d||null,_)}let co=(()=>{class t{static create(s,d){if(Array.isArray(s))return jo({name:""},d,s,"");{const _=s.name??"";return jo({name:_},s.parent,s.providers,_)}}}return t.THROW_IF_NOT_FOUND=rr,t.NULL=new bh,t.\u0275prov=bn({token:t,providedIn:"any",factory:()=>Dr(Op)}),t.__NG_ELEMENT_ID__=-1,t})();function Oc(t,i=xn.Default){const s=dn();return null===s?Dr(t,i):Pi(wr(),s,Te(t),i)}function ff(){throw new Error("invalid")}function kc(t,i){return t<<17|i<<2}function Ha(t){return t>>17&32767}function Rc(t){return 2|t}function ta(t){return(131068&t)>>2}function zd(t,i){return-131069&t|i<<2}function mf(t){return 1|t}function i_(t,i){const s=t.contentQueries;if(null!==s)for(let d=0;d<s.length;d+=2){const _=s[d],x=s[d+1];if(-1!==x){const T=t.data[x];Ja(_),T.contentQueries(2,i[x],x)}}}function yf(t,i,s,d,_,x,T,L,$,ne,ve){const ze=i.blueprint.slice();return ze[0]=_,ze[2]=76|d,(null!==ve||t&&1024&t[2])&&(ze[2]|=1024),_s(ze),ze[3]=ze[15]=t,ze[8]=s,ze[10]=T||t&&t[10],ze[11]=L||t&&t[11],ze[12]=$||t&&t[12]||null,ze[9]=ne||t&&t[9]||null,ze[6]=x,ze[20]=function Gp(){return zl++}(),ze[21]=ve,ze[16]=2==i.type?t[16]:ze,ze}function Vd(t,i,s,d,_){let x=t.data[i];if(null===x)x=function Fm(t,i,s,d,_){const x=ee(),T=fe(),$=t.data[i]=function a_(t,i,s,d,_,x){return{type:s,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?x:x&&x.parent,s,i,d,_);return null===t.firstChild&&(t.firstChild=$),null!==x&&(T?null==x.child&&null!==$.parent&&(x.child=$):null===x.next&&(x.next=$)),$}(t,i,s,d,_),function Tl(){return Kn.lFrame.inI18n}()&&(x.flags|=64);else if(64&x.type){x.type=s,x.value=d,x.attrs=_;const T=function X(){const t=Kn.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}();x.injectorIndex=null===T?-1:T.injectorIndex}return W(x,!0),x}function Ud(t,i,s,d){if(0===s)return-1;const _=i.length;for(let x=0;x<s;x++)i.push(d),t.blueprint.push(d),t.data.push(null);return _}function vf(t,i,s){Il(i);try{const d=t.viewQuery;null!==d&&wf(1,d,s);const _=t.template;null!==_&&r_(t,i,_,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&i_(t,i),t.staticViewQueries&&wf(2,t.viewQuery,s);const x=t.components;null!==x&&function mb(t,i){for(let s=0;s<i.length;s++)kb(t,i[s])}(i,x)}catch(d){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),d}finally{i[2]&=-5,re()}}function bf(t,i,s,d){const _=i[2];if(128!=(128&_)){Il(i);try{_s(i),function Oa(t){return Kn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&r_(t,i,s,2,d);const T=3==(3&_);if(T){const ne=t.preOrderCheckHooks;null!==ne&&Ai(i,ne,null)}else{const ne=t.preOrderHooks;null!==ne&&Eo(i,ne,0,null),Do(i,0)}if(function Pb(t){for(let i=Uu(t);null!==i;i=Nh(i)){if(!i[2])continue;const s=i[9];for(let d=0;d<s.length;d++){const _=s[d],x=_[3];0==(512&_[2])&&so(x,1),_[2]|=512}}}(i),function Ab(t){for(let i=Uu(t);null!==i;i=Nh(i))for(let s=10;s<i.length;s++){const d=i[s],_=d[1];oo(d)&&bf(_,d,_.template,d[8])}}(i),null!==t.contentQueries&&i_(t,i),T){const ne=t.contentCheckHooks;null!==ne&&Ai(i,ne)}else{const ne=t.contentHooks;null!==ne&&Eo(i,ne,1),Do(i,1)}!function n_(t,i){const s=t.hostBindingOpCodes;if(null!==s)try{for(let d=0;d<s.length;d++){const _=s[d];if(_<0)Pt(~_);else{const x=_,T=s[++d],L=s[++d];Xl(T,x),L(2,i[x])}}}finally{Pt(-1)}}(t,i);const L=t.components;null!==L&&function fb(t,i){for(let s=0;s<i.length;s++)Ob(t,i[s])}(i,L);const $=t.viewQuery;if(null!==$&&wf(2,$,d),T){const ne=t.viewCheckHooks;null!==ne&&Ai(i,ne)}else{const ne=t.viewHooks;null!==ne&&Eo(i,ne,2),Do(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,so(i[3],-1))}finally{re()}}}function r_(t,i,s,d,_){const x=nt(),T=2&d;try{Pt(-1),T&&i.length>22&&Mr(t,i,22,!1),s(d,_)}finally{Pt(x)}}function o_(t,i,s){if(Vs(i)){const _=i.directiveEnd;for(let x=i.directiveStart;x<_;x++){const T=t.data[x];T.contentQueries&&T.contentQueries(1,s[x],x)}}}function Nm(t,i,s){!Hr()||(function wb(t,i,s,d){const _=s.directiveStart,x=s.directiveEnd;t.firstCreatePass||ir(s,i),ls(d,i);const T=s.initialInputs;for(let L=_;L<x;L++){const $=t.data[L],ne=kr($);ne&&Sb(i,s,$);const ve=da(i,t,L,s);ls(ve,i),null!==T&&Tb(0,L-_,ve,$,0,T),ne&&(qi(s.index,i)[8]=ve)}}(t,i,s,mr(s,i)),128==(128&s.flags)&&function Cb(t,i,s){const d=s.directiveStart,_=s.directiveEnd,x=s.index,T=function Jl(){return Kn.lFrame.currentDirectiveIndex}();try{Pt(x);for(let L=d;L<_;L++){const $=t.data[L],ne=i[L];Ws(L),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&d_($,ne)}}finally{Pt(-1),Ws(T)}}(t,i,s))}function Bm(t,i,s=mr){const d=i.localNames;if(null!==d){let _=i.index+1;for(let x=0;x<d.length;x+=2){const T=d[x+1],L=-1===T?s(i,t):t[T];t[_++]=L}}}function zm(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Vm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function Vm(t,i,s,d,_,x,T,L,$,ne){const ve=22+d,ze=ve+_,ft=function gb(t,i){const s=[];for(let d=0;d<i;d++)s.push(d<t?null:Pn);return s}(ve,ze),Lt="function"==typeof ne?ne():ne;return ft[1]={type:t,blueprint:ft,template:s,queries:null,viewQuery:L,declTNode:i,data:ft.slice().fill(null,ve),bindingStartIndex:ve,expandoStartIndex:ze,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:$,consts:Lt,incompleteFirstPass:!1}}function s_(t,i,s,d){const _=g_(i);null===s?_.push(d):(_.push(s),t.firstCreatePass&&__(t).push(d,_.length-1))}function l_(t,i,s){for(let d in t)if(t.hasOwnProperty(d)){const _=t[d];(s=null===s?{}:s).hasOwnProperty(d)?s[d].push(i,_):s[d]=[i,_]}return s}function c_(t,i){const d=i.directiveEnd,_=t.data,x=i.attrs,T=[];let L=null,$=null;for(let ne=i.directiveStart;ne<d;ne++){const ve=_[ne],ze=ve.inputs,ft=null===x||bt(i)?null:Ib(ze,x);T.push(ft),L=l_(ze,ne,L),$=l_(ve.outputs,ne,$)}null!==L&&(L.hasOwnProperty("class")&&(i.flags|=16),L.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=T,i.inputs=L,i.outputs=$}function al(t,i,s,d,_,x,T,L){const $=mr(i,s);let ve,ne=i.inputs;!L&&null!=ne&&(ve=ne[d])?(Es(t,s,ve,d,_),ia(i)&&Um(s,i.index)):3&i.type&&(d=function yb(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(d),_=null!=T?T(_,i.value||"",d):_,x.setProperty($,d,_))}function Um(t,i){const s=qi(i,t);16&s[2]||(s[2]|=32)}function xf(t,i,s,d){let _=!1;if(Hr()){const x=function Eb(t,i,s){const d=t.directiveRegistry;let _=null;if(d)for(let x=0;x<d.length;x++){const T=d[x];Hn(s,T.selectors,!1)&&(_||(_=[]),el(ir(s,i),t,T.type),kr(T)?(h_(t,s),_.unshift(T)):_.push(T))}return _}(t,i,s),T=null===d?null:{"":-1};if(null!==x){_=!0,p_(s,t.data.length,x.length);for(let ve=0;ve<x.length;ve++){const ze=x[ve];ze.providersResolver&&ze.providersResolver(ze)}let L=!1,$=!1,ne=Ud(t,i,x.length,null);for(let ve=0;ve<x.length;ve++){const ze=x[ve];s.mergedAttrs=ca(s.mergedAttrs,ze.hostAttrs),f_(t,s,i,ne,ze),Mb(ne,ze,T),null!==ze.contentQueries&&(s.flags|=8),(null!==ze.hostBindings||null!==ze.hostAttrs||0!==ze.hostVars)&&(s.flags|=128);const ft=ze.type.prototype;!L&&(ft.ngOnChanges||ft.ngOnInit||ft.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),L=!0),!$&&(ft.ngOnChanges||ft.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),$=!0),ne++}c_(t,s)}T&&function Db(t,i,s){if(i){const d=t.localNames=[];for(let _=0;_<i.length;_+=2){const x=s[i[_+1]];if(null==x)throw new We(-301,!1);d.push(i[_],x)}}}(s,d,T)}return s.mergedAttrs=ca(s.mergedAttrs,s.attrs),_}function u_(t,i,s,d,_,x){const T=x.hostBindings;if(T){let L=t.hostBindingOpCodes;null===L&&(L=t.hostBindingOpCodes=[]);const $=~i.index;(function xb(t){let i=t.length;for(;i>0;){const s=t[--i];if("number"==typeof s&&s<0)return s}return 0})(L)!=$&&L.push($),L.push(d,_,T)}}function d_(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function h_(t,i){i.flags|=2,(t.components||(t.components=[])).push(i.index)}function Mb(t,i,s){if(s){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)s[i.exportAs[d]]=t;kr(i)&&(s[""]=t)}}function p_(t,i,s){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+s,t.providerIndexes=i}function f_(t,i,s,d,_){t.data[d]=_;const x=_.factory||(_.factory=Lo(_.type)),T=new Mn(x,kr(_),Oc);t.blueprint[d]=T,s[d]=T,u_(t,i,0,d,Ud(t,s,_.hostVars,Pn),_)}function Sb(t,i,s){const d=mr(i,t),_=zm(s),x=t[10],T=Kh(t,yf(t,_,null,s.onPush?32:16,d,i,x,x.createRenderer(d,s),null,null,null));t[i.index]=T}function hc(t,i,s,d,_,x){const T=mr(t,i);!function jm(t,i,s,d,_,x,T){if(null==x)t.removeAttribute(i,_,s);else{const L=null==T?wt(x):T(x,d||"",_);t.setAttribute(i,_,L,s)}}(i[11],T,x,t.value,s,d,_)}function Tb(t,i,s,d,_,x){const T=x[i];if(null!==T){const L=d.setInput;for(let $=0;$<T.length;){const ne=T[$++],ve=T[$++],ze=T[$++];null!==L?d.setInput(s,ze,ne,ve):s[ve]=ze}}}function Ib(t,i){let s=null,d=0;for(;d<i.length;){const _=i[d];if(0!==_)if(5!==_){if("number"==typeof _)break;t.hasOwnProperty(_)&&(null===s&&(s=[]),s.push(_,t[_],i[d+1])),d+=2}else d+=2;else d+=4}return s}function qh(t,i,s,d){return new Array(t,!0,!1,i,null,0,d,s,null,null)}function Ob(t,i){const s=qi(i,t);if(oo(s)){const d=s[1];48&s[2]?bf(d,s,d.template,s[8]):s[5]>0&&Hm(s)}}function Hm(t){for(let d=Uu(t);null!==d;d=Nh(d))for(let _=10;_<d.length;_++){const x=d[_];if(oo(x))if(512&x[2]){const T=x[1];bf(T,x,T.template,x[8])}else x[5]>0&&Hm(x)}const s=t[1].components;if(null!==s)for(let d=0;d<s.length;d++){const _=qi(s[d],t);oo(_)&&_[5]>0&&Hm(_)}}function kb(t,i){const s=qi(i,t),d=s[1];(function m_(t,i){for(let s=i.length;s<t.blueprint.length;s++)i.push(t.blueprint[s])})(d,s),vf(d,s,s[8])}function Kh(t,i){return t[13]?t[14][4]=i:t[13]=i,t[14]=i,i}function Yh(t){for(;t;){t[2]|=32;const i=cc(t);if(Po(t)&&!i)return t;t=i}return null}function Wu(t,i,s,d=!0){const _=i[10];_.begin&&_.begin();try{bf(t,i,t.template,s)}catch(T){throw d&&$m(i,T),T}finally{_.end&&_.end()}}function wf(t,i,s){Ja(0),i(t,s)}function g_(t){return t[7]||(t[7]=[])}function __(t){return t.cleanup||(t.cleanup=[])}function y_(t,i,s){return(null===t||kr(t))&&(s=function qa(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(s[i.index])),s[11]}function $m(t,i){const s=t[9],d=s?s.get(eu,null):null;d&&d.handleError(i)}function Es(t,i,s,d,_){for(let x=0;x<s.length;){const T=s[x++],L=s[x++],$=i[T],ne=t.data[T];null!==ne.setInput?ne.setInput($,_,d,L):$[L]=_}}function pc(t,i,s){let d=s?t.styles:null,_=s?t.classes:null,x=0;if(null!==i)for(let T=0;T<i.length;T++){const L=i[T];"number"==typeof L?x=L:1==x?_=pe(_,L):2==x&&(d=pe(d,L+": "+i[++T]+";"))}s?t.styles=d:t.stylesWithoutHost=d,s?t.classes=_:t.classesWithoutHost=_}function pi(t,i,s,d,_=!1){for(;null!==s;){const x=i[s.index];if(null!==x&&d.push(xr(x)),ro(x))for(let L=10;L<x.length;L++){const $=x[L],ne=$[1].firstChild;null!==ne&&pi($[1],$,ne,d)}const T=s.type;if(8&T)pi(t,i,s.child,d);else if(32&T){const L=Vu(s,i);let $;for(;$=L();)d.push($)}else if(16&T){const L=v(i,s);if(Array.isArray(L))d.push(...L);else{const $=cc(i[16]);pi($[1],$,L,d,!0)}}s=_?s.projectionNext:s.next}return d}class Ri{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return pi(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(ro(i)){const s=i[8],d=s?s.indexOf(this):-1;d>-1&&($u(i,d),sn(s,d))}this._attachedToViewContainer=!1}Uh(this._lView[1],this._lView)}onDestroy(i){s_(this._lView[1],this._lView,null,i)}markForCheck(){Yh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Wu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new We(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sf(t,i){N(t,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new We(902,!1);this._appRef=i}}class Hl extends Ri{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Wu(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class jd extends Wc{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=ni(i);return new qu(s,this.ngModule)}}function Cl(t){const i=[];for(let s in t)t.hasOwnProperty(s)&&i.push({propName:t[s],templateName:s});return i}class Fb{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,d){const _=this.injector.get(i,Dh,d);return _!==Dh||s===Dh?_:this.parentInjector.get(i,s,d)}}class qu extends Pu{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function si(t){return t.map(gn).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Cl(this.componentDef.inputs)}get outputs(){return Cl(this.componentDef.outputs)}create(i,s,d,_){let x=(_=_||this.ngModule)instanceof Tc?_:_?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const T=x?new Fb(i,x):i,L=T.get(vl,null);if(null===L)throw new We(407,!1);const $=T.get(Kc,null),ne=L.createRenderer(null,this.componentDef),ve=this.componentDef.selectors[0][0]||"div",ze=d?function _b(t,i,s){return t.selectRootElement(i,s===J.ShadowDom)}(ne,d,this.componentDef.encapsulation):Ua(L.createRenderer(null,this.componentDef),ve,function Lb(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ve)),ft=this.componentDef.onPush?288:272,Lt=Vm(0,null,null,1,0,null,null,null,null,null),cn=yf(null,Lt,null,ft,null,null,L,ne,$,T,null);let In,$n;Il(cn);try{const ui=function Bb(t,i,s,d,_,x){const T=s[1];s[22]=t;const $=Vd(T,22,2,"#host",null),ne=$.mergedAttrs=i.hostAttrs;null!==ne&&(pc($,ne,!0),null!==t&&(fl(_,t,ne),null!==$.classes&&Ce(_,t,$.classes),null!==$.styles&&be(_,t,$.styles)));const ve=d.createRenderer(t,i),ze=yf(s,zm(i),null,i.onPush?32:16,s[22],$,d,ve,x||null,null,null);return T.firstCreatePass&&(el(ir($,s),T,i.type),h_(T,$),p_($,s.length,1)),Kh(s,ze),s[22]=ze}(ze,this.componentDef,cn,L,ne);if(ze)if(d)fl(ne,ze,["ng-version",_m.full]);else{const{attrs:Ti,classes:vn}=function ti(t){const i=[],s=[];let d=1,_=2;for(;d<t.length;){let x=t[d];if("string"==typeof x)2===_?""!==x&&i.push(x,t[++d]):8===_&&s.push(x);else{if(!Xt(_))break;_=x}d++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);Ti&&fl(ne,ze,Ti),vn&&vn.length>0&&Ce(ne,ze,vn.join(" "))}if($n=Zo(Lt,22),void 0!==s){const Ti=$n.projection=[];for(let vn=0;vn<this.ngContentSelectors.length;vn++){const Fi=s[vn];Ti.push(null!=Fi?Array.from(Fi):null)}}In=function zb(t,i,s,d){const _=s[1],x=function bb(t,i,s){const d=wr();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),f_(t,d,i,Ud(t,i,1,null),s),c_(t,d));const _=da(i,t,d.directiveStart,d);ls(_,i);const x=mr(d,i);return x&&ls(x,i),_}(_,s,i);if(t[8]=s[8]=x,null!==d)for(const L of d)L(x,i);if(i.contentQueries){const L=wr();i.contentQueries(1,x,L.directiveStart)}const T=wr();return!_.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Pt(T.index),u_(s[1],T,0,T.directiveStart,T.directiveEnd,i),d_(i,x)),x}(ui,this.componentDef,cn,[Vb]),vf(Lt,cn,null)}finally{re()}return new Nb(this.componentType,In,ga($n,cn),cn,$n)}}class Nb extends class gm{}{constructor(i,s,d,_,x){super(),this.location=d,this._rootLView=_,this._tNode=x,this.instance=s,this.hostView=this.changeDetectorRef=new Hl(_),this.componentType=i}setInput(i,s){const d=this._tNode.inputs;let _;if(null!==d&&(_=d[i])){const x=this._rootLView;Es(x[1],x,_,i,s),Um(x,this._tNode.index)}}get injector(){return new hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Vb(){const t=wr();wi(dn()[1],t)}function Zm(t){let i=function Gm(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const d=[t];for(;i;){let _;if(kr(t))_=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new We(903,!1);_=i.\u0275dir}if(_){if(s){d.push(_);const T=t;T.inputs=Cf(t.inputs),T.declaredInputs=Cf(t.declaredInputs),T.outputs=Cf(t.outputs);const L=_.hostBindings;L&&x_(t,L);const $=_.viewQuery,ne=_.contentQueries;if($&&Ub(t,$),ne&&jb(t,ne),Ye(t.inputs,_.inputs),Ye(t.declaredInputs,_.declaredInputs),Ye(t.outputs,_.outputs),kr(_)&&_.data.animation){const ve=t.data;ve.animation=(ve.animation||[]).concat(_.data.animation)}}const x=_.features;if(x)for(let T=0;T<x.length;T++){const L=x[T];L&&L.ngInherit&&L(t),L===Zm&&(s=!1)}}i=Object.getPrototypeOf(i)}!function b_(t){let i=0,s=null;for(let d=t.length-1;d>=0;d--){const _=t[d];_.hostVars=i+=_.hostVars,_.hostAttrs=ca(_.hostAttrs,s=ca(s,_.hostAttrs))}}(d)}function Cf(t){return t===Qe?{}:t===ot?[]:t}function Ub(t,i){const s=t.viewQuery;t.viewQuery=s?(d,_)=>{i(d,_),s(d,_)}:i}function jb(t,i){const s=t.contentQueries;t.contentQueries=s?(d,_,x)=>{i(d,_,x),s(d,_,x)}:i}function x_(t,i){const s=t.hostBindings;t.hostBindings=s?(d,_)=>{i(d,_),s(d,_)}:i}let Ef=null;function Ku(){if(!Ef){const t=le.Symbol;if(t&&t.iterator)Ef=t.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const d=i[s];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Ef=d)}}}return Ef}function Xh(t){return!!Wm(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ku()in t)}function Wm(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ps(t,i,s){return t[i]=s}function zs(t,i,s){return!Object.is(t[i],s)&&(t[i]=s,!0)}function Xu(t,i,s,d){const _=zs(t,i,s);return zs(t,i+1,d)||_}function Df(t,i,s,d){const _=dn();return zs(_,No(),i)&&(Oi(),hc(qt(),_,t,i,s,d)),Df}function Hd(t,i,s,d){return zs(t,No(),s)?i+wt(s)+d:Pn}function O_(t,i,s,d,_,x,T,L){const $=dn(),ne=Oi(),ve=t+22,ze=ne.firstCreatePass?function Zb(t,i,s,d,_,x,T,L,$){const ne=i.consts,ve=Vd(i,t,4,T||null,_r(ne,L));xf(i,s,ve,_r(ne,$)),wi(i,ve);const ze=ve.tViews=Vm(2,ve,d,_,x,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ne);return null!==i.queries&&(i.queries.template(i,ve),ze.queries=i.queries.embeddedTView(ve)),ve}(ve,ne,$,i,s,d,_,x,T):ne.data[ve];W(ze,!1);const ft=$[11].createComment("");a(ne,$,ft,ze),ls(ft,$),Kh($,$[ve]=qh(ft,$,ft,ze)),Is(ze)&&Nm(ne,$,ze),null!=T&&Bm($,ze,L)}function Ym(t){return Co(function yr(){return Kn.lFrame.contextLView}(),22+t)}function k_(t,i,s){const d=dn();return zs(d,No(),i)&&al(Oi(),qt(),d,t,i,d[11],s,!1),k_}function Xm(t,i,s,d,_){const T=_?"class":"style";Es(t,s,i.inputs[T],T,d)}function Mf(t,i,s,d){const _=dn(),x=Oi(),T=22+t,L=_[11],$=_[T]=Ua(L,i,function _i(){return Kn.lFrame.currentNamespace}()),ne=x.firstCreatePass?function Jm(t,i,s,d,_,x,T){const L=i.consts,ne=Vd(i,t,2,_,_r(L,x));return xf(i,s,ne,_r(L,T)),null!==ne.attrs&&pc(ne,ne.attrs,!1),null!==ne.mergedAttrs&&pc(ne,ne.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ne),ne}(T,x,_,0,i,s,d):x.data[T];W(ne,!0);const ve=ne.mergedAttrs;null!==ve&&fl(L,$,ve);const ze=ne.classes;null!==ze&&Ce(L,$,ze);const ft=ne.styles;return null!==ft&&be(L,$,ft),64!=(64&ne.flags)&&a(x,_,$,ne),0===function Rr(){return Kn.lFrame.elementDepthCount}()&&ls($,_),function Ki(){Kn.lFrame.elementDepthCount++}(),Is(ne)&&(Nm(x,_,ne),o_(x,ne,_)),null!==d&&Bm(_,ne),Mf}function Qu(){let t=wr();fe()?Wt():(t=t.parent,W(t,!1));const i=t;!function ai(){Kn.lFrame.elementDepthCount--}();const s=Oi();return s.firstCreatePass&&(wi(s,t),Vs(t)&&s.queries.elementEnd(t)),null!=i.classesWithoutHost&&function Ln(t){return 0!=(16&t.flags)}(i)&&Xm(s,i,dn(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function yc(t){return 0!=(32&t.flags)}(i)&&Xm(s,i,dn(),i.stylesWithoutHost,!1),Qu}function Sf(t,i,s,d){return Mf(t,i,s,d),Qu(),Sf}function Kd(t,i,s){const d=dn(),_=Oi(),x=t+22,T=_.firstCreatePass?function R_(t,i,s,d,_){const x=i.consts,T=_r(x,d),L=Vd(i,t,8,"ng-container",T);return null!==T&&pc(L,T,!0),xf(i,s,L,_r(x,_)),null!==i.queries&&i.queries.elementStart(i,L),L}(x,_,d,i,s):_.data[x];W(T,!0);const L=d[x]=d[11].createComment("");return a(_,d,L,T),ls(L,d),Is(T)&&(Nm(_,d,T),o_(_,T,d)),null!=s&&Bm(d,T),Kd}function tp(){let t=wr();const i=Oi();return fe()?Wt():(t=t.parent,W(t,!1)),i.firstCreatePass&&(wi(i,t),Vs(t)&&i.queries.elementEnd(t)),tp}function Tf(t,i,s){return Kd(t,i,s),tp(),Tf}function L_(){return dn()}function If(t){return!!t&&"function"==typeof t.then}function F_(t){return!!t&&"function"==typeof t.subscribe}const N_=F_;function Qm(t,i,s,d){const _=dn(),x=Oi(),T=wr();return B_(x,_,_[11],T,t,i,0,d),Qm}function eg(t,i){const s=wr(),d=dn(),_=Oi();return B_(_,d,y_(ys(_.data),s,d),s,t,i),eg}function B_(t,i,s,d,_,x,T,L){const $=Is(d),ve=t.firstCreatePass&&__(t),ze=i[8],ft=g_(i);let Lt=!0;if(3&d.type||L){const $n=mr(d,i),ui=L?L($n):$n,Ti=ft.length,vn=L?Or=>L(xr(Or[d.index])):d.index;let Fi=null;if(!L&&$&&(Fi=function qb(t,i,s,d){const _=t.cleanup;if(null!=_)for(let x=0;x<_.length-1;x+=2){const T=_[x];if(T===s&&_[x+1]===d){const L=i[7],$=_[x+2];return L.length>$?L[$]:null}"string"==typeof T&&(x+=2)}return null}(t,i,_,d.index)),null!==Fi)(Fi.__ngLastListenerFn__||Fi).__ngNextListenerFn__=x,Fi.__ngLastListenerFn__=x,Lt=!1;else{x=V_(d,i,ze,x,!1);const Or=s.listen(ui,_,x);ft.push(x,Or),ve&&ve.push(_,vn,Ti,Ti+1)}}else x=V_(d,i,ze,x,!1);const cn=d.outputs;let In;if(Lt&&null!==cn&&(In=cn[_])){const $n=In.length;if($n)for(let ui=0;ui<$n;ui+=2){const Io=i[In[ui]][In[ui+1]].subscribe(x),gp=ft.length;ft.push(x,Io),ve&&ve.push(_,d.index,gp,-(gp+1))}}}function z_(t,i,s,d){try{return!1!==s(d)}catch(_){return $m(t,_),!1}}function V_(t,i,s,d,_){return function x(T){if(T===Function)return d;Yh(2&t.flags?qi(t.index,i):i);let $=z_(i,0,d,T),ne=x.__ngNextListenerFn__;for(;ne;)$=z_(i,0,ne,T)&&$,ne=ne.__ngNextListenerFn__;return _&&!1===$&&(T.preventDefault(),T.returnValue=!1),$}}function U_(t=1){return function Z(t){return(Kn.lFrame.contextLView=function ge(t,i){for(;t>0;)i=i[15],t--;return i}(t,Kn.lFrame.contextLView))[8]}(t)}function j_(t,i){let s=null;const d=function Fn(t){const i=t.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(t);for(let _=0;_<i.length;_++){const x=i[_];if("*"!==x){if(null===d?Hn(t,x,!0):Nn(d,x))return _}else s=_}return s}function H_(t){const i=dn()[16][6];if(!i.projection){const d=i.projection=an(t?t.length:1,null),_=d.slice();let x=i.child;for(;null!==x;){const T=t?j_(x,t):0;null!==T&&(_[T]?_[T].projectionNext=x:d[T]=x,_[T]=x),x=x.next}}}function $_(t,i=0,s){const d=dn(),_=Oi(),x=Vd(_,22+t,16,null,s||null);null===x.projection&&(x.projection=i),Wt(),64!=(64&x.flags)&&function K(t,i,s){ie(i[11],0,i,s,ou(t,s,i),au(s.parent||i[6],s,i))}(_,d,x)}function ig(t,i,s,d,_){const x=t[s+1],T=null===i;let L=d?Ha(x):ta(x),$=!1;for(;0!==L&&(!1===$||T);){const ve=t[L+1];Yb(t[L],i)&&($=!0,t[L+1]=d?mf(ve):Rc(ve)),L=d?Ha(ve):ta(ve)}$&&(t[s+1]=d?Rc(x):mf(x))}function Yb(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Ct(t,i)>=0}const Jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Q_(t){return t.substring(Jo.key,Jo.keyEnd)}function Xb(t){return t.substring(Jo.value,Jo.valueEnd)}function ey(t,i){const s=Jo.textEnd;return s===i?-1:(i=Jo.keyEnd=function e0(t,i,s){for(;i<s&&t.charCodeAt(i)>32;)i++;return i}(t,Jo.key=i,s),Yd(t,i,s))}function ty(t,i){const s=Jo.textEnd;let d=Jo.key=Yd(t,i,s);return s===d?-1:(d=Jo.keyEnd=function t0(t,i,s){let d;for(;i<s&&(45===(d=t.charCodeAt(i))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)i++;return i}(t,d,s),d=iy(t,d,s),d=Jo.value=Yd(t,d,s),d=Jo.valueEnd=function n0(t,i,s){let d=-1,_=-1,x=-1,T=i,L=T;for(;T<s;){const $=t.charCodeAt(T++);if(59===$)return L;34===$||39===$?L=T=ry(t,$,T,s):i===T-4&&85===x&&82===_&&76===d&&40===$?L=T=ry(t,41,T,s):$>32&&(L=T),x=_,_=d,d=-33&$}return L}(t,d,s),iy(t,d,s))}function ny(t){Jo.key=0,Jo.keyEnd=0,Jo.value=0,Jo.valueEnd=0,Jo.textEnd=t.length}function Yd(t,i,s){for(;i<s&&t.charCodeAt(i)<=32;)i++;return i}function iy(t,i,s,d){return(i=Yd(t,i,s))<s&&i++,i}function ry(t,i,s,d){let _=-1,x=s;for(;x<d;){const T=t.charCodeAt(x++);if(T==i&&92!==_)return x;_=92==T&&92===_?0:T}throw new Error}function np(t,i,s){return Gl(t,i,s,!1),np}function rg(t,i){return Gl(t,i,null,!0),rg}function ll(t){Zl(ly,r0,t,!1)}function r0(t,i){for(let s=function Qb(t){return ny(t),ty(t,Yd(t,0,Jo.textEnd))}(i);s>=0;s=ty(i,s))ly(t,Q_(i),Xb(i))}function oy(t){Zl(Ie,fc,t,!0)}function fc(t,i){for(let s=function Jb(t){return ny(t),ey(t,Yd(t,0,Jo.textEnd))}(i);s>=0;s=ey(i,s))Ie(t,Q_(i),!0)}function Gl(t,i,s,d){const _=dn(),x=Oi(),T=rs(2);x.firstUpdatePass&&ay(x,t,T,d),i!==Pn&&zs(_,T,i)&&cy(x,x.data[nt()],_,_[11],t,_[T+1]=function d0(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=Re(yo(t)))),t}(i,s),d,T)}function Zl(t,i,s,d){const _=Oi(),x=rs(2);_.firstUpdatePass&&ay(_,null,x,d);const T=dn();if(s!==Pn&&zs(T,x,s)){const L=_.data[nt()];if(dy(L,d)&&!sy(_,x)){let $=d?L.classesWithoutHost:L.stylesWithoutHost;null!==$&&(s=pe($,s||"")),Xm(_,L,T,s,d)}else!function u0(t,i,s,d,_,x,T,L){_===Pn&&(_=ot);let $=0,ne=0,ve=0<_.length?_[0]:null,ze=0<x.length?x[0]:null;for(;null!==ve||null!==ze;){const ft=$<_.length?_[$+1]:void 0,Lt=ne<x.length?x[ne+1]:void 0;let In,cn=null;ve===ze?($+=2,ne+=2,ft!==Lt&&(cn=ze,In=Lt)):null===ze||null!==ve&&ve<ze?($+=2,cn=ve):(ne+=2,cn=ze,In=Lt),null!==cn&&cy(t,i,s,d,cn,In,T,L),ve=$<_.length?_[$]:null,ze=ne<x.length?x[ne]:null}}(_,L,T,T[11],T[x+1],T[x+1]=function c0(t,i,s){if(null==s||""===s)return ot;const d=[],_=yo(s);if(Array.isArray(_))for(let x=0;x<_.length;x++)t(d,_[x],!0);else if("object"==typeof _)for(const x in _)_.hasOwnProperty(x)&&t(d,x,_[x]);else"string"==typeof _&&i(d,_);return d}(t,i,s),d,x)}}function sy(t,i){return i>=t.expandoStartIndex}function ay(t,i,s,d){const _=t.data;if(null===_[s+1]){const x=_[nt()],T=sy(t,s);dy(x,d)&&null===i&&!T&&(i=!1),i=function o0(t,i,s,d){const _=ys(t);let x=d?i.residualClasses:i.residualStyles;if(null===_)0===(d?i.classBindings:i.styleBindings)&&(s=ip(s=og(null,t,i,s,d),i.attrs,d),x=null);else{const T=i.directiveStylingLast;if(-1===T||t[T]!==_)if(s=og(_,t,i,s,d),null===x){let $=function s0(t,i,s){const d=s?i.classBindings:i.styleBindings;if(0!==ta(d))return t[Ha(d)]}(t,i,d);void 0!==$&&Array.isArray($)&&($=og(null,t,i,$[1],d),$=ip($,i.attrs,d),function a0(t,i,s,d){t[Ha(s?i.classBindings:i.styleBindings)]=d}(t,i,d,$))}else x=function l0(t,i,s){let d;const _=i.directiveEnd;for(let x=1+i.directiveStylingLast;x<_;x++)d=ip(d,t[x].hostAttrs,s);return ip(d,i.attrs,s)}(t,i,d)}return void 0!==x&&(d?i.residualClasses=x:i.residualStyles=x),s}(_,x,i,d),function Kb(t,i,s,d,_,x){let T=x?i.classBindings:i.styleBindings,L=Ha(T),$=ta(T);t[d]=s;let ve,ne=!1;if(Array.isArray(s)){const ze=s;ve=ze[1],(null===ve||Ct(ze,ve)>0)&&(ne=!0)}else ve=s;if(_)if(0!==$){const ft=Ha(t[L+1]);t[d+1]=kc(ft,L),0!==ft&&(t[ft+1]=zd(t[ft+1],d)),t[L+1]=function wl(t,i){return 131071&t|i<<17}(t[L+1],d)}else t[d+1]=kc(L,0),0!==L&&(t[L+1]=zd(t[L+1],d)),L=d;else t[d+1]=kc($,0),0===L?L=d:t[$+1]=zd(t[$+1],d),$=d;ne&&(t[d+1]=Rc(t[d+1])),ig(t,ve,d,!0),ig(t,ve,d,!1),function J_(t,i,s,d,_){const x=_?t.residualClasses:t.residualStyles;null!=x&&"string"==typeof i&&Ct(x,i)>=0&&(s[d+1]=mf(s[d+1]))}(i,ve,t,d,x),T=kc(L,$),x?i.classBindings=T:i.styleBindings=T}(_,x,i,s,T,d)}}function og(t,i,s,d,_){let x=null;const T=s.directiveEnd;let L=s.directiveStylingLast;for(-1===L?L=s.directiveStart:L++;L<T&&(x=i[L],d=ip(d,x.hostAttrs,_),x!==t);)L++;return null!==t&&(s.directiveStylingLast=L),d}function ip(t,i,s){const d=s?1:2;let _=-1;if(null!==i)for(let x=0;x<i.length;x++){const T=i[x];"number"==typeof T?_=T:_===d&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ie(t,T,!!s||i[++x]))}return void 0===t?null:t}function ly(t,i,s){Ie(t,i,yo(s))}function cy(t,i,s,d,_,x,T,L){if(!(3&i.type))return;const $=t.data,ne=$[L+1];Af(function dc(t){return 1==(1&t)}(ne)?uy($,i,s,_,ta(ne),T):void 0)||(Af(x)||function Cs(t){return 2==(2&t)}(ne)&&(x=uy($,null,s,_,L,T)),function _e(t,i,s,d,_){if(i)_?t.addClass(s,d):t.removeClass(s,d);else{let x=-1===d.indexOf("-")?void 0:Xs.DashCase;null==_?t.removeStyle(s,d,x):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),x|=Xs.Important),t.setStyle(s,d,_,x))}}(d,T,Ia(nt(),s),_,x))}function uy(t,i,s,d,_,x){const T=null===i;let L;for(;_>0;){const $=t[_],ne=Array.isArray($),ve=ne?$[1]:$,ze=null===ve;let ft=s[_+1];ft===Pn&&(ft=ze?ot:void 0);let Lt=ze?je(ft,d):ve===d?ft:void 0;if(ne&&!Af(Lt)&&(Lt=je($,d)),Af(Lt)&&(L=Lt,T))return L;const cn=t[_+1];_=T?Ha(cn):ta(cn)}if(null!==i){let $=x?i.residualClasses:i.residualStyles;null!=$&&(L=je($,d))}return L}function Af(t){return void 0!==t}function dy(t,i){return 0!=(t.flags&(i?16:32))}function hy(t,i=""){const s=dn(),d=Oi(),_=t+22,x=d.firstCreatePass?Vd(d,_,1,i,null):d.data[_],T=s[_]=function Bh(t,i){return t.createText(i)}(s[11],i);a(d,s,T,x),W(x,!1)}function sg(t){return Pf("",t,""),sg}function Pf(t,i,s){const d=dn(),_=Hd(d,t,i,s);return _!==Pn&&function Lc(t,i,s){const d=Ia(i,t);!function ju(t,i,s){t.setValue(i,s)}(t[11],d,s)}(d,nt(),_),Pf}function by(t,i,s){Zl(Ie,fc,Hd(dn(),t,i,s),!0)}function lg(t,i,s){const d=dn();return zs(d,No(),i)&&al(Oi(),qt(),d,t,i,d[11],s,!0),lg}function cg(t,i,s){const d=dn();if(zs(d,No(),i)){const x=Oi(),T=qt();al(x,T,d,t,i,y_(ys(x.data),T,d),s,!0)}return cg}const ed=void 0;var M0=["en",[["a","p"],["AM","PM"],ed],[["AM","PM"],ed,ed],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ed,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ed,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ed,"{1} 'at' {0}",ed],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function D0(t){const s=Math.floor(Math.abs(t)),d=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===d?1:5}];let Jd={};function ug(t){const i=function S0(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=Ry(i);if(s)return s;const d=i.split("-")[0];if(s=Ry(d),s)return s;if("en"===d)return M0;throw new We(701,!1)}function ky(t){return ug(t)[Si.PluralCase]}function Ry(t){return t in Jd||(Jd[t]=le.ng&&le.ng.common&&le.ng.common.locales&&le.ng.common.locales[t]),Jd[t]}var Si=(()=>((Si=Si||{})[Si.LocaleId=0]="LocaleId",Si[Si.DayPeriodsFormat=1]="DayPeriodsFormat",Si[Si.DayPeriodsStandalone=2]="DayPeriodsStandalone",Si[Si.DaysFormat=3]="DaysFormat",Si[Si.DaysStandalone=4]="DaysStandalone",Si[Si.MonthsFormat=5]="MonthsFormat",Si[Si.MonthsStandalone=6]="MonthsStandalone",Si[Si.Eras=7]="Eras",Si[Si.FirstDayOfWeek=8]="FirstDayOfWeek",Si[Si.WeekendRange=9]="WeekendRange",Si[Si.DateFormat=10]="DateFormat",Si[Si.TimeFormat=11]="TimeFormat",Si[Si.DateTimeFormat=12]="DateTimeFormat",Si[Si.NumberSymbols=13]="NumberSymbols",Si[Si.NumberFormats=14]="NumberFormats",Si[Si.CurrencyCode=15]="CurrencyCode",Si[Si.CurrencySymbol=16]="CurrencySymbol",Si[Si.CurrencyName=17]="CurrencyName",Si[Si.Currencies=18]="Currencies",Si[Si.Directionality=19]="Directionality",Si[Si.PluralCase=20]="PluralCase",Si[Si.ExtraData=21]="ExtraData",Si))();const Qd="en-US";let A0=Qd;function Rf(t,i,s,d,_){if(t=Te(t),Array.isArray(t))for(let x=0;x<t.length;x++)Rf(t[x],i,s,d,_);else{const x=Oi(),T=dn();let L=Sc(t)?t:Te(t.provide),$=Ch(t);const ne=wr(),ve=1048575&ne.providerIndexes,ze=ne.directiveStart,ft=ne.providerIndexes>>20;if(Sc(t)||!t.multi){const Lt=new Mn($,_,Oc),cn=_g(L,i,_?ve:ve+ft,ze);-1===cn?(el(ir(ne,T),x,L),gg(x,t,i.length),i.push(L),ne.directiveStart++,ne.directiveEnd++,_&&(ne.providerIndexes+=1048576),s.push(Lt),T.push(Lt)):(s[cn]=Lt,T[cn]=Lt)}else{const Lt=_g(L,i,ve+ft,ze),cn=_g(L,i,ve,ve+ft),In=Lt>=0&&s[Lt],$n=cn>=0&&s[cn];if(_&&!$n||!_&&!In){el(ir(ne,T),x,L);const ui=function Cx(t,i,s,d,_){const x=new Mn(t,s,Oc);return x.multi=[],x.index=i,x.componentProviders=0,Qy(x,_,d&&!s),x}(_?wx:xx,s.length,_,d,$);!_&&$n&&(s[cn].providerFactory=ui),gg(x,t,i.length,0),i.push(L),ne.directiveStart++,ne.directiveEnd++,_&&(ne.providerIndexes+=1048576),s.push(ui),T.push(ui)}else gg(x,t,Lt>-1?Lt:cn,Qy(s[_?cn:Lt],$,!_&&d));!_&&d&&$n&&s[cn].componentProviders++}}}function gg(t,i,s,d){const _=Sc(i),x=function Au(t){return!!t.useClass}(i);if(_||x){const $=(x?Te(i.useClass):i).prototype.ngOnDestroy;if($){const ne=t.destroyHooks||(t.destroyHooks=[]);if(!_&&i.multi){const ve=ne.indexOf(s);-1===ve?ne.push(s,[d,$]):ne[ve+1].push(d,$)}else ne.push(s,$)}}}function Qy(t,i,s){return s&&t.componentProviders++,t.multi.push(i)-1}function _g(t,i,s,d){for(let _=s;_<d;_++)if(i[_]===t)return _;return-1}function xx(t,i,s,d){return yg(this.multi,[])}function wx(t,i,s,d){const _=this.multi;let x;if(this.providerFactory){const T=this.providerFactory.componentProviders,L=da(s,s[1],this.providerFactory.index,d);x=L.slice(0,T),yg(_,x);for(let $=T;$<L.length;$++)x.push(L[$])}else x=[],yg(_,x);return x}function yg(t,i){for(let s=0;s<t.length;s++)i.push((0,t[s])());return i}function vg(t,i=[]){return s=>{s.providersResolver=(d,_)=>function bx(t,i,s){const d=Oi();if(d.firstCreatePass){const _=kr(t);Rf(s,d.data,d.blueprint,_,!0),Rf(i,d.data,d.blueprint,_,!1)}}(d,_?_(t):t,i)}}class du{}class bg{}function Ex(t,i){return new ev(t,i??null)}class ev extends du{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jd(this);const d=Vt(i);this._bootstrapComponents=ws(d.bootstrap),this._r3Injector=Xo(i,s,[{provide:du,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],Re(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class tv extends bg{constructor(i){super(),this.moduleType=i}create(i){return new ev(this.moduleType,i)}}class nv extends du{constructor(i,s,d){super(),this.componentFactoryResolver=new jd(this),this.instance=null;const _=new Bp([...i,{provide:du,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],s||yd(),d,new Set(["environment"]));this.injector=_,_.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Lf(t,i,s=null){return new nv(t,i,s).injector}let Dx=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const d=kp(0,s.type),_=d.length>0?Lf([d],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,_)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=bn({token:t,providedIn:"environment",factory:()=>new t(Dr(Tc))}),t})();function Mx(t){t.getStandaloneInjector=i=>i.get(Dx).getOrCreateStandaloneInjector(t)}function cv(t,i,s){const d=ur()+t,_=dn();return _[d]===Pn?ps(_,d,s?i.call(s):i()):function Jh(t,i){return t[i]}(_,d)}function uv(t,i,s,d){return fv(dn(),ur(),t,i,s,d)}function dv(t,i,s,d,_){return function mv(t,i,s,d,_,x,T){const L=i+s;return Xu(t,L,_,x)?ps(t,L+2,T?d.call(T,_,x):d(_,x)):lp(t,L+2)}(dn(),ur(),t,i,s,d,_)}function Rx(t,i,s,d,_,x){return function gv(t,i,s,d,_,x,T,L){const $=i+s;return function qm(t,i,s,d,_){const x=Xu(t,i,s,d);return zs(t,i+2,_)||x}(t,$,_,x,T)?ps(t,$+3,L?d.call(L,_,x,T):d(_,x,T)):lp(t,$+3)}(dn(),ur(),t,i,s,d,_,x)}function pv(t,i,s,d){return function yv(t,i,s,d,_,x){let T=i+s,L=!1;for(let $=0;$<_.length;$++)zs(t,T++,_[$])&&(L=!0);return L?ps(t,T,d.apply(x,_)):lp(t,T)}(dn(),ur(),t,i,s,d)}function lp(t,i){const s=t[i];return s===Pn?void 0:s}function fv(t,i,s,d,_,x){const T=i+s;return zs(t,T,_)?ps(t,T+1,x?d.call(x,_):d(_)):lp(t,T+1)}function vv(t,i){const s=Oi();let d;const _=t+22;s.firstCreatePass?(d=function zx(t,i){if(i)for(let s=i.length-1;s>=0;s--){const d=i[s];if(t===d.name)return d}}(i,s.pipeRegistry),s.data[_]=d,d.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(_,d.onDestroy)):d=s.data[_];const x=d.factory||(d.factory=Lo(d.type)),T=Y(Oc);try{const L=Bo(!1),$=x();return Bo(L),function Wb(t,i,s,d){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),i[s]=d}(s,dn(),_,$),$}finally{Y(T)}}function bv(t,i,s){const d=t+22,_=dn(),x=Co(_,d);return function cp(t,i){return t[1].data[i].pure}(_,d)?fv(_,ur(),i,x.transform,s,x):x.transform(s)}function xg(t){return i=>{setTimeout(t,void 0,i)}}const mc=class jx extends D.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,d){let _=i,x=s||(()=>null),T=d;if(i&&"object"==typeof i){const $=i;_=$.next?.bind($),x=$.error?.bind($),T=$.complete?.bind($)}this.__isAsync&&(x=xg(x),_&&(_=xg(_)),T&&(T=xg(T)));const L=super.subscribe({next:_,error:x,complete:T});return i instanceof l.w0&&i.add(L),L}};function Hx(){return this._results[Ku()]()}class zf{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ku(),d=zf.prototype;d[s]||(d[s]=Hx)}get changes(){return this._changes||(this._changes=new mc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const d=this;d.dirty=!1;const _=Ft(i);(this._changesDetected=!function Ht(t,i,s){if(t.length!==i.length)return!1;for(let d=0;d<t.length;d++){let _=t[d],x=i[d];if(s&&(_=s(_),x=s(x)),x!==_)return!1}return!0}(d._results,_,s))&&(d._results=_,d.length=_.length,d.last=_[this.length-1],d.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let up=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zx,t})();const $x=up,Gx=class extends $x{constructor(i,s,d){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=d}createEmbeddedView(i,s){const d=this._declarationTContainer.tViews,_=yf(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,s||null);_[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(_[19]=T.createEmbeddedView(d)),vf(d,_,i),new Ri(_)}};function Zx(){return Vf(wr(),dn())}function Vf(t,i){return 4&t.type?new Gx(i,t,ga(t,i)):null}let Uf=(()=>{class t{}return t.__NG_ELEMENT_ID__=Wx,t})();function Wx(){return Ev(wr(),dn())}const qx=Uf,wv=class extends qx{constructor(i,s,d){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=d}get element(){return ga(this._hostTNode,this._hostLView)}get injector(){return new hr(this._hostTNode,this._hostLView)}get parentInjector(){const i=ua(this._hostTNode,this._hostLView);if(Pl(i)){const s=qo(i,this._hostLView),d=Wo(i);return new hr(s[1].data[d+8],s)}return new hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Cv(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,d){let _,x;"number"==typeof d?_=d:null!=d&&(_=d.index,x=d.injector);const T=i.createEmbeddedView(s||{},x);return this.insert(T,_),T}createComponent(i,s,d,_,x){const T=i&&!function it(t){return"function"==typeof t}(i);let L;if(T)L=s;else{const ze=s||{};L=ze.index,d=ze.injector,_=ze.projectableNodes,x=ze.environmentInjector||ze.ngModuleRef}const $=T?i:new qu(ni(i)),ne=d||this.parentInjector;if(!x&&null==$.ngModule){const ft=(T?ne:this.parentInjector).get(Tc,null);ft&&(x=ft)}const ve=$.create(ne,_,void 0,x);return this.insert(ve.hostView,L),ve}insert(i,s){const d=i._lView,_=d[1];if(function Aa(t){return ro(t[3])}(d)){const ve=this.indexOf(i);if(-1!==ve)this.detach(ve);else{const ze=d[3],ft=new wv(ze,ze[6],ze[3]);ft.detach(ft.indexOf(i))}}const x=this._adjustIndex(s),T=this._lContainer;!function Vh(t,i,s,d){const _=10+d,x=s.length;d>0&&(s[_-1][4]=i),d<x-10?(i[4]=s[_],Qt(s,10+d,i)):(s.push(i),i[4]=null),i[3]=s;const T=i[17];null!==T&&s!==T&&function kd(t,i){const s=t[9];i[16]!==i[3][3][16]&&(t[2]=!0),null===s?t[9]=[i]:s.push(i)}(T,i);const L=i[19];null!==L&&L.insertView(t),i[2]|=64}(_,d,T,x);const L=w(x,T),$=d[11],ne=Ld($,T[7]);return null!==ne&&function zh(t,i,s,d,_,x){d[0]=_,d[6]=i,N(t,d,s,1,_,x)}(_,T[6],$,d,ne,L),i.attachToViewContainerRef(),Qt(wg(T),x,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Cv(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),d=$u(this._lContainer,s);d&&(sn(wg(this._lContainer),s),Uh(d[1],d))}detach(i){const s=this._adjustIndex(i,-1),d=$u(this._lContainer,s);return d&&null!=sn(wg(this._lContainer),s)?new Ri(d):null}_adjustIndex(i,s=0){return i??this.length+s}};function Cv(t){return t[8]}function wg(t){return t[8]||(t[8]=[])}function Ev(t,i){let s;const d=i[t.index];if(ro(d))s=d;else{let _;if(8&t.type)_=xr(d);else{const x=i[11];_=x.createComment("");const T=mr(t,i);uc(x,Ld(x,T),_,function su(t,i){return t.nextSibling(i)}(x,T),!1)}i[t.index]=s=qh(d,i,_,t),Kh(i,s)}return new wv(s,t,i)}class Cg{constructor(i){this.queryList=i,this.matches=null}clone(){return new Cg(this.queryList)}setDirty(){this.queryList.setDirty()}}class jf{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const d=null!==i.contentQueries?i.contentQueries[0]:s.length,_=[];for(let x=0;x<d;x++){const T=s.getByIndex(x);_.push(this.queries[T.indexInDeclarationView].clone())}return new jf(_)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Rv(i,s).matches&&this.queries[s].setDirty()}}class Dv{constructor(i,s,d=null){this.predicate=i,this.flags=s,this.read=d}}class Eg{constructor(i=[]){this.queries=i}elementStart(i,s){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let d=0;d<this.length;d++){const _=null!==s?s.length:0,x=this.getByIndex(d).embeddedTView(i,_);x&&(x.indexInDeclarationView=d,null!==s?s.push(x):s=[x])}return null!==s?new Eg(s):null}template(i,s){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Dg{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Dg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==s;)d=d.parent;return s===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const d=this.metadata.predicate;if(Array.isArray(d))for(let _=0;_<d.length;_++){const x=d[_];this.matchTNodeWithReadOption(i,s,Xx(s,x)),this.matchTNodeWithReadOption(i,s,Ks(s,i,x,!1,!1))}else d===up?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,Ks(s,i,d,!1,!1))}matchTNodeWithReadOption(i,s,d){if(null!==d){const _=this.metadata.read;if(null!==_)if(_===Ic||_===Uf||_===up&&4&s.type)this.addMatch(s.index,-2);else{const x=Ks(s,i,_,!1,!1);null!==x&&this.addMatch(s.index,x)}else this.addMatch(s.index,d)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function Xx(t,i){const s=t.localNames;if(null!==s)for(let d=0;d<s.length;d+=2)if(s[d]===i)return s[d+1];return null}function Qx(t,i,s,d){return-1===s?function Jx(t,i){return 11&t.type?ga(t,i):4&t.type?Vf(t,i):null}(i,t):-2===s?function ew(t,i,s){return s===Ic?ga(i,t):s===up?Vf(i,t):s===Uf?Ev(i,t):void 0}(t,i,d):da(t,t[1],s,i)}function Mv(t,i,s,d){const _=i[19].queries[d];if(null===_.matches){const x=t.data,T=s.matches,L=[];for(let $=0;$<T.length;$+=2){const ne=T[$];L.push(ne<0?null:Qx(i,x[ne],T[$+1],s.metadata.read))}_.matches=L}return _.matches}function Mg(t,i,s,d){const _=t.queries.getByIndex(s),x=_.matches;if(null!==x){const T=Mv(t,i,_,s);for(let L=0;L<x.length;L+=2){const $=x[L];if($>0)d.push(T[L/2]);else{const ne=x[L+1],ve=i[-$];for(let ze=10;ze<ve.length;ze++){const ft=ve[ze];ft[17]===ft[3]&&Mg(ft[1],ft,ne,d)}if(null!==ve[9]){const ze=ve[9];for(let ft=0;ft<ze.length;ft++){const Lt=ze[ft];Mg(Lt[1],Lt,ne,d)}}}}}return d}function Sv(t){const i=dn(),s=Oi(),d=qs();Ja(d+1);const _=Rv(s,d);if(t.dirty&&function hl(t){return 4==(4&t[2])}(i)===(2==(2&_.metadata.flags))){if(null===_.matches)t.reset([]);else{const x=_.crossesNgTemplate?Mg(s,i,d,[]):Mv(s,i,_,d);t.reset(x,Ac),t.notifyOnChanges()}return!0}return!1}function Tv(t,i,s){const d=Oi();d.firstCreatePass&&(kv(d,new Dv(t,i,s),-1),2==(2&i)&&(d.staticViewQueries=!0)),Ov(d,dn(),i)}function Iv(t,i,s,d){const _=Oi();if(_.firstCreatePass){const x=wr();kv(_,new Dv(i,s,d),x.index),function tw(t,i){const s=t.contentQueries||(t.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,i)}(_,t),2==(2&s)&&(_.staticContentQueries=!0)}Ov(_,dn(),s)}function Av(){return function Pv(t,i){return t[19].queries[i].queryList}(dn(),qs())}function Ov(t,i,s){const d=new zf(4==(4&s));s_(t,i,d,d.destroy),null===i[19]&&(i[19]=new jf),i[19].queries.push(new Cg(d))}function kv(t,i,s){null===t.queries&&(t.queries=new Eg),t.queries.track(new Dg(i,s))}function Rv(t,i){return t.queries.getByIndex(i)}function Wf(...t){}const Lg=new A("Application Initializer");let qf=(()=>{class t{constructor(s){this.appInits=s,this.resolve=Wf,this.reject=Wf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,_)=>{this.resolve=d,this.reject=_})}runInitializers(){if(this.initialized)return;const s=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const x=this.appInits[_]();if(If(x))s.push(x);else if(N_(x)){const T=new Promise((L,$)=>{x.subscribe({complete:L,error:$})});s.push(T)}}Promise.all(s).then(()=>{d()}).catch(_=>{this.reject(_)}),0===s.length&&d(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(Dr(Lg,8))},t.\u0275prov=bn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Kf=new A("AppId",{providedIn:"root",factory:function Jv(){return`${Fg()}${Fg()}${Fg()}`}});function Fg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qv=new A("Platform Initializer"),Ng=new A("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bg=new A("appBootstrapListener"),yw=new A("AnimationModuleType");let vw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=bn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Yf=new A("LocaleId",{providedIn:"root",factory:()=>pu(Yf,xn.Optional|xn.SkipSelf)||function zg(){return typeof $localize<"u"&&$localize.locale||Qd}()}),bw=new A("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Fc{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let xw=(()=>{class t{compileModuleSync(s){return new tv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const d=this.compileModuleSync(s),x=ws(Vt(s).declarations).reduce((T,L)=>{const $=ni(L);return $&&T.push(new qu($)),T},[]);return new Fc(d,x)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=bn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const G1=(()=>Promise.resolve(0))();function Vg(t){typeof Zone>"u"?G1.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class El{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mc(!1),this.onMicrotaskEmpty=new mc(!1),this.onStable=new mc(!1),this.onError=new mc(!1),typeof Zone>"u")throw new We(908,!1);Zone.assertZonePatched();const _=this;if(_._nesting=0,_._outer=_._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const x=Zone.AsyncStackTaggingZoneSpec;_._inner=_._inner.fork(new x("Angular"))}Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!d&&s,_.shouldCoalesceRunChangeDetection=d,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function Cw(){let t=le.requestAnimationFrame,i=le.cancelAnimationFrame;if(typeof Zone<"u"&&t&&i){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Mw(t){const i=()=>{!function Dw(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(le,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,nb(t),t.isCheckStableRunning=!0,Ug(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),nb(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,d,_,x,T,L)=>{try{return c(t),s.invokeTask(_,x,T,L)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||t.shouldCoalesceRunChangeDetection)&&i(),h(t)}},onInvoke:(s,d,_,x,T,L,$)=>{try{return c(t),s.invoke(_,x,T,L,$)}finally{t.shouldCoalesceRunChangeDetection&&i(),h(t)}},onHasTask:(s,d,_,x)=>{s.hasTask(_,x),d===_&&("microTask"==x.change?(t._hasPendingMicrotasks=x.microTask,nb(t),Ug(t)):"macroTask"==x.change&&(t.hasPendingMacrotasks=x.macroTask))},onHandleError:(s,d,_,x)=>(s.handleError(_,x),t.runOutsideAngular(()=>t.onError.emit(x)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!El.isInAngularZone())throw new We(909,!1)}static assertNotInAngularZone(){if(El.isInAngularZone())throw new We(909,!1)}run(i,s,d){return this._inner.run(i,s,d)}runTask(i,s,d,_){const x=this._inner,T=x.scheduleEventTask("NgZoneEvent: "+_,i,Ew,Wf,Wf);try{return x.runTask(T,s,d)}finally{x.cancelTask(T)}}runGuarded(i,s,d){return this._inner.runGuarded(i,s,d)}runOutsideAngular(i){return this._outer.run(i)}}const Ew={};function Ug(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nb(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function c(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function h(t){t._nesting--,Ug(t)}class r{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mc,this.onMicrotaskEmpty=new mc,this.onStable=new mc,this.onError=new mc}run(i,s,d){return i.apply(s,d)}runGuarded(i,s,d){return i.apply(s,d)}runOutsideAngular(i){return i()}runTask(i,s,d,_){return i.apply(s,d)}}const p=new A(""),M=new A("");let Ke,F=(()=>{class t{constructor(s,d,_){this._ngZone=s,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ke||(function xe(t){Ke=t}(_),_.addToWindow(d)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{El.assertNotInAngularZone(),Vg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vg(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(s)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,d,_){let x=-1;d&&d>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==x),s(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:s,timeoutId:x,updateCb:_})}whenStable(s,d,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,d,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,d,_){return[]}}return t.\u0275fac=function(s){return new(s||t)(Dr(El),Dr(se),Dr(M))},t.\u0275prov=bn({token:t,factory:t.\u0275fac}),t})(),se=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,d){this._applications.set(s,d)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,d=!0){return Ke?.findTestabilityInTree(this,s,d)??null}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=bn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),vt=null;const Kt=new A("AllowMultipleToken"),Jt=new A("PlatformDestroyListeners");class bi{constructor(i,s){this.name=i,this.token=s}}function na(t,i,s=[]){const d=`Platform: ${i}`,_=new A(d);return(x=[])=>{let T=Ca();if(!T||T.injector.get(Kt,!1)){const L=[...s,...x,{provide:_,useValue:!0}];t?t(L):function ki(t){if(vt&&!vt.get(Kt,!1))throw new We(400,!1);vt=t;const i=t.get($a);(function Kr(t){const i=t.get(Qv,null);i&&i.forEach(s=>s())})(t)}(function Lr(t=[],i){return co.create({name:i,providers:[{provide:gd,useValue:"platform"},{provide:Jt,useValue:new Set([()=>vt=null])},...t]})}(L,d))}return function wa(t){const i=Ca();if(!i)throw new We(401,!1);return i}()}}function Ca(){return vt?.get($a)??null}let $a=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,d){const _=function cl(t,i){let s;return s="noop"===t?new r:("zone.js"===t?void 0:t)||new El(i),s}(d?.ngZone,function Ms(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(d)),x=[{provide:El,useValue:_}];return _.run(()=>{const T=co.create({providers:x,parent:this.injector,name:s.moduleType.name}),L=s.create(T),$=L.injector.get(eu,null);if(!$)throw new We(402,!1);return _.runOutsideAngular(()=>{const ne=_.onError.subscribe({next:ve=>{$.handleError(ve)}});L.onDestroy(()=>{ii(this._modules,L),ne.unsubscribe()})}),function Dl(t,i,s){try{const d=s();return If(d)?d.catch(_=>{throw i.runOutsideAngular(()=>t.handleError(_)),_}):d}catch(d){throw i.runOutsideAngular(()=>t.handleError(d)),d}}($,_,()=>{const ne=L.injector.get(qf);return ne.runInitializers(),ne.donePromise.then(()=>(function P0(t){yi(t,"Expected localeId to be defined"),"string"==typeof t&&(A0=t.toLowerCase().replace(/_/g,"-"))}(L.injector.get(Yf,Qd)||Qd),this._moduleDoBootstrap(L),L))})})}bootstrapModule(s,d=[]){const _=nd({},d);return function ri(t,i,s){const d=new tv(s);return Promise.resolve(d)}(0,0,s).then(x=>this.bootstrapModuleFactory(x,_))}_moduleDoBootstrap(s){const d=s.injector.get(gc);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(_=>d.bootstrap(_));else{if(!s.instance.ngDoBootstrap)throw new We(403,!1);s.instance.ngDoBootstrap(d)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new We(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const s=this._injector.get(Jt,null);s&&(s.forEach(d=>d()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(Dr(co))},t.\u0275prov=bn({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function nd(t,i){return Array.isArray(i)?i.reduce(nd,t):{...t,...i}}let gc=(()=>{class t{constructor(s,d,_){this._zone=s,this._injector=d,this._exceptionHandler=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new G.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),T=new G.y(L=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{El.assertNotInAngularZone(),Vg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{El.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{$.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,m.T)(x,T.pipe((0,qe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,d){const _=s instanceof Pu;if(!this._injector.get(qf).done)throw!_&&zt(s),new We(405,false);let T;T=_?s:this._injector.get(Wc).resolveComponentFactory(s),this.componentTypes.push(T.componentType);const L=function Xn(t){return t.isBoundToModule}(T)?void 0:this._injector.get(du),ne=T.create(co.NULL,[],d||T.selector,L),ve=ne.location.nativeElement,ze=ne.injector.get(p,null);return ze?.registerApplication(ve),ne.onDestroy(()=>{this.detachView(ne.hostView),ii(this.components,ne),ze?.unregisterApplication(ve)}),this._loadComponent(ne),ne}tick(){if(this._runningTick)throw new We(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const d=s;this._views.push(d),d.attachToAppRef(this)}detachView(s){const d=s;ii(this._views,d),d.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Bg,[]).concat(this._bootstrapListeners).forEach(_=>_(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>ii(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new We(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(s){return new(s||t)(Dr(El),Dr(Tc),Dr(eu))},t.\u0275prov=bn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ii(t,i){const s=t.indexOf(i);s>-1&&t.splice(s,1)}let tr=!0;function Ss(){tr=!1}let oh=(()=>{class t{}return t.__NG_ELEMENT_ID__=$o,t})();function $o(t){return function _c(t,i,s){if(ia(t)&&!s){const d=qi(t.index,i);return new Ri(d,d)}return 47&t.type?new Ri(i[16],i):null}(wr(),dn(),16==(16&t))}class q1{constructor(){}supports(i){return Xh(i)}create(i){return new lC(i)}}const aC=(t,i)=>i;class lC{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||aC}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,d=this._removalsHead,_=0,x=null;for(;s||d;){const T=!d||s&&s.currentIndex<Y1(d,_,x)?s:d,L=Y1(T,_,x),$=T.currentIndex;if(T===d)_--,d=d._nextRemoved;else if(s=s._next,null==T.previousIndex)_++;else{x||(x=[]);const ne=L-_,ve=$-_;if(ne!=ve){for(let ft=0;ft<ne;ft++){const Lt=ft<x.length?x[ft]:x[ft]=0,cn=Lt+ft;ve<=cn&&cn<ne&&(x[ft]=Lt+1)}x[T.previousIndex]=ve-ne}}L!==$&&i(T,L,$)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Xh(i))throw new We(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let _,x,T,s=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let L=0;L<this.length;L++)x=i[L],T=this._trackByFn(L,x),null!==s&&Object.is(s.trackById,T)?(d&&(s=this._verifyReinsertion(s,x,T,L)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,T,L),d=!0),s=s._next}else _=0,function E_(t,i){if(Array.isArray(t))for(let s=0;s<t.length;s++)i(t[s]);else{const s=t[Ku()]();let d;for(;!(d=s.next()).done;)i(d.value)}}(i,L=>{T=this._trackByFn(_,L),null!==s&&Object.is(s.trackById,T)?(d&&(s=this._verifyReinsertion(s,L,T,_)),Object.is(s.item,L)||this._addIdentityChange(s,L)):(s=this._mismatch(s,L,T,_),d=!0),s=s._next,_++}),this.length=_;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,d,_){let x;return null===i?x=this._itTail:(x=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,x,_)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,_))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,x,_)):i=this._addAfter(new cC(s,d),x,_),i}_verifyReinsertion(i,s,d,_){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==x?i=this._reinsertAfter(x,i._prev,_):i.currentIndex!=_&&(i.currentIndex=_,this._addToMoves(i,_)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const _=i._prevRemoved,x=i._nextRemoved;return null===_?this._removalsHead=x:_._nextRemoved=x,null===x?this._removalsTail=_:x._prevRemoved=_,this._insertAfter(i,s,d),this._addToMoves(i,d),i}_moveAfter(i,s,d){return this._unlink(i),this._insertAfter(i,s,d),this._addToMoves(i,d),i}_addAfter(i,s,d){return this._insertAfter(i,s,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,d){const _=null===s?this._itHead:s._next;return i._next=_,i._prev=s,null===_?this._itTail=i:_._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new K1),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,d=i._next;return null===s?this._itHead=d:s._next=d,null===d?this._itTail=s:d._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new K1),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class cC{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uC{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===s||s<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const s=i._prevDup,d=i._nextDup;return null===s?this._head=d:s._nextDup=d,null===d?this._tail=s:d._prevDup=s,null===this._head}}class K1{constructor(){this.map=new Map}put(i){const s=i.trackById;let d=this.map.get(s);d||(d=new uC,this.map.set(s,d)),d.add(i)}get(i,s){const _=this.map.get(i);return _?_.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Y1(t,i,s){const d=t.previousIndex;if(null===d)return d;let _=0;return s&&d<s.length&&(_=s[d]),d+i+_}class X1{constructor(){}supports(i){return i instanceof Map||Wm(i)}create(){return new dC}}class dC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||Wm(i)))throw new We(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,_)=>{if(s&&s.key===_)this._maybeAddToChanges(s,d),this._appendAfter=s,s=s._next;else{const x=this._getOrCreateRecordForKey(_,d);s=this._insertBeforeOrAppend(s,x)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let d=s;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const d=i._prev;return s._next=i,s._prev=d,i._prev=s,d&&(d._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const _=this._records.get(i);this._maybeAddToChanges(_,s);const x=_._prev,T=_._next;return x&&(x._next=T),T&&(T._prev=x),_._next=null,_._prev=null,_}const d=new hC(i);return this._records.set(i,d),d.currentValue=s,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(d=>s(i[d],d))}}class hC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function J1(){return new Pw([new q1])}let Pw=(()=>{class t{constructor(s){this.factories=s}static create(s,d){if(null!=d){const _=d.factories.slice();s=s.concat(_)}return new t(s)}static extend(s){return{provide:t,useFactory:d=>t.create(s,d||J1()),deps:[[t,new Vc,new bs]]}}find(s){const d=this.factories.find(_=>_.supports(s));if(null!=d)return d;throw new We(901,!1)}}return t.\u0275prov=bn({token:t,providedIn:"root",factory:J1}),t})();function Q1(){return new Ow([new X1])}let Ow=(()=>{class t{constructor(s){this.factories=s}static create(s,d){if(d){const _=d.factories.slice();s=s.concat(_)}return new t(s)}static extend(s){return{provide:t,useFactory:d=>t.create(s,d||Q1()),deps:[[t,new Vc,new bs]]}}find(s){const d=this.factories.find(_=>_.supports(s));if(d)return d;throw new We(901,!1)}}return t.\u0275prov=bn({token:t,providedIn:"root",factory:Q1}),t})();const mC=na(null,"core",[]);let gC=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(Dr(gc))},t.\u0275mod=at({type:t}),t.\u0275inj=_t({}),t})();function _C(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}},4006:(Cn,gt,U)=>{"use strict";U.d(gt,{Cf:()=>Et,F:()=>Ur,Fj:()=>lt,JJ:()=>xn,JU:()=>Re,On:()=>Oo,Zs:()=>Zo,a5:()=>fi,kI:()=>At,sg:()=>Ro,u5:()=>Ki});var D=U(4650),l=U(6895),G=U(2076),m=U(4128),qe=U(4004);let ke=(()=>{class ee{constructor(W,fe){this._renderer=W,this._elementRef=fe,this.onChange=Wt=>{},this.onTouched=()=>{}}setProperty(W,fe){this._renderer.setProperty(this._elementRef.nativeElement,W,fe)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return ee.\u0275fac=function(W){return new(W||ee)(D.Y36(D.Qsj),D.Y36(D.SBq))},ee.\u0275dir=D.lG2({type:ee}),ee})(),Ye=(()=>{class ee extends ke{}return ee.\u0275fac=function(){let X;return function(fe){return(X||(X=D.n5z(ee)))(fe||ee)}}(),ee.\u0275dir=D.lG2({type:ee,features:[D.qOj]}),ee})();const Re=new D.OlP("NgValueAccessor"),rt={provide:Re,useExisting:(0,D.Gpc)(()=>lt),multi:!0},ut=new D.OlP("CompositionEventMode");let lt=(()=>{class ee extends ke{constructor(W,fe,Wt){super(W,fe),this._compositionMode=Wt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Te(){const ee=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(ee.toLowerCase())}())}writeValue(W){this.setProperty("value",W??"")}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return ee.\u0275fac=function(W){return new(W||ee)(D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(ut,8))},ee.\u0275dir=D.lG2({type:ee,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,fe){1&W&&D.NdJ("input",function(li){return fe._handleInput(li.target.value)})("blur",function(){return fe.onTouched()})("compositionstart",function(){return fe._compositionStart()})("compositionend",function(li){return fe._compositionEnd(li.target.value)})},features:[D._Bn([rt]),D.qOj]}),ee})();function Dt(ee){return null==ee||("string"==typeof ee||Array.isArray(ee))&&0===ee.length}function wt(ee){return null!=ee&&"number"==typeof ee.length}const Et=new D.OlP("NgValidators"),_n=new D.OlP("NgAsyncValidators"),hn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class At{static min(X){return function Pe(ee){return X=>{if(Dt(X.value)||Dt(ee))return null;const W=parseFloat(X.value);return!isNaN(W)&&W<ee?{min:{min:ee,actual:X.value}}:null}}(X)}static max(X){return function Ze(ee){return X=>{if(Dt(X.value)||Dt(ee))return null;const W=parseFloat(X.value);return!isNaN(W)&&W>ee?{max:{max:ee,actual:X.value}}:null}}(X)}static required(X){return Yt(X)}static requiredTrue(X){return Ot(X)}static email(X){return function Ut(ee){return Dt(ee.value)||hn.test(ee.value)?null:{email:!0}}(X)}static minLength(X){return function tn(ee){return X=>Dt(X.value)||!wt(X.value)?null:X.value.length<ee?{minlength:{requiredLength:ee,actualLength:X.value.length}}:null}(X)}static maxLength(X){return function pt(ee){return X=>wt(X.value)&&X.value.length>ee?{maxlength:{requiredLength:ee,actualLength:X.value.length}}:null}(X)}static pattern(X){return function Xe(ee){if(!ee)return It;let X,W;return"string"==typeof ee?(W="","^"!==ee.charAt(0)&&(W+="^"),W+=ee,"$"!==ee.charAt(ee.length-1)&&(W+="$"),X=new RegExp(W)):(W=ee.toString(),X=ee),fe=>{if(Dt(fe.value))return null;const Wt=fe.value;return X.test(Wt)?null:{pattern:{requiredPattern:W,actualValue:Wt}}}}(X)}static nullValidator(X){return null}static compose(X){return yn(X)}static composeAsync(X){return Ei(X)}}function Yt(ee){return Dt(ee.value)?{required:!0}:null}function Ot(ee){return!0===ee.value?null:{required:!0}}function It(ee){return null}function St(ee){return null!=ee}function pn(ee){return(0,D.QGY)(ee)?(0,G.D)(ee):ee}function un(ee){let X={};return ee.forEach(W=>{X=null!=W?{...X,...W}:X}),0===Object.keys(X).length?null:X}function Gn(ee,X){return X.map(W=>W(ee))}function yi(ee){return ee.map(X=>function di(ee){return!ee.validate}(X)?X:W=>X.validate(W))}function yn(ee){if(!ee)return null;const X=ee.filter(St);return 0==X.length?null:function(W){return un(Gn(W,X))}}function gi(ee){return null!=ee?yn(yi(ee)):null}function Ei(ee){if(!ee)return null;const X=ee.filter(St);return 0==X.length?null:function(W){const fe=Gn(W,X).map(pn);return(0,m.D)(fe).pipe((0,qe.U)(un))}}function hi(ee){return null!=ee?Ei(yi(ee)):null}function bn(ee,X){return null===ee?[X]:Array.isArray(ee)?[...ee,X]:[ee,X]}function wn(ee){return ee._rawValidators}function _t(ee){return ee._rawAsyncValidators}function Nt(ee){return ee?Array.isArray(ee)?ee:[ee]:[]}function fn(ee,X){return Array.isArray(ee)?ee.includes(X):ee===X}function mn(ee,X){const W=Nt(X);return Nt(ee).forEach(Wt=>{fn(W,Wt)||W.push(Wt)}),W}function On(ee,X){return Nt(X).filter(W=>!fn(ee,W))}class Jn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(X){this._rawValidators=X||[],this._composedValidatorFn=gi(this._rawValidators)}_setAsyncValidators(X){this._rawAsyncValidators=X||[],this._composedAsyncValidatorFn=hi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(X){this._onDestroyCallbacks.push(X)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(X=>X()),this._onDestroyCallbacks=[]}reset(X){this.control&&this.control.reset(X)}hasError(X,W){return!!this.control&&this.control.hasError(X,W)}getError(X,W){return this.control?this.control.getError(X,W):null}}class oi extends Jn{get formDirective(){return null}get path(){return null}}class fi extends Jn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let xn=(()=>{class ee extends class $i{constructor(X){this._cd=X}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(W){super(W)}}return ee.\u0275fac=function(W){return new(W||ee)(D.Y36(fi,2))},ee.\u0275dir=D.lG2({type:ee,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,fe){2&W&&D.ekj("ng-untouched",fe.isUntouched)("ng-touched",fe.isTouched)("ng-pristine",fe.isPristine)("ng-dirty",fe.isDirty)("ng-valid",fe.isValid)("ng-invalid",fe.isInvalid)("ng-pending",fe.isPending)},features:[D.qOj]}),ee})();const st="VALID",De="INVALID",Fe="PENDING",Se="DISABLED";function Ne(ee){return(on(ee)?ee.validators:ee)||null}function we(ee){return Array.isArray(ee)?gi(ee):ee||null}function $e(ee,X){return(on(X)?X.asyncValidators:ee)||null}function at(ee){return Array.isArray(ee)?hi(ee):ee||null}function on(ee){return null!=ee&&!Array.isArray(ee)&&"object"==typeof ee}class Gi{constructor(X,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=X,this._rawAsyncValidators=W,this._composedValidatorFn=we(this._rawValidators),this._composedAsyncValidatorFn=at(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(X){this._rawValidators=this._composedValidatorFn=X}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(X){this._rawAsyncValidators=this._composedAsyncValidatorFn=X}get parent(){return this._parent}get valid(){return this.status===st}get invalid(){return this.status===De}get pending(){return this.status==Fe}get disabled(){return this.status===Se}get enabled(){return this.status!==Se}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(X){this._rawValidators=X,this._composedValidatorFn=we(X)}setAsyncValidators(X){this._rawAsyncValidators=X,this._composedAsyncValidatorFn=at(X)}addValidators(X){this.setValidators(mn(X,this._rawValidators))}addAsyncValidators(X){this.setAsyncValidators(mn(X,this._rawAsyncValidators))}removeValidators(X){this.setValidators(On(X,this._rawValidators))}removeAsyncValidators(X){this.setAsyncValidators(On(X,this._rawAsyncValidators))}hasValidator(X){return fn(this._rawValidators,X)}hasAsyncValidator(X){return fn(this._rawAsyncValidators,X)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(X={}){this.touched=!0,this._parent&&!X.onlySelf&&this._parent.markAsTouched(X)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(X=>X.markAllAsTouched())}markAsUntouched(X={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!X.onlySelf&&this._parent._updateTouched(X)}markAsDirty(X={}){this.pristine=!1,this._parent&&!X.onlySelf&&this._parent.markAsDirty(X)}markAsPristine(X={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!X.onlySelf&&this._parent._updatePristine(X)}markAsPending(X={}){this.status=Fe,!1!==X.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!X.onlySelf&&this._parent.markAsPending(X)}disable(X={}){const W=this._parentMarkedDirty(X.onlySelf);this.status=Se,this.errors=null,this._forEachChild(fe=>{fe.disable({...X,onlySelf:!0})}),this._updateValue(),!1!==X.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...X,skipPristineCheck:W}),this._onDisabledChange.forEach(fe=>fe(!0))}enable(X={}){const W=this._parentMarkedDirty(X.onlySelf);this.status=st,this._forEachChild(fe=>{fe.enable({...X,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:X.emitEvent}),this._updateAncestors({...X,skipPristineCheck:W}),this._onDisabledChange.forEach(fe=>fe(!1))}_updateAncestors(X){this._parent&&!X.onlySelf&&(this._parent.updateValueAndValidity(X),X.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(X){this._parent=X}getRawValue(){return this.value}updateValueAndValidity(X={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===st||this.status===Fe)&&this._runAsyncValidator(X.emitEvent)),!1!==X.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!X.onlySelf&&this._parent.updateValueAndValidity(X)}_updateTreeValidity(X={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(X)),this.updateValueAndValidity({onlySelf:!0,emitEvent:X.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Se:st}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(X){if(this.asyncValidator){this.status=Fe,this._hasOwnPendingAsyncValidator=!0;const W=pn(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(fe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(fe,{emitEvent:X})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(X,W={}){this.errors=X,this._updateControlsErrors(!1!==W.emitEvent)}get(X){let W=X;return null==W||(Array.isArray(W)||(W=W.split(".")),0===W.length)?null:W.reduce((fe,Wt)=>fe&&fe._find(Wt),this)}getError(X,W){const fe=W?this.get(W):this;return fe&&fe.errors?fe.errors[X]:null}hasError(X,W){return!!this.getError(X,W)}get root(){let X=this;for(;X._parent;)X=X._parent;return X}_updateControlsErrors(X){this.status=this._calculateStatus(),X&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(X)}_initObservables(){this.valueChanges=new D.vpe,this.statusChanges=new D.vpe}_calculateStatus(){return this._allControlsDisabled()?Se:this.errors?De:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fe)?Fe:this._anyControlsHaveStatus(De)?De:st}_anyControlsHaveStatus(X){return this._anyControls(W=>W.status===X)}_anyControlsDirty(){return this._anyControls(X=>X.dirty)}_anyControlsTouched(){return this._anyControls(X=>X.touched)}_updatePristine(X={}){this.pristine=!this._anyControlsDirty(),this._parent&&!X.onlySelf&&this._parent._updatePristine(X)}_updateTouched(X={}){this.touched=this._anyControlsTouched(),this._parent&&!X.onlySelf&&this._parent._updateTouched(X)}_registerOnCollectionChange(X){this._onCollectionChange=X}_setUpdateStrategy(X){on(X)&&null!=X.updateOn&&(this._updateOn=X.updateOn)}_parentMarkedDirty(X){return!X&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(X){return null}}class ni extends Gi{constructor(X,W,fe){super(Ne(W),$e(fe,W)),this.controls=X,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(X,W){return this.controls[X]?this.controls[X]:(this.controls[X]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(X,W,fe={}){this.registerControl(X,W),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}removeControl(X,W={}){this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),delete this.controls[X],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(X,W,fe={}){this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),delete this.controls[X],W&&this.registerControl(X,W),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}contains(X){return this.controls.hasOwnProperty(X)&&this.controls[X].enabled}setValue(X,W={}){(function jn(ee,X,W){ee._forEachChild((fe,Wt)=>{if(void 0===W[Wt])throw new D.vHH(1002,"")})})(this,0,X),Object.keys(X).forEach(fe=>{(function An(ee,X,W){const fe=ee.controls;if(!(X?Object.keys(fe):fe).length)throw new D.vHH(1e3,"");if(!fe[W])throw new D.vHH(1001,"")})(this,!0,fe),this.controls[fe].setValue(X[fe],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(X,W={}){null!=X&&(Object.keys(X).forEach(fe=>{const Wt=this.controls[fe];Wt&&Wt.patchValue(X[fe],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(X={},W={}){this._forEachChild((fe,Wt)=>{fe.reset(X[Wt],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(X,W,fe)=>(X[fe]=W.getRawValue(),X))}_syncPendingControls(){let X=this._reduceChildren(!1,(W,fe)=>!!fe._syncPendingControls()||W);return X&&this.updateValueAndValidity({onlySelf:!0}),X}_forEachChild(X){Object.keys(this.controls).forEach(W=>{const fe=this.controls[W];fe&&X(fe,W)})}_setUpControls(){this._forEachChild(X=>{X.setParent(this),X._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(X){for(const[W,fe]of Object.entries(this.controls))if(this.contains(W)&&X(fe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(W,fe,Wt)=>((fe.enabled||this.disabled)&&(W[Wt]=fe.value),W))}_reduceChildren(X,W){let fe=X;return this._forEachChild((Wt,li)=>{fe=W(fe,Wt,li)}),fe}_allControlsDisabled(){for(const X of Object.keys(this.controls))if(this.controls[X].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(X){return this.controls.hasOwnProperty(X)?this.controls[X]:null}}function me(ee,X){tt(ee,X),X.valueAccessor.writeValue(ee.value),ee.disabled&&X.valueAccessor.setDisabledState?.(!0),function Sn(ee,X){X.valueAccessor.registerOnChange(W=>{ee._pendingValue=W,ee._pendingChange=!0,ee._pendingDirty=!0,"change"===ee.updateOn&&Un(ee,X)})}(ee,X),function Ni(ee,X){const W=(fe,Wt)=>{X.valueAccessor.writeValue(fe),Wt&&X.viewToModelUpdate(fe)};ee.registerOnChange(W),X._registerOnDestroy(()=>{ee._unregisterOnChange(W)})}(ee,X),function nn(ee,X){X.valueAccessor.registerOnTouched(()=>{ee._pendingTouched=!0,"blur"===ee.updateOn&&ee._pendingChange&&Un(ee,X),"submit"!==ee.updateOn&&ee.markAsTouched()})}(ee,X),function Ve(ee,X){if(X.valueAccessor.setDisabledState){const W=fe=>{X.valueAccessor.setDisabledState(fe)};ee.registerOnDisabledChange(W),X._registerOnDestroy(()=>{ee._unregisterOnDisabledChange(W)})}}(ee,X)}function Ee(ee,X,W=!0){const fe=()=>{};X.valueAccessor&&(X.valueAccessor.registerOnChange(fe),X.valueAccessor.registerOnTouched(fe)),Gt(ee,X),ee&&(X._invokeOnDestroyCallbacks(),ee._registerOnCollectionChange(()=>{}))}function ue(ee,X){ee.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(X)})}function tt(ee,X){const W=wn(ee);null!==X.validator?ee.setValidators(bn(W,X.validator)):"function"==typeof W&&ee.setValidators([W]);const fe=_t(ee);null!==X.asyncValidator?ee.setAsyncValidators(bn(fe,X.asyncValidator)):"function"==typeof fe&&ee.setAsyncValidators([fe]);const Wt=()=>ee.updateValueAndValidity();ue(X._rawValidators,Wt),ue(X._rawAsyncValidators,Wt)}function Gt(ee,X){let W=!1;if(null!==ee){if(null!==X.validator){const Wt=wn(ee);if(Array.isArray(Wt)&&Wt.length>0){const li=Wt.filter(yr=>yr!==X.validator);li.length!==Wt.length&&(W=!0,ee.setValidators(li))}}if(null!==X.asyncValidator){const Wt=_t(ee);if(Array.isArray(Wt)&&Wt.length>0){const li=Wt.filter(yr=>yr!==X.asyncValidator);li.length!==Wt.length&&(W=!0,ee.setAsyncValidators(li))}}}const fe=()=>{};return ue(X._rawValidators,fe),ue(X._rawAsyncValidators,fe),W}function Un(ee,X){ee._pendingDirty&&ee.markAsDirty(),ee.setValue(ee._pendingValue,{emitModelToViewChange:!1}),X.viewToModelUpdate(ee._pendingValue),ee._pendingChange=!1}function kn(ee,X){tt(ee,X)}function Ui(ee,X){ee._syncPendingControls(),X.forEach(W=>{const fe=W.control;"submit"===fe.updateOn&&fe._pendingChange&&(W.viewToModelUpdate(fe._pendingValue),fe._pendingChange=!1)})}const Bi={provide:oi,useExisting:(0,D.Gpc)(()=>Ur)},Ts=(()=>Promise.resolve())();let Ur=(()=>{class ee extends oi{constructor(W,fe){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new D.vpe,this.form=new ni({},gi(W),hi(fe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(W){Ts.then(()=>{const fe=this._findContainer(W.path);W.control=fe.registerControl(W.name,W.control),me(W.control,W),W.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(W)})}getControl(W){return this.form.get(W.path)}removeControl(W){Ts.then(()=>{const fe=this._findContainer(W.path);fe&&fe.removeControl(W.name),this._directives.delete(W)})}addFormGroup(W){Ts.then(()=>{const fe=this._findContainer(W.path),Wt=new ni({});kn(Wt,W),fe.registerControl(W.name,Wt),Wt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(W){Ts.then(()=>{const fe=this._findContainer(W.path);fe&&fe.removeControl(W.name)})}getFormGroup(W){return this.form.get(W.path)}updateModel(W,fe){Ts.then(()=>{this.form.get(W.path).setValue(fe)})}setValue(W){this.control.setValue(W)}onSubmit(W){return this.submitted=!0,Ui(this.form,this._directives),this.ngSubmit.emit(W),"dialog"===W?.target?.method}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(W){return W.pop(),W.length?this.form.get(W):this.form}}return ee.\u0275fac=function(W){return new(W||ee)(D.Y36(Et,10),D.Y36(_n,10))},ee.\u0275dir=D.lG2({type:ee,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(W,fe){1&W&&D.NdJ("submit",function(li){return fe.onSubmit(li)})("reset",function(){return fe.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D._Bn([Bi]),D.qOj]}),ee})();function Go(ee,X){const W=ee.indexOf(X);W>-1&&ee.splice(W,1)}function Ao(ee){return"object"==typeof ee&&null!==ee&&2===Object.keys(ee).length&&"value"in ee&&"disabled"in ee}const xo=class extends Gi{constructor(X=null,W,fe){super(Ne(W),$e(fe,W)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(X),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),on(W)&&(W.nonNullable||W.initialValueIsDefault)&&(this.defaultValue=Ao(X)?X.value:X)}setValue(X,W={}){this.value=this._pendingValue=X,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(fe=>fe(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(X,W={}){this.setValue(X,W)}reset(X=this.defaultValue,W={}){this._applyFormState(X),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(X){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(X){this._onChange.push(X)}_unregisterOnChange(X){Go(this._onChange,X)}registerOnDisabledChange(X){this._onDisabledChange.push(X)}_unregisterOnDisabledChange(X){Go(this._onDisabledChange,X)}_forEachChild(X){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(X){Ao(X)?(this.value=this._pendingValue=X.value,X.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=X}},Po={provide:fi,useExisting:(0,D.Gpc)(()=>Oo)},As=(()=>Promise.resolve())();let Oo=(()=>{class ee extends fi{constructor(W,fe,Wt,li,yr){super(),this._changeDetectorRef=yr,this.control=new xo,this._registered=!1,this.update=new D.vpe,this._parent=W,this._setValidators(fe),this._setAsyncValidators(Wt),this.valueAccessor=function Fr(ee,X){if(!X)return null;let W,fe,Wt;return Array.isArray(X),X.forEach(li=>{li.constructor===lt?W=li:function ho(ee){return Object.getPrototypeOf(ee.constructor)===Ye}(li)?fe=li:Wt=li}),Wt||fe||W||null}(0,li)}ngOnChanges(W){if(this._checkForErrors(),!this._registered||"name"in W){if(this._registered&&(this._checkName(),this.formDirective)){const fe=W.name.previousValue;this.formDirective.removeControl({name:fe,path:this._getPath(fe)})}this._setUpControl()}"isDisabled"in W&&this._updateDisabled(W),function Ji(ee,X){if(!ee.hasOwnProperty("model"))return!1;const W=ee.model;return!!W.isFirstChange()||!Object.is(X,W.currentValue)}(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){me(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){As.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(W){const fe=W.isDisabled.currentValue,Wt=0!==fe&&(0,D.D6c)(fe);As.then(()=>{Wt&&!this.control.disabled?this.control.disable():!Wt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(W){return this._parent?function jt(ee,X){return[...X.path,ee]}(W,this._parent):[W]}}return ee.\u0275fac=function(W){return new(W||ee)(D.Y36(oi,9),D.Y36(Et,10),D.Y36(_n,10),D.Y36(Re,10),D.Y36(D.sBO,8))},ee.\u0275dir=D.lG2({type:ee,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[D._Bn([Po]),D.qOj,D.TTD]}),ee})(),ar=(()=>{class ee{}return ee.\u0275fac=function(W){return new(W||ee)},ee.\u0275mod=D.oAB({type:ee}),ee.\u0275inj=D.cJS({}),ee})();const Kl={provide:oi,useExisting:(0,D.Gpc)(()=>Ro)};let Ro=(()=>{class ee extends oi{constructor(W,fe){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.vpe,this._setValidators(W),this._setAsyncValidators(fe)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const fe=this.form.get(W.path);return me(fe,W),fe.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),fe}getControl(W){return this.form.get(W.path)}removeControl(W){Ee(W.control||null,W,!1),function Yr(ee,X){const W=ee.indexOf(X);W>-1&&ee.splice(W,1)}(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,fe){this.form.get(W.path).setValue(fe)}onSubmit(W){return this.submitted=!0,Ui(this.form,this.directives),this.ngSubmit.emit(W),"dialog"===W?.target?.method}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const fe=W.control,Wt=this.form.get(W.path);fe!==Wt&&(Ee(fe||null,W),(ee=>ee instanceof xo)(Wt)&&(me(Wt,W),W.control=Wt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const fe=this.form.get(W.path);kn(fe,W),fe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const fe=this.form.get(W.path);fe&&function ei(ee,X){return Gt(ee,X)}(fe,W)&&fe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tt(this.form,this),this._oldForm&&Gt(this._oldForm,this)}_checkFormPresent(){}}return ee.\u0275fac=function(W){return new(W||ee)(D.Y36(Et,10),D.Y36(_n,10))},ee.\u0275dir=D.lG2({type:ee,selectors:[["","formGroup",""]],hostBindings:function(W,fe){1&W&&D.NdJ("submit",function(li){return fe.onSubmit(li)})("reset",function(){return fe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D._Bn([Kl]),D.qOj,D.TTD]}),ee})(),is=(()=>{class ee{constructor(){this._validator=It}ngOnChanges(W){if(this.inputName in W){const fe=this.normalizeInput(W[this.inputName].currentValue);this._enabled=this.enabled(fe),this._validator=this._enabled?this.createValidator(fe):It,this._onChange&&this._onChange()}}validate(W){return this._validator(W)}registerOnValidatorChange(W){this._onChange=W}enabled(W){return null!=W}}return ee.\u0275fac=function(W){return new(W||ee)},ee.\u0275dir=D.lG2({type:ee,features:[D.TTD]}),ee})();const Ia={provide:Et,useExisting:(0,D.Gpc)(()=>Ya),multi:!0},mr={provide:Et,useExisting:(0,D.Gpc)(()=>Zo),multi:!0};let Ya=(()=>{class ee extends is{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=D.D6c,this.createValidator=W=>Yt}enabled(W){return W}}return ee.\u0275fac=function(){let X;return function(fe){return(X||(X=D.n5z(ee)))(fe||ee)}}(),ee.\u0275dir=D.lG2({type:ee,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(W,fe){2&W&&D.uIk("required",fe._enabled?"":null)},inputs:{required:"required"},features:[D._Bn([Ia]),D.qOj]}),ee})(),Zo=(()=>{class ee extends Ya{constructor(){super(...arguments),this.createValidator=W=>Ot}}return ee.\u0275fac=function(){let X;return function(fe){return(X||(X=D.n5z(ee)))(fe||ee)}}(),ee.\u0275dir=D.lG2({type:ee,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(W,fe){2&W&&D.uIk("required",fe._enabled?"":null)},features:[D._Bn([mr]),D.qOj]}),ee})(),Rr=(()=>{class ee{}return ee.\u0275fac=function(W){return new(W||ee)},ee.\u0275mod=D.oAB({type:ee}),ee.\u0275inj=D.cJS({imports:[ar]}),ee})(),Ki=(()=>{class ee{}return ee.\u0275fac=function(W){return new(W||ee)},ee.\u0275mod=D.oAB({type:ee}),ee.\u0275inj=D.cJS({imports:[Rr]}),ee})()},4859:(Cn,gt,U)=>{"use strict";U.d(gt,{lW:()=>Ge,ot:()=>Te,zs:()=>rt});var D=U(4650),l=U(3238),G=U(2687);const m=["mat-button",""],qe=["*"],Re=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],pe=(0,l.pj)((0,l.Id)((0,l.Kr)(class{constructor(ut){this._elementRef=ut}})));let Ge=(()=>{class ut extends pe{constructor(We,Dt,wt){super(We),this._focusMonitor=Dt,this._animationMode=wt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Et of Re)this._hasHostAttributes(Et)&&this._getHostElement().classList.add(Et);We.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(We,Dt){We?this._focusMonitor.focusVia(this._getHostElement(),We,Dt):this._getHostElement().focus(Dt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...We){return We.some(Dt=>this._getHostElement().hasAttribute(Dt))}}return ut.\u0275fac=function(We){return new(We||ut)(D.Y36(D.SBq),D.Y36(G.tE),D.Y36(D.QbO,8))},ut.\u0275cmp=D.Xpm({type:ut,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(We,Dt){if(1&We&&D.Gf(l.wG,5),2&We){let wt;D.iGM(wt=D.CRH())&&(Dt.ripple=wt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(We,Dt){2&We&&(D.uIk("disabled",Dt.disabled||null),D.ekj("_mat-animation-noopable","NoopAnimations"===Dt._animationMode)("mat-button-disabled",Dt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[D.qOj],attrs:m,ngContentSelectors:qe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(We,Dt){1&We&&(D.F$t(),D.TgZ(0,"span",0),D.Hsn(1),D.qZA(),D._UZ(2,"span",1)(3,"span",2)),2&We&&(D.xp6(2),D.ekj("mat-button-ripple-round",Dt.isRoundButton||Dt.isIconButton),D.Q6J("matRippleDisabled",Dt._isRippleDisabled())("matRippleCentered",Dt.isIconButton)("matRippleTrigger",Dt._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),ut})(),rt=(()=>{class ut extends Ge{constructor(We,Dt,wt,Et){super(Dt,We,wt),this._ngZone=Et,this._haltDisabledEvents=_n=>{this.disabled&&(_n.preventDefault(),_n.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return ut.\u0275fac=function(We){return new(We||ut)(D.Y36(G.tE),D.Y36(D.SBq),D.Y36(D.QbO,8),D.Y36(D.R0b,8))},ut.\u0275cmp=D.Xpm({type:ut,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(We,Dt){2&We&&(D.uIk("tabindex",Dt.disabled?-1:Dt.tabIndex)("disabled",Dt.disabled||null)("aria-disabled",Dt.disabled.toString()),D.ekj("_mat-animation-noopable","NoopAnimations"===Dt._animationMode)("mat-button-disabled",Dt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[D.qOj],attrs:m,ngContentSelectors:qe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(We,Dt){1&We&&(D.F$t(),D.TgZ(0,"span",0),D.Hsn(1),D.qZA(),D._UZ(2,"span",1)(3,"span",2)),2&We&&(D.xp6(2),D.ekj("mat-button-ripple-round",Dt.isRoundButton||Dt.isIconButton),D.Q6J("matRippleDisabled",Dt._isRippleDisabled())("matRippleCentered",Dt.isIconButton)("matRippleTrigger",Dt._getHostElement()))},dependencies:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),ut})(),Te=(()=>{class ut{}return ut.\u0275fac=function(We){return new(We||ut)},ut.\u0275mod=D.oAB({type:ut}),ut.\u0275inj=D.cJS({imports:[l.si,l.BQ,l.BQ]}),ut})()},3238:(Cn,gt,U)=>{"use strict";U.d(gt,{rD:()=>_t,K7:()=>le,HF:()=>k,BQ:()=>Pe,X2:()=>Nt,uc:()=>On,ey:()=>He,Ng:()=>en,nP:()=>Me,us:()=>he,wG:()=>Y,si:()=>te,CB:()=>dt,jH:()=>$t,pj:()=>tn,Kr:()=>pt,Id:()=>Ut,FD:()=>It,dB:()=>St,sb:()=>Xe,E0:()=>fn});var D=U(4650),l=U(2687),G=U(445),qe=U(6895),ke=U(3353),Ye=U(1281),Re=U(9751),pe=U(7579),Ge=U(8675),rt=U(9521);function lt(st,De){if(1&st&&D._UZ(0,"mat-pseudo-checkbox",4),2&st){const Fe=D.oxw();D.Q6J("state",Fe.selected?"checked":"unchecked")("disabled",Fe.disabled)}}function We(st,De){if(1&st&&(D.TgZ(0,"span",5),D._uU(1),D.qZA()),2&st){const Fe=D.oxw();D.xp6(1),D.hij("(",Fe.group.label,")")}}const Dt=["*"],At=new D.OlP("mat-sanity-checks",{providedIn:"root",factory:function hn(){return!0}});let Pe=(()=>{class st{constructor(Fe,Se,Ne){this._sanityChecks=Se,this._document=Ne,this._hasDoneGlobalChecks=!1,Fe._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Fe){return!(0,ke.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Fe])}}return st.\u0275fac=function(Fe){return new(Fe||st)(D.LFG(l.qm),D.LFG(At,8),D.LFG(qe.K0))},st.\u0275mod=D.oAB({type:st}),st.\u0275inj=D.cJS({imports:[G.vT,G.vT]}),st})();function Ut(st){return class extends st{constructor(...De){super(...De),this._disabled=!1}get disabled(){return this._disabled}set disabled(De){this._disabled=(0,Ye.Ig)(De)}}}function tn(st,De){return class extends st{constructor(...Fe){super(...Fe),this.defaultColor=De,this.color=De}get color(){return this._color}set color(Fe){const Se=Fe||this.defaultColor;Se!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Se&&this._elementRef.nativeElement.classList.add(`mat-${Se}`),this._color=Se)}}}function pt(st){return class extends st{constructor(...De){super(...De),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(De){this._disableRipple=(0,Ye.Ig)(De)}}}function Xe(st,De=0){return class extends st{constructor(...Fe){super(...Fe),this._tabIndex=De,this.defaultTabIndex=De}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Fe){this._tabIndex=null!=Fe?(0,Ye.su)(Fe):this.defaultTabIndex}}}function It(st){return class extends st{constructor(...De){super(...De),this.errorState=!1}updateErrorState(){const De=this.errorState,we=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);we!==De&&(this.errorState=we,this.stateChanges.next())}}}function St(st){return class extends st{constructor(...De){super(...De),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Re.y(Fe=>{this._isInitialized?this._notifySubscriber(Fe):this._pendingSubscribers.push(Fe)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(De){De.next(),De.complete()}}}let _t=(()=>{class st{isErrorState(Fe,Se){return!!(Fe&&Fe.invalid&&(Fe.touched||Se&&Se.submitted))}}return st.\u0275fac=function(Fe){return new(Fe||st)},st.\u0275prov=D.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})(),Nt=(()=>{class st{}return st.\u0275fac=function(Fe){return new(Fe||st)},st.\u0275dir=D.lG2({type:st,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),st})();function fn(st,De,Fe="mat"){st.changes.pipe((0,Ge.O)(st)).subscribe(({length:Se})=>{mn(De,`${Fe}-2-line`,!1),mn(De,`${Fe}-3-line`,!1),mn(De,`${Fe}-multi-line`,!1),2===Se||3===Se?mn(De,`${Fe}-${Se}-line`,!0):Se>3&&mn(De,`${Fe}-multi-line`,!0)})}function mn(st,De,Fe){st.nativeElement.classList.toggle(De,Fe)}let On=(()=>{class st{}return st.\u0275fac=function(Fe){return new(Fe||st)},st.\u0275mod=D.oAB({type:st}),st.\u0275inj=D.cJS({imports:[Pe,Pe]}),st})();class Jn{constructor(De,Fe,Se,Ne=!1){this._renderer=De,this.element=Fe,this.config=Se,this._animationForciblyDisabledThroughCss=Ne,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const oi={enterDuration:225,exitDuration:150},$i=(0,ke.i$)({passive:!0}),Qn=["mousedown","touchstart"],Di=["mouseup","mouseleave","touchend","touchcancel"];class xn{constructor(De,Fe,Se,Ne){this._target=De,this._ngZone=Fe,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,Ne.isBrowser&&(this._containerElement=(0,Ye.fI)(Se))}fadeInRipple(De,Fe,Se={}){const Ne=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),we={...oi,...Se.animation};Se.centered&&(De=Ne.left+Ne.width/2,Fe=Ne.top+Ne.height/2);const $e=Se.radius||function Wn(st,De,Fe){const Se=Math.max(Math.abs(st-Fe.left),Math.abs(st-Fe.right)),Ne=Math.max(Math.abs(De-Fe.top),Math.abs(De-Fe.bottom));return Math.sqrt(Se*Se+Ne*Ne)}(De,Fe,Ne),at=De-Ne.left,on=Fe-Ne.top,An=we.enterDuration,jn=document.createElement("div");jn.classList.add("mat-ripple-element"),jn.style.left=at-$e+"px",jn.style.top=on-$e+"px",jn.style.height=2*$e+"px",jn.style.width=2*$e+"px",null!=Se.color&&(jn.style.backgroundColor=Se.color),jn.style.transitionDuration=`${An}ms`,this._containerElement.appendChild(jn);const Gi=window.getComputedStyle(jn),yt=Gi.transitionDuration,Tt="none"===Gi.transitionProperty||"0s"===yt||"0s, 0s"===yt,zt=new Jn(this,jn,Se,Tt);jn.style.transform="scale3d(1, 1, 1)",zt.state=0,Se.persistent||(this._mostRecentTransientRipple=zt);let Vt=null;return!Tt&&(An||we.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const jt=()=>this._finishRippleTransition(zt),me=()=>this._destroyRipple(zt);jn.addEventListener("transitionend",jt),jn.addEventListener("transitioncancel",me),Vt={onTransitionEnd:jt,onTransitionCancel:me}}),this._activeRipples.set(zt,Vt),(Tt||!An)&&this._finishRippleTransition(zt),zt}fadeOutRipple(De){if(2===De.state||3===De.state)return;const Fe=De.element,Se={...oi,...De.config.animation};Fe.style.transitionDuration=`${Se.exitDuration}ms`,Fe.style.opacity="0",De.state=2,(De._animationForciblyDisabledThroughCss||!Se.exitDuration)&&this._finishRippleTransition(De)}fadeOutAll(){this._getActiveRipples().forEach(De=>De.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(De=>{De.config.persistent||De.fadeOut()})}setupTriggerEvents(De){const Fe=(0,Ye.fI)(De);!Fe||Fe===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Fe,this._registerEvents(Qn))}handleEvent(De){"mousedown"===De.type?this._onMousedown(De):"touchstart"===De.type?this._onTouchStart(De):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Di),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(De){0===De.state?this._startFadeOutTransition(De):2===De.state&&this._destroyRipple(De)}_startFadeOutTransition(De){const Fe=De===this._mostRecentTransientRipple,{persistent:Se}=De.config;De.state=1,!Se&&(!Fe||!this._isPointerDown)&&De.fadeOut()}_destroyRipple(De){const Fe=this._activeRipples.get(De)??null;this._activeRipples.delete(De),this._activeRipples.size||(this._containerRect=null),De===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),De.state=3,null!==Fe&&(De.element.removeEventListener("transitionend",Fe.onTransitionEnd),De.element.removeEventListener("transitioncancel",Fe.onTransitionCancel)),De.element.remove()}_onMousedown(De){const Fe=(0,l.X6)(De),Se=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Fe&&!Se&&(this._isPointerDown=!0,this.fadeInRipple(De.clientX,De.clientY,this._target.rippleConfig))}_onTouchStart(De){if(!this._target.rippleDisabled&&!(0,l.yG)(De)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Fe=De.changedTouches;for(let Se=0;Se<Fe.length;Se++)this.fadeInRipple(Fe[Se].clientX,Fe[Se].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(De=>{!De.config.persistent&&(1===De.state||De.config.terminateOnPointerUp&&0===De.state)&&De.fadeOut()}))}_registerEvents(De){this._ngZone.runOutsideAngular(()=>{De.forEach(Fe=>{this._triggerElement.addEventListener(Fe,this,$i)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(Qn.forEach(De=>{this._triggerElement.removeEventListener(De,this,$i)}),this._pointerUpEventsRegistered&&Di.forEach(De=>{this._triggerElement.removeEventListener(De,this,$i)}))}}const ct=new D.OlP("mat-ripple-global-options");let Y=(()=>{class st{constructor(Fe,Se,Ne,we,$e){this._elementRef=Fe,this._animationMode=$e,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=we||{},this._rippleRenderer=new xn(this,Se,Fe,Ne)}get disabled(){return this._disabled}set disabled(Fe){Fe&&this.fadeOutAllNonPersistent(),this._disabled=Fe,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Fe){this._trigger=Fe,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Fe,Se=0,Ne){return"number"==typeof Fe?this._rippleRenderer.fadeInRipple(Fe,Se,{...this.rippleConfig,...Ne}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...Fe})}}return st.\u0275fac=function(Fe){return new(Fe||st)(D.Y36(D.SBq),D.Y36(D.R0b),D.Y36(ke.t4),D.Y36(ct,8),D.Y36(D.QbO,8))},st.\u0275dir=D.lG2({type:st,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Fe,Se){2&Fe&&D.ekj("mat-ripple-unbounded",Se.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),st})(),te=(()=>{class st{}return st.\u0275fac=function(Fe){return new(Fe||st)},st.\u0275mod=D.oAB({type:st}),st.\u0275inj=D.cJS({imports:[Pe,Pe]}),st})(),Me=(()=>{class st{constructor(Fe){this._animationMode=Fe,this.state="unchecked",this.disabled=!1}}return st.\u0275fac=function(Fe){return new(Fe||st)(D.Y36(D.QbO,8))},st.\u0275cmp=D.Xpm({type:st,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Fe,Se){2&Fe&&D.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===Se.state)("mat-pseudo-checkbox-checked","checked"===Se.state)("mat-pseudo-checkbox-disabled",Se.disabled)("_mat-animation-noopable","NoopAnimations"===Se._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Fe,Se){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),st})(),he=(()=>{class st{}return st.\u0275fac=function(Fe){return new(Fe||st)},st.\u0275mod=D.oAB({type:st}),st.\u0275inj=D.cJS({imports:[Pe]}),st})();const k=new D.OlP("MAT_OPTION_PARENT_COMPONENT"),le=new D.OlP("MatOptgroup");let Le=0;class Qe{constructor(De,Fe=!1){this.source=De,this.isUserInput=Fe}}let ot=(()=>{class st{constructor(Fe,Se,Ne,we){this._element=Fe,this._changeDetectorRef=Se,this._parent=Ne,this.group=we,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Le++,this.onSelectionChange=new D.vpe,this._stateChanges=new pe.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Fe){this._disabled=(0,Ye.Ig)(Fe)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Fe,Se){const Ne=this._getHostElement();"function"==typeof Ne.focus&&Ne.focus(Se)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Fe){(Fe.keyCode===rt.K5||Fe.keyCode===rt.L_)&&!(0,rt.Vb)(Fe)&&(this._selectViaInteraction(),Fe.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Fe=this.viewValue;Fe!==this._mostRecentViewValue&&(this._mostRecentViewValue=Fe,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Fe=!1){this.onSelectionChange.emit(new Qe(this,Fe))}}return st.\u0275fac=function(Fe){D.$Z()},st.\u0275dir=D.lG2({type:st,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),st})(),He=(()=>{class st extends ot{constructor(Fe,Se,Ne,we){super(Fe,Se,Ne,we)}}return st.\u0275fac=function(Fe){return new(Fe||st)(D.Y36(D.SBq),D.Y36(D.sBO),D.Y36(k,8),D.Y36(le,8))},st.\u0275cmp=D.Xpm({type:st,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Fe,Se){1&Fe&&D.NdJ("click",function(){return Se._selectViaInteraction()})("keydown",function(we){return Se._handleKeydown(we)}),2&Fe&&(D.Ikx("id",Se.id),D.uIk("tabindex",Se._getTabIndex())("aria-selected",Se._getAriaSelected())("aria-disabled",Se.disabled.toString()),D.ekj("mat-selected",Se.selected)("mat-option-multiple",Se.multiple)("mat-active",Se.active)("mat-option-disabled",Se.disabled))},exportAs:["matOption"],features:[D.qOj],ngContentSelectors:Dt,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Fe,Se){1&Fe&&(D.F$t(),D.YNc(0,lt,1,2,"mat-pseudo-checkbox",0),D.TgZ(1,"span",1),D.Hsn(2),D.qZA(),D.YNc(3,We,2,1,"span",2),D._UZ(4,"div",3)),2&Fe&&(D.Q6J("ngIf",Se.multiple),D.xp6(3),D.Q6J("ngIf",Se.group&&Se.group._inert),D.xp6(1),D.Q6J("matRippleTrigger",Se._getHostElement())("matRippleDisabled",Se.disabled||Se.disableRipple))},dependencies:[Y,qe.O5,Me],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),st})();function dt(st,De,Fe){if(Fe.length){let Se=De.toArray(),Ne=Fe.toArray(),we=0;for(let $e=0;$e<st+1;$e++)Se[$e].group&&Se[$e].group===Ne[we]&&we++;return we}return 0}function $t(st,De,Fe,Se){return st<Fe?st:st+De>Fe+Se?Math.max(0,st-Se+De):Fe}let en=(()=>{class st{}return st.\u0275fac=function(Fe){return new(Fe||st)},st.\u0275mod=D.oAB({type:st}),st.\u0275inj=D.cJS({imports:[te,qe.ez,Pe,he]}),st})()},9549:(Cn,gt,U)=>{"use strict";U.d(gt,{Eo:()=>di,G_:()=>Di,KE:()=>xn,R9:()=>On,lN:()=>Wn});var D=U(9643),l=U(6895),G=U(4650),m=U(3238),qe=U(445),ke=U(1281),Ye=U(7579),Re=U(6451),pe=U(4968),Ge=U(8675),rt=U(2722),Te=U(5698),ut=U(7340),lt=U(3353);const We=["connectionContainer"],Dt=["inputContainer"],wt=["label"];function Et(ct,Y){1&ct&&(G.ynx(0),G.TgZ(1,"div",14),G._UZ(2,"div",15)(3,"div",16)(4,"div",17),G.qZA(),G.TgZ(5,"div",18),G._UZ(6,"div",15)(7,"div",16)(8,"div",17),G.qZA(),G.BQk())}function _n(ct,Y){if(1&ct){const te=G.EpF();G.TgZ(0,"div",19),G.NdJ("cdkObserveContent",function(){G.CHM(te);const he=G.oxw();return G.KtG(he.updateOutlineGap())}),G.Hsn(1,1),G.qZA()}if(2&ct){const te=G.oxw();G.Q6J("cdkObserveContentDisabled","outline"!=te.appearance)}}function hn(ct,Y){if(1&ct&&(G.ynx(0),G.Hsn(1,2),G.TgZ(2,"span"),G._uU(3),G.qZA(),G.BQk()),2&ct){const te=G.oxw(2);G.xp6(3),G.Oqu(te._control.placeholder)}}function At(ct,Y){1&ct&&G.Hsn(0,3,["*ngSwitchCase","true"])}function Pe(ct,Y){1&ct&&(G.TgZ(0,"span",23),G._uU(1," *"),G.qZA())}function Ze(ct,Y){if(1&ct){const te=G.EpF();G.TgZ(0,"label",20,21),G.NdJ("cdkObserveContent",function(){G.CHM(te);const he=G.oxw();return G.KtG(he.updateOutlineGap())}),G.YNc(2,hn,4,1,"ng-container",12),G.YNc(3,At,1,0,"ng-content",12),G.YNc(4,Pe,2,0,"span",22),G.qZA()}if(2&ct){const te=G.oxw();G.ekj("mat-empty",te._control.empty&&!te._shouldAlwaysFloat())("mat-form-field-empty",te._control.empty&&!te._shouldAlwaysFloat())("mat-accent","accent"==te.color)("mat-warn","warn"==te.color),G.Q6J("cdkObserveContentDisabled","outline"!=te.appearance)("id",te._labelId)("ngSwitch",te._hasLabel()),G.uIk("for",te._control.id)("aria-owns",te._control.id),G.xp6(2),G.Q6J("ngSwitchCase",!1),G.xp6(1),G.Q6J("ngSwitchCase",!0),G.xp6(1),G.Q6J("ngIf",!te.hideRequiredMarker&&te._control.required&&!te._control.disabled)}}function Yt(ct,Y){1&ct&&(G.TgZ(0,"div",24),G.Hsn(1,4),G.qZA())}function Ot(ct,Y){if(1&ct&&(G.TgZ(0,"div",25),G._UZ(1,"span",26),G.qZA()),2&ct){const te=G.oxw();G.xp6(1),G.ekj("mat-accent","accent"==te.color)("mat-warn","warn"==te.color)}}function Ut(ct,Y){if(1&ct&&(G.TgZ(0,"div"),G.Hsn(1,5),G.qZA()),2&ct){const te=G.oxw();G.Q6J("@transitionMessages",te._subscriptAnimationState)}}function tn(ct,Y){if(1&ct&&(G.TgZ(0,"div",30),G._uU(1),G.qZA()),2&ct){const te=G.oxw(2);G.Q6J("id",te._hintLabelId),G.xp6(1),G.Oqu(te.hintLabel)}}function pt(ct,Y){if(1&ct&&(G.TgZ(0,"div",27),G.YNc(1,tn,2,2,"div",28),G.Hsn(2,6),G._UZ(3,"div",29),G.Hsn(4,7),G.qZA()),2&ct){const te=G.oxw();G.Q6J("@transitionMessages",te._subscriptAnimationState),G.xp6(1),G.Q6J("ngIf",te.hintLabel)}}const Xe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],It=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],pn=new G.OlP("MatError"),Gn={transitionMessages:(0,ut.X$)("transitionMessages",[(0,ut.SB)("enter",(0,ut.oB)({opacity:1,transform:"translateY(0%)"})),(0,ut.eR)("void => enter",[(0,ut.oB)({opacity:0,transform:"translateY(-5px)"}),(0,ut.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let di=(()=>{class ct{}return ct.\u0275fac=function(te){return new(te||ct)},ct.\u0275dir=G.lG2({type:ct}),ct})();const hi=new G.OlP("MatHint");let wn=(()=>{class ct{}return ct.\u0275fac=function(te){return new(te||ct)},ct.\u0275dir=G.lG2({type:ct,selectors:[["mat-label"]]}),ct})(),_t=(()=>{class ct{}return ct.\u0275fac=function(te){return new(te||ct)},ct.\u0275dir=G.lG2({type:ct,selectors:[["mat-placeholder"]]}),ct})();const Nt=new G.OlP("MatPrefix"),mn=new G.OlP("MatSuffix");let On=(()=>{class ct{}return ct.\u0275fac=function(te){return new(te||ct)},ct.\u0275dir=G.lG2({type:ct,selectors:[["","matSuffix",""]],features:[G._Bn([{provide:mn,useExisting:ct}])]}),ct})(),Jn=0;const $i=(0,m.pj)(class{constructor(ct){this._elementRef=ct}},"primary"),Qn=new G.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Di=new G.OlP("MatFormField");let xn=(()=>{class ct extends $i{constructor(te,Me,he,k,R,H,J){super(te),this._changeDetectorRef=Me,this._dir=he,this._defaults=k,this._platform=R,this._ngZone=H,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Ye.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Jn++,this._labelId="mat-form-field-label-"+Jn++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==J,this.appearance=k?.appearance||"legacy",k&&(this._hideRequiredMarker=Boolean(k.hideRequiredMarker),k.color&&(this.color=this.defaultColor=k.color))}get appearance(){return this._appearance}set appearance(te){const Me=this._appearance;this._appearance=te||this._defaults?.appearance||"legacy","outline"===this._appearance&&Me!==te&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(te){this._hideRequiredMarker=(0,ke.Ig)(te)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(te){this._hintLabel=te,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(te){te!==this._floatLabel&&(this._floatLabel=te||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(te){this._explicitFormFieldControl=te}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const te=this._control;te.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${te.controlType}`),te.stateChanges.pipe((0,Ge.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),te.ngControl&&te.ngControl.valueChanges&&te.ngControl.valueChanges.pipe((0,rt.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,rt.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Re.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,Ge.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,Ge.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,rt.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(te){const Me=this._control?this._control.ngControl:null;return Me&&Me[te]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,pe.R)(this._label.nativeElement,"transitionend").pipe((0,Te.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let te=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&te.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const Me=this._hintChildren?this._hintChildren.find(k=>"start"===k.align):null,he=this._hintChildren?this._hintChildren.find(k=>"end"===k.align):null;Me?te.push(Me.id):this._hintLabel&&te.push(this._hintLabelId),he&&te.push(he.id)}else this._errorChildren&&te.push(...this._errorChildren.map(Me=>Me.id));this._control.setDescribedByIds(te)}}_validateControlChild(){}updateOutlineGap(){const te=this._label?this._label.nativeElement:null,Me=this._connectionContainerRef.nativeElement,he=".mat-form-field-outline-start",k=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!te||!te.children.length||!te.textContent.trim()){const Ae=Me.querySelectorAll(`${he}, ${k}`);for(let Le=0;Le<Ae.length;Le++)Ae[Le].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let R=0,H=0;const J=Me.querySelectorAll(he),le=Me.querySelectorAll(k);if(this._label&&this._label.nativeElement.children.length){const Ae=Me.getBoundingClientRect();if(0===Ae.width&&0===Ae.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Le=this._getStartEnd(Ae),Qe=te.children,ot=this._getStartEnd(Qe[0].getBoundingClientRect());let He=0;for(let dt=0;dt<Qe.length;dt++)He+=Qe[dt].offsetWidth;R=Math.abs(ot-Le)-5,H=He>0?.75*He+10:0}for(let Ae=0;Ae<J.length;Ae++)J[Ae].style.width=`${R}px`;for(let Ae=0;Ae<le.length;Ae++)le[Ae].style.width=`${H}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(te){return this._dir&&"rtl"===this._dir.value?te.right:te.left}_isAttachedToDOM(){const te=this._elementRef.nativeElement;if(te.getRootNode){const Me=te.getRootNode();return Me&&Me!==te}return document.documentElement.contains(te)}}return ct.\u0275fac=function(te){return new(te||ct)(G.Y36(G.SBq),G.Y36(G.sBO),G.Y36(qe.Is,8),G.Y36(Qn,8),G.Y36(lt.t4),G.Y36(G.R0b),G.Y36(G.QbO,8))},ct.\u0275cmp=G.Xpm({type:ct,selectors:[["mat-form-field"]],contentQueries:function(te,Me,he){if(1&te&&(G.Suo(he,di,5),G.Suo(he,di,7),G.Suo(he,wn,5),G.Suo(he,wn,7),G.Suo(he,_t,5),G.Suo(he,pn,5),G.Suo(he,hi,5),G.Suo(he,Nt,5),G.Suo(he,mn,5)),2&te){let k;G.iGM(k=G.CRH())&&(Me._controlNonStatic=k.first),G.iGM(k=G.CRH())&&(Me._controlStatic=k.first),G.iGM(k=G.CRH())&&(Me._labelChildNonStatic=k.first),G.iGM(k=G.CRH())&&(Me._labelChildStatic=k.first),G.iGM(k=G.CRH())&&(Me._placeholderChild=k.first),G.iGM(k=G.CRH())&&(Me._errorChildren=k),G.iGM(k=G.CRH())&&(Me._hintChildren=k),G.iGM(k=G.CRH())&&(Me._prefixChildren=k),G.iGM(k=G.CRH())&&(Me._suffixChildren=k)}},viewQuery:function(te,Me){if(1&te&&(G.Gf(We,7),G.Gf(Dt,5),G.Gf(wt,5)),2&te){let he;G.iGM(he=G.CRH())&&(Me._connectionContainerRef=he.first),G.iGM(he=G.CRH())&&(Me._inputContainerRef=he.first),G.iGM(he=G.CRH())&&(Me._label=he.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(te,Me){2&te&&G.ekj("mat-form-field-appearance-standard","standard"==Me.appearance)("mat-form-field-appearance-fill","fill"==Me.appearance)("mat-form-field-appearance-outline","outline"==Me.appearance)("mat-form-field-appearance-legacy","legacy"==Me.appearance)("mat-form-field-invalid",Me._control.errorState)("mat-form-field-can-float",Me._canLabelFloat())("mat-form-field-should-float",Me._shouldLabelFloat())("mat-form-field-has-label",Me._hasFloatingLabel())("mat-form-field-hide-placeholder",Me._hideControlPlaceholder())("mat-form-field-disabled",Me._control.disabled)("mat-form-field-autofilled",Me._control.autofilled)("mat-focused",Me._control.focused)("ng-untouched",Me._shouldForward("untouched"))("ng-touched",Me._shouldForward("touched"))("ng-pristine",Me._shouldForward("pristine"))("ng-dirty",Me._shouldForward("dirty"))("ng-valid",Me._shouldForward("valid"))("ng-invalid",Me._shouldForward("invalid"))("ng-pending",Me._shouldForward("pending"))("_mat-animation-noopable",!Me._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[G._Bn([{provide:Di,useExisting:ct}]),G.qOj],ngContentSelectors:It,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(te,Me){1&te&&(G.F$t(Xe),G.TgZ(0,"div",0)(1,"div",1,2),G.NdJ("click",function(k){return Me._control.onContainerClick&&Me._control.onContainerClick(k)}),G.YNc(3,Et,9,0,"ng-container",3),G.YNc(4,_n,2,1,"div",4),G.TgZ(5,"div",5,6),G.Hsn(7),G.TgZ(8,"span",7),G.YNc(9,Ze,5,16,"label",8),G.qZA()(),G.YNc(10,Yt,2,0,"div",9),G.qZA(),G.YNc(11,Ot,2,4,"div",10),G.TgZ(12,"div",11),G.YNc(13,Ut,2,1,"div",12),G.YNc(14,pt,5,2,"div",13),G.qZA()()),2&te&&(G.xp6(3),G.Q6J("ngIf","outline"==Me.appearance),G.xp6(1),G.Q6J("ngIf",Me._prefixChildren.length),G.xp6(5),G.Q6J("ngIf",Me._hasFloatingLabel()),G.xp6(1),G.Q6J("ngIf",Me._suffixChildren.length),G.xp6(1),G.Q6J("ngIf","outline"!=Me.appearance),G.xp6(1),G.Q6J("ngSwitch",Me._getDisplayedMessages()),G.xp6(1),G.Q6J("ngSwitchCase","error"),G.xp6(1),G.Q6J("ngSwitchCase","hint"))},dependencies:[l.O5,l.RF,l.n9,D.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Gn.transitionMessages]},changeDetection:0}),ct})(),Wn=(()=>{class ct{}return ct.\u0275fac=function(te){return new(te||ct)},ct.\u0275mod=G.oAB({type:ct}),ct.\u0275inj=G.cJS({imports:[l.ez,m.BQ,D.Q8,m.BQ]}),ct})()},7392:(Cn,gt,U)=>{"use strict";U.d(gt,{Hw:()=>Ei,Ps:()=>hi,jv:()=>Ut});var D=U(4650),l=U(3238),G=U(1281),m=U(6895),qe=U(9646),ke=U(2843),Ye=U(4128),Re=U(727),pe=U(8505),Ge=U(4004),rt=U(262),Te=U(8746),ut=U(3099),lt=U(5698),We=U(529),Dt=U(1481);const wt=["*"];let Et;function hn(bn){return function _n(){if(void 0===Et&&(Et=null,typeof window<"u")){const bn=window;void 0!==bn.trustedTypes&&(Et=bn.trustedTypes.createPolicy("angular#components",{createHTML:wn=>wn}))}return Et}()?.createHTML(bn)||bn}function At(bn){return Error(`Unable to find icon with the name "${bn}"`)}function Ze(bn){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${bn}".`)}function Yt(bn){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${bn}".`)}class Ot{constructor(wn,_t,Nt){this.url=wn,this.svgText=_t,this.options=Nt}}let Ut=(()=>{class bn{constructor(_t,Nt,fn,mn){this._httpClient=_t,this._sanitizer=Nt,this._errorHandler=mn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=fn}addSvgIcon(_t,Nt,fn){return this.addSvgIconInNamespace("",_t,Nt,fn)}addSvgIconLiteral(_t,Nt,fn){return this.addSvgIconLiteralInNamespace("",_t,Nt,fn)}addSvgIconInNamespace(_t,Nt,fn,mn){return this._addSvgIconConfig(_t,Nt,new Ot(fn,null,mn))}addSvgIconResolver(_t){return this._resolvers.push(_t),this}addSvgIconLiteralInNamespace(_t,Nt,fn,mn){const On=this._sanitizer.sanitize(D.q3G.HTML,fn);if(!On)throw Yt(fn);const Jn=hn(On);return this._addSvgIconConfig(_t,Nt,new Ot("",Jn,mn))}addSvgIconSet(_t,Nt){return this.addSvgIconSetInNamespace("",_t,Nt)}addSvgIconSetLiteral(_t,Nt){return this.addSvgIconSetLiteralInNamespace("",_t,Nt)}addSvgIconSetInNamespace(_t,Nt,fn){return this._addSvgIconSetConfig(_t,new Ot(Nt,null,fn))}addSvgIconSetLiteralInNamespace(_t,Nt,fn){const mn=this._sanitizer.sanitize(D.q3G.HTML,Nt);if(!mn)throw Yt(Nt);const On=hn(mn);return this._addSvgIconSetConfig(_t,new Ot("",On,fn))}registerFontClassAlias(_t,Nt=_t){return this._fontCssClassesByAlias.set(_t,Nt),this}classNameForFontAlias(_t){return this._fontCssClassesByAlias.get(_t)||_t}setDefaultFontSetClass(..._t){return this._defaultFontSetClass=_t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(_t){const Nt=this._sanitizer.sanitize(D.q3G.RESOURCE_URL,_t);if(!Nt)throw Ze(_t);const fn=this._cachedIconsByUrl.get(Nt);return fn?(0,qe.of)(Xe(fn)):this._loadSvgIconFromConfig(new Ot(_t,null)).pipe((0,pe.b)(mn=>this._cachedIconsByUrl.set(Nt,mn)),(0,Ge.U)(mn=>Xe(mn)))}getNamedSvgIcon(_t,Nt=""){const fn=It(Nt,_t);let mn=this._svgIconConfigs.get(fn);if(mn)return this._getSvgFromConfig(mn);if(mn=this._getIconConfigFromResolvers(Nt,_t),mn)return this._svgIconConfigs.set(fn,mn),this._getSvgFromConfig(mn);const On=this._iconSetConfigs.get(Nt);return On?this._getSvgFromIconSetConfigs(_t,On):(0,ke._)(At(fn))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(_t){return _t.svgText?(0,qe.of)(Xe(this._svgElementFromConfig(_t))):this._loadSvgIconFromConfig(_t).pipe((0,Ge.U)(Nt=>Xe(Nt)))}_getSvgFromIconSetConfigs(_t,Nt){const fn=this._extractIconWithNameFromAnySet(_t,Nt);if(fn)return(0,qe.of)(fn);const mn=Nt.filter(On=>!On.svgText).map(On=>this._loadSvgIconSetFromConfig(On).pipe((0,rt.K)(Jn=>{const fi=`Loading icon set URL: ${this._sanitizer.sanitize(D.q3G.RESOURCE_URL,On.url)} failed: ${Jn.message}`;return this._errorHandler.handleError(new Error(fi)),(0,qe.of)(null)})));return(0,Ye.D)(mn).pipe((0,Ge.U)(()=>{const On=this._extractIconWithNameFromAnySet(_t,Nt);if(!On)throw At(_t);return On}))}_extractIconWithNameFromAnySet(_t,Nt){for(let fn=Nt.length-1;fn>=0;fn--){const mn=Nt[fn];if(mn.svgText&&mn.svgText.toString().indexOf(_t)>-1){const On=this._svgElementFromConfig(mn),Jn=this._extractSvgIconFromSet(On,_t,mn.options);if(Jn)return Jn}}return null}_loadSvgIconFromConfig(_t){return this._fetchIcon(_t).pipe((0,pe.b)(Nt=>_t.svgText=Nt),(0,Ge.U)(()=>this._svgElementFromConfig(_t)))}_loadSvgIconSetFromConfig(_t){return _t.svgText?(0,qe.of)(null):this._fetchIcon(_t).pipe((0,pe.b)(Nt=>_t.svgText=Nt))}_extractSvgIconFromSet(_t,Nt,fn){const mn=_t.querySelector(`[id="${Nt}"]`);if(!mn)return null;const On=mn.cloneNode(!0);if(On.removeAttribute("id"),"svg"===On.nodeName.toLowerCase())return this._setSvgAttributes(On,fn);if("symbol"===On.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(On),fn);const Jn=this._svgElementFromString(hn("<svg></svg>"));return Jn.appendChild(On),this._setSvgAttributes(Jn,fn)}_svgElementFromString(_t){const Nt=this._document.createElement("DIV");Nt.innerHTML=_t;const fn=Nt.querySelector("svg");if(!fn)throw Error("<svg> tag not found");return fn}_toSvgElement(_t){const Nt=this._svgElementFromString(hn("<svg></svg>")),fn=_t.attributes;for(let mn=0;mn<fn.length;mn++){const{name:On,value:Jn}=fn[mn];"id"!==On&&Nt.setAttribute(On,Jn)}for(let mn=0;mn<_t.childNodes.length;mn++)_t.childNodes[mn].nodeType===this._document.ELEMENT_NODE&&Nt.appendChild(_t.childNodes[mn].cloneNode(!0));return Nt}_setSvgAttributes(_t,Nt){return _t.setAttribute("fit",""),_t.setAttribute("height","100%"),_t.setAttribute("width","100%"),_t.setAttribute("preserveAspectRatio","xMidYMid meet"),_t.setAttribute("focusable","false"),Nt&&Nt.viewBox&&_t.setAttribute("viewBox",Nt.viewBox),_t}_fetchIcon(_t){const{url:Nt,options:fn}=_t,mn=fn?.withCredentials??!1;if(!this._httpClient)throw function Pe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Nt)throw Error(`Cannot fetch icon from URL "${Nt}".`);const On=this._sanitizer.sanitize(D.q3G.RESOURCE_URL,Nt);if(!On)throw Ze(Nt);const Jn=this._inProgressUrlFetches.get(On);if(Jn)return Jn;const oi=this._httpClient.get(On,{responseType:"text",withCredentials:mn}).pipe((0,Ge.U)(fi=>hn(fi)),(0,Te.x)(()=>this._inProgressUrlFetches.delete(On)),(0,ut.B)());return this._inProgressUrlFetches.set(On,oi),oi}_addSvgIconConfig(_t,Nt,fn){return this._svgIconConfigs.set(It(_t,Nt),fn),this}_addSvgIconSetConfig(_t,Nt){const fn=this._iconSetConfigs.get(_t);return fn?fn.push(Nt):this._iconSetConfigs.set(_t,[Nt]),this}_svgElementFromConfig(_t){if(!_t.svgElement){const Nt=this._svgElementFromString(_t.svgText);this._setSvgAttributes(Nt,_t.options),_t.svgElement=Nt}return _t.svgElement}_getIconConfigFromResolvers(_t,Nt){for(let fn=0;fn<this._resolvers.length;fn++){const mn=this._resolvers[fn](Nt,_t);if(mn)return St(mn)?new Ot(mn.url,null,mn.options):new Ot(mn,null)}}}return bn.\u0275fac=function(_t){return new(_t||bn)(D.LFG(We.eN,8),D.LFG(Dt.H7),D.LFG(m.K0,8),D.LFG(D.qLn))},bn.\u0275prov=D.Yz7({token:bn,factory:bn.\u0275fac,providedIn:"root"}),bn})();function Xe(bn){return bn.cloneNode(!0)}function It(bn,wn){return bn+":"+wn}function St(bn){return!(!bn.url||!bn.options)}const pn=(0,l.pj)(class{constructor(bn){this._elementRef=bn}}),un=new D.OlP("MAT_ICON_DEFAULT_OPTIONS"),Gn=new D.OlP("mat-icon-location",{providedIn:"root",factory:function di(){const bn=(0,D.f3M)(m.K0),wn=bn?bn.location:null;return{getPathname:()=>wn?wn.pathname+wn.search:""}}}),yi=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],yn=yi.map(bn=>`[${bn}]`).join(", "),gi=/^url\(['"]?#(.*?)['"]?\)$/;let Ei=(()=>{class bn extends pn{constructor(_t,Nt,fn,mn,On,Jn){super(_t),this._iconRegistry=Nt,this._location=mn,this._errorHandler=On,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Re.w0.EMPTY,Jn&&(Jn.color&&(this.color=this.defaultColor=Jn.color),Jn.fontSet&&(this.fontSet=Jn.fontSet)),fn||_t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(_t){this._inline=(0,G.Ig)(_t)}get svgIcon(){return this._svgIcon}set svgIcon(_t){_t!==this._svgIcon&&(_t?this._updateSvgIcon(_t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=_t)}get fontSet(){return this._fontSet}set fontSet(_t){const Nt=this._cleanupFontValue(_t);Nt!==this._fontSet&&(this._fontSet=Nt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(_t){const Nt=this._cleanupFontValue(_t);Nt!==this._fontIcon&&(this._fontIcon=Nt,this._updateFontIconClasses())}_splitIconName(_t){if(!_t)return["",""];const Nt=_t.split(":");switch(Nt.length){case 1:return["",Nt[0]];case 2:return Nt;default:throw Error(`Invalid icon name: "${_t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const _t=this._elementsWithExternalReferences;if(_t&&_t.size){const Nt=this._location.getPathname();Nt!==this._previousPath&&(this._previousPath=Nt,this._prependPathToReferences(Nt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(_t){this._clearSvgElement();const Nt=this._location.getPathname();this._previousPath=Nt,this._cacheChildrenWithExternalReferences(_t),this._prependPathToReferences(Nt),this._elementRef.nativeElement.appendChild(_t)}_clearSvgElement(){const _t=this._elementRef.nativeElement;let Nt=_t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Nt--;){const fn=_t.childNodes[Nt];(1!==fn.nodeType||"svg"===fn.nodeName.toLowerCase())&&fn.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const _t=this._elementRef.nativeElement,Nt=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(fn=>fn.length>0);this._previousFontSetClass.forEach(fn=>_t.classList.remove(fn)),Nt.forEach(fn=>_t.classList.add(fn)),this._previousFontSetClass=Nt,this.fontIcon!==this._previousFontIconClass&&!Nt.includes("mat-ligature-font")&&(this._previousFontIconClass&&_t.classList.remove(this._previousFontIconClass),this.fontIcon&&_t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(_t){return"string"==typeof _t?_t.trim().split(" ")[0]:_t}_prependPathToReferences(_t){const Nt=this._elementsWithExternalReferences;Nt&&Nt.forEach((fn,mn)=>{fn.forEach(On=>{mn.setAttribute(On.name,`url('${_t}#${On.value}')`)})})}_cacheChildrenWithExternalReferences(_t){const Nt=_t.querySelectorAll(yn),fn=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let mn=0;mn<Nt.length;mn++)yi.forEach(On=>{const Jn=Nt[mn],oi=Jn.getAttribute(On),fi=oi?oi.match(gi):null;if(fi){let $i=fn.get(Jn);$i||($i=[],fn.set(Jn,$i)),$i.push({name:On,value:fi[1]})}})}_updateSvgIcon(_t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),_t){const[Nt,fn]=this._splitIconName(_t);Nt&&(this._svgNamespace=Nt),fn&&(this._svgName=fn),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(fn,Nt).pipe((0,lt.q)(1)).subscribe(mn=>this._setSvgElement(mn),mn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Nt}:${fn}! ${mn.message}`))})}}}return bn.\u0275fac=function(_t){return new(_t||bn)(D.Y36(D.SBq),D.Y36(Ut),D.$8M("aria-hidden"),D.Y36(Gn),D.Y36(D.qLn),D.Y36(un,8))},bn.\u0275cmp=D.Xpm({type:bn,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(_t,Nt){2&_t&&(D.uIk("data-mat-icon-type",Nt._usingFontIcon()?"font":"svg")("data-mat-icon-name",Nt._svgName||Nt.fontIcon)("data-mat-icon-namespace",Nt._svgNamespace||Nt.fontSet),D.ekj("mat-icon-inline",Nt.inline)("mat-icon-no-color","primary"!==Nt.color&&"accent"!==Nt.color&&"warn"!==Nt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[D.qOj],ngContentSelectors:wt,decls:1,vars:0,template:function(_t,Nt){1&_t&&(D.F$t(),D.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),bn})(),hi=(()=>{class bn{}return bn.\u0275fac=function(_t){return new(_t||bn)},bn.\u0275mod=D.oAB({type:bn}),bn.\u0275inj=D.cJS({imports:[l.BQ,l.BQ]}),bn})()},4385:(Cn,gt,U)=>{"use strict";U.d(gt,{LD:()=>xn,gD:()=>Di});var D=U(8184),l=U(6895),G=U(4650),m=U(3238),qe=U(9549),ke=U(8605),Ye=U(2687),Re=U(445),pe=U(1281),Ge=U(5017),rt=U(9521),Te=U(4006),ut=U(7579),lt=U(9770),We=U(6451),Dt=U(8675),wt=U(3900),Et=U(5698),_n=U(9300),hn=U(4004),At=U(1884),Pe=U(2722),Ze=U(7340);const Yt=["trigger"],Ot=["panel"];function Ut(Wn,ct){if(1&Wn&&(G.TgZ(0,"span",8),G._uU(1),G.qZA()),2&Wn){const Y=G.oxw();G.xp6(1),G.Oqu(Y.placeholder)}}function tn(Wn,ct){if(1&Wn&&(G.TgZ(0,"span",12),G._uU(1),G.qZA()),2&Wn){const Y=G.oxw(2);G.xp6(1),G.Oqu(Y.triggerValue)}}function pt(Wn,ct){1&Wn&&G.Hsn(0,0,["*ngSwitchCase","true"])}function Xe(Wn,ct){if(1&Wn&&(G.TgZ(0,"span",9),G.YNc(1,tn,2,1,"span",10),G.YNc(2,pt,1,0,"ng-content",11),G.qZA()),2&Wn){const Y=G.oxw();G.Q6J("ngSwitch",!!Y.customTrigger),G.xp6(2),G.Q6J("ngSwitchCase",!0)}}function It(Wn,ct){if(1&Wn){const Y=G.EpF();G.TgZ(0,"div",13)(1,"div",14,15),G.NdJ("@transformPanel.done",function(Me){G.CHM(Y);const he=G.oxw();return G.KtG(he._panelDoneAnimatingStream.next(Me.toState))})("keydown",function(Me){G.CHM(Y);const he=G.oxw();return G.KtG(he._handleKeydown(Me))}),G.Hsn(3,1),G.qZA()()}if(2&Wn){const Y=G.oxw();G.Q6J("@transformPanelWrap",void 0),G.xp6(1),G.Gre("mat-select-panel ",Y._getPanelTheme(),""),G.Udp("transform-origin",Y._transformOrigin)("font-size",Y._triggerFontSize,"px"),G.Q6J("ngClass",Y.panelClass)("@transformPanel",Y.multiple?"showing-multiple":"showing"),G.uIk("id",Y.id+"-panel")("aria-multiselectable",Y.multiple)("aria-label",Y.ariaLabel||null)("aria-labelledby",Y._getPanelAriaLabelledby())}}const St=[[["mat-select-trigger"]],"*"],pn=["mat-select-trigger","*"],un={transformPanelWrap:(0,Ze.X$)("transformPanelWrap",[(0,Ze.eR)("* => void",(0,Ze.IO)("@transformPanel",[(0,Ze.pV)()],{optional:!0}))]),transformPanel:(0,Ze.X$)("transformPanel",[(0,Ze.SB)("void",(0,Ze.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,Ze.SB)("showing",(0,Ze.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,Ze.SB)("showing-multiple",(0,Ze.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,Ze.eR)("void => *",(0,Ze.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,Ze.eR)("* => void",(0,Ze.jt)("100ms 25ms linear",(0,Ze.oB)({opacity:0})))])};let yn=0;const Nt=new G.OlP("mat-select-scroll-strategy"),mn=new G.OlP("MAT_SELECT_CONFIG"),On={provide:Nt,deps:[D.aV],useFactory:function fn(Wn){return()=>Wn.scrollStrategies.reposition()}};class Jn{constructor(ct,Y){this.source=ct,this.value=Y}}const oi=(0,m.Kr)((0,m.sb)((0,m.Id)((0,m.FD)(class{constructor(Wn,ct,Y,te,Me){this._elementRef=Wn,this._defaultErrorStateMatcher=ct,this._parentForm=Y,this._parentFormGroup=te,this.ngControl=Me,this.stateChanges=new ut.x}})))),fi=new G.OlP("MatSelectTrigger");let Qn=(()=>{class Wn extends oi{constructor(Y,te,Me,he,k,R,H,J,le,Ae,Le,Qe,ot,He){super(k,he,H,J,Ae),this._viewportRuler=Y,this._changeDetectorRef=te,this._ngZone=Me,this._dir=R,this._parentFormField=le,this._liveAnnouncer=ot,this._defaultOptions=He,this._panelOpen=!1,this._compareWith=(dt,$t)=>dt===$t,this._uid="mat-select-"+yn++,this._triggerAriaLabelledBy=null,this._destroy=new ut.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+yn++,this._panelDoneAnimatingStream=new ut.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,lt.P)(()=>{const dt=this.options;return dt?dt.changes.pipe((0,Dt.O)(dt),(0,wt.w)(()=>(0,We.T)(...dt.map($t=>$t.onSelectionChange)))):this._ngZone.onStable.pipe((0,Et.q)(1),(0,wt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new G.vpe,this._openedStream=this.openedChange.pipe((0,_n.h)(dt=>dt),(0,hn.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,_n.h)(dt=>!dt),(0,hn.U)(()=>{})),this.selectionChange=new G.vpe,this.valueChange=new G.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=He?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=He.typeaheadDebounceInterval),this._scrollStrategyFactory=Qe,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Le)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(Y){this._placeholder=Y,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Te.kI.required)??!1}set required(Y){this._required=(0,pe.Ig)(Y),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(Y){this._multiple=(0,pe.Ig)(Y)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(Y){this._disableOptionCentering=(0,pe.Ig)(Y)}get compareWith(){return this._compareWith}set compareWith(Y){this._compareWith=Y,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(Y){this._assignValue(Y)&&this._onChange(Y)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(Y){this._typeaheadDebounceInterval=(0,pe.su)(Y)}get id(){return this._id}set id(Y){this._id=Y||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Ge.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,At.x)(),(0,Pe.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Pe.R)(this._destroy)).subscribe(Y=>{Y.added.forEach(te=>te.select()),Y.removed.forEach(te=>te.deselect())}),this.options.changes.pipe((0,Dt.O)(null),(0,Pe.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const Y=this._getTriggerAriaLabelledby(),te=this.ngControl;if(Y!==this._triggerAriaLabelledBy){const Me=this._elementRef.nativeElement;this._triggerAriaLabelledBy=Y,Y?Me.setAttribute("aria-labelledby",Y):Me.removeAttribute("aria-labelledby")}te&&(this._previousControl!==te.control&&(void 0!==this._previousControl&&null!==te.disabled&&te.disabled!==this.disabled&&(this.disabled=te.disabled),this._previousControl=te.control),this.updateErrorState())}ngOnChanges(Y){(Y.disabled||Y.userAriaDescribedBy)&&this.stateChanges.next(),Y.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(Y){this._assignValue(Y)}registerOnChange(Y){this._onChange=Y}registerOnTouched(Y){this._onTouched=Y}setDisabledState(Y){this.disabled=Y,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const Y=this._selectionModel.selected.map(te=>te.viewValue);return this._isRtl()&&Y.reverse(),Y.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(Y){this.disabled||(this.panelOpen?this._handleOpenKeydown(Y):this._handleClosedKeydown(Y))}_handleClosedKeydown(Y){const te=Y.keyCode,Me=te===rt.JH||te===rt.LH||te===rt.oh||te===rt.SV,he=te===rt.K5||te===rt.L_,k=this._keyManager;if(!k.isTyping()&&he&&!(0,rt.Vb)(Y)||(this.multiple||Y.altKey)&&Me)Y.preventDefault(),this.open();else if(!this.multiple){const R=this.selected;k.onKeydown(Y);const H=this.selected;H&&R!==H&&this._liveAnnouncer.announce(H.viewValue,1e4)}}_handleOpenKeydown(Y){const te=this._keyManager,Me=Y.keyCode,he=Me===rt.JH||Me===rt.LH,k=te.isTyping();if(he&&Y.altKey)Y.preventDefault(),this.close();else if(k||Me!==rt.K5&&Me!==rt.L_||!te.activeItem||(0,rt.Vb)(Y))if(!k&&this._multiple&&Me===rt.A&&Y.ctrlKey){Y.preventDefault();const R=this.options.some(H=>!H.disabled&&!H.selected);this.options.forEach(H=>{H.disabled||(R?H.select():H.deselect())})}else{const R=te.activeItemIndex;te.onKeydown(Y),this._multiple&&he&&Y.shiftKey&&te.activeItem&&te.activeItemIndex!==R&&te.activeItem._selectViaInteraction()}else Y.preventDefault(),te.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Et.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(Y){if(this._selectionModel.selected.forEach(te=>te.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&Y)Array.isArray(Y),Y.forEach(te=>this._selectOptionByValue(te)),this._sortValues();else{const te=this._selectOptionByValue(Y);te?this._keyManager.updateActiveItem(te):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(Y){const te=this.options.find(Me=>{if(this._selectionModel.isSelected(Me))return!1;try{return null!=Me.value&&this._compareWith(Me.value,Y)}catch{return!1}});return te&&this._selectionModel.select(te),te}_assignValue(Y){return!!(Y!==this._value||this._multiple&&Array.isArray(Y))&&(this.options&&this._setSelectionByValue(Y),this._value=Y,!0)}_initKeyManager(){this._keyManager=new Ye.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,Pe.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,Pe.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const Y=(0,We.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Pe.R)(Y)).subscribe(te=>{this._onSelect(te.source,te.isUserInput),te.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,We.T)(...this.options.map(te=>te._stateChanges)).pipe((0,Pe.R)(Y)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(Y,te){const Me=this._selectionModel.isSelected(Y);null!=Y.value||this._multiple?(Me!==Y.selected&&(Y.selected?this._selectionModel.select(Y):this._selectionModel.deselect(Y)),te&&this._keyManager.setActiveItem(Y),this.multiple&&(this._sortValues(),te&&this.focus())):(Y.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(Y.value)),Me!==this._selectionModel.isSelected(Y)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const Y=this.options.toArray();this._selectionModel.sort((te,Me)=>this.sortComparator?this.sortComparator(te,Me,Y):Y.indexOf(te)-Y.indexOf(Me)),this.stateChanges.next()}}_propagateChanges(Y){let te=null;te=this.multiple?this.selected.map(Me=>Me.value):this.selected?this.selected.value:Y,this._value=te,this.valueChange.emit(te),this._onChange(te),this.selectionChange.emit(this._getChangeEvent(te)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(Y){this._elementRef.nativeElement.focus(Y)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const Y=this._parentFormField?.getLabelId();return this.ariaLabelledby?(Y?Y+" ":"")+this.ariaLabelledby:Y}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const Y=this._parentFormField?.getLabelId();let te=(Y?Y+" ":"")+this._valueId;return this.ariaLabelledby&&(te+=" "+this.ariaLabelledby),te}_panelDoneAnimating(Y){this.openedChange.emit(Y)}setDescribedByIds(Y){Y.length?this._elementRef.nativeElement.setAttribute("aria-describedby",Y.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Wn.\u0275fac=function(Y){return new(Y||Wn)(G.Y36(ke.rL),G.Y36(G.sBO),G.Y36(G.R0b),G.Y36(m.rD),G.Y36(G.SBq),G.Y36(Re.Is,8),G.Y36(Te.F,8),G.Y36(Te.sg,8),G.Y36(qe.G_,8),G.Y36(Te.a5,10),G.$8M("tabindex"),G.Y36(Nt),G.Y36(Ye.Kd),G.Y36(mn,8))},Wn.\u0275dir=G.lG2({type:Wn,viewQuery:function(Y,te){if(1&Y&&(G.Gf(Yt,5),G.Gf(Ot,5),G.Gf(D.pI,5)),2&Y){let Me;G.iGM(Me=G.CRH())&&(te.trigger=Me.first),G.iGM(Me=G.CRH())&&(te.panel=Me.first),G.iGM(Me=G.CRH())&&(te._overlayDir=Me.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[G.qOj,G.TTD]}),Wn})(),Di=(()=>{class Wn extends Qn{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(Y,te,Me){const he=this._getItemHeight();return Math.min(Math.max(0,he*Y-te+he/2),Me)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Pe.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Et.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(Y){const te=(0,m.CB)(Y,this.options,this.optionGroups),Me=this._getItemHeight();this.panel.nativeElement.scrollTop=0===Y&&1===te?0:(0,m.jH)((Y+te)*Me,Me,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(Y){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(Y)}_getChangeEvent(Y){return new Jn(this,Y)}_calculateOverlayOffsetX(){const Y=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),te=this._viewportRuler.getViewportSize(),Me=this._isRtl(),he=this.multiple?56:32;let k;if(this.multiple)k=40;else if(this.disableOptionCentering)k=16;else{let J=this._selectionModel.selected[0]||this.options.first;k=J&&J.group?32:16}Me||(k*=-1);const R=0-(Y.left+k-(Me?he:0)),H=Y.right+k-te.width+(Me?0:he);R>0?k+=R+8:H>0&&(k-=H+8),this._overlayDir.offsetX=Math.round(k),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(Y,te,Me){const he=this._getItemHeight(),k=(he-this._triggerRect.height)/2,R=Math.floor(256/he);let H;return this.disableOptionCentering?0:(H=0===this._scrollTop?Y*he:this._scrollTop===Me?(Y-(this._getItemCount()-R))*he+(he-(this._getItemCount()*he-256)%he):te-he/2,Math.round(-1*H-k))}_checkOverlayWithinViewport(Y){const te=this._getItemHeight(),Me=this._viewportRuler.getViewportSize(),he=this._triggerRect.top-8,k=Me.height-this._triggerRect.bottom-8,R=Math.abs(this._offsetY),J=Math.min(this._getItemCount()*te,256)-R-this._triggerRect.height;J>k?this._adjustPanelUp(J,k):R>he?this._adjustPanelDown(R,he,Y):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(Y,te){const Me=Math.round(Y-te);this._scrollTop-=Me,this._offsetY-=Me,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(Y,te,Me){const he=Math.round(Y-te);if(this._scrollTop+=he,this._offsetY+=he,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=Me)return this._scrollTop=Me,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const Y=this._getItemHeight(),te=this._getItemCount(),Me=Math.min(te*Y,256),k=te*Y-Me;let R;R=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),R+=(0,m.CB)(R,this.options,this.optionGroups);const H=Me/2;this._scrollTop=this._calculateOverlayScroll(R,H,k),this._offsetY=this._calculateOverlayOffsetY(R,H,k),this._checkOverlayWithinViewport(k)}_getOriginBasedOnOption(){const Y=this._getItemHeight(),te=(Y-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-te+Y/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Wn.\u0275fac=function(){let ct;return function(te){return(ct||(ct=G.n5z(Wn)))(te||Wn)}}(),Wn.\u0275cmp=G.Xpm({type:Wn,selectors:[["mat-select"]],contentQueries:function(Y,te,Me){if(1&Y&&(G.Suo(Me,fi,5),G.Suo(Me,m.ey,5),G.Suo(Me,m.K7,5)),2&Y){let he;G.iGM(he=G.CRH())&&(te.customTrigger=he.first),G.iGM(he=G.CRH())&&(te.options=he),G.iGM(he=G.CRH())&&(te.optionGroups=he)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(Y,te){1&Y&&G.NdJ("keydown",function(he){return te._handleKeydown(he)})("focus",function(){return te._onFocus()})("blur",function(){return te._onBlur()}),2&Y&&(G.uIk("id",te.id)("tabindex",te.tabIndex)("aria-controls",te.panelOpen?te.id+"-panel":null)("aria-expanded",te.panelOpen)("aria-label",te.ariaLabel||null)("aria-required",te.required.toString())("aria-disabled",te.disabled.toString())("aria-invalid",te.errorState)("aria-activedescendant",te._getAriaActiveDescendant()),G.ekj("mat-select-disabled",te.disabled)("mat-select-invalid",te.errorState)("mat-select-required",te.required)("mat-select-empty",te.empty)("mat-select-multiple",te.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[G._Bn([{provide:qe.Eo,useExisting:Wn},{provide:m.HF,useExisting:Wn}]),G.qOj],ngContentSelectors:pn,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(Y,te){if(1&Y&&(G.F$t(St),G.TgZ(0,"div",0,1),G.NdJ("click",function(){return te.toggle()}),G.TgZ(3,"div",2),G.YNc(4,Ut,2,1,"span",3),G.YNc(5,Xe,3,2,"span",4),G.qZA(),G.TgZ(6,"div",5),G._UZ(7,"div",6),G.qZA()(),G.YNc(8,It,4,14,"ng-template",7),G.NdJ("backdropClick",function(){return te.close()})("attach",function(){return te._onAttached()})("detach",function(){return te.close()})),2&Y){const Me=G.MAs(1);G.uIk("aria-owns",te.panelOpen?te.id+"-panel":null),G.xp6(3),G.Q6J("ngSwitch",te.empty),G.uIk("id",te._valueId),G.xp6(1),G.Q6J("ngSwitchCase",!0),G.xp6(1),G.Q6J("ngSwitchCase",!1),G.xp6(3),G.Q6J("cdkConnectedOverlayPanelClass",te._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",te._scrollStrategy)("cdkConnectedOverlayOrigin",Me)("cdkConnectedOverlayOpen",te.panelOpen)("cdkConnectedOverlayPositions",te._positions)("cdkConnectedOverlayMinWidth",null==te._triggerRect?null:te._triggerRect.width)("cdkConnectedOverlayOffsetY",te._offsetY)}},dependencies:[l.mk,l.RF,l.n9,l.ED,D.pI,D.xu],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[un.transformPanelWrap,un.transformPanel]},changeDetection:0}),Wn})(),xn=(()=>{class Wn{}return Wn.\u0275fac=function(Y){return new(Y||Wn)},Wn.\u0275mod=G.oAB({type:Wn}),Wn.\u0275inj=G.cJS({providers:[On],imports:[l.ez,D.U8,m.Ng,m.BQ,ke.ZD,qe.lN,m.Ng,m.BQ]}),Wn})()},3683:(Cn,gt,U)=>{"use strict";U.d(gt,{Ye:()=>pe,g0:()=>rt});var D=U(4650),l=U(3238),G=U(3353),m=U(6895);const qe=["*",[["mat-toolbar-row"]]],ke=["*","mat-toolbar-row"],Ye=(0,l.pj)(class{constructor(Te){this._elementRef=Te}});let Re=(()=>{class Te{}return Te.\u0275fac=function(lt){return new(lt||Te)},Te.\u0275dir=D.lG2({type:Te,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Te})(),pe=(()=>{class Te extends Ye{constructor(lt,We,Dt){super(lt),this._platform=We,this._document=Dt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Te.\u0275fac=function(lt){return new(lt||Te)(D.Y36(D.SBq),D.Y36(G.t4),D.Y36(m.K0))},Te.\u0275cmp=D.Xpm({type:Te,selectors:[["mat-toolbar"]],contentQueries:function(lt,We,Dt){if(1&lt&&D.Suo(Dt,Re,5),2&lt){let wt;D.iGM(wt=D.CRH())&&(We._toolbarRows=wt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(lt,We){2&lt&&D.ekj("mat-toolbar-multiple-rows",We._toolbarRows.length>0)("mat-toolbar-single-row",0===We._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[D.qOj],ngContentSelectors:ke,decls:2,vars:0,template:function(lt,We){1&lt&&(D.F$t(qe),D.Hsn(0),D.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),Te})(),rt=(()=>{class Te{}return Te.\u0275fac=function(lt){return new(lt||Te)},Te.\u0275mod=D.oAB({type:Te}),Te.\u0275inj=D.cJS({imports:[l.BQ,l.BQ]}),Te})()},1481:(Cn,gt,U)=>{"use strict";U.d(gt,{Dx:()=>k,H7:()=>Tt,b2:()=>ct,q6:()=>Qn,se:()=>St});var D=U(6895),l=U(4650);class G extends D.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class m extends G{static makeCurrent(){(0,D.HT)(new m)}onAndCancel(Ee,ue,Ve){return Ee.addEventListener(ue,Ve,!1),()=>{Ee.removeEventListener(ue,Ve,!1)}}dispatchEvent(Ee,ue){Ee.dispatchEvent(ue)}remove(Ee){Ee.parentNode&&Ee.parentNode.removeChild(Ee)}createElement(Ee,ue){return(ue=ue||this.getDefaultDocument()).createElement(Ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ee){return Ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ee){return Ee instanceof DocumentFragment}getGlobalEventTarget(Ee,ue){return"window"===ue?window:"document"===ue?Ee:"body"===ue?Ee.body:null}getBaseHref(Ee){const ue=function ke(){return qe=qe||document.querySelector("base"),qe?qe.getAttribute("href"):null}();return null==ue?null:function Re(me){Ye=Ye||document.createElement("a"),Ye.setAttribute("href",me);const Ee=Ye.pathname;return"/"===Ee.charAt(0)?Ee:`/${Ee}`}(ue)}resetBaseElement(){qe=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ee){return(0,D.Mx)(document.cookie,Ee)}}let Ye,qe=null;const pe=new l.OlP("TRANSITION_ID"),rt=[{provide:l.ip1,useFactory:function Ge(me,Ee,ue){return()=>{ue.get(l.CZH).donePromise.then(()=>{const Ve=(0,D.q)(),tt=Ee.querySelectorAll(`style[ng-transition="${me}"]`);for(let Gt=0;Gt<tt.length;Gt++)Ve.remove(tt[Gt])})}},deps:[pe,D.K0,l.zs3],multi:!0}];let ut=(()=>{class me{build(){return new XMLHttpRequest}}return me.\u0275fac=function(ue){return new(ue||me)},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();const lt=new l.OlP("EventManagerPlugins");let We=(()=>{class me{constructor(ue,Ve){this._zone=Ve,this._eventNameToPlugin=new Map,ue.forEach(tt=>tt.manager=this),this._plugins=ue.slice().reverse()}addEventListener(ue,Ve,tt){return this._findPluginFor(Ve).addEventListener(ue,Ve,tt)}addGlobalEventListener(ue,Ve,tt){return this._findPluginFor(Ve).addGlobalEventListener(ue,Ve,tt)}getZone(){return this._zone}_findPluginFor(ue){const Ve=this._eventNameToPlugin.get(ue);if(Ve)return Ve;const tt=this._plugins;for(let Gt=0;Gt<tt.length;Gt++){const Sn=tt[Gt];if(Sn.supports(ue))return this._eventNameToPlugin.set(ue,Sn),Sn}throw new Error(`No event manager plugin found for event ${ue}`)}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(lt),l.LFG(l.R0b))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();class Dt{constructor(Ee){this._doc=Ee}addGlobalEventListener(Ee,ue,Ve){const tt=(0,D.q)().getGlobalEventTarget(this._doc,Ee);if(!tt)throw new Error(`Unsupported event target ${tt} for event ${ue}`);return this.addEventListener(tt,ue,Ve)}}let wt=(()=>{class me{constructor(){this._stylesSet=new Set}addStyles(ue){const Ve=new Set;ue.forEach(tt=>{this._stylesSet.has(tt)||(this._stylesSet.add(tt),Ve.add(tt))}),this.onStylesAdded(Ve)}onStylesAdded(ue){}getAllStyles(){return Array.from(this._stylesSet)}}return me.\u0275fac=function(ue){return new(ue||me)},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})(),Et=(()=>{class me extends wt{constructor(ue){super(),this._doc=ue,this._hostNodes=new Map,this._hostNodes.set(ue.head,[])}_addStylesToHost(ue,Ve,tt){ue.forEach(Gt=>{const Sn=this._doc.createElement("style");Sn.textContent=Gt,tt.push(Ve.appendChild(Sn))})}addHost(ue){const Ve=[];this._addStylesToHost(this._stylesSet,ue,Ve),this._hostNodes.set(ue,Ve)}removeHost(ue){const Ve=this._hostNodes.get(ue);Ve&&Ve.forEach(_n),this._hostNodes.delete(ue)}onStylesAdded(ue){this._hostNodes.forEach((Ve,tt)=>{this._addStylesToHost(ue,tt,Ve)})}ngOnDestroy(){this._hostNodes.forEach(ue=>ue.forEach(_n))}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(D.K0))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();function _n(me){(0,D.q)().remove(me)}const hn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},At=/%COMP%/g;function pt(me,Ee,ue){for(let Ve=0;Ve<Ee.length;Ve++){let tt=Ee[Ve];Array.isArray(tt)?pt(me,tt,ue):(tt=tt.replace(At,me),ue.push(tt))}return ue}function Xe(me){return Ee=>{if("__ngUnwrap__"===Ee)return me;!1===me(Ee)&&(Ee.preventDefault(),Ee.returnValue=!1)}}let St=(()=>{class me{constructor(ue,Ve,tt){this.eventManager=ue,this.sharedStylesHost=Ve,this.appId=tt,this.rendererByCompId=new Map,this.defaultRenderer=new pn(ue)}createRenderer(ue,Ve){if(!ue||!Ve)return this.defaultRenderer;switch(Ve.encapsulation){case l.ifc.Emulated:{let tt=this.rendererByCompId.get(Ve.id);return tt||(tt=new yi(this.eventManager,this.sharedStylesHost,Ve,this.appId),this.rendererByCompId.set(Ve.id,tt)),tt.applyToHost(ue),tt}case 1:case l.ifc.ShadowDom:return new yn(this.eventManager,this.sharedStylesHost,ue,Ve);default:if(!this.rendererByCompId.has(Ve.id)){const tt=pt(Ve.id,Ve.styles,[]);this.sharedStylesHost.addStyles(tt),this.rendererByCompId.set(Ve.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(We),l.LFG(Et),l.LFG(l.AFp))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();class pn{constructor(Ee){this.eventManager=Ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ee,ue){return ue?document.createElementNS(hn[ue]||ue,Ee):document.createElement(Ee)}createComment(Ee){return document.createComment(Ee)}createText(Ee){return document.createTextNode(Ee)}appendChild(Ee,ue){(di(Ee)?Ee.content:Ee).appendChild(ue)}insertBefore(Ee,ue,Ve){Ee&&(di(Ee)?Ee.content:Ee).insertBefore(ue,Ve)}removeChild(Ee,ue){Ee&&Ee.removeChild(ue)}selectRootElement(Ee,ue){let Ve="string"==typeof Ee?document.querySelector(Ee):Ee;if(!Ve)throw new Error(`The selector "${Ee}" did not match any elements`);return ue||(Ve.textContent=""),Ve}parentNode(Ee){return Ee.parentNode}nextSibling(Ee){return Ee.nextSibling}setAttribute(Ee,ue,Ve,tt){if(tt){ue=tt+":"+ue;const Gt=hn[tt];Gt?Ee.setAttributeNS(Gt,ue,Ve):Ee.setAttribute(ue,Ve)}else Ee.setAttribute(ue,Ve)}removeAttribute(Ee,ue,Ve){if(Ve){const tt=hn[Ve];tt?Ee.removeAttributeNS(tt,ue):Ee.removeAttribute(`${Ve}:${ue}`)}else Ee.removeAttribute(ue)}addClass(Ee,ue){Ee.classList.add(ue)}removeClass(Ee,ue){Ee.classList.remove(ue)}setStyle(Ee,ue,Ve,tt){tt&(l.JOm.DashCase|l.JOm.Important)?Ee.style.setProperty(ue,Ve,tt&l.JOm.Important?"important":""):Ee.style[ue]=Ve}removeStyle(Ee,ue,Ve){Ve&l.JOm.DashCase?Ee.style.removeProperty(ue):Ee.style[ue]=""}setProperty(Ee,ue,Ve){Ee[ue]=Ve}setValue(Ee,ue){Ee.nodeValue=ue}listen(Ee,ue,Ve){return"string"==typeof Ee?this.eventManager.addGlobalEventListener(Ee,ue,Xe(Ve)):this.eventManager.addEventListener(Ee,ue,Xe(Ve))}}function di(me){return"TEMPLATE"===me.tagName&&void 0!==me.content}class yi extends pn{constructor(Ee,ue,Ve,tt){super(Ee),this.component=Ve;const Gt=pt(tt+"-"+Ve.id,Ve.styles,[]);ue.addStyles(Gt),this.contentAttr=function Ut(me){return"_ngcontent-%COMP%".replace(At,me)}(tt+"-"+Ve.id),this.hostAttr=function tn(me){return"_nghost-%COMP%".replace(At,me)}(tt+"-"+Ve.id)}applyToHost(Ee){super.setAttribute(Ee,this.hostAttr,"")}createElement(Ee,ue){const Ve=super.createElement(Ee,ue);return super.setAttribute(Ve,this.contentAttr,""),Ve}}class yn extends pn{constructor(Ee,ue,Ve,tt){super(Ee),this.sharedStylesHost=ue,this.hostEl=Ve,this.shadowRoot=Ve.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Gt=pt(tt.id,tt.styles,[]);for(let Sn=0;Sn<Gt.length;Sn++){const nn=document.createElement("style");nn.textContent=Gt[Sn],this.shadowRoot.appendChild(nn)}}nodeOrShadowRoot(Ee){return Ee===this.hostEl?this.shadowRoot:Ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ee,ue){return super.appendChild(this.nodeOrShadowRoot(Ee),ue)}insertBefore(Ee,ue,Ve){return super.insertBefore(this.nodeOrShadowRoot(Ee),ue,Ve)}removeChild(Ee,ue){return super.removeChild(this.nodeOrShadowRoot(Ee),ue)}parentNode(Ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ee)))}}let gi=(()=>{class me extends Dt{constructor(ue){super(ue)}supports(ue){return!0}addEventListener(ue,Ve,tt){return ue.addEventListener(Ve,tt,!1),()=>this.removeEventListener(ue,Ve,tt)}removeEventListener(ue,Ve,tt){return ue.removeEventListener(Ve,tt)}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(D.K0))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();const Ei=["alt","control","meta","shift"],hi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bn={alt:me=>me.altKey,control:me=>me.ctrlKey,meta:me=>me.metaKey,shift:me=>me.shiftKey};let wn=(()=>{class me extends Dt{constructor(ue){super(ue)}supports(ue){return null!=me.parseEventName(ue)}addEventListener(ue,Ve,tt){const Gt=me.parseEventName(Ve),Sn=me.eventCallback(Gt.fullKey,tt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.q)().onAndCancel(ue,Gt.domEventName,Sn))}static parseEventName(ue){const Ve=ue.toLowerCase().split("."),tt=Ve.shift();if(0===Ve.length||"keydown"!==tt&&"keyup"!==tt)return null;const Gt=me._normalizeKey(Ve.pop());let Sn="",nn=Ve.indexOf("code");if(nn>-1&&(Ve.splice(nn,1),Sn="code."),Ei.forEach(Ni=>{const kn=Ve.indexOf(Ni);kn>-1&&(Ve.splice(kn,1),Sn+=Ni+".")}),Sn+=Gt,0!=Ve.length||0===Gt.length)return null;const Un={};return Un.domEventName=tt,Un.fullKey=Sn,Un}static matchEventFullKeyCode(ue,Ve){let tt=hi[ue.key]||ue.key,Gt="";return Ve.indexOf("code.")>-1&&(tt=ue.code,Gt="code."),!(null==tt||!tt)&&(tt=tt.toLowerCase()," "===tt?tt="space":"."===tt&&(tt="dot"),Ei.forEach(Sn=>{Sn!==tt&&(0,bn[Sn])(ue)&&(Gt+=Sn+".")}),Gt+=tt,Gt===Ve)}static eventCallback(ue,Ve,tt){return Gt=>{me.matchEventFullKeyCode(Gt,ue)&&tt.runGuarded(()=>Ve(Gt))}}static _normalizeKey(ue){return"esc"===ue?"escape":ue}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(D.K0))},me.\u0275prov=l.Yz7({token:me,factory:me.\u0275fac}),me})();const Qn=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:D.bD},{provide:l.g9A,useValue:function Jn(){m.makeCurrent()},multi:!0},{provide:D.K0,useFactory:function fi(){return(0,l.RDi)(document),document},deps:[]}]),Di=new l.OlP(""),xn=[{provide:l.rWj,useClass:class Te{addToWindow(Ee){l.dqk.getAngularTestability=(Ve,tt=!0)=>{const Gt=Ee.findTestabilityInTree(Ve,tt);if(null==Gt)throw new Error("Could not find testability for element.");return Gt},l.dqk.getAllAngularTestabilities=()=>Ee.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>Ee.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(Ve=>{const tt=l.dqk.getAllAngularTestabilities();let Gt=tt.length,Sn=!1;const nn=function(Un){Sn=Sn||Un,Gt--,0==Gt&&Ve(Sn)};tt.forEach(function(Un){Un.whenStable(nn)})})}findTestabilityInTree(Ee,ue,Ve){return null==ue?null:Ee.getTestability(ue)??(Ve?(0,D.q)().isShadowRoot(ue)?this.findTestabilityInTree(Ee,ue.host,!0):this.findTestabilityInTree(Ee,ue.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Wn=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function oi(){return new l.qLn},deps:[]},{provide:lt,useClass:gi,multi:!0,deps:[D.K0,l.R0b,l.Lbi]},{provide:lt,useClass:wn,multi:!0,deps:[D.K0]},{provide:St,useClass:St,deps:[We,Et,l.AFp]},{provide:l.FYo,useExisting:St},{provide:wt,useExisting:Et},{provide:Et,useClass:Et,deps:[D.K0]},{provide:We,useClass:We,deps:[lt,l.R0b]},{provide:D.JF,useClass:ut,deps:[]},[]];let ct=(()=>{class me{constructor(ue){}static withServerTransition(ue){return{ngModule:me,providers:[{provide:l.AFp,useValue:ue.appId},{provide:pe,useExisting:l.AFp},rt]}}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(Di,12))},me.\u0275mod=l.oAB({type:me}),me.\u0275inj=l.cJS({providers:[...Wn,...xn],imports:[D.ez,l.hGG]}),me})(),k=(()=>{class me{constructor(ue){this._doc=ue}getTitle(){return this._doc.title}setTitle(ue){this._doc.title=ue||""}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(D.K0))},me.\u0275prov=l.Yz7({token:me,factory:function(ue){let Ve=null;return Ve=ue?new ue:function he(){return new k((0,l.LFG)(D.K0))}(),Ve},providedIn:"root"}),me})();typeof window<"u"&&window;let Tt=(()=>{class me{}return me.\u0275fac=function(ue){return new(ue||me)},me.\u0275prov=l.Yz7({token:me,factory:function(ue){let Ve=null;return Ve=ue?new(ue||me):l.LFG(Vt),Ve},providedIn:"root"}),me})(),Vt=(()=>{class me extends Tt{constructor(ue){super(),this._doc=ue}sanitize(ue,Ve){if(null==Ve)return null;switch(ue){case l.q3G.NONE:return Ve;case l.q3G.HTML:return(0,l.qzn)(Ve,"HTML")?(0,l.z3N)(Ve):(0,l.EiD)(this._doc,String(Ve)).toString();case l.q3G.STYLE:return(0,l.qzn)(Ve,"Style")?(0,l.z3N)(Ve):Ve;case l.q3G.SCRIPT:if((0,l.qzn)(Ve,"Script"))return(0,l.z3N)(Ve);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(Ve,"URL")?(0,l.z3N)(Ve):(0,l.mCW)(String(Ve));case l.q3G.RESOURCE_URL:if((0,l.qzn)(Ve,"ResourceURL"))return(0,l.z3N)(Ve);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ue} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ue){return(0,l.JVY)(ue)}bypassSecurityTrustStyle(ue){return(0,l.L6k)(ue)}bypassSecurityTrustScript(ue){return(0,l.eBb)(ue)}bypassSecurityTrustUrl(ue){return(0,l.LAX)(ue)}bypassSecurityTrustResourceUrl(ue){return(0,l.pB0)(ue)}}return me.\u0275fac=function(ue){return new(ue||me)(l.LFG(D.K0))},me.\u0275prov=l.Yz7({token:me,factory:function(ue){let Ve=null;return Ve=ue?new ue:function zt(me){return new Vt(me.get(D.K0))}(l.LFG(l.zs3)),Ve},providedIn:"root"}),me})()},2510:(Cn,gt,U)=>{"use strict";U.d(gt,{gz:()=>Ro,F0:()=>zn,Od:()=>Fs,yS:()=>dr,Bz:()=>xt,lC:()=>is});var D=U(4650),l=U(2076),G=U(9646),m=U(1135),qe=U(6805),ke=U(9841),Ye=U(7272),Re=U(9770),pe=U(9635),Ge=U(2843),rt=U(9751),Te=U(515),ut=U(727),lt=U(4482),We=U(5403);function Dt(){return(0,lt.e)((I,P)=>{let S=null;I._refCount++;const z=(0,We.x)(P,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(S=null);const q=I._connection,de=S;S=null,q&&(!de||q===de)&&q.unsubscribe(),P.unsubscribe()});I.subscribe(z),z.closed||(S=I.connect())})}class wt extends rt.y{constructor(P,S){super(),this.source=P,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,lt.A)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,P?.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new ut.w0;const S=this.getSubject();P.add(this.source.subscribe((0,We.x)(S,void 0,()=>{this._teardown(),S.complete()},z=>{this._teardown(),S.error(z)},()=>this._teardown()))),P.closed&&(this._connection=null,P=ut.w0.EMPTY)}return P}refCount(){return Dt()(this)}}var Et=U(7579),_n=U(6895),hn=U(4004),At=U(3900),Pe=U(5698),Ze=U(8675),Yt=U(9300),Ot=U(5577),Ut=U(590),tn=U(4351),pt=U(8505),Xe=U(262);function It(I,P,S,z,q){return(de,Ie)=>{let je=S,Ct=P,ln=0;de.subscribe((0,We.x)(Ie,ci=>{const Bn=ln++;Ct=je?I(Ct,ci,Bn):(je=!0,ci),z&&Ie.next(Ct)},q&&(()=>{je&&Ie.next(Ct),Ie.complete()})))}}function St(I,P){return(0,lt.e)(It(I,P,arguments.length>=2,!0))}function pn(I){return I<=0?()=>Te.E:(0,lt.e)((P,S)=>{let z=[];P.subscribe((0,We.x)(S,q=>{z.push(q),I<z.length&&z.shift()},()=>{for(const q of z)S.next(q);S.complete()},void 0,()=>{z=null}))})}var un=U(8068),Gn=U(6590),di=U(4671);function yi(I,P){const S=arguments.length>=2;return z=>z.pipe(I?(0,Yt.h)((q,de)=>I(q,de,z)):di.y,pn(1),S?(0,Gn.d)(P):(0,un.T)(()=>new qe.K))}var yn=U(2529),gi=U(9718),Ei=U(8746),hi=U(8189),bn=U(1481);const wn="primary",_t=Symbol("RouteTitle");class Nt{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const S=this.params[P];return Array.isArray(S)?S[0]:S}return null}getAll(P){if(this.has(P)){const S=this.params[P];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function fn(I){return new Nt(I)}function mn(I,P,S){const z=S.path.split("/");if(z.length>I.length||"full"===S.pathMatch&&(P.hasChildren()||z.length<I.length))return null;const q={};for(let de=0;de<z.length;de++){const Ie=z[de],je=I[de];if(Ie.startsWith(":"))q[Ie.substring(1)]=je;else if(Ie!==je.path)return null}return{consumed:I.slice(0,z.length),posParams:q}}function Jn(I,P){const S=I?Object.keys(I):void 0,z=P?Object.keys(P):void 0;if(!S||!z||S.length!=z.length)return!1;let q;for(let de=0;de<S.length;de++)if(q=S[de],!oi(I[q],P[q]))return!1;return!0}function oi(I,P){if(Array.isArray(I)&&Array.isArray(P)){if(I.length!==P.length)return!1;const S=[...I].sort(),z=[...P].sort();return S.every((q,de)=>z[de]===q)}return I===P}function fi(I){return Array.prototype.concat.apply([],I)}function $i(I){return I.length>0?I[I.length-1]:null}function Di(I,P){for(const S in I)I.hasOwnProperty(S)&&P(I[S],S)}function xn(I){return(0,D.CqO)(I)?I:(0,D.QGY)(I)?(0,l.D)(Promise.resolve(I)):(0,G.of)(I)}const Y={exact:function k(I,P,S){if(!He(I.segments,P.segments)||!le(I.segments,P.segments,S)||I.numberOfChildren!==P.numberOfChildren)return!1;for(const z in P.children)if(!I.children[z]||!k(I.children[z],P.children[z],S))return!1;return!0},subset:H},te={exact:function he(I,P){return Jn(I,P)},subset:function R(I,P){return Object.keys(P).length<=Object.keys(I).length&&Object.keys(P).every(S=>oi(I[S],P[S]))},ignored:()=>!0};function Me(I,P,S){return Y[S.paths](I.root,P.root,S.matrixParams)&&te[S.queryParams](I.queryParams,P.queryParams)&&!("exact"===S.fragment&&I.fragment!==P.fragment)}function H(I,P,S){return J(I,P,P.segments,S)}function J(I,P,S,z){if(I.segments.length>S.length){const q=I.segments.slice(0,S.length);return!(!He(q,S)||P.hasChildren()||!le(q,S,z))}if(I.segments.length===S.length){if(!He(I.segments,S)||!le(I.segments,S,z))return!1;for(const q in P.children)if(!I.children[q]||!H(I.children[q],P.children[q],z))return!1;return!0}{const q=S.slice(0,I.segments.length),de=S.slice(I.segments.length);return!!(He(I.segments,q)&&le(I.segments,q,z)&&I.children[wn])&&J(I.children[wn],P,de,z)}}function le(I,P,S){return P.every((z,q)=>te[S](I[q].parameters,z.parameters))}class Ae{constructor(P,S,z){this.root=P,this.queryParams=S,this.fragment=z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return st.serialize(this)}}class Le{constructor(P,S){this.segments=P,this.children=S,this.parent=null,Di(S,(z,q)=>z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return De(this)}}class Qe{constructor(P,S){this.path=P,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=fn(this.parameters)),this._parameterMap}toString(){return An(this)}}function He(I,P){return I.length===P.length&&I.every((S,z)=>S.path===P[z].path)}let $t=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=D.Yz7({token:I,factory:function(){return new en},providedIn:"root"}),I})();class en{parse(P){const S=new me(P);return new Ae(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(P){const S=`/${Fe(P.root,!0)}`,z=function Gi(I){const P=Object.keys(I).map(S=>{const z=I[S];return Array.isArray(z)?z.map(q=>`${Ne(S)}=${Ne(q)}`).join("&"):`${Ne(S)}=${Ne(z)}`}).filter(S=>!!S);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${S}${z}${"string"==typeof P.fragment?`#${function we(I){return encodeURI(I)}(P.fragment)}`:""}`}}const st=new en;function De(I){return I.segments.map(P=>An(P)).join("/")}function Fe(I,P){if(!I.hasChildren())return De(I);if(P){const S=I.children[wn]?Fe(I.children[wn],!1):"",z=[];return Di(I.children,(q,de)=>{de!==wn&&z.push(`${de}:${Fe(q,!1)}`)}),z.length>0?`${S}(${z.join("//")})`:S}{const S=function dt(I,P){let S=[];return Di(I.children,(z,q)=>{q===wn&&(S=S.concat(P(z,q)))}),Di(I.children,(z,q)=>{q!==wn&&(S=S.concat(P(z,q)))}),S}(I,(z,q)=>q===wn?[Fe(I.children[wn],!1)]:[`${q}:${Fe(z,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[wn]?`${De(I)}/${S[0]}`:`${De(I)}/(${S.join("//")})`}}function Se(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ne(I){return Se(I).replace(/%3B/gi,";")}function $e(I){return Se(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function at(I){return decodeURIComponent(I)}function on(I){return at(I.replace(/\+/g,"%20"))}function An(I){return`${$e(I.path)}${function jn(I){return Object.keys(I).map(P=>`;${$e(P)}=${$e(I[P])}`).join("")}(I.parameters)}`}const ni=/^[^\/()?;=#]+/;function yt(I){const P=I.match(ni);return P?P[0]:""}const Tt=/^[^=?&#]+/,Vt=/^[^&#]+/;class me{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let z={};return this.peekStartsWith("(")&&(z=this.parseParens(!1)),(P.length>0||Object.keys(S).length>0)&&(z[wn]=new Le(P,S)),z}parseSegment(){const P=yt(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new D.vHH(4009,!1);return this.capture(P),new Qe(at(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const S=yt(this.remaining);if(!S)return;this.capture(S);let z="";if(this.consumeOptional("=")){const q=yt(this.remaining);q&&(z=q,this.capture(z))}P[at(S)]=at(z)}parseQueryParam(P){const S=function zt(I){const P=I.match(Tt);return P?P[0]:""}(this.remaining);if(!S)return;this.capture(S);let z="";if(this.consumeOptional("=")){const Ie=function jt(I){const P=I.match(Vt);return P?P[0]:""}(this.remaining);Ie&&(z=Ie,this.capture(z))}const q=on(S),de=on(z);if(P.hasOwnProperty(q)){let Ie=P[q];Array.isArray(Ie)||(Ie=[Ie],P[q]=Ie),Ie.push(de)}else P[q]=de}parseParens(P){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const z=yt(this.remaining),q=this.remaining[z.length];if("/"!==q&&")"!==q&&";"!==q)throw new D.vHH(4010,!1);let de;z.indexOf(":")>-1?(de=z.slice(0,z.indexOf(":")),this.capture(de),this.capture(":")):P&&(de=wn);const Ie=this.parseChildren();S[de]=1===Object.keys(Ie).length?Ie[wn]:new Le([],Ie),this.consumeOptional("//")}return S}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new D.vHH(4011,!1)}}function Ee(I){return I.segments.length>0?new Le([],{[wn]:I}):I}function ue(I){const P={};for(const z of Object.keys(I.children)){const de=ue(I.children[z]);(de.segments.length>0||de.hasChildren())&&(P[z]=de)}return function Ve(I){if(1===I.numberOfChildren&&I.children[wn]){const P=I.children[wn];return new Le(I.segments.concat(P.segments),P.children)}return I}(new Le(I.segments,P))}function tt(I){return I instanceof Ae}function Ni(I,P,S,z,q){if(0===S.length)return Yi(P.root,P.root,P.root,z,q);const de=function Vi(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new nr(!0,0,I);let P=0,S=!1;const z=I.reduce((q,de,Ie)=>{if("object"==typeof de&&null!=de){if(de.outlets){const je={};return Di(de.outlets,(Ct,ln)=>{je[ln]="string"==typeof Ct?Ct.split("/"):Ct}),[...q,{outlets:je}]}if(de.segmentPath)return[...q,de.segmentPath]}return"string"!=typeof de?[...q,de]:0===Ie?(de.split("/").forEach((je,Ct)=>{0==Ct&&"."===je||(0==Ct&&""===je?S=!0:".."===je?P++:""!=je&&q.push(je))}),q):[...q,de]},[]);return new nr(S,P,z)}(S);return de.toRoot()?Yi(P.root,P.root,new Le([],{}),z,q):function Ie(Ct){const ln=function Ui(I,P,S,z){if(I.isAbsolute)return new Ji(P.root,!0,0);if(-1===z)return new Ji(S,S===P.root,0);return function Fr(I,P,S){let z=I,q=P,de=S;for(;de>q;){if(de-=q,z=z.parent,!z)throw new D.vHH(4005,!1);q=z.segments.length}return new Ji(z,!1,q-de)}(S,z+(kn(I.commands[0])?0:1),I.numberOfDoubleDots)}(de,P,I.snapshot?._urlSegment,Ct),ci=ln.processChildren?Bi(ln.segmentGroup,ln.index,de.commands):Hi(ln.segmentGroup,ln.index,de.commands);return Yi(P.root,ln.segmentGroup,ci,z,q)}(I.snapshot?._lastPathIndex)}function kn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function ei(I){return"object"==typeof I&&null!=I&&I.outlets}function Yi(I,P,S,z,q){let Ie,de={};z&&Di(z,(Ct,ln)=>{de[ln]=Array.isArray(Ct)?Ct.map(ci=>`${ci}`):`${Ct}`}),Ie=I===P?S:Xi(I,P,S);const je=Ee(ue(Ie));return new Ae(je,de,q)}function Xi(I,P,S){const z={};return Di(I.children,(q,de)=>{z[de]=q===P?S:Xi(q,P,S)}),new Le(I.segments,z)}class nr{constructor(P,S,z){if(this.isAbsolute=P,this.numberOfDoubleDots=S,this.commands=z,P&&z.length>0&&kn(z[0]))throw new D.vHH(4003,!1);const q=z.find(ei);if(q&&q!==$i(z))throw new D.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ji{constructor(P,S,z){this.segmentGroup=P,this.processChildren=S,this.index=z}}function Hi(I,P,S){if(I||(I=new Le([],{})),0===I.segments.length&&I.hasChildren())return Bi(I,P,S);const z=function Ts(I,P,S){let z=0,q=P;const de={match:!1,pathIndex:0,commandIndex:0};for(;q<I.segments.length;){if(z>=S.length)return de;const Ie=I.segments[q],je=S[z];if(ei(je))break;const Ct=`${je}`,ln=z<S.length-1?S[z+1]:null;if(q>0&&void 0===Ct)break;if(Ct&&ln&&"object"==typeof ln&&void 0===ln.outlets){if(!xo(Ct,ln,Ie))return de;z+=2}else{if(!xo(Ct,{},Ie))return de;z++}q++}return{match:!0,pathIndex:q,commandIndex:z}}(I,P,S),q=S.slice(z.commandIndex);if(z.match&&z.pathIndex<I.segments.length){const de=new Le(I.segments.slice(0,z.pathIndex),{});return de.children[wn]=new Le(I.segments.slice(z.pathIndex),I.children),Bi(de,0,q)}return z.match&&0===q.length?new Le(I.segments,{}):z.match&&!I.hasChildren()?Ur(I,P,S):z.match?Bi(I,0,q):Ur(I,P,S)}function Bi(I,P,S){if(0===S.length)return new Le(I.segments,{});{const z=function Yr(I){return ei(I[0])?I[0].outlets:{[wn]:I}}(S),q={};return Di(z,(de,Ie)=>{"string"==typeof de&&(de=[de]),null!==de&&(q[Ie]=Hi(I.children[Ie],P,de))}),Di(I.children,(de,Ie)=>{void 0===z[Ie]&&(q[Ie]=de)}),new Le(I.segments,q)}}function Ur(I,P,S){const z=I.segments.slice(0,P);let q=0;for(;q<S.length;){const de=S[q];if(ei(de)){const Ct=Go(de.outlets);return new Le(z,Ct)}if(0===q&&kn(S[0])){z.push(new Qe(I.segments[P].path,Ao(S[0]))),q++;continue}const Ie=ei(de)?de.outlets[wn]:`${de}`,je=q<S.length-1?S[q+1]:null;Ie&&je&&kn(je)?(z.push(new Qe(Ie,Ao(je))),q+=2):(z.push(new Qe(Ie,{})),q++)}return new Le(z,{})}function Go(I){const P={};return Di(I,(S,z)=>{"string"==typeof S&&(S=[S]),null!==S&&(P[z]=Ur(new Le([],{}),0,S))}),P}function Ao(I){const P={};return Di(I,(S,z)=>P[z]=`${S}`),P}function xo(I,P,S){return I==S.path&&Jn(P,S.parameters)}class jr{constructor(P,S){this.id=P,this.url=S}}class er extends jr{constructor(P,S,z="imperative",q=null){super(P,S),this.type=0,this.navigationTrigger=z,this.restoredState=q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class po extends jr{constructor(P,S,z){super(P,S),this.urlAfterRedirects=z,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gr extends jr{constructor(P,S,z,q){super(P,S),this.reason=z,this.code=q,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ro extends jr{constructor(P,S,z,q){super(P,S),this.error=z,this.target=q,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vs extends jr{constructor(P,S,z,q){super(P,S),this.urlAfterRedirects=z,this.state=q,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ia extends jr{constructor(P,S,z,q){super(P,S),this.urlAfterRedirects=z,this.state=q,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is extends jr{constructor(P,S,z,q,de){super(P,S),this.urlAfterRedirects=z,this.state=q,this.shouldActivate=de,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kr extends jr{constructor(P,S,z,q){super(P,S),this.urlAfterRedirects=z,this.state=q,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Po extends jr{constructor(P,S,z,q){super(P,S),this.urlAfterRedirects=z,this.state=q,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class As{constructor(P){this.route=P,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Oo{constructor(P){this.route=P,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fs{constructor(P){this.snapshot=P,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ul{constructor(P){this.snapshot=P,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fo{constructor(P){this.snapshot=P,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(P){this.snapshot=P,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ra{constructor(P,S,z){this.routerEvent=P,this.position=S,this.anchor=z,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Us{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const S=this.pathFromRoot(P);return S.length>1?S[S.length-2]:null}children(P){const S=js(P,this._root);return S?S.children.map(z=>z.value):[]}firstChild(P){const S=js(P,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(P){const S=Ps(P,this._root);return S.length<2?[]:S[S.length-2].children.map(q=>q.value).filter(q=>q!==P)}pathFromRoot(P){return Ps(P,this._root).map(S=>S.value)}}function js(I,P){if(I===P.value)return P;for(const S of P.children){const z=js(I,S);if(z)return z}return null}function Ps(I,P){if(I===P.value)return[P];for(const S of P.children){const z=Ps(I,S);if(z.length)return z.unshift(P),z}return[]}class wo{constructor(P,S){this.value=P,this.children=S}toString(){return`TreeNode(${this.value})`}}function ko(I){const P={};return I&&I.children.forEach(S=>P[S.value.outlet]=S),P}class dl extends Us{constructor(P,S){super(P),this.snapshot=S,sa(this,P)}toString(){return this.snapshot.toString()}}function Wa(I,P){const S=function Kl(I,P){const Ie=new oa([],{},{},"",{},wn,P,null,I.root,-1,{});return new Da("",new wo(Ie,[]))}(I,P),z=new m.X([new Qe("",{})]),q=new m.X({}),de=new m.X({}),Ie=new m.X({}),je=new m.X(""),Ct=new Ro(z,q,Ie,je,de,wn,P,S.root);return Ct.snapshot=S.root,new dl(new wo(Ct,[]),S)}class Ro{constructor(P,S,z,q,de,Ie,je,Ct){this.url=P,this.params=S,this.queryParams=z,this.fragment=q,this.data=de,this.outlet=Ie,this.component=je,this.title=this.data?.pipe((0,hn.U)(ln=>ln[_t]))??(0,G.of)(void 0),this._futureSnapshot=Ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,hn.U)(P=>fn(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,hn.U)(P=>fn(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Os(I,P="emptyOnly"){const S=I.pathFromRoot;let z=0;if("always"!==P)for(z=S.length-1;z>=1;){const q=S[z],de=S[z-1];if(q.routeConfig&&""===q.routeConfig.path)z--;else{if(de.component)break;z--}}return function zi(I){return I.reduce((P,S)=>({params:{...P.params,...S.params},data:{...P.data,...S.data},resolve:{...S.data,...P.resolve,...S.routeConfig?.data,...S._resolvedData}}),{params:{},data:{},resolve:{}})}(S.slice(z))}class oa{constructor(P,S,z,q,de,Ie,je,Ct,ln,ci,Bn,ji){this.url=P,this.params=S,this.queryParams=z,this.fragment=q,this.data=de,this.outlet=Ie,this.component=je,this.title=this.data?.[_t],this.routeConfig=Ct,this._urlSegment=ln,this._lastPathIndex=ci,this._correctedLastPathIndex=ji??ci,this._resolve=Bn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(z=>z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Da extends Us{constructor(P,S){super(S),this.url=P,sa(this,S)}toString(){return Lo(this._root)}}function sa(I,P){P.value._routerState=I,P.children.forEach(S=>sa(I,S))}function Lo(I){const P=I.children.length>0?` { ${I.children.map(Lo).join(", ")} } `:"";return`${I.value}${P}`}function es(I){if(I.snapshot){const P=I.snapshot,S=I._futureSnapshot;I.snapshot=S,Jn(P.queryParams,S.queryParams)||I.queryParams.next(S.queryParams),P.fragment!==S.fragment&&I.fragment.next(S.fragment),Jn(P.params,S.params)||I.params.next(S.params),function On(I,P){if(I.length!==P.length)return!1;for(let S=0;S<I.length;++S)if(!Jn(I[S],P[S]))return!1;return!0}(P.url,S.url)||I.url.next(S.url),Jn(P.data,S.data)||I.data.next(S.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function ms(I,P){const S=Jn(I.params,P.params)&&function ot(I,P){return He(I,P)&&I.every((S,z)=>Jn(S.parameters,P[z].parameters))}(I.url,P.url);return S&&!(!I.parent!=!P.parent)&&(!I.parent||ms(I.parent,P.parent))}function Ir(I,P,S){if(S&&I.shouldReuseRoute(P.value,S.value.snapshot)){const z=S.value;z._futureSnapshot=P.value;const q=function ks(I,P,S){return P.children.map(z=>{for(const q of S.children)if(I.shouldReuseRoute(z.value,q.value.snapshot))return Ir(I,z,q);return Ir(I,z)})}(I,P,S);return new wo(z,q)}{if(I.shouldAttach(P.value)){const de=I.retrieve(P.value);if(null!==de){const Ie=de.route;return Ie.value._futureSnapshot=P.value,Ie.children=P.children.map(je=>Ir(I,je)),Ie}}const z=function aa(I){return new Ro(new m.X(I.url),new m.X(I.params),new m.X(I.queryParams),new m.X(I.fragment),new m.X(I.data),I.outlet,I.component,I)}(P.value),q=P.children.map(de=>Ir(I,de));return new wo(z,q)}}const Hs="ngNavigationCancelingError";function la(I,P){const{redirectTo:S,navigationBehaviorOptions:z}=tt(P)?{redirectTo:P,navigationBehaviorOptions:void 0}:P,q=gs(!1,0,P);return q.url=S,q.navigationBehaviorOptions=z,q}function gs(I,P,S){const z=new Error("NavigationCancelingError: "+(I||""));return z[Hs]=!0,z.cancellationCode=P,S&&(z.url=S),z}function Sa(I){return Nr(I)&&tt(I.url)}function Nr(I){return I&&I[Hs]}class $s{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ts,this.attachRef=null}}let ts=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(S,z){const q=this.getOrCreateContext(S);q.outlet=z,this.contexts.set(S,q)}onChildOutletDestroyed(S){const z=this.getContext(S);z&&(z.outlet=null,z.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let z=this.getContext(S);return z||(z=new $s,this.contexts.set(S,z)),z}getContext(S){return this.contexts.get(S)||null}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const ns=!1;let is=(()=>{class I{constructor(S,z,q,de,Ie){this.parentContexts=S,this.location=z,this.changeDetector=de,this.environmentInjector=Ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.name=q||wn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.vHH(4012,ns);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.vHH(4012,ns);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.vHH(4012,ns);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,z){this.activated=S,this._activatedRoute=z,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,z){if(this.isActivated)throw new D.vHH(4013,ns);this._activatedRoute=S;const q=this.location,Ie=S._futureSnapshot.component,je=this.parentContexts.getOrCreateContext(this.name).children,Ct=new Ta(S,je,q.injector);if(z&&function xr(I){return!!I.resolveComponentFactory}(z)){const ln=z.resolveComponentFactory(Ie);this.activated=q.createComponent(ln,q.length,Ct)}else this.activated=q.createComponent(Ie,{index:q.length,injector:Ct,environmentInjector:z??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(S){return new(S||I)(D.Y36(ts),D.Y36(D.s_b),D.$8M("name"),D.Y36(D.sBO),D.Y36(D.lqb))},I.\u0275dir=D.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),I})();class Ta{constructor(P,S,z){this.route=P,this.childContexts=S,this.parent=z}get(P,S){return P===Ro?this.route:P===ts?this.childContexts:this.parent.get(P,S)}}let qa=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275cmp=D.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[D.jDz],decls:1,vars:0,template:function(S,z){1&S&&D._UZ(0,"router-outlet")},dependencies:[is],encapsulation:2}),I})();function Ka(I,P){return I.providers&&!I._injector&&(I._injector=(0,D.MMx)(I.providers,P,`Route: ${I.path}`)),I._injector??P}function Aa(I){const P=I.children&&I.children.map(Aa),S=P?{...I,children:P}:{...I};return!S.component&&!S.loadComponent&&(P||S.loadChildren)&&S.outlet&&S.outlet!==wn&&(S.component=qa),S}function _r(I){return I.outlet||wn}function _s(I,P){const S=I.filter(z=>_r(z)===P);return S.push(...I.filter(z=>_r(z)!==P)),S}function so(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let P=I.parent;P;P=P.parent){const S=P.routeConfig;if(S?._loadedInjector)return S._loadedInjector;if(S?._injector)return S._injector}return null}class Gs{constructor(P,S,z,q){this.routeReuseStrategy=P,this.futureState=S,this.currState=z,this.forwardEvent=q}activate(P){const S=this.futureState._root,z=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,z,P),es(this.futureState.root),this.activateChildRoutes(S,z,P)}deactivateChildRoutes(P,S,z){const q=ko(S);P.children.forEach(de=>{const Ie=de.value.outlet;this.deactivateRoutes(de,q[Ie],z),delete q[Ie]}),Di(q,(de,Ie)=>{this.deactivateRouteAndItsChildren(de,z)})}deactivateRoutes(P,S,z){const q=P.value,de=S?S.value:null;if(q===de)if(q.component){const Ie=z.getContext(q.outlet);Ie&&this.deactivateChildRoutes(P,S,Ie.children)}else this.deactivateChildRoutes(P,S,z);else de&&this.deactivateRouteAndItsChildren(S,z)}deactivateRouteAndItsChildren(P,S){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,S):this.deactivateRouteAndOutlet(P,S)}detachAndStoreRouteSubtree(P,S){const z=S.getContext(P.value.outlet),q=z&&P.value.component?z.children:S,de=ko(P);for(const Ie of Object.keys(de))this.deactivateRouteAndItsChildren(de[Ie],q);if(z&&z.outlet){const Ie=z.outlet.detach(),je=z.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:Ie,route:P,contexts:je})}}deactivateRouteAndOutlet(P,S){const z=S.getContext(P.value.outlet),q=z&&P.value.component?z.children:S,de=ko(P);for(const Ie of Object.keys(de))this.deactivateRouteAndItsChildren(de[Ie],q);z&&z.outlet&&(z.outlet.deactivate(),z.children.onOutletDeactivated(),z.attachRef=null,z.resolver=null,z.route=null)}activateChildRoutes(P,S,z){const q=ko(S);P.children.forEach(de=>{this.activateRoutes(de,q[de.value.outlet],z),this.forwardEvent(new Ea(de.value.snapshot))}),P.children.length&&this.forwardEvent(new ul(P.value.snapshot))}activateRoutes(P,S,z){const q=P.value,de=S?S.value:null;if(es(q),q===de)if(q.component){const Ie=z.getOrCreateContext(q.outlet);this.activateChildRoutes(P,S,Ie.children)}else this.activateChildRoutes(P,S,z);else if(q.component){const Ie=z.getOrCreateContext(q.outlet);if(this.routeReuseStrategy.shouldAttach(q.snapshot)){const je=this.routeReuseStrategy.retrieve(q.snapshot);this.routeReuseStrategy.store(q.snapshot,null),Ie.children.onOutletReAttached(je.contexts),Ie.attachRef=je.componentRef,Ie.route=je.route.value,Ie.outlet&&Ie.outlet.attach(je.componentRef,je.route.value),es(je.route.value),this.activateChildRoutes(P,null,Ie.children)}else{const je=so(q.snapshot),Ct=je?.get(D._Vd)??null;Ie.attachRef=null,Ie.route=q,Ie.resolver=Ct,Ie.injector=je,Ie.outlet&&Ie.outlet.activateWith(q,Ie.injector),this.activateChildRoutes(P,null,Ie.children)}}else this.activateChildRoutes(P,null,z)}}class Ii{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class Rr{constructor(P,S){this.component=P,this.route=S}}function Ki(I,P,S){const z=I._root;return Zs(z,P?P._root:null,S,[z.value])}function Hr(I,P){const S=Symbol(),z=P.get(I,S);return z===S?"function"!=typeof I||(0,D.Z0I)(I)?P.get(I):I:z}function Zs(I,P,S,z,q={canDeactivateChecks:[],canActivateChecks:[]}){const de=ko(P);return I.children.forEach(Ie=>{(function Sl(I,P,S,z,q={canDeactivateChecks:[],canActivateChecks:[]}){const de=I.value,Ie=P?P.value:null,je=S?S.getContext(I.value.outlet):null;if(Ie&&de.routeConfig===Ie.routeConfig){const Ct=function dn(I,P,S){if("function"==typeof S)return S(I,P);switch(S){case"pathParamsChange":return!He(I.url,P.url);case"pathParamsOrQueryParamsChange":return!He(I.url,P.url)||!Jn(I.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ms(I,P)||!Jn(I.queryParams,P.queryParams);default:return!ms(I,P)}}(Ie,de,de.routeConfig.runGuardsAndResolvers);Ct?q.canActivateChecks.push(new Ii(z)):(de.data=Ie.data,de._resolvedData=Ie._resolvedData),Zs(I,P,de.component?je?je.children:null:S,z,q),Ct&&je&&je.outlet&&je.outlet.isActivated&&q.canDeactivateChecks.push(new Rr(je.outlet.component,Ie))}else Ie&&Oi(P,je,q),q.canActivateChecks.push(new Ii(z)),Zs(I,null,de.component?je?je.children:null:S,z,q)})(Ie,de[Ie.value.outlet],S,z.concat([Ie.value]),q),delete de[Ie.value.outlet]}),Di(de,(Ie,je)=>Oi(Ie,S.getContext(je),q)),q}function Oi(I,P,S){const z=ko(I),q=I.value;Di(z,(de,Ie)=>{Oi(de,q.component?P?P.children.getContext(Ie):null:P,S)}),S.canDeactivateChecks.push(new Rr(q.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,q))}function Pa(I){return"function"==typeof I}function yr(I){return I instanceof qe.K||"EmptyError"===I?.name}const mo=Symbol("INITIAL_VALUE");function or(){return(0,At.w)(I=>(0,ke.a)(I.map(P=>P.pipe((0,Pe.q)(1),(0,Ze.O)(mo)))).pipe((0,hn.U)(P=>{for(const S of P)if(!0!==S){if(S===mo)return mo;if(!1===S||S instanceof Ae)return S}return!0}),(0,Yt.h)(P=>P!==mo),(0,Pe.q)(1)))}function Ws(I){return(0,pe.z)((0,pt.b)(P=>{if(tt(P))throw la(0,P)}),(0,hn.U)(P=>!0===P))}const qs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ja(I,P,S,z,q){const de=ka(I,P,S);return de.matched?function ys(I,P,S,z){const q=P.canMatch;if(!q||0===q.length)return(0,G.of)(!0);const de=q.map(Ie=>{const je=Hr(Ie,I);return xn(function fe(I){return I&&Pa(I.canMatch)}(je)?je.canMatch(P,S):I.runInContext(()=>je(P,S)))});return(0,G.of)(de).pipe(or(),Ws())}(z=Ka(P,z),P,S).pipe((0,hn.U)(Ie=>!0===Ie?de:{...qs})):(0,G.of)(de)}function ka(I,P,S){if(""===P.path)return"full"===P.pathMatch&&(I.hasChildren()||S.length>0)?{...qs}:{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const q=(P.matcher||mn)(S,I,P);if(!q)return{...qs};const de={};Di(q.posParams,(je,Ct)=>{de[Ct]=je.path});const Ie=q.consumed.length>0?{...de,...q.consumed[q.consumed.length-1].parameters}:de;return{matched:!0,consumedSegments:q.consumed,remainingSegments:S.slice(q.consumed.length),parameters:Ie,positionalParamSegments:q.posParams??{}}}function Ra(I,P,S,z,q="corrected"){if(S.length>0&&function Al(I,P,S){return S.some(z=>j(I,P,z)&&_r(z)!==wn)}(I,S,z)){const Ie=new Le(P,function pl(I,P,S,z){const q={};q[wn]=z,z._sourceSegment=I,z._segmentIndexShift=P.length;for(const de of S)if(""===de.path&&_r(de)!==wn){const Ie=new Le([],{});Ie._sourceSegment=I,Ie._segmentIndexShift=P.length,q[_r(de)]=Ie}return q}(I,P,z,new Le(S,I.children)));return Ie._sourceSegment=I,Ie._segmentIndexShift=P.length,{segmentGroup:Ie,slicedSegments:[]}}if(0===S.length&&function $r(I,P,S){return S.some(z=>j(I,P,z))}(I,S,z)){const Ie=new Le(I.segments,function Il(I,P,S,z,q,de){const Ie={};for(const je of z)if(j(I,S,je)&&!q[_r(je)]){const Ct=new Le([],{});Ct._sourceSegment=I,Ct._segmentIndexShift="legacy"===de?I.segments.length:P.length,Ie[_r(je)]=Ct}return{...q,...Ie}}(I,P,S,z,I.children,q));return Ie._sourceSegment=I,Ie._segmentIndexShift=P.length,{segmentGroup:Ie,slicedSegments:S}}const de=new Le(I.segments,I.children);return de._sourceSegment=I,de._segmentIndexShift=P.length,{segmentGroup:de,slicedSegments:S}}function j(I,P,S){return(!(I.hasChildren()||P.length>0)||"full"!==S.pathMatch)&&""===S.path}function re(I,P,S,z){return!!(_r(I)===z||z!==wn&&j(P,S,I))&&("**"===I.path||ka(P,I,S).matched)}function Z(I,P,S){return 0===P.length&&!I.children[S]}const ge=!1;class nt{constructor(P){this.segmentGroup=P||null}}class Pt{constructor(P){this.urlTree=P}}function qt(I){return(0,Ge._)(new nt(I))}function Zn(I){return(0,Ge._)(new Pt(I))}class _i{constructor(P,S,z,q,de){this.injector=P,this.configLoader=S,this.urlSerializer=z,this.urlTree=q,this.config=de,this.allowRedirects=!0}apply(){const P=Ra(this.urlTree.root,[],[],this.config).segmentGroup,S=new Le(P.segments,P.children);return this.expandSegmentGroup(this.injector,this.config,S,wn).pipe((0,hn.U)(de=>this.createUrlTree(ue(de),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Xe.K)(de=>{if(de instanceof Pt)return this.allowRedirects=!1,this.match(de.urlTree);throw de instanceof nt?this.noMatchError(de):de}))}match(P){return this.expandSegmentGroup(this.injector,this.config,P.root,wn).pipe((0,hn.U)(q=>this.createUrlTree(ue(q),P.queryParams,P.fragment))).pipe((0,Xe.K)(q=>{throw q instanceof nt?this.noMatchError(q):q}))}noMatchError(P){return new D.vHH(4002,ge)}createUrlTree(P,S,z){const q=Ee(P);return new Ae(q,S,z)}expandSegmentGroup(P,S,z,q){return 0===z.segments.length&&z.hasChildren()?this.expandChildren(P,S,z).pipe((0,hn.U)(de=>new Le([],de))):this.expandSegment(P,z,S,z.segments,q,!0)}expandChildren(P,S,z){const q=[];for(const de of Object.keys(z.children))"primary"===de?q.unshift(de):q.push(de);return(0,l.D)(q).pipe((0,tn.b)(de=>{const Ie=z.children[de],je=_s(S,de);return this.expandSegmentGroup(P,je,Ie,de).pipe((0,hn.U)(Ct=>({segment:Ct,outlet:de})))}),St((de,Ie)=>(de[Ie.outlet]=Ie.segment,de),{}),yi())}expandSegment(P,S,z,q,de,Ie){return(0,l.D)(z).pipe((0,tn.b)(je=>this.expandSegmentAgainstRoute(P,S,z,je,q,de,Ie).pipe((0,Xe.K)(ln=>{if(ln instanceof nt)return(0,G.of)(null);throw ln}))),(0,Ut.P)(je=>!!je),(0,Xe.K)((je,Ct)=>{if(yr(je))return Z(S,q,de)?(0,G.of)(new Le([],{})):qt(S);throw je}))}expandSegmentAgainstRoute(P,S,z,q,de,Ie,je){return re(q,S,de,Ie)?void 0===q.redirectTo?this.matchSegmentAgainstRoute(P,S,q,de,Ie):je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,S,z,q,de,Ie):qt(S):qt(S)}expandSegmentAgainstRouteUsingRedirect(P,S,z,q,de,Ie){return"**"===q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,z,q,Ie):this.expandRegularSegmentAgainstRouteUsingRedirect(P,S,z,q,de,Ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,S,z,q){const de=this.applyRedirectCommands([],z.redirectTo,{});return z.redirectTo.startsWith("/")?Zn(de):this.lineralizeSegments(z,de).pipe((0,Ot.z)(Ie=>{const je=new Le(Ie,{});return this.expandSegment(P,je,S,Ie,q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,S,z,q,de,Ie){const{matched:je,consumedSegments:Ct,remainingSegments:ln,positionalParamSegments:ci}=ka(S,q,de);if(!je)return qt(S);const Bn=this.applyRedirectCommands(Ct,q.redirectTo,ci);return q.redirectTo.startsWith("/")?Zn(Bn):this.lineralizeSegments(q,Bn).pipe((0,Ot.z)(ji=>this.expandSegment(P,S,z,ji.concat(ln),Ie,!1)))}matchSegmentAgainstRoute(P,S,z,q,de){return"**"===z.path?(P=Ka(z,P),z.loadChildren?(z._loadedRoutes?(0,G.of)({routes:z._loadedRoutes,injector:z._loadedInjector}):this.configLoader.loadChildren(P,z)).pipe((0,hn.U)(je=>(z._loadedRoutes=je.routes,z._loadedInjector=je.injector,new Le(q,{})))):(0,G.of)(new Le(q,{}))):Ja(S,z,q,P).pipe((0,At.w)(({matched:Ie,consumedSegments:je,remainingSegments:Ct})=>Ie?this.getChildConfig(P=z._injector??P,z,q).pipe((0,Ot.z)(ci=>{const Bn=ci.injector??P,ji=ci.routes,{segmentGroup:vr,slicedSegments:Gr}=Ra(S,je,Ct,ji),Zr=new Le(vr.segments,vr.children);if(0===Gr.length&&Zr.hasChildren())return this.expandChildren(Bn,ji,Zr).pipe((0,hn.U)(Qr=>new Le(je,Qr)));if(0===ji.length&&0===Gr.length)return(0,G.of)(new Le(je,{}));const Jr=_r(z)===de;return this.expandSegment(Bn,Zr,ji,Gr,Jr?wn:de,!0).pipe((0,hn.U)(pr=>new Le(je.concat(pr.segments),pr.children)))})):qt(S)))}getChildConfig(P,S,z){return S.children?(0,G.of)({routes:S.children,injector:P}):S.loadChildren?void 0!==S._loadedRoutes?(0,G.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):function Jl(I,P,S,z){const q=P.canLoad;if(void 0===q||0===q.length)return(0,G.of)(!0);const de=q.map(Ie=>{const je=Hr(Ie,I);return xn(function wr(I){return I&&Pa(I.canLoad)}(je)?je.canLoad(P,S):I.runInContext(()=>je(P,S)))});return(0,G.of)(de).pipe(or(),Ws())}(P,S,z).pipe((0,Ot.z)(q=>q?this.configLoader.loadChildren(P,S).pipe((0,pt.b)(de=>{S._loadedRoutes=de.routes,S._loadedInjector=de.injector})):function xi(I){return(0,Ge._)(gs(ge,3))}())):(0,G.of)({routes:[],injector:P})}lineralizeSegments(P,S){let z=[],q=S.root;for(;;){if(z=z.concat(q.segments),0===q.numberOfChildren)return(0,G.of)(z);if(q.numberOfChildren>1||!q.children[wn])return(0,Ge._)(new D.vHH(4e3,ge));q=q.children[wn]}}applyRedirectCommands(P,S,z){return this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),P,z)}applyRedirectCreateUrlTree(P,S,z,q){const de=this.createSegmentGroup(P,S.root,z,q);return new Ae(de,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(P,S){const z={};return Di(P,(q,de)=>{if("string"==typeof q&&q.startsWith(":")){const je=q.substring(1);z[de]=S[je]}else z[de]=q}),z}createSegmentGroup(P,S,z,q){const de=this.createSegments(P,S.segments,z,q);let Ie={};return Di(S.children,(je,Ct)=>{Ie[Ct]=this.createSegmentGroup(P,je,z,q)}),new Le(de,Ie)}createSegments(P,S,z,q){return S.map(de=>de.path.startsWith(":")?this.findPosParam(P,de,q):this.findOrReturn(de,z))}findPosParam(P,S,z){const q=z[S.path.substring(1)];if(!q)throw new D.vHH(4001,ge);return q}findOrReturn(P,S){let z=0;for(const q of S){if(q.path===P.path)return S.splice(z),q;z++}return P}}class Ai{}class Br{constructor(P,S,z,q,de,Ie,je,Ct){this.injector=P,this.rootComponentType=S,this.config=z,this.urlTree=q,this.url=de,this.paramsInheritanceStrategy=Ie,this.relativeLinkResolution=je,this.urlSerializer=Ct}recognize(){const P=Ra(this.urlTree.root,[],[],this.config.filter(S=>void 0===S.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,P,wn).pipe((0,hn.U)(S=>{if(null===S)return null;const z=new oa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wn,this.rootComponentType,null,this.urlTree.root,-1,{}),q=new wo(z,S),de=new Da(this.url,q);return this.inheritParamsAndData(de._root),de}))}inheritParamsAndData(P){const S=P.value,z=Os(S,this.paramsInheritanceStrategy);S.params=Object.freeze(z.params),S.data=Object.freeze(z.data),P.children.forEach(q=>this.inheritParamsAndData(q))}processSegmentGroup(P,S,z,q){return 0===z.segments.length&&z.hasChildren()?this.processChildren(P,S,z):this.processSegment(P,S,z,z.segments,q)}processChildren(P,S,z){return(0,l.D)(Object.keys(z.children)).pipe((0,tn.b)(q=>{const de=z.children[q],Ie=_s(S,q);return this.processSegmentGroup(P,Ie,de,q)}),St((q,de)=>q&&de?(q.push(...de),q):null),(0,yn.o)(q=>null!==q),(0,Gn.d)(null),yi(),(0,hn.U)(q=>{if(null===q)return null;const de=Rs(q);return function Xr(I){I.sort((P,S)=>P.value.outlet===wn?-1:S.value.outlet===wn?1:P.value.outlet.localeCompare(S.value.outlet))}(de),de}))}processSegment(P,S,z,q,de){return(0,l.D)(S).pipe((0,tn.b)(Ie=>this.processSegmentAgainstRoute(Ie._injector??P,Ie,z,q,de)),(0,Ut.P)(Ie=>!!Ie),(0,Xe.K)(Ie=>{if(yr(Ie))return Z(z,q,de)?(0,G.of)([]):(0,G.of)(null);throw Ie}))}processSegmentAgainstRoute(P,S,z,q,de){if(S.redirectTo||!re(S,z,q,de))return(0,G.of)(null);let Ie;if("**"===S.path){const je=q.length>0?$i(q).parameters:{},Ct=Qa(z)+q.length,ln=new oa(q,je,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yc(S),_r(S),S.component??S._loadedComponent??null,S,vs(z),Ct,hu(S),Ct);Ie=(0,G.of)({snapshot:ln,consumedSegments:[],remainingSegments:[]})}else Ie=Ja(z,S,q,P).pipe((0,hn.U)(({matched:je,consumedSegments:Ct,remainingSegments:ln,parameters:ci})=>{if(!je)return null;const Bn=Qa(z)+Ct.length;return{snapshot:new oa(Ct,ci,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yc(S),_r(S),S.component??S._loadedComponent??null,S,vs(z),Bn,hu(S),Bn),consumedSegments:Ct,remainingSegments:ln}}));return Ie.pipe((0,At.w)(je=>{if(null===je)return(0,G.of)(null);const{snapshot:Ct,consumedSegments:ln,remainingSegments:ci}=je;P=S._injector??P;const Bn=S._loadedInjector??P,ji=function Ar(I){return I.children?I.children:I.loadChildren?I._loadedRoutes:[]}(S),{segmentGroup:vr,slicedSegments:Gr}=Ra(z,ln,ci,ji.filter(Jr=>void 0===Jr.redirectTo),this.relativeLinkResolution);if(0===Gr.length&&vr.hasChildren())return this.processChildren(Bn,ji,vr).pipe((0,hn.U)(Jr=>null===Jr?null:[new wo(Ct,Jr)]));if(0===ji.length&&0===Gr.length)return(0,G.of)([new wo(Ct,[])]);const Zr=_r(S)===de;return this.processSegment(Bn,ji,vr,Gr,Zr?wn:de).pipe((0,hn.U)(Jr=>null===Jr?null:[new wo(Ct,Jr)]))}))}}function Mn(I){const P=I.value.routeConfig;return P&&""===P.path&&void 0===P.redirectTo}function Rs(I){const P=[],S=new Set;for(const z of I){if(!Mn(z)){P.push(z);continue}const q=P.find(de=>z.value.routeConfig===de.value.routeConfig);void 0!==q?(q.children.push(...z.children),S.add(q)):P.push(z)}for(const z of S){const q=Rs(z.children);P.push(new wo(z.value,q))}return P.filter(z=>!S.has(z))}function vs(I){let P=I;for(;P._sourceSegment;)P=P._sourceSegment;return P}function Qa(I){let P=I,S=P._segmentIndexShift??0;for(;P._sourceSegment;)P=P._sourceSegment,S+=P._segmentIndexShift??0;return S-1}function yc(I){return I.data||{}}function hu(I){return I.resolve||{}}function Pl(I){return"string"==typeof I.title||null===I.title}function Wo(I){return(0,At.w)(P=>{const S=I(P);return S?(0,l.D)(S).pipe((0,hn.U)(()=>P)):(0,G.of)(P)})}let ml=(()=>{class I{buildTitle(S){let z,q=S.root;for(;void 0!==q;)z=this.getResolvedTitleForRoute(q)??z,q=q.children.find(de=>de.outlet===wn);return z}getResolvedTitleForRoute(S){return S.data[_t]}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=D.Yz7({token:I,factory:function(){return(0,D.f3M)(qo)},providedIn:"root"}),I})(),qo=(()=>{class I extends ml{constructor(S){super(),this.title=S}updateTitle(S){const z=this.buildTitle(S);void 0!==z&&this.title.setTitle(z)}}return I.\u0275fac=function(S){return new(S||I)(D.LFG(bn.Dx))},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class Bo{}class Ol extends class xc{shouldDetach(P){return!1}store(P,S){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,S){return P.routeConfig===S.routeConfig}}{}const La=new D.OlP("",{providedIn:"root",factory:()=>({})}),Ko=new D.OlP("ROUTES");let ir=(()=>{class I{constructor(S,z){this.injector=S,this.compiler=z,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,G.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const z=xn(S.loadComponent()).pipe((0,pt.b)(de=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=de}),(0,Ei.x)(()=>{this.componentLoaders.delete(S)})),q=new wt(z,()=>new Et.x).pipe(Dt());return this.componentLoaders.set(S,q),q}loadChildren(S,z){if(this.childrenLoaders.get(z))return this.childrenLoaders.get(z);if(z._loadedRoutes)return(0,G.of)({routes:z._loadedRoutes,injector:z._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(z);const de=this.loadModuleFactoryOrRoutes(z.loadChildren).pipe((0,hn.U)(je=>{this.onLoadEndListener&&this.onLoadEndListener(z);let Ct,ln,ci=!1;Array.isArray(je)?ln=je:(Ct=je.create(S).injector,ln=fi(Ct.get(Ko,[],D.XFs.Self|D.XFs.Optional)));return{routes:ln.map(Aa),injector:Ct}}),(0,Ei.x)(()=>{this.childrenLoaders.delete(z)})),Ie=new wt(de,()=>new Et.x).pipe(Dt());return this.childrenLoaders.set(z,Ie),Ie}loadModuleFactoryOrRoutes(S){return xn(S()).pipe((0,Ot.z)(z=>z instanceof D.YKP||Array.isArray(z)?(0,G.of)(z):(0,l.D)(this.compiler.compileModuleAsync(z))))}}return I.\u0275fac=function(S){return new(S||I)(D.LFG(D.zs3),D.LFG(D.Sil))},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class gl{}class kl{shouldProcessUrl(P){return!0}extract(P){return P}merge(P,S){return P}}function el(I){throw I}function tl(I,P,S){return P.parse("/")}const wc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ls={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Yn(){const I=(0,D.f3M)($t),P=(0,D.f3M)(ts),S=(0,D.f3M)(_n.Ye),z=(0,D.f3M)(D.zs3),q=(0,D.f3M)(D.Sil),de=(0,D.f3M)(Ko,{optional:!0})??[],Ie=(0,D.f3M)(La,{optional:!0})??{},je=(0,D.f3M)(qo),Ct=(0,D.f3M)(ml,{optional:!0}),ln=(0,D.f3M)(gl,{optional:!0}),ci=(0,D.f3M)(Bo,{optional:!0}),Bn=new zn(null,I,P,S,z,q,fi(de));return ln&&(Bn.urlHandlingStrategy=ln),ci&&(Bn.routeReuseStrategy=ci),Bn.titleStrategy=Ct??je,function Pi(I,P){I.errorHandler&&(P.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(P.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(P.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(P.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(P.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(P.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(P.canceledNavigationResolution=I.canceledNavigationResolution)}(Ie,Bn),Bn}let zn=(()=>{class I{constructor(S,z,q,de,Ie,je,Ct){this.rootComponentType=S,this.urlSerializer=z,this.rootContexts=q,this.location=de,this.config=Ct,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Et.x,this.errorHandler=el,this.malformedUriErrorHandler=tl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=new kl,this.routeReuseStrategy=new Ol,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ie.get(ir),this.configLoader.onLoadEndListener=ji=>this.triggerEvent(new Oo(ji)),this.configLoader.onLoadStartListener=ji=>this.triggerEvent(new As(ji)),this.ngModule=Ie.get(D.h0i),this.console=Ie.get(D.c2e);const Bn=Ie.get(D.R0b);this.isNgZoneEnabled=Bn instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(Ct),this.currentUrlTree=function ct(){return new Ae(new Le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wa(this.currentUrlTree,this.rootComponentType),this.transitions=new m.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(S){const z=this.events;return S.pipe((0,Yt.h)(q=>0!==q.id),(0,hn.U)(q=>({...q,extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),(0,At.w)(q=>{let de=!1,Ie=!1;return(0,G.of)(q).pipe((0,pt.b)(je=>{this.currentNavigation={id:je.id,initialUrl:je.rawUrl,extractedUrl:je.extractedUrl,trigger:je.source,extras:je.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,At.w)(je=>{const Ct=this.browserUrlTree.toString(),ln=!this.navigated||je.extractedUrl.toString()!==Ct||Ct!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ln)&&this.urlHandlingStrategy.shouldProcessUrl(je.rawUrl))return da(je.source)&&(this.browserUrlTree=je.extractedUrl),(0,G.of)(je).pipe((0,At.w)(Bn=>{const ji=this.transitions.getValue();return z.next(new er(Bn.id,this.serializeUrl(Bn.extractedUrl),Bn.source,Bn.restoredState)),ji!==this.transitions.getValue()?Te.E:Promise.resolve(Bn)}),function sr(I,P,S,z){return(0,At.w)(q=>function vi(I,P,S,z,q){return new _i(I,P,S,z,q).apply()}(I,P,S,q.extractedUrl,z).pipe((0,hn.U)(de=>({...q,urlAfterRedirects:de}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,pt.b)(Bn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Bn.urlAfterRedirects},q.urlAfterRedirects=Bn.urlAfterRedirects}),function sh(I,P,S,z,q,de){return(0,Ot.z)(Ie=>function Do(I,P,S,z,q,de,Ie="emptyOnly",je="legacy"){return new Br(I,P,S,z,q,Ie,je,de).recognize().pipe((0,At.w)(Ct=>null===Ct?function Eo(I){return new rt.y(P=>P.error(I))}(new Ai):(0,G.of)(Ct)))}(I,P,S,Ie.urlAfterRedirects,z.serialize(Ie.urlAfterRedirects),z,q,de).pipe((0,hn.U)(je=>({...Ie,targetSnapshot:je}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,pt.b)(Bn=>{if(q.targetSnapshot=Bn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Bn.extras.skipLocationChange){const vr=this.urlHandlingStrategy.merge(Bn.urlAfterRedirects,Bn.rawUrl);this.setBrowserUrl(vr,Bn)}this.browserUrlTree=Bn.urlAfterRedirects}const ji=new Vs(Bn.id,this.serializeUrl(Bn.extractedUrl),this.serializeUrl(Bn.urlAfterRedirects),Bn.targetSnapshot);z.next(ji)}));if(ln&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ji,extractedUrl:vr,source:Gr,restoredState:Zr,extras:Jr}=je,pa=new er(ji,this.serializeUrl(vr),Gr,Zr);z.next(pa);const pr=Wa(vr,this.rootComponentType).snapshot;return q={...je,targetSnapshot:pr,urlAfterRedirects:vr,extras:{...Jr,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(q)}return this.rawUrlTree=je.rawUrl,je.resolve(null),Te.E}),(0,pt.b)(je=>{const Ct=new ia(je.id,this.serializeUrl(je.extractedUrl),this.serializeUrl(je.urlAfterRedirects),je.targetSnapshot);this.triggerEvent(Ct)}),(0,hn.U)(je=>q={...je,guards:Ki(je.targetSnapshot,je.currentSnapshot,this.rootContexts)}),function ur(I,P){return(0,Ot.z)(S=>{const{targetSnapshot:z,currentSnapshot:q,guards:{canActivateChecks:de,canDeactivateChecks:Ie}}=S;return 0===Ie.length&&0===de.length?(0,G.of)({...S,guardsResult:!0}):function Fo(I,P,S,z){return(0,l.D)(I).pipe((0,Ot.z)(q=>function Xl(I,P,S,z,q){const de=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!de||0===de.length)return(0,G.of)(!0);const Ie=de.map(je=>{const Ct=so(P)??q,ln=Hr(je,Ct);return xn(function W(I){return I&&Pa(I.canDeactivate)}(ln)?ln.canDeactivate(I,P,S,z):Ct.runInContext(()=>ln(I,P,S,z))).pipe((0,Ut.P)())});return(0,G.of)(Ie).pipe(or())}(q.component,q.route,S,P,z)),(0,Ut.P)(q=>!0!==q,!0))}(Ie,z,q,I).pipe((0,Ot.z)(je=>je&&function Xa(I){return"boolean"==typeof I}(je)?function Oa(I,P,S,z){return(0,l.D)(P).pipe((0,tn.b)(q=>(0,Ye.z)(function rs(I,P){return null!==I&&P&&P(new fs(I)),(0,G.of)(!0)}(q.route.parent,z),function No(I,P){return null!==I&&P&&P(new fo(I)),(0,G.of)(!0)}(q.route,z),function Yl(I,P,S){const z=P[P.length-1],de=P.slice(0,P.length-1).reverse().map(Ie=>function ai(I){const P=I.routeConfig?I.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:I,guards:P}:null}(Ie)).filter(Ie=>null!==Ie).map(Ie=>(0,Re.P)(()=>{const je=Ie.guards.map(Ct=>{const ln=so(Ie.node)??S,ci=Hr(Ct,ln);return xn(function X(I){return I&&Pa(I.canActivateChild)}(ci)?ci.canActivateChild(z,I):ln.runInContext(()=>ci(z,I))).pipe((0,Ut.P)())});return(0,G.of)(je).pipe(or())}));return(0,G.of)(de).pipe(or())}(I,q.path,S),function Tl(I,P,S){const z=P.routeConfig?P.routeConfig.canActivate:null;if(!z||0===z.length)return(0,G.of)(!0);const q=z.map(de=>(0,Re.P)(()=>{const Ie=so(P)??S,je=Hr(de,Ie);return xn(function ee(I){return I&&Pa(I.canActivate)}(je)?je.canActivate(P,I):Ie.runInContext(()=>je(P,I))).pipe((0,Ut.P)())}));return(0,G.of)(q).pipe(or())}(I,q.route,S))),(0,Ut.P)(q=>!0!==q,!0))}(z,de,I,P):(0,G.of)(je)),(0,hn.U)(je=>({...S,guardsResult:je})))})}(this.ngModule.injector,je=>this.triggerEvent(je)),(0,pt.b)(je=>{if(q.guardsResult=je.guardsResult,tt(je.guardsResult))throw la(0,je.guardsResult);const Ct=new Is(je.id,this.serializeUrl(je.extractedUrl),this.serializeUrl(je.urlAfterRedirects),je.targetSnapshot,!!je.guardsResult);this.triggerEvent(Ct)}),(0,Yt.h)(je=>!!je.guardsResult||(this.restoreHistory(je),this.cancelNavigationTransition(je,"",3),!1)),Wo(je=>{if(je.guards.canActivateChecks.length)return(0,G.of)(je).pipe((0,pt.b)(Ct=>{const ln=new kr(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(ln)}),(0,At.w)(Ct=>{let ln=!1;return(0,G.of)(Ct).pipe(function fl(I,P){return(0,Ot.z)(S=>{const{targetSnapshot:z,guards:{canActivateChecks:q}}=S;if(!q.length)return(0,G.of)(S);let de=0;return(0,l.D)(q).pipe((0,tn.b)(Ie=>function vc(I,P,S,z){const q=I.routeConfig,de=I._resolve;return void 0!==q?.title&&!Pl(q)&&(de[_t]=q.title),function bc(I,P,S,z){const q=function ca(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===q.length)return(0,G.of)({});const de={};return(0,l.D)(q).pipe((0,Ot.z)(Ie=>function Nc(I,P,S,z){const q=so(P)??z,de=Hr(I,q);return xn(de.resolve?de.resolve(P,S):q.runInContext(()=>de(P,S)))}(I[Ie],P,S,z).pipe((0,Ut.P)(),(0,pt.b)(je=>{de[Ie]=je}))),pn(1),(0,gi.h)(de),(0,Xe.K)(Ie=>yr(Ie)?Te.E:(0,Ge._)(Ie)))}(de,I,P,z).pipe((0,hn.U)(Ie=>(I._resolvedData=Ie,I.data=Os(I,S).resolve,q&&Pl(q)&&(I.data[_t]=q.title),null)))}(Ie.route,z,I,P)),(0,pt.b)(()=>de++),pn(1),(0,Ot.z)(Ie=>de===q.length?(0,G.of)(S):Te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,pt.b)({next:()=>ln=!0,complete:()=>{ln||(this.restoreHistory(Ct),this.cancelNavigationTransition(Ct,"",2))}}))}),(0,pt.b)(Ct=>{const ln=new Po(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(ln)}))}),Wo(je=>{const Ct=ln=>{const ci=[];ln.routeConfig?.loadComponent&&!ln.routeConfig._loadedComponent&&ci.push(this.configLoader.loadComponent(ln.routeConfig).pipe((0,pt.b)(Bn=>{ln.component=Bn}),(0,hn.U)(()=>{})));for(const Bn of ln.children)ci.push(...Ct(Bn));return ci};return(0,ke.a)(Ct(je.targetSnapshot.root)).pipe((0,Gn.d)(),(0,Pe.q)(1))}),Wo(()=>this.afterPreactivation()),(0,hn.U)(je=>{const Ct=function Ma(I,P,S){const z=Ir(I,P._root,S?S._root:void 0);return new dl(z,P)}(this.routeReuseStrategy,je.targetSnapshot,je.currentRouterState);return q={...je,targetRouterState:Ct}}),(0,pt.b)(je=>{this.currentUrlTree=je.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(je.urlAfterRedirects,je.rawUrl),this.routerState=je.targetRouterState,"deferred"===this.urlUpdateStrategy&&(je.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,je),this.browserUrlTree=je.urlAfterRedirects)}),((I,P,S)=>(0,hn.U)(z=>(new Gs(P,z.targetRouterState,z.currentRouterState,S).activate(I),z)))(this.rootContexts,this.routeReuseStrategy,je=>this.triggerEvent(je)),(0,pt.b)({next(){de=!0},complete(){de=!0}}),(0,Ei.x)(()=>{de||Ie||this.cancelNavigationTransition(q,"",1),this.currentNavigation?.id===q.id&&(this.currentNavigation=null)}),(0,Xe.K)(je=>{if(Ie=!0,Nr(je)){Sa(je)||(this.navigated=!0,this.restoreHistory(q,!0));const Ct=new gr(q.id,this.serializeUrl(q.extractedUrl),je.message,je.cancellationCode);if(z.next(Ct),Sa(je)){const ln=this.urlHandlingStrategy.merge(je.url,this.rawUrlTree),ci={skipLocationChange:q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||da(q.source)};this.scheduleNavigation(ln,"imperative",null,ci,{resolve:q.resolve,reject:q.reject,promise:q.promise})}else q.resolve(!1)}else{this.restoreHistory(q,!0);const Ct=new ro(q.id,this.serializeUrl(q.extractedUrl),je,q.targetSnapshot??void 0);z.next(Ct);try{q.resolve(this.errorHandler(je))}catch(ln){q.reject(ln)}}return Te.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next({...this.transitions.value,...S})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const z="popstate"===S.type?"popstate":"hashchange";"popstate"===z&&setTimeout(()=>{const q={replaceUrl:!0},de=S.state?.navigationId?S.state:null;if(de){const je={...de};delete je.navigationId,delete je.\u0275routerPageId,0!==Object.keys(je).length&&(q.state=je)}const Ie=this.parseUrl(S.url);this.scheduleNavigation(Ie,z,de,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){this.config=S.map(Aa),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,z={}){const{relativeTo:q,queryParams:de,fragment:Ie,queryParamsHandling:je,preserveFragment:Ct}=z,ln=q||this.routerState.root,ci=Ct?this.currentUrlTree.fragment:Ie;let Bn=null;switch(je){case"merge":Bn={...this.currentUrlTree.queryParams,...de};break;case"preserve":Bn=this.currentUrlTree.queryParams;break;default:Bn=de||null}return null!==Bn&&(Bn=this.removeEmptyProps(Bn)),Ni(ln,this.currentUrlTree,S,Bn,ci??null)}navigateByUrl(S,z={skipLocationChange:!1}){const q=tt(S)?S:this.parseUrl(S),de=this.urlHandlingStrategy.merge(q,this.rawUrlTree);return this.scheduleNavigation(de,"imperative",null,z)}navigate(S,z={skipLocationChange:!1}){return function Ks(I){for(let P=0;P<I.length;P++){if(null==I[P])throw new D.vHH(4008,false)}}(S),this.navigateByUrl(this.createUrlTree(S,z),z)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let z;try{z=this.urlSerializer.parse(S)}catch(q){z=this.malformedUriErrorHandler(q,this.urlSerializer,S)}return z}isActive(S,z){let q;if(q=!0===z?{...wc}:!1===z?{...Ls}:z,tt(S))return Me(this.currentUrlTree,S,q);const de=this.parseUrl(S);return Me(this.currentUrlTree,de,q)}removeEmptyProps(S){return Object.keys(S).reduce((z,q)=>{const de=S[q];return null!=de&&(z[q]=de),z},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new po(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,z,q,de,Ie){if(this.disposed)return Promise.resolve(!1);let je,Ct,ln;Ie?(je=Ie.resolve,Ct=Ie.reject,ln=Ie.promise):ln=new Promise((ji,vr)=>{je=ji,Ct=vr});const ci=++this.navigationId;let Bn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(q=this.location.getState()),Bn=q&&q.\u0275routerPageId?q.\u0275routerPageId:de.replaceUrl||de.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Bn=0,this.setTransition({id:ci,targetPageId:Bn,source:z,restoredState:q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:de,resolve:je,reject:Ct,promise:ln,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ln.catch(ji=>Promise.reject(ji))}setBrowserUrl(S,z){const q=this.urlSerializer.serialize(S),de={...z.extras.state,...this.generateNgRouterState(z.id,z.targetPageId)};this.location.isCurrentPathEqualTo(q)||z.extras.replaceUrl?this.location.replaceState(q,"",de):this.location.go(q,"",de)}restoreHistory(S,z=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===q?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===q&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(q)}else"replace"===this.canceledNavigationResolution&&(z&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,z,q){const de=new gr(S.id,this.serializeUrl(S.extractedUrl),z,q);this.triggerEvent(de),S.resolve(!1)}generateNgRouterState(S,z){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:z}:{navigationId:S}}}return I.\u0275fac=function(S){D.$Z()},I.\u0275prov=D.Yz7({token:I,factory:function(){return Yn()},providedIn:"root"}),I})();function da(I){return"imperative"!==I}let nl=(()=>{class I{constructor(S,z,q,de,Ie){this.router=S,this.route=z,this.tabIndexAttribute=q,this.renderer=de,this.el=Ie,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Et.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(S){this._preserveFragment=(0,D.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,D.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,D.D6c)(S)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const z=this.renderer,q=this.el.nativeElement;null!==S?z.setAttribute(q,"tabindex",S):z.removeAttribute(q,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(S){return new(S||I)(D.Y36(zn),D.Y36(Ro),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq))},I.\u0275dir=D.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,z){1&S&&D.NdJ("click",function(){return z.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[D.TTD]}),I})(),dr=(()=>{class I{constructor(S,z,q){this.router=S,this.route=z,this.locationStrategy=q,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Et.x,this.subscription=S.events.subscribe(de=>{de instanceof po&&this.updateTargetUrlAndHref()})}set preserveFragment(S){this._preserveFragment=(0,D.D6c)(S)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(S){this._skipLocationChange=(0,D.D6c)(S)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(S){this._replaceUrl=(0,D.D6c)(S)}get replaceUrl(){return this._replaceUrl}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,z,q,de,Ie){return!!(0!==S||z||q||de||Ie||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(S){return new(S||I)(D.Y36(zn),D.Y36(Ro),D.Y36(_n.S$))},I.\u0275dir=D.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,z){1&S&&D.NdJ("click",function(de){return z.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&S&&D.uIk("target",z.target)("href",z.href,D.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[D.TTD]}),I})(),Fs=(()=>{class I{constructor(S,z,q,de,Ie,je){this.router=S,this.element=z,this.renderer=q,this.cdr=de,this.link=Ie,this.linkWithHref=je,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new D.vpe,this.routerEventsSubscription=S.events.subscribe(Ct=>{Ct instanceof po&&this.update()})}ngAfterContentInit(){(0,G.of)(this.links.changes,this.linksWithHrefs.changes,(0,G.of)(null)).pipe((0,hi.J)()).subscribe(S=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const S=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(z=>!!z).map(z=>z.onChanges);this.linkInputChangesSubscription=(0,l.D)(S).pipe((0,hi.J)()).subscribe(z=>{this.isActive!==this.isLinkActive(this.router)(z)&&this.update()})}set routerLinkActive(S){const z=Array.isArray(S)?S:S.split(" ");this.classes=z.filter(q=>!!q)}ngOnChanges(S){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const S=this.hasActiveLinks();this.isActive!==S&&(this.isActive=S,this.cdr.markForCheck(),this.classes.forEach(z=>{S?this.renderer.addClass(this.element.nativeElement,z):this.renderer.removeClass(this.element.nativeElement,z)}),S&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(S))})}isLinkActive(S){const z=function hr(I){return!!I.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return q=>!!q.urlTree&&S.isActive(q.urlTree,z)}hasActiveLinks(){const S=this.isLinkActive(this.router);return this.link&&S(this.link)||this.linkWithHref&&S(this.linkWithHref)||this.links.some(S)||this.linksWithHrefs.some(S)}}return I.\u0275fac=function(S){return new(S||I)(D.Y36(zn),D.Y36(D.SBq),D.Y36(D.Qsj),D.Y36(D.sBO),D.Y36(nl,8),D.Y36(dr,8))},I.\u0275dir=D.lG2({type:I,selectors:[["","routerLinkActive",""]],contentQueries:function(S,z,q){if(1&S&&(D.Suo(q,nl,5),D.Suo(q,dr,5)),2&S){let de;D.iGM(de=D.CRH())&&(z.links=de),D.iGM(de=D.CRH())&&(z.linksWithHrefs=de)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[D.TTD]}),I})();class il{}let lr=(()=>{class I{constructor(S,z,q,de,Ie){this.router=S,this.injector=q,this.preloadingStrategy=de,this.loader=Ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,Yt.h)(S=>S instanceof po),(0,tn.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,z){const q=[];for(const de of z){de.providers&&!de._injector&&(de._injector=(0,D.MMx)(de.providers,S,`Route: ${de.path}`));const Ie=de._injector??S,je=de._loadedInjector??Ie;de.loadChildren&&!de._loadedRoutes&&void 0===de.canLoad||de.loadComponent&&!de._loadedComponent?q.push(this.preloadConfig(Ie,de)):(de.children||de._loadedRoutes)&&q.push(this.processRoutes(je,de.children??de._loadedRoutes))}return(0,l.D)(q).pipe((0,hi.J)())}preloadConfig(S,z){return this.preloadingStrategy.preload(z,()=>{let q;q=z.loadChildren&&void 0===z.canLoad?this.loader.loadChildren(S,z):(0,G.of)(null);const de=q.pipe((0,Ot.z)(Ie=>null===Ie?(0,G.of)(void 0):(z._loadedRoutes=Ie.routes,z._loadedInjector=Ie.injector,this.processRoutes(Ie.injector??S,Ie.routes))));if(z.loadComponent&&!z._loadedComponent){const Ie=this.loader.loadComponent(z);return(0,l.D)([de,Ie]).pipe((0,hi.J)())}return de})}}return I.\u0275fac=function(S){return new(S||I)(D.LFG(zn),D.LFG(D.Sil),D.LFG(D.lqb),D.LFG(il),D.LFG(ir))},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Rl=new D.OlP("");let Fa=(()=>{class I{constructor(S,z,q={}){this.router=S,this.viewportScroller=z,this.options=q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},q.scrollPositionRestoration=q.scrollPositionRestoration||"disabled",q.anchorScrolling=q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof er?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof po&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof ra&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,z){this.router.triggerEvent(new ra(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(S){D.$Z()},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac}),I})();function n(I,P){return{\u0275kind:I,\u0275providers:P}}function u(I){return[{provide:Ko,multi:!0,useValue:I}]}function b(){const I=(0,D.f3M)(D.zs3);return P=>{const S=I.get(D.z2F);if(P!==S.components[0])return;const z=I.get(zn),q=I.get(C);1===I.get(A)&&z.initialNavigation(),I.get(ae,null,D.XFs.Optional)?.setUpPreloading(),I.get(Rl,null,D.XFs.Optional)?.init(),z.resetRootComponentType(S.componentTypes[0]),q.next(),q.complete()}}const C=new D.OlP("",{factory:()=>new Et.x}),A=new D.OlP("",{providedIn:"root",factory:()=>1});const ae=new D.OlP("");function ce(I){return n(0,[{provide:ae,useExisting:lr},{provide:il,useExisting:I}])}const Oe=new D.OlP("ROUTER_FORROOT_GUARD"),ht=[_n.Ye,{provide:$t,useClass:en},{provide:zn,useFactory:Yn},ts,{provide:Ro,useFactory:function y(I){return I.routerState.root},deps:[zn]},ir];function mt(){return new D.PXZ("Router",zn)}let xt=(()=>{class I{constructor(S){}static forRoot(S,z){return{ngModule:I,providers:[ht,[],u(S),{provide:Oe,useFactory:Ft,deps:[[zn,new D.FiY,new D.tp0]]},{provide:La,useValue:z||{}},z?.useHash?{provide:_n.S$,useClass:_n.Do}:{provide:_n.S$,useClass:_n.b0},{provide:Rl,useFactory:()=>{const I=(0,D.f3M)(zn),P=(0,D.f3M)(_n.EM),S=(0,D.f3M)(La);return S.scrollOffset&&P.setOffset(S.scrollOffset),new Fa(I,P,S)}},z?.preloadingStrategy?ce(z.preloadingStrategy).\u0275providers:[],{provide:D.PXZ,multi:!0,useFactory:mt},z?.initialNavigation?Zt(z):[],[{provide:Qt,useFactory:b},{provide:D.tb,multi:!0,useExisting:Qt}]]}}static forChild(S){return{ngModule:I,providers:[u(S)]}}}return I.\u0275fac=function(S){return new(S||I)(D.LFG(Oe,8))},I.\u0275mod=D.oAB({type:I}),I.\u0275inj=D.cJS({imports:[qa]}),I})();function Ft(I){return"guarded"}function Zt(I){return["disabled"===I.initialNavigation?n(3,[{provide:D.ip1,multi:!0,useFactory:()=>{const P=(0,D.f3M)(zn);return()=>{P.setUpLocationChangeListener()}}},{provide:A,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?n(2,[{provide:A,useValue:0},{provide:D.ip1,multi:!0,deps:[D.zs3],useFactory:P=>{const S=P.get(_n.V_,Promise.resolve());let z=!1;return()=>S.then(()=>new Promise(de=>{const Ie=P.get(zn),je=P.get(C);(function q(de){P.get(zn).events.pipe((0,Yt.h)(je=>je instanceof po||je instanceof gr||je instanceof ro),(0,hn.U)(je=>je instanceof po||je instanceof gr&&(0===je.code||1===je.code)&&null),(0,Yt.h)(je=>null!==je),(0,Pe.q)(1)).subscribe(()=>{de()})})(()=>{de(!0),z=!0}),Ie.afterPreactivation=()=>(de(!0),z||je.closed?(0,G.of)(void 0):je),Ie.initialNavigation()}))}}]).\u0275providers:[]]}const Qt=new D.OlP("")}},Cn=>{Cn(Cn.s=3662)}]);