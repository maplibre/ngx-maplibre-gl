import{i as T,m as q,n as A,q as D,r as I}from"./chunk-ZDE3SFFK.js";import{Aa as _,Db as u,Eb as a,Hb as M,Lc as O,Mb as P,Nb as x,Ob as k,Pb as h,Qb as g,Rb as c,db as o,fc as F,hc as L,mc as p,na as y,nc as v,sb as C,yb as w}from"./chunk-JXSD3V2N.js";import"./chunk-VZBGOO6O.js";var E=i=>({font:i}),j=i=>({fill:i});function B(i,f){if(i&1&&(y(),c(0,"path",1)),i&2){let r=f.$implicit;a("ngStyle",v(2,j,r.fill)),u("d",r.d)}}var G=()=>[.3],H=()=>[0,20],R=()=>({preserveDrawingBuffer:!0}),z=()=>["!=","cluster",!0];function U(i,f){if(i&1&&c(0,"showcase-cluster-point",6),i&2){let r=f.$implicit;a("properties",r.properties)}}var N=(()=>{class i{constructor(){this.properties=_()}ngOnInit(){let r=[],e=this.properties(),t=[e?.mag1,e?.mag2,e?.mag3,e?.mag4,e?.mag5],s=0;for(let n=0;n<t.length;n++)r.push(s),s+=t[n];let l=s>=1e3?22:s>=100?20:s>=10?18:16;this.font=`${l}px sans-serif`,this.r=s>=1e3?50:s>=100?32:s>=10?24:18,this.r0=Math.round(this.r*.6),this.w=this.r*2,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let n=0;n<t.length;n++)this.segments.push(this.donutSegment(r[n]/s,(r[n]+t[n])/s,m[n]));this.totalString=s.toLocaleString()}donutSegment(r,e,t){e-r===1&&(e-=1e-5);let s=2*Math.PI*(r-.25),l=2*Math.PI*(e-.25),n=Math.cos(s),d=Math.sin(s),S=Math.cos(l),$=Math.sin(l),b=e-r>.5?1:0;return{d:`M ${this.r+this.r0*n} ${this.r+this.r0*d} L ${this.r+this.r*n} ${this.r+this.r*d} A ${this.r} ${this.r} 0 ${b} 1 ${this.r+this.r*S} ${this.r+this.r*$} L ${this.r+this.r0*S} ${this.r+this.r0*$} A ${this.r0} ${this.r0} 0 ${b} 0 ${this.r+this.r0*n} ${this.r+this.r0*d}`,fill:t}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=C({type:i,selectors:[["showcase-cluster-point"]],inputs:{properties:[1,"properties"]},decls:6,vars:11,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle"],["fill","white"],["dominant-baseline","central"]],template:function(e,t){e&1&&(y(),h(0,"svg",0),x(1,B,1,4,":svg:path",1,P),c(3,"circle",2),h(4,"text",3),F(5),g()()),e&2&&(a("ngStyle",v(9,E,t.font)),u("width",t.w)("height",t.w)("viewbox",t.viewbox),o(),k(t.segments),o(2),u("cx",t.r)("cy",t.r)("r",t.r0),o(),u("transform",t.textTransform),o(),L(" ",t.totalString," "))},dependencies:[O],encapsulation:2})}}return i})(),m=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"],W=(()=>{class i{constructor(){let r=["<",["get","mag"],2],e=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],t=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],s=["all",[">=",["get","mag"],4],["<",["get","mag"],5]],l=[">=",["get","mag"],5];this.clusterProperties={mag1:["+",["case",r,1,0]],mag2:["+",["case",e,1,0]],mag3:["+",["case",t,1,0]],mag4:["+",["case",s,1,0]],mag5:["+",["case",l,1,0]]},this.circlePaint={"circle-color":["case",r,m[0],e,m[1],t,m[2],s,m[3],m[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=C({type:i,selectors:[["showcase-demo"]],decls:6,vars:18,consts:[[3,"zoom","center","canvasContextAttributes"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js/docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(e,t){e&1&&(h(0,"mgl-map",0),c(1,"mgl-geojson-source",1),h(2,"mgl-markers-for-clusters",2),w(3,U,1,1,"ng-template",3),g(),c(4,"mgl-layer",4)(5,"mgl-layer",5),g()),e&2&&(M("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),a("zoom",p(13,G))("center",p(14,H))("canvasContextAttributes",p(15,R)),o(),a("cluster",!0)("clusterRadius",80)("clusterProperties",t.clusterProperties),o(3),a("filter",p(16,z))("paint",t.circlePaint),o(),a("filter",p(17,z))("layout",t.labelLayout)("paint",t.labelPaint))},dependencies:[A,T,I,D,N,q],styles:[`[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}
/*# sourceMappingURL=examples-UPBTEGPO.css.map */`]})}}return i})();export{W as ClusterHtmlComponent,N as ClusterPointComponent};
//# sourceMappingURL=chunk-YOGURFPK.js.map
