{
  "version": 3,
  "sources": ["projects/showcase/src/app/demo/examples/live-update-image-srource.component.ts"],
  "sourcesContent": ["import {\n  Component,\n  NgZone,\n  OnDestroy,\n  afterNextRender,\n  inject,\n} from '@angular/core';\nimport {\n  MapComponent,\n  ImageSourceComponent,\n  LayerComponent,\n} from '@maplibre/ngx-maplibre-gl';\nimport data from './hike.geo.json';\n\n@Component({\n  selector: 'showcase-demo',\n  template: `\n    <mgl-map\n      [style]=\"\n        'https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL'\n      \"\n      [center]=\"center\"\n      [zoom]=\"[14]\"\n      movingMethod=\"jumpTo\"\n      [canvasContextAttributes]=\"{preserveDrawingBuffer: true}\"\n    >\n      <mgl-image-source\n        id=\"test_source\"\n        [url]=\"url\"\n        [coordinates]=\"coordinates\"\n      >\n      </mgl-image-source>\n\n      <mgl-layer\n        id=\"test_layer\"\n        source=\"test_source\"\n        type=\"raster\"\n        [paint]=\"{ 'raster-fade-duration': 0 }\"\n      >\n      </mgl-layer>\n    </mgl-map>\n  `,\n  styleUrls: ['./examples.css'],\n  imports: [MapComponent, ImageSourceComponent, LayerComponent],\n})\nexport class LiveUpdateImageSourceComponent implements OnDestroy {\n  private readonly ngZone = inject(NgZone);\n\n  private timer: ReturnType<typeof setInterval>;\n  private readonly size = 0.001;\n\n  center: number[];\n  url = 'assets/red.png';\n  coordinates: number[][];\n\n  constructor() {\n    this.center = data.features[0].geometry!.coordinates[0];\n    this.coordinates = this.makeRectangle(this.center);\n    afterNextRender(() => {\n      const points = data.features[0].geometry!.coordinates;\n      const coordinates = points.map((c: number[]) => this.makeRectangle(c));\n\n      this.center = points[0];\n      this.coordinates = coordinates[0];\n\n      let i = 0;\n\n      this.timer = setInterval(() => {\n        this.ngZone.run(() => {\n          this.url = Math.random() < 0.5 ? 'assets/red.png' : 'assets/blue.png';\n          this.coordinates = coordinates[i];\n          i = (i + 1) % coordinates.length;\n        });\n      }, 250);\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.timer !== undefined) {\n      clearInterval(this.timer);\n    }\n  }\n\n  private makeRectangle([long, lat]: number[]): number[][] {\n    return [\n      [long, lat],\n      [long + this.size, lat],\n      [long + this.size, lat - this.size],\n      [long, lat - this.size],\n    ];\n  }\n}\n"],
  "mappings": "mUA6CaA,GAA8B,IAAA,CAArC,MAAOA,CAA8B,CAUzCC,aAAA,CATiB,KAAAC,OAASC,EAAOC,CAAM,EAGtB,KAAAC,KAAO,KAGxB,KAAAC,IAAM,iBAIJ,KAAKC,OAASC,EAAKC,SAAS,CAAC,EAAEC,SAAUC,YAAY,CAAC,EACtD,KAAKA,YAAc,KAAKC,cAAc,KAAKL,MAAM,EACjDM,EAAgB,IAAK,CACnB,IAAMC,EAASN,EAAKC,SAAS,CAAC,EAAEC,SAAUC,YACpCA,EAAcG,EAAOC,IAAKC,GAAgB,KAAKJ,cAAcI,CAAC,CAAC,EAErE,KAAKT,OAASO,EAAO,CAAC,EACtB,KAAKH,YAAcA,EAAY,CAAC,EAEhC,IAAIM,EAAI,EAER,KAAKC,MAAQC,YAAY,IAAK,CAC5B,KAAKjB,OAAOkB,IAAI,IAAK,CACnB,KAAKd,IAAMe,KAAKC,OAAM,EAAK,GAAM,iBAAmB,kBACpD,KAAKX,YAAcA,EAAYM,CAAC,EAChCA,GAAKA,EAAI,GAAKN,EAAYY,MAC5B,CAAC,CACH,EAAG,GAAG,CACR,CAAC,CACH,CAEAC,aAAW,CACL,KAAKN,QAAUO,QACjBC,cAAc,KAAKR,KAAK,CAE5B,CAEQN,cAAc,CAACe,EAAMC,CAAG,EAAW,CACzC,MAAO,CACL,CAACD,EAAMC,CAAG,EACV,CAACD,EAAO,KAAKtB,KAAMuB,CAAG,EACtB,CAACD,EAAO,KAAKtB,KAAMuB,EAAM,KAAKvB,IAAI,EAClC,CAACsB,EAAMC,EAAM,KAAKvB,IAAI,CAAC,CAE3B,iDA7CWL,EAA8B,CAAA,+BAA9BA,EAA8B6B,UAAA,CAAA,CAAA,eAAA,CAAA,EAAAC,MAAA,EAAAC,KAAA,GAAAC,OAAA,CAAA,CAAA,eAAA,SAAA,EAAA,SAAA,OAAA,yBAAA,EAAA,CAAA,KAAA,cAAA,EAAA,MAAA,aAAA,EAAA,CAAA,KAAA,aAAA,SAAA,cAAA,OAAA,SAAA,EAAA,OAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,IA5BvCE,EAAA,EAAA,UAAA,CAAA,EASEC,EAAA,EAAA,mBAAA,CAAA,EAKmB,EAAA,YAAA,CAAA,EASrBC,EAAA,SAtBEC,EAAA,wFAAA,EAGAC,EAAA,SAAAL,EAAA5B,MAAA,EAAiB,OAAAkC,EAAA,EAAAC,CAAA,CAAA,EACJ,0BAAAD,EAAA,EAAAE,CAAA,CAAA,EAMXC,EAAA,EAAAJ,EAAA,MAAAL,EAAA7B,GAAA,EAAW,cAAA6B,EAAAxB,WAAA,EASXiC,EAAA,EAAAJ,EAAA,QAAAC,EAAA,GAAAI,CAAA,CAAA,kBAMIC,EAAcC,EAAsBC,CAAc,EAAAC,OAAA,CAAA;kDAAA,CAAA,CAAA,CAAA,SAEjDjD,CAA8B,GAAA",
  "names": ["LiveUpdateImageSourceComponent", "constructor", "ngZone", "inject", "NgZone", "size", "url", "center", "data", "features", "geometry", "coordinates", "makeRectangle", "afterNextRender", "points", "map", "c", "i", "timer", "setInterval", "run", "Math", "random", "length", "ngOnDestroy", "undefined", "clearInterval", "long", "lat", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275elementStart", "\u0275\u0275element", "\u0275\u0275elementEnd", "\u0275\u0275styleMap", "\u0275\u0275property", "\u0275\u0275pureFunction0", "_c0", "_c1", "\u0275\u0275advance", "_c2", "MapComponent", "ImageSourceComponent", "LayerComponent", "styles"]
}
