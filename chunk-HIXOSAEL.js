import{a as M}from"./chunk-5MI6XPGH.js";import{i as z,n as _,o as b,u as k}from"./chunk-ACHBXKJ7.js";import{Cc as m,D as d,Ec as S,Mb as s,Nb as y,Ob as v,Pb as C,V as u,X as h,Y as g,bb as p,ia as l,sc as o,tb as f,v as c}from"./chunk-WAGYCGY3.js";var w=()=>[14],x=()=>({preserveDrawingBuffer:!0}),R=()=>({"raster-fade-duration":0}),E=(()=>{let n=class n{constructor(){this.httpClient=l(M),this.size=.001,this.hike$=this.httpClient.get("assets/data/hike.geo.json").pipe(c(e=>{let t=e.features[0].geometry.coordinates,i=t.map(a=>this.makeRectangle(a));return{points:t,coordinates:i}}),u({bufferSize:1,refCount:!0})),this.data$=this.hike$.pipe(g(e=>d(250).pipe(h(0),c(t=>{let i=(t+1)%e.coordinates.length,a=e.points[0],D=e.coordinates[i];return{index:i,center:a,coordinates:D}})))),this.dataSig=z(this.data$,{initialValue:{index:0,center:[0,0],coordinates:this.makeRectangle([0,0])}}),this.coordinates=m(()=>this.dataSig().coordinates),this.center=m(()=>this.dataSig().center),this.url=S({source:this.dataSig,computation:()=>Math.random()<.5?"assets/red.png":"assets/blue.png"})}makeRectangle([e,t]){return[[e,t],[e+this.size,t],[e+this.size,t-this.size],[e,t-this.size]]}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f({type:n,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[["movingMethod","jumpTo",3,"mapStyle","center","zoom","canvasContextAttributes"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(t,i){t&1&&(y(0,"mgl-map",0),C(1,"mgl-image-source",1)(2,"mgl-layer",2),v()),t&2&&(s("mapStyle","https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")("center",i.center())("zoom",o(7,w))("canvasContextAttributes",o(8,x)),p(),s("url",i.url())("coordinates",i.coordinates()),p(),s("paint",o(9,R)))},dependencies:[b,k,_],styles:[`[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}
/*# sourceMappingURL=examples-UPBTEGPO.css.map */`],changeDetection:0});let r=n;return r})();export{E as LiveUpdateImageSourceComponent};
//# sourceMappingURL=chunk-HIXOSAEL.js.map
