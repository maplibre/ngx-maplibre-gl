import{a as ye}from"./chunk-QHWZOB7J.js";import{a as F}from"./chunk-X3LTNE3D.js";import{E as be}from"./chunk-VVZD3TXR.js";import{Cb as j,Fa as ce,Ib as me,K as Y,Mb as P,Nb as D,Ob as M,Pb as pe,Q as w,T as E,W as X,Wa as m,Xa as d,Xb as x,Z,_ as ee,aa as re,bc as ue,ca as te,db as se,ha as T,hb as ae,ia as I,ic as he,ja as ie,l as J,lb as k,m as S,mb as f,mc as A,nb as _,ob as C,pb as le,r as N,rb as de,sa as z,ta as ne,wc as ge,x as v,xb as p,ya as oe,yb as g,yc as fe,zb as y,zc as _e}from"./chunk-VVIG2JUZ.js";import{a as h,b as Q,f as $}from"./chunk-SFFPZX3Y.js";var $e="https://stackblitz.com",ve=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],Ne=["project","search","ports","settings"],ze=["light","dark"],Le=["editor","preview"],we={clickToLoad:e=>b("ctl",e),devToolsHeight:e=>Ee("devtoolsheight",e),forceEmbedLayout:e=>b("embed",e),hideDevTools:e=>b("hidedevtools",e),hideExplorer:e=>b("hideExplorer",e),hideNavigation:e=>b("hideNavigation",e),openFile:e=>Se("file",e),showSidebar:e=>Ue("showSidebar",e),sidebarView:e=>L("sidebarView",e,Ne),startScript:e=>Se("startScript",e),terminalHeight:e=>Ee("terminalHeight",e),theme:e=>L("theme",e,ze),view:e=>L("view",e,Le),zenMode:e=>b("zenMode",e)};function Te(e={}){let r=Object.entries(e).map(([i,t])=>t!=null&&we.hasOwnProperty(i)?we[i](t):"").filter(Boolean);return r.length?`?${r.join("&")}`:""}function b(e,r){return r===!0?`${e}=1`:""}function Ue(e,r){return typeof r=="boolean"?`${e}=${r?"1":"0"}`:""}function Ee(e,r){if(typeof r=="number"&&!Number.isNaN(r)){let i=Math.min(100,Math.max(0,r));return`${e}=${encodeURIComponent(Math.round(i))}`}return""}function L(e,r="",i=[]){return i.includes(r)?`${e}=${encodeURIComponent(r)}`:""}function Se(e,r){return(Array.isArray(r)?r:[r]).filter(t=>typeof t=="string"&&t.trim()!=="").map(t=>`${e}=${encodeURIComponent(t)}`).join("&")}function Ie(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function q(e,r){return`${ke(r)}${e}${Te(r)}`}function B(e,r){let i={forceEmbedLayout:!0};return r&&typeof r=="object"&&Object.assign(i,r),`${ke(i)}${e}${Te(i)}`}function ke(e={}){return(typeof e.origin=="string"?e.origin:$e).replace(/\/$/,"")}function V(e,r,i){if(!r||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(r.id=e.id),e.className&&(r.className=e.className),We(r,i),e.replaceWith(r)}function K(e){if(typeof e=="string"){let r=document.getElementById(e);if(!r)throw new Error(`Could not find element with id '${e}'`);return r}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function G(e){return e&&e.newWindow===!1?"_self":"_blank"}function We(e,r={}){let i=Object.hasOwnProperty.call(r,"height")?`${r.height}`:"300",t=Object.hasOwnProperty.call(r,"width")?`${r.width}`:void 0;e.setAttribute("height",i),t?e.setAttribute("width",t):e.setAttribute("style","width:100%;")}var U=class{constructor(r){this.pending={},this.port=r,this.port.onmessage=this.messageListener.bind(this)}request({type:r,payload:i}){return new Promise((t,n)=>{let o=Ie();this.pending[o]={resolve:t,reject:n},this.port.postMessage({type:r,payload:Q(h({},i),{__reqid:o})})})}messageListener(r){if(typeof r.data.payload?.__reqid!="string")return;let{type:i,payload:t}=r.data,{__reqid:n,__success:o,__error:c}=t;this.pending[n]&&(o?this.pending[n].resolve(this.cleanResult(t)):this.pending[n].reject(c?`${i}: ${c}`:i),delete this.pending[n])}cleanResult(r){let i=h({},r);return delete i.__reqid,delete i.__success,delete i.__error,Object.keys(i).length?i:null}},W=class{constructor(r,i){this.editor={openFile:t=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:t}}),setCurrentFile:t=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:t}}),setTheme:t=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:t}}),setView:t=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:t}}),showSidebar:(t=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:t}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(t=>t?.url??null),setUrl:(t="/")=>{if(typeof t!="string"||!t.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${t}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:t}})}},this._rdc=new U(r),Object.defineProperty(this.preview,"origin",{value:typeof i.previewOrigin=="string"?i.previewOrigin:null,writable:!1})}applyFsDiff(r){let i=t=>t!==null&&typeof t=="object";if(!i(r)||!i(r.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(r.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:r})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},O=[],H=class{constructor(r){this.id=Ie(),this.element=r,this.pending=new Promise((i,t)=>{let n=({data:a,ports:l})=>{a?.action==="SDK_INIT_SUCCESS"&&a.id===this.id&&(this.vm=new W(l[0],a.payload),i(this.vm),c())},o=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function c(){window.clearInterval(u),window.removeEventListener("message",n)}window.addEventListener("message",n),o();let s=0,u=window.setInterval(()=>{if(this.vm){c();return}if(s>=20){c(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),O.forEach((a,l)=>{a.id===this.id&&O.splice(l,1)});return}s++,o()},500)}),O.push(this)}},He=e=>{let r=e instanceof Element?"element":"id";return O.find(i=>i[r]===e)??null};function qe(e,r){let i=document.createElement("input");return i.type="hidden",i.name=e,i.value=r,i}function Be(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function Ce({template:e,title:r,description:i,dependencies:t,files:n,settings:o}){if(!ve.includes(e)){let a=ve.map(l=>`'${l}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${a}`)}let c=[],s=(a,l,Re="")=>{c.push(qe(a,typeof l=="string"?l:Re))};s("project[title]",r),typeof i=="string"&&i.length>0&&s("project[description]",i),s("project[template]",e,"javascript"),t&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):s("project[dependencies]",JSON.stringify(t))),o&&s("project[settings]",JSON.stringify(o)),Object.entries(n).forEach(([a,l])=>{s(`project[files][${Be(a)}]`,l)});let u=document.createElement("form");return u.method="POST",u.setAttribute("style","display:none!important;"),u.append(...c),u}function Ve(e,r){let i=Ce(e);return i.action=B("/run",r),i.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${i.outerHTML}
  <script>document.getElementById('${i.id}').submit();<\/script>
</body>
</html>`}function Ke(e,r){let i=Ce(e);i.action=q("/run",r),i.target=G(r),document.body.appendChild(i),i.submit(),document.body.removeChild(i)}function R(e){return e?.contentWindow?(He(e)??new H(e)).pending:Promise.reject("Provided element is not an iframe.")}function Ge(e,r){Ke(e,r)}function Qe(e,r){let i=q(`/edit/${e}`,r),t=G(r);window.open(i,t)}function Je(e,r){let i=q(`/github/${e}`,r),t=G(r);window.open(i,t)}function Ye(e,r,i){let t=K(e),n=Ve(r,i),o=document.createElement("iframe");return V(t,o,i),o.contentDocument?.write(n),R(o)}function Xe(e,r,i){let t=K(e),n=document.createElement("iframe");return n.src=B(`/edit/${r}`,i),V(t,n,i),R(n)}function Ze(e,r,i){let t=K(e),n=document.createElement("iframe");return n.src=B(`/github/${r}`,i),V(t,n,i),R(n)}var je={connect:R,embedGithubProject:Ze,embedProject:Ye,embedProjectId:Xe,openGithubProject:Je,openProject:Ge,openProjectId:Qe};function er(e){return e.replace(/(^\w|-\w)/g,rr)}function rr(e){return e.replace(/-/,"").toUpperCase()}function Pe(e,r,i){return{files:h({"src/main.ts":e[0].replace(/###/g,er(i)+"Component"),"angular.json":e[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":`
html, body {
  display: flex;
  flex: 1;
  min-height: 100vh;
  margin: 0;
}
`,"src/polyfills.ts":`
import 'zone.js';
(window as any).global = window;
`},r),title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/maplibre-gl-style-spec":"*","@maplibre/ngx-maplibre-gl":"*","@angular/animations":"^17","@angular/common":"^17","@angular/compiler":"^17","@angular/core":"^17","@angular/forms":"^17","@angular/platform-browser":"^17","@angular/router":"^17",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}var tr=["determinateSpinner"];function ir(e,r){if(e&1&&(z(),p(0,"svg",11),y(1,"circle",12),g()),e&2){let i=me();f("viewBox",i._viewBox()),m(),C("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeCircumference()/2,"px")("stroke-width",i._circleStrokeWidth(),"%"),f("r",i._circleRadius())}}var nr=new re("mat-progress-spinner-default-options",{providedIn:"root",factory:or});function or(){return{diameter:Me}}var Me=100,cr=10,xe=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(t){this._color=t}constructor(t,n,o){this._elementRef=t,this._defaultColor="primary",this._value=0,this._diameter=Me,this._noopAnimations=n==="NoopAnimations"&&!!o&&!o._forceAnimations,this.mode=t.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",o&&(o.color&&(this.color=this._defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_circleRadius(){return(this.diameter-cr)/2}_viewBox(){let t=this._circleRadius()*2+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}};r.\u0275fac=function(n){return new(n||r)(d(oe),d(ce,8),d(nr))},r.\u0275cmp=I({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,o){if(n&1&&P(tr,5),n&2){let c;D(c=M())&&(o._determinateCircle=c.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,o){n&2&&(f("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",o.mode==="determinate"?o.value:null)("mode",o.mode),de("mat-"+o.color),C("width",o.diameter,"px")("height",o.diameter,"px")("--mdc-circular-progress-size",o.diameter+"px")("--mdc-circular-progress-active-indicator-width",o.diameter+"px"),le("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate",o.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[T.HasDecoratorInputTransform,"value","value",A],diameter:[T.HasDecoratorInputTransform,"diameter","diameter",A],strokeWidth:[T.HasDecoratorInputTransform,"strokeWidth","strokeWidth",A]},exportAs:["matProgressSpinner"],standalone:!0,features:[ae,x],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,o){if(n&1&&(k(0,ir,2,8,"ng-template",null,0,ue),p(2,"div",2,1),z(),p(4,"svg",3),y(5,"circle",4),g()(),ne(),p(6,"div",5)(7,"div",6)(8,"div",7),j(9,8),g(),p(10,"div",9),j(11,8),g(),p(12,"div",10),j(13,8),g()()()),n&2){let c=pe(1);m(4),f("viewBox",o._viewBox()),m(),C("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),f("r",o._circleRadius()),m(4),_("ngTemplateOutlet",c),m(2),_("ngTemplateOutlet",c),m(2),_("ngTemplateOutlet",c)}},dependencies:[fe],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0});let e=r;return e})();var Ae=(()=>{let r=class r{};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=ie({type:r}),r.\u0275inj=ee({imports:[_e,be]});let e=r;return e})();var Fe="app/demo/examples/",Oe=(()=>{let r=class r{constructor(t){this.http=t,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(t){let n=this.fileCache.get(t);return n||(n=this.http.get(`${Fe}${t}.component.ts`,{responseType:"text"}).pipe(E(o=>this.loadAdditionnalFilesIfNecessary(o)),w(1)),this.fileCache.set(t,n),n)}loadAdditionnalFilesIfNecessary(t){let n=/'\.\/([\w-.]+\.\w+)'/g,o,c=[],s={"src/demo.ts":t};for(;o=n.exec(t);)c.push(this.loadFile(o[1]));return c.length?v(c).pipe(N(u=>h(h({},Object.assign({},...u)),s))):S(s)}loadFile(t){let n=this.fileCache.get(t);return n||(n=this.http.get(`${Fe}${t}`,{responseType:"text"}).pipe(N(o=>({[`src/${t}`]:o})),w(1)),this.fileCache.set(t,n),n)}};r.\u0275fac=function(n){return new(n||r)(te(F))},r.\u0275prov=Z({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();var dr=["container"];function mr(e,r){e&1&&(p(0,"div",2),y(1,"mat-spinner")(2,"div"),g())}var $r=(()=>{let r=class r{constructor(t,n,o,c,s){this.zone=t,this.activatedRoute=n,this.demoFileLoaderService=o,this.http=c,this.changeDetectorRef=s,this.loading=!0,this.projectbase$=v([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe(w(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe(X(()=>{this.loading=!0,this.changeDetectorRef.markForCheck()}),E(t=>v([this.projectbase$,this.demoFileLoaderService.getDemoFiles(t.demoUrl),S(t.demoUrl)])),E(([t,n,o])=>J(this.openExample(t,n,o)).pipe(Y(()=>{this.loading=!1,this.changeDetectorRef.markForCheck()})))).subscribe()}openExample(t,n,o){return $(this,null,function*(){if(this.vm){yield this.vm.applyFsDiff({create:n,destroy:[]});return}let c=Pe(t,n,o);yield this.zone.runOutsideAngular(()=>$(this,null,function*(){this.vm=yield je.embedProject(this.stackblitzContainer.nativeElement,c,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})}};r.\u0275fac=function(n){return new(n||r)(d(se),d(ye),d(Oe),d(F),d(he))},r.\u0275cmp=I({type:r,selectors:[["ng-component"]],viewQuery:function(n,o){if(n&1&&P(dr,5),n&2){let c;D(c=M())&&(o.stackblitzContainer=c.first)}},standalone:!0,features:[x],decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(n,o){n&1&&(y(0,"div",null,0),k(2,mr,3,0,"div",1)),n&2&&(m(2),_("ngIf",o.loading))},dependencies:[ge,Ae,xe],styles:[`[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}
/*# sourceMappingURL=stackblitz-edit.component-3DMTXAYM.css.map */`],changeDetection:0});let e=r;return e})();export{$r as StackblitzEditComponent};
//# sourceMappingURL=chunk-NYJ7HALW.js.map
