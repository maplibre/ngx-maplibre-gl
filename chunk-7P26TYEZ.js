import{a as z}from"./chunk-BUCRRE3N.js";import{i as M,n as _,o as k,u as w}from"./chunk-GIP4QCRU.js";import{D as d,Hb as s,Ib as y,Jb as C,Kb as v,V as u,X as h,Y as l,ab as p,ha as g,jc as o,lb as f,tc as m,v as c,vc as S}from"./chunk-ESV3RZT2.js";var D=()=>[14],R=()=>({preserveDrawingBuffer:!0}),b=()=>({"raster-fade-duration":0}),U=(()=>{let n=class n{constructor(){this.httpClient=g(z),this.size=.001,this.hike$=this.httpClient.get("assets/data/hike.geo.json").pipe(c(e=>{let t=e.features[0].geometry.coordinates,i=t.map(a=>this.makeRectangle(a));return{points:t,coordinates:i}}),u({bufferSize:1,refCount:!0})),this.data$=this.hike$.pipe(l(e=>d(250).pipe(h(0),c(t=>{let i=(t+1)%e.coordinates.length,a=e.points[0],x=e.coordinates[i];return{index:i,center:a,coordinates:x}})))),this.dataSig=M(this.data$,{initialValue:{index:0,center:[0,0],coordinates:this.makeRectangle([0,0])}}),this.coordinates=m(()=>this.dataSig().coordinates),this.center=m(()=>this.dataSig().center),this.url=S({source:this.dataSig,computation:()=>Math.random()<.5?"assets/red.png":"assets/blue.png"})}makeRectangle([e,t]){return[[e,t],[e+this.size,t],[e+this.size,t-this.size],[e,t-this.size]]}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f({type:n,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[["movingMethod","jumpTo",3,"mapStyle","center","zoom","canvasContextAttributes"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(t,i){t&1&&(y(0,"mgl-map",0),v(1,"mgl-image-source",1)(2,"mgl-layer",2),C()),t&2&&(s("mapStyle","https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")("center",i.center())("zoom",o(7,D))("canvasContextAttributes",o(8,R)),p(),s("url",i.url())("coordinates",i.coordinates()),p(),s("paint",o(9,b)))},dependencies:[k,w,_],styles:[`[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}
/*# sourceMappingURL=examples-UPBTEGPO.css.map */`],changeDetection:0});let r=n;return r})();export{U as LiveUpdateImageSourceComponent};
//# sourceMappingURL=chunk-7P26TYEZ.js.map
