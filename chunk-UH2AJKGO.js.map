{
  "version": 3,
  "sources": ["projects/showcase/src/app/demo/examples/live-update-feature.component.ts"],
  "sourcesContent": ["import { Component, computed, inject } from '@angular/core';\nimport {\n  MapComponent,\n  GeoJSONSourceComponent,\n  LayerComponent,\n} from '@maplibre/ngx-maplibre-gl';\nimport { interval, map, shareReplay, startWith, switchMap, take, } from 'rxjs';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'showcase-demo',\n  template: `\n    <mgl-map\n      [mapStyle]=\"\n        'https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL'\n      \"\n      [zoom]=\"[14]\"\n      [center]=\"center() ?? [0, 0]\"\n      [centerWithPanTo]=\"true\"\n      [pitch]=\"30\"\n      movingMethod=\"jumpTo\"\n      [canvasContextAttributes]=\"{preserveDrawingBuffer: true}\"\n    >\n      @if (data(); as dataValue) {\n        <mgl-geojson-source id=\"trace\" [data]=\"dataValue\"/> \n        <mgl-layer\n          id=\"trace\"\n          type=\"line\"\n          source=\"trace\"\n          [paint]=\"{\n            'line-color': 'yellow',\n            'line-opacity': 0.75,\n            'line-width': 5,\n          }\"\n        >\n        </mgl-layer>\n      }\n    </mgl-map>\n  `,\n  styleUrls: ['./examples.css'],\n  imports: [MapComponent, GeoJSONSourceComponent, LayerComponent],\n})\nexport class LiveUpdateFeatureComponent {\n  private readonly httpClient = inject(HttpClient);\n\n  private readonly geoJson$ = this.httpClient.get<GeoJSON.FeatureCollection<GeoJSON.LineString>>('assets/data/hike.geo.json').pipe(\n    map(geoJson => {\n      const data = structuredClone(geoJson);\n      const coordinates = data.features[0].geometry.coordinates;\n      data.features[0].geometry.coordinates = [coordinates[0]];\n      return { data, coordinates };\n    }),\n    shareReplay({ bufferSize: 1, refCount: true })\n  );\n\n  readonly updatedGeoJson$ = this.geoJson$.pipe(\n    switchMap(({ data, coordinates }) => {\n      return interval(200).pipe(\n        startWith(0),\n        map(i => coordinates[i]),\n        map(pt => {\n          data.features[0].geometry.coordinates.push(pt);\n          return { center: pt, data: structuredClone(data) };\n        }),\n        take(coordinates.length),\n      );\n    }),\n  );\n\n  readonly updatedGeoJson = toSignal(this.updatedGeoJson$, { initialValue: null });\n  readonly center = computed(() => this.updatedGeoJson()?.center ?? null);\n  readonly data = computed(() => this.updatedGeoJson()?.data ?? null);\n}\n"],
  "mappings": "6ZAyBQA,EAAA,EAAA,qBAAA,CAAA,EAAmD,EAAA,YAAA,CAAA,QAApBC,EAAA,OAAAC,CAAA,EAK7BC,EAAA,EAAAF,EAAA,QAAAG,EAAA,EAAAC,CAAA,CAAA,GAaV,IAAaC,GAA0B,IAAA,CAAjC,IAAOA,EAAP,MAAOA,CAA0B,CAjCvCC,aAAA,CAkCmB,KAAAC,WAAaC,EAAOC,CAAU,EAE9B,KAAAC,SAAW,KAAKH,WAAWI,IAAmD,2BAA2B,EAAEC,KAC1HC,EAAIC,GAAU,CACZ,IAAMC,EAAOC,gBAAgBF,CAAO,EAC9BG,EAAcF,EAAKG,SAAS,CAAC,EAAEC,SAASF,YAC9CF,OAAAA,EAAKG,SAAS,CAAC,EAAEC,SAASF,YAAc,CAACA,EAAY,CAAC,CAAC,EAChD,CAAEF,KAAAA,EAAME,YAAAA,CAAW,CAC5B,CAAC,EACDG,EAAY,CAAEC,WAAY,EAAGC,SAAU,EAAI,CAAE,CAAC,EAGvC,KAAAC,gBAAkB,KAAKb,SAASE,KACvCY,EAAU,CAAC,CAAET,KAAAA,EAAME,YAAAA,CAAW,IACrBQ,EAAS,GAAG,EAAEb,KACnBc,EAAU,CAAC,EACXb,EAAIc,GAAKV,EAAYU,CAAC,CAAC,EACvBd,EAAIe,IACFb,EAAKG,SAAS,CAAC,EAAEC,SAASF,YAAYY,KAAKD,CAAE,EACtC,CAAEE,OAAQF,EAAIb,KAAMC,gBAAgBD,CAAI,CAAC,EACjD,EACDgB,EAAKd,EAAYe,MAAM,CAAC,CAE3B,CAAC,EAGK,KAAAC,eAAiBC,EAAS,KAAKX,gBAAiB,CAAEY,aAAc,IAAI,CAAE,EACtE,KAAAL,OAASM,EAAS,IAAM,KAAKH,eAAc,GAAIH,QAAU,IAAI,EAC7D,KAAAf,KAAOqB,EAAS,IAAM,KAAKH,eAAc,GAAIlB,MAAQ,IAAI,0CA7BvDV,EAA0B,sBAA1BA,EAA0BgC,UAAA,CAAA,CAAA,eAAA,CAAA,EAAAC,MAAA,EAAAC,KAAA,GAAAC,OAAA,CAAA,CAAA,eAAA,SAAA,EAAA,WAAA,OAAA,SAAA,kBAAA,QAAA,yBAAA,EAAA,CAAA,KAAA,QAAA,EAAA,MAAA,EAAA,CAAA,KAAA,QAAA,OAAA,OAAA,SAAA,QAAA,EAAA,OAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAzC,EAAA,IAAAyC,EAAA,IA9BnCC,EAAA,EAAA,UAAA,CAAA,EAWEC,EAAA,EAAAC,EAAA,EAAA,CAAA,EAcFC,EAAA,cAxBE9C,EAAA,WAAA,wFAAA,EAEC,OAAAG,EAAA,EAAA4C,CAAA,CAAA,EACY,SAAA9C,EAAA6B,OAAA,GAAA3B,EAAA,EAAA6C,CAAA,CAAA,EACgB,kBAAA,EAAA,EACL,QAAA,EAAA,EACZ,0BAAA7C,EAAA,EAAA8C,CAAA,CAAA,EAIZ/C,EAAA,EAAAgD,GAAAC,EAAAlD,EAAAc,KAAA,GAAA,EAAA,GAAAoC,CAAA,kBAiBMC,EAAcC,EAAwBC,CAAc,EAAAC,OAAA,CAAA;kDAAA,CAAA,CAAA,EAE1D,IAAOlD,EAAPmD,SAAOnD,CAA0B,GAAA",
  "names": ["\u0275\u0275element", "\u0275\u0275property", "ctx", "\u0275\u0275advance", "\u0275\u0275pureFunction0", "_c3", "LiveUpdateFeatureComponent", "constructor", "httpClient", "inject", "HttpClient", "geoJson$", "get", "pipe", "map", "geoJson", "data", "structuredClone", "coordinates", "features", "geometry", "shareReplay", "bufferSize", "refCount", "updatedGeoJson$", "switchMap", "interval", "startWith", "i", "pt", "push", "center", "take", "length", "updatedGeoJson", "toSignal", "initialValue", "computed", "selectors", "decls", "vars", "consts", "template", "rf", "\u0275\u0275elementStart", "\u0275\u0275conditionalCreate", "LiveUpdateFeatureComponent_Conditional_1_Template", "\u0275\u0275elementEnd", "_c0", "_c1", "_c2", "\u0275\u0275conditional", "tmp_6_0", "MapComponent", "GeoJSONSourceComponent", "LayerComponent", "styles", "_LiveUpdateFeatureComponent"]
}
